webpackJsonp([14,38],{132:function(t,s,a){t.exports={default:a(175),__esModule:!0}},175:function(t,s,a){var e=a(55),o=e.JSON||(e.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},386:function(t,s,a){s=t.exports=a(4)(),s.push([t.id,"div{margin:0}.col-lg-3,div{padding:0}","",{version:3,sources:["/./src/components/test/websocket.vue"],names:[],mappings:"AACA,IACI,QAAU,CAEb,AACD,cAFI,SAAW,CAId",file:"websocket.vue",sourcesContent:["\ndiv{\n    margin: 0;\n    padding: 0;\n}\n.col-lg-3{\n    padding: 0;\n}\n"],sourceRoot:"webpack://"}])},440:function(t,s,a){var e=a(386);"string"==typeof e&&(e=[[t.id,e,""]]);a(5)(e,{});e.locals&&(t.exports=e.locals)},547:function(t,s,a){a(440);var e=a(3)(a(1150),a(602),null,null);t.exports=e.exports},602:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.socket_init}},[t._v("连接socket")]),t._v(" "),a("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.disconnect}},[t._v("断开socket")]),t._v(" "),a("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.check_status}},[t._v("开始计时")]),t._v(" "),a("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.stop_check_status}},[t._v("停止计时")]),t._v(" "),a("span",{staticStyle:{"margin-left":"20px"}}),t._v(" "),t.me?a("div",{staticStyle:{display:"inline-block"}},[a("button",{staticClass:"btn btn-default",attrs:{type:"button",id:"me_id"}},[t._v(t._s(t.me.me_id))]),t._v(" "),a("button",{staticClass:"btn btn-default",attrs:{type:"button",id:"me_nickname"}},[t._v(t._s(t.me.me_nickname))]),t._v(" "),a("div",{staticStyle:{display:"inline-block","margin-top":"-2px"}},[t.me.me_status?a("span",{staticClass:"glyphicon glyphicon-ok-circle btn btn-default",staticStyle:{color:"green"}}):a("span",{staticClass:"glyphicon glyphicon-remove-circle btn btn-default",staticStyle:{color:"red"}})])]):t._e(),t._v(" "),t.show_process?a("div",{staticClass:"progress"},[a("div",{staticClass:"progress-bar progress-bar-success progress-bar-striped",staticStyle:{float:"right"},style:{width:t.process+"%"},attrs:{role:"progressbar","aria-valuenow":t.process,"aria-valuemin":"0","aria-valuemax":"100"}},[t._v("\n            "+t._s(t.process/10)+"\n        ")])]):t._e(),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"col-lg-1",staticStyle:{padding:"0"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-addon"},[t._v("TO")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.to,expression:"to"}],staticClass:"form-control col-sm-3",attrs:{type:"text"},domProps:{value:t.to},on:{input:function(s){s.target.composing||(t.to=s.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"col-lg-3",staticStyle:{padding:"0"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-addon"},[t._v("module")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.module,expression:"module"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.module},on:{input:function(s){s.target.composing||(t.module=s.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-lg-3",staticStyle:{padding:"0"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-addon"},[t._v("controller")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.controller,expression:"controller"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.controller},on:{input:function(s){s.target.composing||(t.controller=s.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-lg-3",staticStyle:{padding:"0"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-addon"},[t._v("action")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.action,expression:"action"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.action},on:{input:function(s){s.target.composing||(t.action=s.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"col-lg-3",staticStyle:{padding:"0"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-addon"},[t._v("payload_type")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.payload_type,expression:"payload_type"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.payload_type},on:{input:function(s){s.target.composing||(t.payload_type=s.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-lg-3",staticStyle:{padding:"0"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-addon"},[t._v("payload_data")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.payload_data,expression:"payload_data"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.payload_data},on:{input:function(s){s.target.composing||(t.payload_data=s.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"col-lg-6",staticStyle:{padding:"0"}},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.cmd,expression:"cmd"}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.cmd},on:{input:function(s){s.target.composing||(t.cmd=s.target.value)}}}),t._v(" "),a("span",{staticClass:"input-group-btn"},[a("button",{staticClass:"btn btn-default",staticStyle:{width:"200px"},attrs:{type:"button"},on:{click:t.send}},[t._v("Go!")])])])])]),t._v(" "),a("hr",{staticStyle:{padding:"20px"}}),t._v(" "),a("form",{staticStyle:{padding:"15px"},attrs:{role:"form"}},[a("div",{staticStyle:{position:"absolute",left:"0"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.payload,expression:"payload"}],staticClass:"form-control",staticStyle:{height:"250px",width:"800px"},domProps:{value:t.payload},on:{input:function(s){s.target.composing||(t.payload=s.target.value)}}}),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.response,expression:"response"}],staticClass:"form-control",staticStyle:{height:"250px",width:"800px"},attrs:{rows:"2",cols:"4",id:"response"},domProps:{value:t.response},on:{input:function(s){s.target.composing||(t.response=s.target.value)}}})]),t._v(" "),a("div",{staticStyle:{position:"absolute",left:"820px"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.user_list,expression:"user_list"}],staticClass:"form-control",staticStyle:{height:"500px",width:"400px"},attrs:{id:"user_list"},domProps:{value:t.user_list},on:{input:function(s){s.target.composing||(t.user_list=s.target.value)}}})])])])},staticRenderFns:[]}},1091:function(t,s,a){(function(t){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(s,"__esModule",{value:!0});var o=a(132),n=e(o),i={data:{wSock:null,to:"",message:null,payload:null,wsserver:"ws://192.168.1.5:9501",response:"",this_vue:null},init:function(){this.copyright(),i.data.storage=window.localStorage,this.data.wSock?console.log("已经是连接状态"):this.ws()},ws:function(){this.data.wSock=new WebSocket(this.data.wsserver),this.wsOpen(),this.wsMessage(),this.wsOnclose(),this.wsOnerror()},wsSend:function(){console.log("send=>"),console.log((0,n.default)(this.data.payload));this.data.wSock.send((0,n.default)(this.data.payload))},wsClose:function(){console.log("尝试关闭"),this.data.wSock.close()},wsOpen:function(){var t=this;this.data.wSock.onopen=function(s){t.data.this_vue.check_status(),i.rebind("wsopen",s)}},wsMessage:function(){this.data.wSock.onmessage=function(s){var a=t.parseJSON(s.data);console.log("[c]message=>"),console.log(a),a=JSON.parse(a.data),console.log(a),console.log((0,n.default)(a.response))}},wsOnclose:function(){var t=this;this.data.wSock.onclose=function(s){console.log("[c]close=>"),console.log(s),"close"===s.type&&(t.data.wSock=null),t.data.wSock?console.log("关闭失败"):(t.data.this_vue.stop_check_status(),t.data.this_vue.process=100,t.data.this_vue.me=null,console.log("关闭成功"))}},wsOnerror:function(){this.data.wSock.onerror=function(t){console.log("[c]error=>"),console.log(t)}},rebind:function(t,s){console.log("----"+t+" start-------"),console.log(s),console.log("----"+t+" end-------")},copyright:function(){console.log("truesign ico pre connect to socket server ……")}};s.default=i}).call(s,a(10))},1150:function(t,s,a){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(s,"__esModule",{value:!0});var o=a(1091),n=e(o);n.default.data.this_vue=void 0,s.default={mounted:function(){},data:function(){return{msg:"",socket:"",cmd:"cmd",to:"",payload_type:"search",payload_data:"{id:3}",response_data:"response_data",module:"index",controller:"index",action:"index",payload:null,response:null,user_list:null,me:null,process:100,show_process:!1,init_check:null}},computed:{},methods:{check_status:function(){var t=this;this.int_check=setInterval(function(){t.process-=10,t.process<=0&&(t.process=100,n.default.data.wSock||(t.me.me_status=!1))},1e3)},stop_check_status:function(){window.clearInterval(this.int_check)},socket_init:function(){n.default.data.this_vue=this,n.default.init()},disconnect:function(){n.default.data.this_vue=this,n.default.wsClose()},reconnect:function(){},send:function(){this.payload={to:parseInt(this.to),payload_type:this.payload_type,payload_data:this.payload_data,yaf:{module:this.module,controller:this.controller,action:this.action}},this.payload.cmd=this.cmd,n.default.data.payload=this.payload,n.default.data.this_vue=this;n.default.wsSend()}}}}});
//# sourceMappingURL=14.c5dfd2fa46910c96a185.js.map