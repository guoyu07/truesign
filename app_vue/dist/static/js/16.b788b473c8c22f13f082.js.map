{"version":3,"sources":["webpack:///static/js/16.b788b473c8c22f13f082.js","webpack:///../~/.2.1.23@wangeditor/dist/css/wangEditor.css?806a**","webpack:///./src/components/tools/wangeditor.vue?7670**","webpack:///../~/.2.1.23@wangeditor/dist/css/wangEditor.css?6dde*","webpack:///../~/.2.1.23@wangeditor/dist/fonts/icomoon.eot?3af9*","webpack:///../~/.2.1.23@wangeditor/dist/fonts/icomoon.eot?a370**","webpack:///../~/.2.1.23@wangeditor/dist/fonts/icomoon.ttf?6e0d*","webpack:///../~/.2.1.23@wangeditor/dist/fonts/icomoon.woff?c65b*","webpack:///../~/.2.1.23@wangeditor/dist/fonts/icomoon.svg?a1fe*","webpack:///./src/components/tools/wangeditor.vue?000f**","webpack:///./src/components/tools/wangeditor.vue?7114**","webpack:///./src/components/tools/wangeditor.vue?42a3**","webpack:///./src/components/tools/wangeditor.vue","webpack:///../~/.1.0.19@qiniu-js/dist/qiniu.js?aaa8*","webpack:///../~/.2.1.23@wangeditor/dist/js/wangEditor.js?4297*"],"names":["webpackJsonp","82","module","exports","__webpack_require__","content","id","locals","154","push","version","sources","names","mappings","file","sourcesContent","sourceRoot","156","157","p","158","159","160","161","162","165","Component","167","render","_vm","this","_h","$createElement","_c","_self","style","width","editorShow_width","backgroundColor","editorShow_color","height","editorShow_height","attrs","staticRenderFns","195","$","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_wangeditor","_qiniu","_qiniu2","data","editor","updateImageParam","uri","param","type","request_uri","status","sys_msg","alioss_param","AccessKeyId","AccessKeySecret","region","bucket","props","String","required","computed","mounted","wangEditor","initEditorConfig","createEditor","css","methods","vm","config","withCredentials","uploadImgUrl","uploadParams","uploadImgFileName","menus","uploadImgFns","onload","resultText","xhr","uploadOnLoad","onchange","editorchange","create","uploadInit","console","log","customUploadBtnId","customUploadContainerId","uploader","JSON","parse","file_path","originalName","uploadImgOriginalName","command","editor_content","text","$txt","html","$root","eventHub","$emit","formatContent","outputContent","components","call","196","global","createCookie","key","exp","date","Date","setTime","getTime","expires","toGMTString","document","cookie","readCookie","nameEQ","ca","split","i","max","length","c","charAt","substring","indexOf","QiniuJsSDK","args","header","msg","that","stringifyJSON","detectIEVersion","unshift","apply","getElementById","innerHTML","makeLogFunc","code","func","toLowerCase","logger","window","level","Array","prototype","slice","arguments","v","div","createElement","all","getElementsByTagName","MUTE","FATA","ERROR","WARN","INFO","DEBUG","TRACE","property","hasOwnProperty","qiniuUploadUrl","location","protocol","qiniuUploadUrls","qiniuUpHosts","http","https","changeUrlTimes","resetUploadUrl","hosts","debug","isImage","url","test","getFileExtension","filename","ext","tempArr","pop","utf8_encode","argString","start","end","string","utftext","stringl","n","c1","charCodeAt","enc","fromCharCode","RangeError","c2","base64_decode","o1","o2","o3","h1","h2","h3","h4","bits","b64","ac","dec","tmp_arr","join","base64_encode","URLSafeBase64Encode","replace","URLSafeBase64Decode","createAjax","argument","xmlhttp","XMLHttpRequest","ActiveXObject","parseJSON","rx_dangerous","lastIndex","a","toString","eval","stringify","map","strArr","len","trim","op","reset_chunk_size","BLOCK_BITS","MAX_CHUNK_SIZE","chunk_size","ie","isSpecialSafari","mOxie","Env","browser","os","osVersion","runtimes","plupload","parseSize","getHosts","result","host","getPutPolicy","uptoken","segments","ak","putPolicy","scope","getUpHosts","uphosts_url","ajax","swf_url","flash_swf_url","open","onreadystatechange","readyState","res","responseText","up","error","bind","send","getUptoken","token","uptoken_url","tokenInfo","isExpired","getNewUpToken","setRequestHeader","tokenMap","getTimestamp","time","Math","ceil","serverTime","getResponseHeader","clientTime","serverDelay","deadline","leftTime","uptoken_func","getFileKey","unique_names","save_key","getOption","settings","name","log_level","domain","browse_button","navigator","userAgent","option","_Error_Handler","init","Error","_FileUploaded_Handler","FileUploaded","key_handler","Key","ctx","speedCalInfo","isResumeUpload","resumeFilesize","startTime","currentTime","defaultSetting","multipart_params","accept","extend","Uploader","params","get_new_uptoken","files","auto_start","is_ios","OS","setTimeout","refresh","speed","directUpload","multipart_params_obj","x_vars","undefined","x_key","setOption","multipart","is_android_weixin_or_qq","max_file_size","ua","match","runtime","size","localFileInfo","localStorage","getItem","blockSize","now","before","aDay","percent","total","loaded","offset","removeItem","required_features","headers","Authorization","trace","timeUsed","fileUploaded","toFixed","info","response","leftSize","setItem","retries","unknow_error_retry","QUEUED","stop","err","errTip","FAILED","FILE_SIZE_ERROR","FILE_EXTENSION_ERROR","HTTP_ERROR","message","errorObj","errorText","e","SECURITY_ERROR","GENERIC_ERROR","IO_ERROR","INIT_ERROR","destroy","details","last_step","downtoken_url","ajax_downtoken","res_downtoken","info_extended","trigger","fname","x_val","x_vars_url","responseHeaders","getAllResponseHeaders","getUrl","encodeURI","imageView2","mode","w","h","q","format","imageUrl","imageMogr2","auto_orient","thumbnail","strip","gravity","crop","quality","rotate","blur","watermark","image","font","fontsize","fill","dissolve","dx","dy","imageInfo","exif","get","pipeline","arr","errOp","isArray","fop","Qiniu","197","factory","define","amd","cmd","require","jQuery","fn","jquery","alert","_e","E","elem","$elem","nodeName","valueNodeName","$valueContainer","$prev","prev","$parent","parent","$body","$document","$window","getComputedStyle","w3cRange","createRange","hostname","websiteHost","isOnWebsite","docsite","plugin","_plugins","initDefaultConfig","addEditorContainer","addTxt","addMenuContainer","commandHooks","ready","readyFns","readyHeadler","fns","shift","updateValue","txt","val","getInitValue","currentValue","updateMenuStyle","each","k","menu","updateSelected","enableMenusExcept","menuIds","_disabled","disabled","disableMenusExcept","hideDropPanelAndModal","m","dropPanel","dropList","modal","hide","emptyFn","ieRange","currentRange","cr","_rangeData","collapseRange","range","opt","collapse","getRangeText","getRangeElem","dom","commonAncestorContainer","nodeType","parentNode","isRangeEmpty","startContainer","endContainer","startOffset","endOffset","saveSelection","_parentElem","selection","self","getSelection","getRangeAt","rangeCount","contains","restoreSelection","removeAllRanges","addRange","ex","restoreSelectionByElem","setRangeByElem","initSelection","$firstChild","children","first","txtElem","firstTextNode","firstChild","lastTextNode","lastChild","setStart","setEnd","textContent","parentElement","setEndPoint","select","insertHtml","targetElem","rangeElem","getLegalTags","after","commandName","commandValue","callback","commandFn","queryCommandSupported","execCommand","hooks","customCommand","commandForElem","elemOpt","selector","check","getSelfOrParentByName","hidePanelAndModal","undoRecord","insertEmptyP","wrapImgAndText","preventDefault","queryCommandValue","queryCommandState","_matchesSelectorForIE","$elems","matchesSelector","legalTags","webkitMatchesSelector","mozMatchesSelector","oMatchesSelector","_getRedoList","_redoList","_getUndoList","_undoList","_handle","redo","undo","undoList","redoList","currentVal","addMenus","renderMenus","renderMenuContainer","renderTxt","renderEditorContainer","eventMenus","eventMenuContainer","eventTxt","disable","removeAttr","enable","attr","$editorContainer","show","undestroy","$menuContainer","menuContainer","clear","find","MenuContainer","changeShadow","on","scrollTop","addClass","removeClass","append","appendMenu","groupIdx","_addGroup","_addOneMenu","$menuGroup","$currentGroup","currentGroupIdx","$menuNormal","$domNormal","$menuSelected","$domSelected","$item","Menu","title","commandNameSelected","commandValueSelected","initUI","uiConfig","UI","menuId","menuUI","warn","normal","selected","clone","$menuItem","onRender","_renderTip","$tip","$tempDiv","tipWidth","titleWidth","outerWidth","currentWidth","currentMarginLeft","parseFloat","remove","margin-left","timeoutId","active","clearTimeout","bindEvent","clickEvent","dropObj","isShowing","clickEventSelected","click","updateSelectedEvent","changeSelectedState","state","_activeState","activeStyle","$dom","DropList","tpl","selectorForELemCommand","beforeEvent","afterEvent","initDOM","initHideEvent","itemContent","$list","currentTarget","thisList","menuDom","target","scroll","_render","rendered","_position","$menuDom","menuPosition","offsetParent","position","menuTop","top","menuLeft","left","menuHeight","menuWidth","listWidth","txtWidth","marginLeft","valWithTxt","_isMenufixed","outerHeight","DropPanel","$content","$panel","$triangle","thisPanle","panelWidth","marginLeft2","focusFirstInput","$input","focus","placeholderForIE8","Modal","initDom","$modal","$close","zindex","marginTop","sTop","margin-top","Txt","contentEmptyHandle","bindEnterForDiv","bindEnterForText","bindTabEvent","bindPasteFilter","bindFormatText","bindHtml","$p","keyCode","txtHtml","divHandler","$keydownDivElem","$pElem","$targetElem","handle","childNodesClone","childNodes","index","item","legalTagArr","resultHtml","getResult","removeAttrs","htmlForP","htmlForLi","tag","$li","attributes","attrNames","exception","removeAttribute","pasteFilter","currentNodeName","pasteHtml","$paste","docSplitHtml","clipboardData","originalEvent","ieData","pasteText","getData","link","RegExp","clearEmptyOrNestP","regArr","reg","formatText","$temp","matchStr","b","change","txtChangeEventNames","initHeight","valueContainerHeight","txtHeight","initMaxHeight","$wrap","maxHeight","parseInt","isNaN","fullscreen","useMaxHeight","max-height","overflow-y","min-height","wrap","saveSelectionEvent","save","saveSync","dt","saveAync","off","updateValueEvent","doOnchange","oldValue","updateMenuStyleEvent","$children","last","childNode","$imgs","childrenLength","$pList","showHeightOnHover","addAndShowTip","$target","isTipInTxt","paddingTop","marginBottom","paddingBottom","removeTip","lastIndexOf","valueOf","printLog","random","placeholder","$container","langs","bold","underline","italic","forecolor","bgcolor","strikethrough","eraser","source","quote","fontfamily","head","orderlist","unorderlist","alignleft","aligncenter","alignright","submit","cancel","unlink","table","emotion","img","uploadImg","linkImg","video","loading","searchlocation","dynamicMap","clearLocation","langDynamicOneLocation","insertcode","openLink","en","menuFixed","jsFilter","lang","colors","#880000","#800080","#ff0000","#ff00ff","#000080","#0000ff","#00ffff","#008080","#008000","#808000","#00ff00","#ffcc00","#808080","#c0c0c0","#000000","#ffffff","familys","fontsizes","1","2","3","4","5","6","7","emotionsShow","emotions","weibo","icon","mapAk","uploadTimeout","customUpload","uploadHeaders","hideLinkImg","codeDefaultLang","createMenuFns","createMenu","createMenuFn","configColors","checkElemFn","cssText","pElem","quoteElem","$quoteElem","listElem","$listElem","$clearElem","$code","$codeTextarea","isShowCode","txtOuterHeight","$quote","$rangeElem","currentQuote","$lastChild","isPrevEnter","currentRangeElem","$currentRangeElem","configFamilys","configSize","isOrderedList","<h1>","<h2>","<h3>","<h4>","<h5>","$div1","$div2","$div3","$textInput","$urlInput","$btnSubmit","$btnCancel","href","$linkElem","linkHtml","$oldLinks","$newLinks","uniqId","not","$a","$span","aElem","$tr","j","$table","$row","$rowspan","$col","$colspan","$currentTd","currentTdIndex","$currentTr","currentTrIndex","trIndex","$td","tdIndex","rownum","colnum","tableHtml","insertEmotionImgs","$tabContent","src","$command","$img","emotionUrls","configEmotions","$panelContent","$tabContainer","$contentContainer","$tab","imgLoaded","_src","linkContentHandler","$linkContent","$urlContainer","imgHtml","tabToggle","$uploadTab","$uploadContent","$linkTab","hideUploadImg","customUploadInit","hidePanel","$linkInputContainer","$linkInput","$sizeContainer","$widthInput","$heightInput","$btnContainer","$howToCopy","$link","$div","inputKeyup","input","baiduMapAk","numberOfLocation","$searchInput","mapData","markers","mapContainerId","clearLocations","clearOverlays","searchMap","myGeo","marker","BMap","cityName","$cityInput","locationName","centerAndZoom","Geocoder","getPoint","point","Marker","addOverlay","enableDragging","hasCallback","baiduMapCallBack","locationFun","setCenter","searchFn","is","currentCity","currentSearch","city","search","Map","Point","addControl","MapTypeControl","setCurrentCity","enableScrollWheelZoom","myCity","LocalCity","addEventListener","lng","lat","loadMapScript","script","body","appendChild","initMap","$inputContainer","text-align","$clearBtn","$map","border","$mapLoading","$checkLabel","$check","iframe","isDynamic","center","getCenter","centerLng","centerLat","zoom","getZoom","getSize","sizeWidth","sizeHeight","getPosition","firstTime","loadHljs","hljs","contentHandle","$textareaContainer","margin","$textarea","padding","$langSelect","codeTpl","className","doHightlight","langClass","block","$block","highlightBlock","updateMenu","listLanguages","ctrlKey","scrollTopWhenFullScreen","zIndex","zIndexConfig","isSelected","$wrapper","isFullScreen","prepend","onerror","ontimeout","FileReader","FormData","convertBase64UrlToBlob","urlData","filetype","bytes","atob","ab","ArrayBuffer","ia","Uint8Array","Blob","insertImg","event","updateProgress","lengthComputable","percentComplete","showUploadProgress","xhrUploadImg","timeoutCallback","abort","timeoutfn","hideUploadProgress","fileName","base64","fileType","loadfn","errorfn","fileExt","formData","upload","onprogress","ajaxSettings","async","post","upload_oss_param_response","isRender","$progress","hideProgress","progress","$uploadIcon","upfile","UploadFile","uploadUrl","timeout","fileAccept","selectFiles","multiple","_hasRender","acceptTpl","multipleTpl","clearInput","uploadFileName","reader","readAsDataURL","hideModal","iframeId","$iframe","$btn","$form","bindLoadEvent","onloadFn","iframeWindow","fileFullName","fileOriginalName","_hasBindLoad","contentWindow","attachEvent","findPasteImgAndUpload","flag","$imgsBeforePaste","pasteEvent","items","getAsFile","dragEvent","dataTransfer","isRendered","$toolbar","$delete","$zoomSmall","$zoomBig","cb","$currentTable","tablePosition","tableTop","tableLeft","tableHeight","tableWidth","txtTop","$currentTxt","stopPropagation","imgLink","$currentImg","currentLink","inLink","unwrap","bindToolbarEvent","bindDragEvent","$alignLeft","$alignCenter","$alignRight","$unLink","$linkBtnCancel","$linkBtnSubmit","$dragPoint","parents","mousemove","diffX","diffY","pageX","_x","pageY","_y","currentDragMarginLeft","dragMarginLeft","currentDragMarginTop","dragMarginTop","currentImgWidth","imgWidth","currentImggHeight","imgHeight","isOnDrag","imgPosition","imgTop","imgLeft","isEmotion","imgSrc","$triggerLink","setPosition","$currentLink","topResult","isShow","showTimeoutId","hideTimeoutId","showTimeoutIdByToolbar","hasClass","bodyMarginTop","editorTop","editorHeight","menuCssPosition","menuCssTop","indent","lineHeight","1.0","1.5","1.8","2.0","2.5","3.0","btnId","containerId"],"mappings":"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","file":"static/js/16.b788b473c8c22f13f082.js","sourcesContent":["webpackJsonp([16,54],{\n\n/***/ 82:\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(156);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(4)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!../../../../app_vue/node_modules/.0.25.0@css-loader/index.js?sourceMap!./wangEditor.css\", function() {\n\t\t\t\tvar newContent = require(\"!!../../../../app_vue/node_modules/.0.25.0@css-loader/index.js?sourceMap!./wangEditor.css\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ },\n\n/***/ 154:\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(3)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \"p{line-height:15px!important}\", \"\", {\"version\":3,\"sources\":[\"/./src/components/tools/wangeditor.vue\"],\"names\":[],\"mappings\":\"AACA,EACI,0BAA2B,CAC9B\",\"file\":\"wangeditor.vue\",\"sourcesContent\":[\"\\np{\\n    line-height:15px !important\\n}\\n\"],\"sourceRoot\":\"webpack://\"}]);\n\t\n\t// exports\n\n\n/***/ },\n\n/***/ 156:\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(3)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \".wangEditor-container{position:relative;background-color:#fff;border:1px solid #ccc;z-index:1;width:100%}.wangEditor-container a:focus,.wangEditor-container button:focus{outline:none}.wangEditor-container,.wangEditor-container *{margin:0;padding:0;box-sizing:border-box;line-height:1}.wangEditor-container img{border:none}.wangEditor-container .clearfix:after{content:\\\"\\\";display:table;clear:both}.wangEditor-container .clearfix{*zoom:1}.wangEditor-container textarea{border:none}.wangEditor-container textarea:focus{outline:none}.wangEditor-container .height-tip{position:absolute;width:3px;background-color:#ccc;left:0;transition:top .2s}.wangEditor-container .txt-toolbar{position:absolute;background-color:#fff;padding:3px 5px;border-top:2px solid #666;box-shadow:1px 3px 3px #999;border-left:1px\\\\9#ccc\\\\9;border-bottom:1px\\\\9#999\\\\9;border-right:1px\\\\9#999\\\\9}.wangEditor-container .txt-toolbar .tip-triangle{display:block;position:absolute;width:0;height:0;border:5px solid;border-color:transparent transparent #666;top:-12px;left:50%;margin-left:-5px}.wangEditor-container .txt-toolbar a{color:#666;display:inline-block;margin:0 3px;padding:5px;text-decoration:none;border-radius:3px}.wangEditor-container .txt-toolbar a:hover{background-color:#f1f1f1}.wangEditor-container .img-drag-point{display:block;position:absolute;width:12px;height:12px;border-radius:50%;cursor:se-resize;background-color:#666;margin-left:-6px;margin-top:-6px;box-shadow:1px 1px 5px #999}.wangEditor-container .wangEditor-upload-progress{position:absolute;height:1px;background:#1e88e5;width:0;display:none;-webkit-transition:width .5s;transition:width .5s}.wangEditor-fullscreen{position:fixed;top:0;bottom:0;left:0;right:0}.wangEditor-container .code-textarea{resize:none;width:100%;font-size:14px;line-height:1.5;font-family:Verdana;color:#333;padding:0 15px}.wangEditor-menu-container{width:100%;border-bottom:1px solid #f1f1f1;background-color:#fff}.wangEditor-menu-container a{text-decoration:none}.wangEditor-menu-container .menu-group{float:left;padding:0 8px;border-right:1px solid #f1f1f1}.wangEditor-menu-container .menu-item{float:left;position:relative;text-align:center;height:31px;width:35px}.wangEditor-menu-container .menu-item:hover{background-color:#f1f1f1}.wangEditor-menu-container .menu-item a{display:block;text-align:center;color:#666;width:100%;padding:8px 0;font-size:.9em}.wangEditor-menu-container .menu-item .selected{color:#1e88e5}.wangEditor-menu-container .menu-item .active{background-color:#f1f1f1}.wangEditor-menu-container .menu-item .disable{opacity:.5;filter:alpha(opacity=50)}.wangEditor-menu-container .menu-tip{display:block;position:absolute;z-index:20;width:60px;text-align:center;background-color:#666;color:#fff;padding:7px 0;font-size:12px;top:100%;left:50%;margin-left:-30px;border-radius:2px;box-shadow:1px 1px 5px #999;display:none}.wangEditor-menu-container .menu-tip-40{width:40px;margin-left:-20px}.wangEditor-menu-container .menu-tip-50{width:50px;margin-left:-25px}.wangEditor-menu-shadow{border-bottom:1px\\\\9#f1f1f1\\\\9;box-shadow:0 1px 3px #999}.wangEditor-container .wangEditor-txt{width:100%;text-align:left;padding:15px;padding-top:0;margin-top:5px;overflow-y:auto}.wangEditor-container .wangEditor-txt h1,.wangEditor-container .wangEditor-txt h2,.wangEditor-container .wangEditor-txt h3,.wangEditor-container .wangEditor-txt h4,.wangEditor-container .wangEditor-txt h5,.wangEditor-container .wangEditor-txt p{margin:10px 0;line-height:1.8}.wangEditor-container .wangEditor-txt h1 *,.wangEditor-container .wangEditor-txt h2 *,.wangEditor-container .wangEditor-txt h3 *,.wangEditor-container .wangEditor-txt h4 *,.wangEditor-container .wangEditor-txt h5 *,.wangEditor-container .wangEditor-txt p *{line-height:1.8}.wangEditor-container .wangEditor-txt ol,.wangEditor-container .wangEditor-txt ul{padding-left:20px}.wangEditor-container .wangEditor-txt img{cursor:pointer}.wangEditor-container .wangEditor-txt img.clicked,.wangEditor-container .wangEditor-txt table.clicked{box-shadow:1px 1px 10px #999}.wangEditor-container .wangEditor-txt pre code{line-height:1.5}.wangEditor-container .wangEditor-txt:focus{outline:none}.wangEditor-container .wangEditor-txt blockquote{display:block;border-left:8px solid #d0e5f2;padding:5px 10px;margin:10px 0;line-height:1.4;font-size:100%;background-color:#f1f1f1}.wangEditor-container .wangEditor-txt table{border:none;border-collapse:collapse}.wangEditor-container .wangEditor-txt table td,.wangEditor-container .wangEditor-txt table th{border:1px solid #999;padding:3px 5px;min-width:50px;height:20px}.wangEditor-container .wangEditor-txt pre{border:1px solid #ccc;background-color:#f8f8f8;padding:10px;margin:5px 0;font-size:.8em;border-radius:3px}.wangEditor-drop-list{display:none;position:absolute;background-color:#fff;overflow:hidden;z-index:10;transition:height .7s;border-top:1px solid #f1f1f1;box-shadow:1px 3px 3px #999;border-left:1px\\\\9#ccc\\\\9;border-bottom:1px\\\\9#999\\\\9;border-right:1px\\\\9#999\\\\9}.wangEditor-drop-list a{text-decoration:none;display:block;color:#666;padding:3px 5px}.wangEditor-drop-list a:hover{background-color:#f1f1f1}.txt-toolbar,.wangEditor-drop-panel{display:none;position:absolute;padding:10px;font-size:14px;background-color:#fff;z-index:10;border-top:2px solid #666;box-shadow:1px 3px 3px #999;border-left:1px\\\\9#ccc\\\\9;border-bottom:1px\\\\9#999\\\\9;border-right:1px\\\\9#999\\\\9}.txt-toolbar .tip-triangle,.wangEditor-drop-panel .tip-triangle{display:block;position:absolute;width:0;height:0;border:5px solid;border-color:transparent transparent #666;top:-12px;left:50%;margin-left:-5px}.txt-toolbar a,.wangEditor-drop-panel a{text-decoration:none}.txt-toolbar input[type=text],.wangEditor-drop-panel input[type=text]{border:none;border-bottom:1px solid #ccc;font-size:14px;height:20px;color:#333;padding:3px 0}.txt-toolbar input[type=text]:focus,.wangEditor-drop-panel input[type=text]:focus{outline:none;border-bottom:2px solid #1e88e5}.txt-toolbar input[type=text].block,.wangEditor-drop-panel input[type=text].block{display:block;width:100%}.txt-toolbar textarea,.wangEditor-drop-panel textarea{border:1px solid #ccc}.txt-toolbar textarea:focus,.wangEditor-drop-panel textarea:focus{outline:none;border-color:#1e88e5}.txt-toolbar button,.wangEditor-drop-panel button{font-size:14px;color:#1e88e5;border:none;padding:10px;background-color:#fff;cursor:pointer;border-radius:3px}.txt-toolbar button:hover,.wangEditor-drop-panel button:hover{background-color:#f1f1f1}.txt-toolbar button:focus,.wangEditor-drop-panel button:focus{outline:none}.txt-toolbar button.right,.wangEditor-drop-panel button.right{float:right;margin-left:10px}.txt-toolbar button.gray,.wangEditor-drop-panel button.gray{color:#999}.txt-toolbar button.link,.wangEditor-drop-panel button.link{padding:5px 10px}.txt-toolbar button.link:hover,.wangEditor-drop-panel button.link:hover{background-color:#fff;text-decoration:underline}.txt-toolbar .color-item,.wangEditor-drop-panel .color-item{display:block;float:left;width:25px;height:25px;text-align:center;padding:2px;border-radius:2px;text-decoration:underline}.txt-toolbar .color-item:hover,.wangEditor-drop-panel .color-item:hover{background-color:#f1f1f1}.txt-toolbar .list-menu-item,.wangEditor-drop-panel .list-menu-item{display:block;float:left;color:#333;padding:5px;border-radius:2px}.txt-toolbar .list-menu-item:hover,.wangEditor-drop-panel .list-menu-item:hover{background-color:#f1f1f1}.txt-toolbar table.choose-table,.wangEditor-drop-panel table.choose-table{border:none;border-collapse:collapse}.txt-toolbar table.choose-table td,.wangEditor-drop-panel table.choose-table td{border:1px solid #ccc;width:16px;height:12px}.txt-toolbar table.choose-table td.active,.wangEditor-drop-panel table.choose-table td.active{background-color:#ccc;opacity:.5;filter:alpha(opacity=50)}.txt-toolbar .panel-tab .tab-container,.wangEditor-drop-panel .panel-tab .tab-container{margin-bottom:5px}.txt-toolbar .panel-tab .tab-container a,.wangEditor-drop-panel .panel-tab .tab-container a{display:inline-block;color:#999;text-align:center;margin:0 5px;padding:5px}.txt-toolbar .panel-tab .tab-container a.selected,.wangEditor-drop-panel .panel-tab .tab-container a.selected{color:#1e88e5;border-bottom:2px solid #1e88e5}.txt-toolbar .panel-tab .content-container .content,.wangEditor-drop-panel .panel-tab .content-container .content{display:none}.txt-toolbar .panel-tab .content-container .content a,.wangEditor-drop-panel .panel-tab .content-container .content a{display:inline-block;margin:2px;padding:2px;border-radius:2px}.txt-toolbar .panel-tab .content-container .content a:hover,.wangEditor-drop-panel .panel-tab .content-container .content a:hover{background-color:#f1f1f1}.txt-toolbar .panel-tab .content-container .selected,.wangEditor-drop-panel .panel-tab .content-container .selected{display:block}.txt-toolbar .panel-tab .emotion-content-container,.wangEditor-drop-panel .panel-tab .emotion-content-container{height:200px;overflow-y:auto}.txt-toolbar .upload-icon-container,.wangEditor-drop-panel .upload-icon-container{color:#ccc;text-align:center;margin:20px 20px 15px!important;padding:5px!important;font-size:65px;cursor:pointer;border:2px dotted #f1f1f1;display:block!important}.txt-toolbar .upload-icon-container:hover,.wangEditor-drop-panel .upload-icon-container:hover{color:#666;border-color:#ccc}.wangEditor-modal{position:absolute;top:50%;left:50%;background-color:#fff;border-top:1px solid #f1f1f1;box-shadow:1px 3px 3px #999;border-top:1px\\\\9#ccc\\\\9;border-left:1px\\\\9#ccc\\\\9;border-bottom:1px\\\\9#999\\\\9;border-right:1px\\\\9#999\\\\9}.wangEditor-modal .wangEditor-modal-close{position:absolute;top:0;right:0;margin-top:-25px;margin-right:-25px;font-size:1.5em;color:#666;cursor:pointer}@font-face{font-family:icomoon;src:url(\" + __webpack_require__(158) + \");src:url(\" + __webpack_require__(157) + \"?#iefix-qdfu1s) format(\\\"embedded-opentype\\\"),url(\" + __webpack_require__(159) + \") format(\\\"truetype\\\"),url(\" + __webpack_require__(160) + \") format(\\\"woff\\\"),url(\" + __webpack_require__(161) + \"#icomoon) format(\\\"svg\\\");font-weight:400;font-style:normal}[class*=\\\" wangeditor-menu-img-\\\"],[class^=wangeditor-menu-img-]{font-family:icomoon;speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.wangeditor-menu-img-link:before{content:\\\"\\\\E800\\\"}.wangeditor-menu-img-unlink:before{content:\\\"\\\\E801\\\"}.wangeditor-menu-img-code:before{content:\\\"\\\\E802\\\"}.wangeditor-menu-img-cancel:before{content:\\\"\\\\E803\\\"}.wangeditor-menu-img-terminal:before{content:\\\"\\\\E804\\\"}.wangeditor-menu-img-angle-down:before{content:\\\"\\\\E805\\\"}.wangeditor-menu-img-font:before{content:\\\"\\\\E806\\\"}.wangeditor-menu-img-bold:before{content:\\\"\\\\E807\\\"}.wangeditor-menu-img-italic:before{content:\\\"\\\\E808\\\"}.wangeditor-menu-img-header:before{content:\\\"\\\\E809\\\"}.wangeditor-menu-img-align-left:before{content:\\\"\\\\E80A\\\"}.wangeditor-menu-img-align-center:before{content:\\\"\\\\E80B\\\"}.wangeditor-menu-img-align-right:before{content:\\\"\\\\E80C\\\"}.wangeditor-menu-img-list-bullet:before{content:\\\"\\\\E80D\\\"}.wangeditor-menu-img-indent-left:before{content:\\\"\\\\E80E\\\"}.wangeditor-menu-img-indent-right:before{content:\\\"\\\\E80F\\\"}.wangeditor-menu-img-list-numbered:before{content:\\\"\\\\E810\\\"}.wangeditor-menu-img-underline:before{content:\\\"\\\\E811\\\"}.wangeditor-menu-img-table:before{content:\\\"\\\\E812\\\"}.wangeditor-menu-img-eraser:before{content:\\\"\\\\E813\\\"}.wangeditor-menu-img-text-height:before{content:\\\"\\\\E814\\\"}.wangeditor-menu-img-brush:before{content:\\\"\\\\E815\\\"}.wangeditor-menu-img-pencil:before{content:\\\"\\\\E816\\\"}.wangeditor-menu-img-minus:before{content:\\\"\\\\E817\\\"}.wangeditor-menu-img-picture:before{content:\\\"\\\\E818\\\"}.wangeditor-menu-img-file-image:before{content:\\\"\\\\E819\\\"}.wangeditor-menu-img-cw:before{content:\\\"\\\\E81A\\\"}.wangeditor-menu-img-ccw:before{content:\\\"\\\\E81B\\\"}.wangeditor-menu-img-music:before{content:\\\"\\\\E911\\\"}.wangeditor-menu-img-play:before{content:\\\"\\\\E912\\\"}.wangeditor-menu-img-location:before{content:\\\"\\\\E947\\\"}.wangeditor-menu-img-happy:before{content:\\\"\\\\E9DF\\\"}.wangeditor-menu-img-sigma:before{content:\\\"\\\\EA67\\\"}.wangeditor-menu-img-enlarge2:before{content:\\\"\\\\E98B\\\"}.wangeditor-menu-img-shrink2:before{content:\\\"\\\\E98C\\\"}.wangeditor-menu-img-newspaper:before{content:\\\"\\\\E904\\\"}.wangeditor-menu-img-camera:before{content:\\\"\\\\E90F\\\"}.wangeditor-menu-img-video-camera:before{content:\\\"\\\\E914\\\"}.wangeditor-menu-img-file-zip:before{content:\\\"\\\\E92B\\\"}.wangeditor-menu-img-stack:before{content:\\\"\\\\E92E\\\"}.wangeditor-menu-img-credit-card:before{content:\\\"\\\\E93F\\\"}.wangeditor-menu-img-address-book:before{content:\\\"\\\\E944\\\"}.wangeditor-menu-img-envelop:before{content:\\\"\\\\E945\\\"}.wangeditor-menu-img-drawer:before{content:\\\"\\\\E95C\\\"}.wangeditor-menu-img-download:before{content:\\\"\\\\E960\\\"}.wangeditor-menu-img-upload:before{content:\\\"\\\\E961\\\"}.wangeditor-menu-img-lock:before{content:\\\"\\\\E98F\\\"}.wangeditor-menu-img-unlocked:before{content:\\\"\\\\E990\\\"}.wangeditor-menu-img-wrench:before{content:\\\"\\\\E991\\\"}.wangeditor-menu-img-eye:before{content:\\\"\\\\E9CE\\\"}.wangeditor-menu-img-eye-blocked:before{content:\\\"\\\\E9D1\\\"}.wangeditor-menu-img-command:before{content:\\\"\\\\EA4E\\\"}.wangeditor-menu-img-font2:before{content:\\\"\\\\EA5C\\\"}.wangeditor-menu-img-libreoffice:before{content:\\\"\\\\EADE\\\"}.wangeditor-menu-img-quotes-left:before{content:\\\"\\\\E977\\\"}.wangeditor-menu-img-strikethrough:before{content:\\\"\\\\EA65\\\"}.wangeditor-menu-img-desktop:before{content:\\\"\\\\F108\\\"}.wangeditor-menu-img-tablet:before{content:\\\"\\\\F10A\\\"}.wangeditor-menu-img-search-plus:before{content:\\\"\\\\F00E\\\"}.wangeditor-menu-img-search-minus:before{content:\\\"\\\\F010\\\"}.wangeditor-menu-img-trash-o:before{content:\\\"\\\\F014\\\"}.wangeditor-menu-img-align-justify:before{content:\\\"\\\\F039\\\"}.wangeditor-menu-img-arrows-v:before{content:\\\"\\\\F07D\\\"}.wangeditor-menu-img-sigma2:before{content:\\\"\\\\EA68\\\"}.wangeditor-menu-img-omega:before{content:\\\"\\\\E900\\\"}.wangeditor-menu-img-cancel-circle:before{content:\\\"\\\\E901\\\"}.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8;-webkit-text-size-adjust:none}.diff .hljs-header,.hljs-comment{color:#998;font-style:italic}.css .rule .hljs-keyword,.hljs-keyword,.hljs-request,.hljs-status,.hljs-subst,.hljs-winutils,.nginx .hljs-title{color:#333;font-weight:700}.hljs-hexcolor,.hljs-number,.ruby .hljs-constant{color:teal}.hljs-doctag,.hljs-string,.hljs-tag .hljs-value,.tex .hljs-formula{color:#d14}.hljs-id,.hljs-title,.scss .hljs-preprocessor{color:#900;font-weight:700}.hljs-list .hljs-keyword,.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type,.tex .hljs-command,.vhdl .hljs-literal{color:#458;font-weight:700}.django .hljs-tag .hljs-keyword,.hljs-rule .hljs-property,.hljs-tag,.hljs-tag .hljs-title{color:navy;font-weight:400}.hljs-attribute,.hljs-name,.hljs-variable,.lisp .hljs-body{color:teal}.hljs-regexp{color:#009926}.clojure .hljs-keyword,.hljs-prompt,.hljs-symbol,.lisp .hljs-keyword,.ruby .hljs-symbol .hljs-string,.scheme .hljs-keyword,.tex .hljs-special{color:#990073}.hljs-built_in{color:#0086b3}.hljs-cdata,.hljs-doctype,.hljs-pi,.hljs-pragma,.hljs-preprocessor,.hljs-shebang{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.diff .hljs-change{background:#0086b3}.hljs-chunk{color:#aaa}\", \"\", {\"version\":3,\"sources\":[\"/../node_modules/.2.1.23@wangeditor/dist/css/wangEditor.css\"],\"names\":[],\"mappings\":\"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d,WAAiB,CAClB,AACD,8GAEE,cAAe,AACf,+BAAiC,CAClC,AACD,kHAEE,YAAc,CACf,AACD,sHAEE,qBAAsB,AACtB,WAAY,AACZ,YAAa,AACb,iBAAmB,CACpB,AACD,kIAEE,wBAA0B,CAC3B,AACD,oHAEE,aAAe,CAChB,AACD,gHAEE,aAAc,AACd,eAAiB,CAClB,AACD,kFAEE,WAAY,AACZ,kBAAmB,AACnB,gCAAuC,AACvC,sBAAwB,AACxB,eAAgB,AAChB,eAAgB,AAChB,0BAA2B,AAC3B,uBAA0B,CAC3B,AACD,8FAEE,WAAY,AACZ,iBAAmB,CACpB,AACD,kBACE,kBAAmB,AACnB,QAAS,AACT,SAAU,AACV,sBAAuB,AACvB,6BAA8B,AAC9B,4BAA6B,AAC7B,uBAAiC,AACjC,wBAAkC,AAClC,0BAAoC,AACpC,wBAAmC,CACpC,AACD,0CACE,kBAAmB,AACnB,MAAO,AACP,QAAS,AACT,iBAAkB,AAClB,mBAAoB,AACpB,gBAAiB,AACjB,WAAY,AACZ,cAAgB,CACjB,AACD,WACE,oBAAuB,AACvB,kCAAyC,AACzC,wMAAmP,AACnP,gBAAoB,AACpB,iBAAmB,CACpB,AACD,+DAEE,oBAAuB,AACvB,WAAY,AACZ,kBAAmB,AACnB,gBAAoB,AACpB,oBAAqB,AACrB,oBAAqB,AACrB,cAAe,AAEf,mCAAoC,AACpC,iCAAmC,CACpC,AACD,iCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,iCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,qCACE,eAAiB,CAClB,AACD,uCACE,eAAiB,CAClB,AACD,iCACE,eAAiB,CAClB,AACD,iCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,uCACE,eAAiB,CAClB,AACD,yCACE,eAAiB,CAClB,AACD,wCACE,eAAiB,CAClB,AACD,wCACE,eAAiB,CAClB,AACD,wCACE,eAAiB,CAClB,AACD,yCACE,eAAiB,CAClB,AACD,0CACE,eAAiB,CAClB,AACD,sCACE,eAAiB,CAClB,AACD,kCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,wCACE,eAAiB,CAClB,AACD,kCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,kCACE,eAAiB,CAClB,AACD,oCACE,eAAiB,CAClB,AACD,uCACE,eAAiB,CAClB,AACD,+BACE,eAAiB,CAClB,AACD,gCACE,eAAiB,CAClB,AACD,kCACE,eAAiB,CAClB,AACD,iCACE,eAAiB,CAClB,AACD,qCACE,eAAiB,CAClB,AACD,kCACE,eAAiB,CAClB,AACD,kCACE,eAAiB,CAClB,AACD,qCACE,eAAiB,CAClB,AACD,oCACE,eAAiB,CAClB,AACD,sCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,yCACE,eAAiB,CAClB,AACD,qCACE,eAAiB,CAClB,AACD,kCACE,eAAiB,CAClB,AACD,wCACE,eAAiB,CAClB,AACD,yCACE,eAAiB,CAClB,AACD,oCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,qCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,iCACE,eAAiB,CAClB,AACD,qCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,gCACE,eAAiB,CAClB,AACD,wCACE,eAAiB,CAClB,AACD,oCACE,eAAiB,CAClB,AACD,kCACE,eAAiB,CAClB,AACD,wCACE,eAAiB,CAClB,AACD,wCACE,eAAiB,CAClB,AACD,0CACE,eAAiB,CAClB,AACD,oCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,wCACE,eAAiB,CAClB,AACD,yCACE,eAAiB,CAClB,AACD,oCACE,eAAiB,CAClB,AACD,0CACE,eAAiB,CAClB,AACD,qCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,kCACE,eAAiB,CAClB,AACD,0CACE,eAAiB,CAClB,AACD,MACE,cAAe,AACf,gBAAiB,AACjB,aAAe,AACf,WAAY,AACZ,mBAAoB,AACpB,6BAA+B,CAChC,AACD,iCAEE,WAAY,AACZ,iBAAmB,CACpB,AACD,gHAOE,WAAY,AACZ,eAAkB,CACnB,AACD,iDAGE,UAAe,CAChB,AACD,mEAIE,UAAY,CACb,AACD,8CAGE,WAAY,AACZ,eAAkB,CACnB,AACD,qCAEE,eAAoB,CACrB,AACD,0EAIE,WAAY,AACZ,eAAkB,CACnB,AACD,0FAIE,WAAe,AACf,eAAoB,CACrB,AACD,2DAIE,UAAe,CAChB,AACD,aACE,aAAe,CAChB,AACD,8IAOE,aAAe,CAChB,AACD,eACE,aAAe,CAChB,AACD,iFAME,WAAY,AACZ,eAAkB,CACnB,AACD,eACE,eAAiB,CAClB,AACD,eACE,eAAiB,CAClB,AACD,mBACE,kBAAoB,CACrB,AACD,YACE,UAAY,CACb\",\"file\":\"wangEditor.css\",\"sourcesContent\":[\"/* 编辑器边框颜色 */\\n/* 菜单颜色、上边框颜色 */\\n/* 菜单选中状态的颜色 */\\n/* input focus 时的颜色 */\\n/* 按钮颜色 */\\n/* tab selected 状态下的颜色 */\\n.wangEditor-container {\\n  position: relative;\\n  background-color: #fff;\\n  border: 1px solid #ccc;\\n  z-index: 1;\\n  width: 100%;\\n}\\n.wangEditor-container a:focus,\\n.wangEditor-container button:focus {\\n  outline: none;\\n}\\n.wangEditor-container,\\n.wangEditor-container * {\\n  margin: 0;\\n  padding: 0;\\n  box-sizing: border-box;\\n  line-height: 1;\\n}\\n.wangEditor-container img {\\n  border: none;\\n}\\n.wangEditor-container .clearfix:after {\\n  content: '';\\n  display: table;\\n  clear: both;\\n}\\n.wangEditor-container .clearfix {\\n  *zoom: 1;\\n}\\n.wangEditor-container textarea {\\n  border: none;\\n}\\n.wangEditor-container textarea:focus {\\n  outline: none;\\n}\\n.wangEditor-container .height-tip {\\n  position: absolute;\\n  width: 3px;\\n  background-color: #ccc;\\n  left: 0;\\n  transition: top .2s;\\n}\\n.wangEditor-container .txt-toolbar {\\n  position: absolute;\\n  background-color: #fff;\\n  padding: 3px 5px;\\n  border-top: 2px solid #666;\\n  box-shadow: 1px 3px 3px #999;\\n  border-left: 1px\\\\9 solid\\\\9 #ccc\\\\9;\\n  border-bottom: 1px\\\\9 solid\\\\9 #999\\\\9;\\n  border-right: 1px\\\\9 solid\\\\9 #999\\\\9;\\n}\\n.wangEditor-container .txt-toolbar .tip-triangle {\\n  display: block;\\n  position: absolute;\\n  width: 0;\\n  height: 0;\\n  border: 5px solid;\\n  border-color: transparent transparent #666 transparent;\\n  top: -12px;\\n  left: 50%;\\n  margin-left: -5px;\\n}\\n.wangEditor-container .txt-toolbar a {\\n  color: #666;\\n  display: inline-block;\\n  margin: 0 3px;\\n  padding: 5px;\\n  text-decoration: none;\\n  border-radius: 3px;\\n}\\n.wangEditor-container .txt-toolbar a:hover {\\n  background-color: #f1f1f1;\\n}\\n.wangEditor-container .img-drag-point {\\n  display: block;\\n  position: absolute;\\n  width: 12px;\\n  height: 12px;\\n  border-radius: 50%;\\n  cursor: se-resize;\\n  background-color: #666;\\n  margin-left: -6px;\\n  margin-top: -6px;\\n  box-shadow: 1px 1px 5px #999;\\n}\\n.wangEditor-container .wangEditor-upload-progress {\\n  position: absolute;\\n  height: 1px;\\n  background: #1e88e5;\\n  width: 0;\\n  display: none;\\n  -webkit-transition: width .5s;\\n  -o-transition: width .5s;\\n  transition: width .5s;\\n}\\n.wangEditor-fullscreen {\\n  position: fixed;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n}\\n.wangEditor-container .code-textarea {\\n  resize: none;\\n  width: 100%;\\n  font-size: 14px;\\n  line-height: 1.5;\\n  font-family: 'Verdana';\\n  color: #333;\\n  padding: 0 15px 0 15px;\\n}\\n.wangEditor-menu-container {\\n  width: 100%;\\n  border-bottom: 1px solid #f1f1f1;\\n  background-color: #fff;\\n}\\n.wangEditor-menu-container a {\\n  text-decoration: none;\\n}\\n.wangEditor-menu-container .menu-group {\\n  float: left;\\n  padding: 0 8px;\\n  border-right: 1px solid #f1f1f1;\\n}\\n.wangEditor-menu-container .menu-item {\\n  float: left;\\n  position: relative;\\n  text-align: center;\\n  height: 31px;\\n  width: 35px;\\n}\\n.wangEditor-menu-container .menu-item:hover {\\n  background-color: #f1f1f1;\\n}\\n.wangEditor-menu-container .menu-item a {\\n  display: block;\\n  text-align: center;\\n  color: #666;\\n  width: 100%;\\n  padding: 8px 0;\\n  font-size: 0.9em;\\n}\\n.wangEditor-menu-container .menu-item .selected {\\n  color: #1e88e5;\\n}\\n.wangEditor-menu-container .menu-item .active {\\n  background-color: #f1f1f1;\\n}\\n.wangEditor-menu-container .menu-item .disable {\\n  opacity: 0.5;\\n  filter: alpha(opacity=50);\\n}\\n.wangEditor-menu-container .menu-tip {\\n  display: block;\\n  position: absolute;\\n  z-index: 20;\\n  width: 60px;\\n  text-align: center;\\n  background-color: #666;\\n  color: #fff;\\n  padding: 7px 0;\\n  font-size: 12px;\\n  top: 100%;\\n  left: 50%;\\n  margin-left: -30px;\\n  border-radius: 2px;\\n  box-shadow: 1px 1px 5px #999;\\n  display: none;\\n  /*// 小三角\\n        .tip-triangle {\\n            display: block;\\n            position: absolute;\\n            width: 0;\\n            height: 0;\\n            border:5px solid;\\n            border-color: transparent transparent @fore-color transparent;\\n            top: -10px;\\n            left: 50%;\\n            margin-left: -5px;\\n        }*/\\n}\\n.wangEditor-menu-container .menu-tip-40 {\\n  width: 40px;\\n  margin-left: -20px;\\n}\\n.wangEditor-menu-container .menu-tip-50 {\\n  width: 50px;\\n  margin-left: -25px;\\n}\\n.wangEditor-menu-shadow {\\n  /*border-bottom-width: 0;*/\\n  border-bottom: 1px\\\\9 solid\\\\9 #f1f1f1\\\\9;\\n  box-shadow: 0 1px 3px #999;\\n}\\n.wangEditor-container .wangEditor-txt {\\n  width: 100%;\\n  text-align: left;\\n  padding: 15px;\\n  padding-top: 0;\\n  margin-top: 5px;\\n  overflow-y: auto;\\n}\\n.wangEditor-container .wangEditor-txt p,\\n.wangEditor-container .wangEditor-txt h1,\\n.wangEditor-container .wangEditor-txt h2,\\n.wangEditor-container .wangEditor-txt h3,\\n.wangEditor-container .wangEditor-txt h4,\\n.wangEditor-container .wangEditor-txt h5 {\\n  margin: 10px 0;\\n  line-height: 1.8;\\n}\\n.wangEditor-container .wangEditor-txt p *,\\n.wangEditor-container .wangEditor-txt h1 *,\\n.wangEditor-container .wangEditor-txt h2 *,\\n.wangEditor-container .wangEditor-txt h3 *,\\n.wangEditor-container .wangEditor-txt h4 *,\\n.wangEditor-container .wangEditor-txt h5 * {\\n  line-height: 1.8;\\n}\\n.wangEditor-container .wangEditor-txt ul,\\n.wangEditor-container .wangEditor-txt ol {\\n  padding-left: 20px;\\n}\\n.wangEditor-container .wangEditor-txt img {\\n  cursor: pointer;\\n}\\n.wangEditor-container .wangEditor-txt img.clicked {\\n  box-shadow: 1px 1px 10px #999;\\n}\\n.wangEditor-container .wangEditor-txt table.clicked {\\n  box-shadow: 1px 1px 10px #999;\\n}\\n.wangEditor-container .wangEditor-txt pre code {\\n  line-height: 1.5;\\n}\\n.wangEditor-container .wangEditor-txt:focus {\\n  outline: none;\\n}\\n.wangEditor-container .wangEditor-txt blockquote {\\n  display: block;\\n  border-left: 8px solid #d0e5f2;\\n  padding: 5px 10px;\\n  margin: 10px 0;\\n  line-height: 1.4;\\n  font-size: 100%;\\n  background-color: #f1f1f1;\\n}\\n.wangEditor-container .wangEditor-txt table {\\n  border: none;\\n  border-collapse: collapse;\\n}\\n.wangEditor-container .wangEditor-txt table td,\\n.wangEditor-container .wangEditor-txt table th {\\n  border: 1px solid #999;\\n  padding: 3px 5px;\\n  min-width: 50px;\\n  height: 20px;\\n}\\n.wangEditor-container .wangEditor-txt pre {\\n  border: 1px solid #ccc;\\n  background-color: #f8f8f8;\\n  padding: 10px;\\n  margin: 5px 0px;\\n  font-size: 0.8em;\\n  border-radius: 3px;\\n}\\n.wangEditor-drop-list {\\n  display: none;\\n  position: absolute;\\n  background-color: #fff;\\n  overflow: hidden;\\n  z-index: 10;\\n  transition: height .7s;\\n  border-top: 1px solid #f1f1f1;\\n  box-shadow: 1px 3px 3px #999;\\n  border-left: 1px\\\\9 solid\\\\9 #ccc\\\\9;\\n  border-bottom: 1px\\\\9 solid\\\\9 #999\\\\9;\\n  border-right: 1px\\\\9 solid\\\\9 #999\\\\9;\\n}\\n.wangEditor-drop-list a {\\n  text-decoration: none;\\n  display: block;\\n  color: #666;\\n  padding: 3px 5px;\\n}\\n.wangEditor-drop-list a:hover {\\n  background-color: #f1f1f1;\\n}\\n.wangEditor-drop-panel,\\n.txt-toolbar {\\n  display: none;\\n  position: absolute;\\n  padding: 10px;\\n  font-size: 14px;\\n  /*border: 1px\\\\9 solid\\\\9 #cccccc\\\\9;*/\\n  background-color: #fff;\\n  z-index: 10;\\n  border-top: 2px solid #666;\\n  box-shadow: 1px 3px 3px #999;\\n  border-left: 1px\\\\9 solid\\\\9 #ccc\\\\9;\\n  border-bottom: 1px\\\\9 solid\\\\9 #999\\\\9;\\n  border-right: 1px\\\\9 solid\\\\9 #999\\\\9;\\n}\\n.wangEditor-drop-panel .tip-triangle,\\n.txt-toolbar .tip-triangle {\\n  display: block;\\n  position: absolute;\\n  width: 0;\\n  height: 0;\\n  border: 5px solid;\\n  border-color: transparent transparent #666 transparent;\\n  top: -12px;\\n  left: 50%;\\n  margin-left: -5px;\\n}\\n.wangEditor-drop-panel a,\\n.txt-toolbar a {\\n  text-decoration: none;\\n}\\n.wangEditor-drop-panel input[type=text],\\n.txt-toolbar input[type=text] {\\n  border: none;\\n  border-bottom: 1px solid #ccc;\\n  font-size: 14px;\\n  height: 20px;\\n  color: #333;\\n  padding: 3px 0;\\n}\\n.wangEditor-drop-panel input[type=text]:focus,\\n.txt-toolbar input[type=text]:focus {\\n  outline: none;\\n  border-bottom: 2px solid #1e88e5;\\n}\\n.wangEditor-drop-panel input[type=text].block,\\n.txt-toolbar input[type=text].block {\\n  display: block;\\n  width: 100%;\\n}\\n.wangEditor-drop-panel textarea,\\n.txt-toolbar textarea {\\n  border: 1px solid #ccc;\\n}\\n.wangEditor-drop-panel textarea:focus,\\n.txt-toolbar textarea:focus {\\n  outline: none;\\n  border-color: #1e88e5;\\n}\\n.wangEditor-drop-panel button,\\n.txt-toolbar button {\\n  font-size: 14px;\\n  color: #1e88e5;\\n  border: none;\\n  padding: 10px;\\n  background-color: #fff;\\n  cursor: pointer;\\n  border-radius: 3px;\\n}\\n.wangEditor-drop-panel button:hover,\\n.txt-toolbar button:hover {\\n  background-color: #f1f1f1;\\n}\\n.wangEditor-drop-panel button:focus,\\n.txt-toolbar button:focus {\\n  outline: none;\\n}\\n.wangEditor-drop-panel button.right,\\n.txt-toolbar button.right {\\n  float: right;\\n  margin-left: 10px;\\n}\\n.wangEditor-drop-panel button.gray,\\n.txt-toolbar button.gray {\\n  color: #999;\\n}\\n.wangEditor-drop-panel button.link,\\n.txt-toolbar button.link {\\n  padding: 5px 10px;\\n}\\n.wangEditor-drop-panel button.link:hover,\\n.txt-toolbar button.link:hover {\\n  background-color: #fff;\\n  text-decoration: underline;\\n}\\n.wangEditor-drop-panel .color-item,\\n.txt-toolbar .color-item {\\n  display: block;\\n  float: left;\\n  width: 25px;\\n  height: 25px;\\n  text-align: center;\\n  padding: 2px;\\n  border-radius: 2px;\\n  text-decoration: underline;\\n}\\n.wangEditor-drop-panel .color-item:hover,\\n.txt-toolbar .color-item:hover {\\n  background-color: #f1f1f1;\\n}\\n.wangEditor-drop-panel .list-menu-item,\\n.txt-toolbar .list-menu-item {\\n  display: block;\\n  float: left;\\n  color: #333;\\n  padding: 5px 5px;\\n  border-radius: 2px;\\n}\\n.wangEditor-drop-panel .list-menu-item:hover,\\n.txt-toolbar .list-menu-item:hover {\\n  background-color: #f1f1f1;\\n}\\n.wangEditor-drop-panel table.choose-table,\\n.txt-toolbar table.choose-table {\\n  border: none;\\n  border-collapse: collapse;\\n}\\n.wangEditor-drop-panel table.choose-table td,\\n.txt-toolbar table.choose-table td {\\n  border: 1px solid #ccc;\\n  width: 16px;\\n  height: 12px;\\n}\\n.wangEditor-drop-panel table.choose-table td.active,\\n.txt-toolbar table.choose-table td.active {\\n  background-color: #ccc;\\n  opacity: .5;\\n  filter: alpha(opacity=50);\\n}\\n.wangEditor-drop-panel .panel-tab .tab-container,\\n.txt-toolbar .panel-tab .tab-container {\\n  margin-bottom: 5px;\\n}\\n.wangEditor-drop-panel .panel-tab .tab-container a,\\n.txt-toolbar .panel-tab .tab-container a {\\n  display: inline-block;\\n  color: #999;\\n  text-align: center;\\n  margin: 0 5px;\\n  padding: 5px 5px;\\n}\\n.wangEditor-drop-panel .panel-tab .tab-container a.selected,\\n.txt-toolbar .panel-tab .tab-container a.selected {\\n  color: #1e88e5;\\n  border-bottom: 2px solid #1e88e5;\\n}\\n.wangEditor-drop-panel .panel-tab .content-container .content,\\n.txt-toolbar .panel-tab .content-container .content {\\n  display: none;\\n}\\n.wangEditor-drop-panel .panel-tab .content-container .content a,\\n.txt-toolbar .panel-tab .content-container .content a {\\n  display: inline-block;\\n  margin: 2px;\\n  padding: 2px;\\n  border-radius: 2px;\\n}\\n.wangEditor-drop-panel .panel-tab .content-container .content a:hover,\\n.txt-toolbar .panel-tab .content-container .content a:hover {\\n  background-color: #f1f1f1;\\n}\\n.wangEditor-drop-panel .panel-tab .content-container .selected,\\n.txt-toolbar .panel-tab .content-container .selected {\\n  display: block;\\n}\\n.wangEditor-drop-panel .panel-tab .emotion-content-container,\\n.txt-toolbar .panel-tab .emotion-content-container {\\n  height: 200px;\\n  overflow-y: auto;\\n}\\n.wangEditor-drop-panel .upload-icon-container,\\n.txt-toolbar .upload-icon-container {\\n  color: #ccc;\\n  text-align: center;\\n  margin: 20px 20px 15px 20px !important;\\n  padding: 5px !important;\\n  font-size: 65px;\\n  cursor: pointer;\\n  border: 2px dotted #f1f1f1;\\n  display: block !important;\\n}\\n.wangEditor-drop-panel .upload-icon-container:hover,\\n.txt-toolbar .upload-icon-container:hover {\\n  color: #666;\\n  border-color: #ccc;\\n}\\n.wangEditor-modal {\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  background-color: #fff;\\n  border-top: 1px solid #f1f1f1;\\n  box-shadow: 1px 3px 3px #999;\\n  border-top: 1px\\\\9 solid\\\\9 #ccc\\\\9;\\n  border-left: 1px\\\\9 solid\\\\9 #ccc\\\\9;\\n  border-bottom: 1px\\\\9 solid\\\\9 #999\\\\9;\\n  border-right: 1px\\\\9 solid\\\\9 #999\\\\9;\\n}\\n.wangEditor-modal .wangEditor-modal-close {\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  margin-top: -25px;\\n  margin-right: -25px;\\n  font-size: 1.5em;\\n  color: #666;\\n  cursor: pointer;\\n}\\n@font-face {\\n  font-family: 'icomoon';\\n  src: url('../fonts/icomoon.eot?-qdfu1s');\\n  src: url('../fonts/icomoon.eot?#iefix-qdfu1s') format('embedded-opentype'), url('../fonts/icomoon.ttf?-qdfu1s') format('truetype'), url('../fonts/icomoon.woff?-qdfu1s') format('woff'), url('../fonts/icomoon.svg?-qdfu1s#icomoon') format('svg');\\n  font-weight: normal;\\n  font-style: normal;\\n}\\n[class^=\\\"wangeditor-menu-img-\\\"],\\n[class*=\\\" wangeditor-menu-img-\\\"] {\\n  font-family: 'icomoon';\\n  speak: none;\\n  font-style: normal;\\n  font-weight: normal;\\n  font-variant: normal;\\n  text-transform: none;\\n  line-height: 1;\\n  /* Better Font Rendering =========== */\\n  -webkit-font-smoothing: antialiased;\\n  -moz-osx-font-smoothing: grayscale;\\n}\\n.wangeditor-menu-img-link:before {\\n  content: \\\"\\\\e800\\\";\\n}\\n.wangeditor-menu-img-unlink:before {\\n  content: \\\"\\\\e801\\\";\\n}\\n.wangeditor-menu-img-code:before {\\n  content: \\\"\\\\e802\\\";\\n}\\n.wangeditor-menu-img-cancel:before {\\n  content: \\\"\\\\e803\\\";\\n}\\n.wangeditor-menu-img-terminal:before {\\n  content: \\\"\\\\e804\\\";\\n}\\n.wangeditor-menu-img-angle-down:before {\\n  content: \\\"\\\\e805\\\";\\n}\\n.wangeditor-menu-img-font:before {\\n  content: \\\"\\\\e806\\\";\\n}\\n.wangeditor-menu-img-bold:before {\\n  content: \\\"\\\\e807\\\";\\n}\\n.wangeditor-menu-img-italic:before {\\n  content: \\\"\\\\e808\\\";\\n}\\n.wangeditor-menu-img-header:before {\\n  content: \\\"\\\\e809\\\";\\n}\\n.wangeditor-menu-img-align-left:before {\\n  content: \\\"\\\\e80a\\\";\\n}\\n.wangeditor-menu-img-align-center:before {\\n  content: \\\"\\\\e80b\\\";\\n}\\n.wangeditor-menu-img-align-right:before {\\n  content: \\\"\\\\e80c\\\";\\n}\\n.wangeditor-menu-img-list-bullet:before {\\n  content: \\\"\\\\e80d\\\";\\n}\\n.wangeditor-menu-img-indent-left:before {\\n  content: \\\"\\\\e80e\\\";\\n}\\n.wangeditor-menu-img-indent-right:before {\\n  content: \\\"\\\\e80f\\\";\\n}\\n.wangeditor-menu-img-list-numbered:before {\\n  content: \\\"\\\\e810\\\";\\n}\\n.wangeditor-menu-img-underline:before {\\n  content: \\\"\\\\e811\\\";\\n}\\n.wangeditor-menu-img-table:before {\\n  content: \\\"\\\\e812\\\";\\n}\\n.wangeditor-menu-img-eraser:before {\\n  content: \\\"\\\\e813\\\";\\n}\\n.wangeditor-menu-img-text-height:before {\\n  content: \\\"\\\\e814\\\";\\n}\\n.wangeditor-menu-img-brush:before {\\n  content: \\\"\\\\e815\\\";\\n}\\n.wangeditor-menu-img-pencil:before {\\n  content: \\\"\\\\e816\\\";\\n}\\n.wangeditor-menu-img-minus:before {\\n  content: \\\"\\\\e817\\\";\\n}\\n.wangeditor-menu-img-picture:before {\\n  content: \\\"\\\\e818\\\";\\n}\\n.wangeditor-menu-img-file-image:before {\\n  content: \\\"\\\\e819\\\";\\n}\\n.wangeditor-menu-img-cw:before {\\n  content: \\\"\\\\e81a\\\";\\n}\\n.wangeditor-menu-img-ccw:before {\\n  content: \\\"\\\\e81b\\\";\\n}\\n.wangeditor-menu-img-music:before {\\n  content: \\\"\\\\e911\\\";\\n}\\n.wangeditor-menu-img-play:before {\\n  content: \\\"\\\\e912\\\";\\n}\\n.wangeditor-menu-img-location:before {\\n  content: \\\"\\\\e947\\\";\\n}\\n.wangeditor-menu-img-happy:before {\\n  content: \\\"\\\\e9df\\\";\\n}\\n.wangeditor-menu-img-sigma:before {\\n  content: \\\"\\\\ea67\\\";\\n}\\n.wangeditor-menu-img-enlarge2:before {\\n  content: \\\"\\\\e98b\\\";\\n}\\n.wangeditor-menu-img-shrink2:before {\\n  content: \\\"\\\\e98c\\\";\\n}\\n.wangeditor-menu-img-newspaper:before {\\n  content: \\\"\\\\e904\\\";\\n}\\n.wangeditor-menu-img-camera:before {\\n  content: \\\"\\\\e90f\\\";\\n}\\n.wangeditor-menu-img-video-camera:before {\\n  content: \\\"\\\\e914\\\";\\n}\\n.wangeditor-menu-img-file-zip:before {\\n  content: \\\"\\\\e92b\\\";\\n}\\n.wangeditor-menu-img-stack:before {\\n  content: \\\"\\\\e92e\\\";\\n}\\n.wangeditor-menu-img-credit-card:before {\\n  content: \\\"\\\\e93f\\\";\\n}\\n.wangeditor-menu-img-address-book:before {\\n  content: \\\"\\\\e944\\\";\\n}\\n.wangeditor-menu-img-envelop:before {\\n  content: \\\"\\\\e945\\\";\\n}\\n.wangeditor-menu-img-drawer:before {\\n  content: \\\"\\\\e95c\\\";\\n}\\n.wangeditor-menu-img-download:before {\\n  content: \\\"\\\\e960\\\";\\n}\\n.wangeditor-menu-img-upload:before {\\n  content: \\\"\\\\e961\\\";\\n}\\n.wangeditor-menu-img-lock:before {\\n  content: \\\"\\\\e98f\\\";\\n}\\n.wangeditor-menu-img-unlocked:before {\\n  content: \\\"\\\\e990\\\";\\n}\\n.wangeditor-menu-img-wrench:before {\\n  content: \\\"\\\\e991\\\";\\n}\\n.wangeditor-menu-img-eye:before {\\n  content: \\\"\\\\e9ce\\\";\\n}\\n.wangeditor-menu-img-eye-blocked:before {\\n  content: \\\"\\\\e9d1\\\";\\n}\\n.wangeditor-menu-img-command:before {\\n  content: \\\"\\\\ea4e\\\";\\n}\\n.wangeditor-menu-img-font2:before {\\n  content: \\\"\\\\ea5c\\\";\\n}\\n.wangeditor-menu-img-libreoffice:before {\\n  content: \\\"\\\\eade\\\";\\n}\\n.wangeditor-menu-img-quotes-left:before {\\n  content: \\\"\\\\e977\\\";\\n}\\n.wangeditor-menu-img-strikethrough:before {\\n  content: \\\"\\\\ea65\\\";\\n}\\n.wangeditor-menu-img-desktop:before {\\n  content: \\\"\\\\f108\\\";\\n}\\n.wangeditor-menu-img-tablet:before {\\n  content: \\\"\\\\f10a\\\";\\n}\\n.wangeditor-menu-img-search-plus:before {\\n  content: \\\"\\\\f00e\\\";\\n}\\n.wangeditor-menu-img-search-minus:before {\\n  content: \\\"\\\\f010\\\";\\n}\\n.wangeditor-menu-img-trash-o:before {\\n  content: \\\"\\\\f014\\\";\\n}\\n.wangeditor-menu-img-align-justify:before {\\n  content: \\\"\\\\f039\\\";\\n}\\n.wangeditor-menu-img-arrows-v:before {\\n  content: \\\"\\\\f07d\\\";\\n}\\n.wangeditor-menu-img-sigma2:before {\\n  content: \\\"\\\\ea68\\\";\\n}\\n.wangeditor-menu-img-omega:before {\\n  content: \\\"\\\\e900\\\";\\n}\\n.wangeditor-menu-img-cancel-circle:before {\\n  content: \\\"\\\\e901\\\";\\n}\\n.hljs {\\n  display: block;\\n  overflow-x: auto;\\n  padding: 0.5em;\\n  color: #333;\\n  background: #f8f8f8;\\n  -webkit-text-size-adjust: none;\\n}\\n.hljs-comment,\\n.diff .hljs-header {\\n  color: #998;\\n  font-style: italic;\\n}\\n.hljs-keyword,\\n.css .rule .hljs-keyword,\\n.hljs-winutils,\\n.nginx .hljs-title,\\n.hljs-subst,\\n.hljs-request,\\n.hljs-status {\\n  color: #333;\\n  font-weight: bold;\\n}\\n.hljs-number,\\n.hljs-hexcolor,\\n.ruby .hljs-constant {\\n  color: #008080;\\n}\\n.hljs-string,\\n.hljs-tag .hljs-value,\\n.hljs-doctag,\\n.tex .hljs-formula {\\n  color: #d14;\\n}\\n.hljs-title,\\n.hljs-id,\\n.scss .hljs-preprocessor {\\n  color: #900;\\n  font-weight: bold;\\n}\\n.hljs-list .hljs-keyword,\\n.hljs-subst {\\n  font-weight: normal;\\n}\\n.hljs-class .hljs-title,\\n.hljs-type,\\n.vhdl .hljs-literal,\\n.tex .hljs-command {\\n  color: #458;\\n  font-weight: bold;\\n}\\n.hljs-tag,\\n.hljs-tag .hljs-title,\\n.hljs-rule .hljs-property,\\n.django .hljs-tag .hljs-keyword {\\n  color: #000080;\\n  font-weight: normal;\\n}\\n.hljs-attribute,\\n.hljs-variable,\\n.lisp .hljs-body,\\n.hljs-name {\\n  color: #008080;\\n}\\n.hljs-regexp {\\n  color: #009926;\\n}\\n.hljs-symbol,\\n.ruby .hljs-symbol .hljs-string,\\n.lisp .hljs-keyword,\\n.clojure .hljs-keyword,\\n.scheme .hljs-keyword,\\n.tex .hljs-special,\\n.hljs-prompt {\\n  color: #990073;\\n}\\n.hljs-built_in {\\n  color: #0086b3;\\n}\\n.hljs-preprocessor,\\n.hljs-pragma,\\n.hljs-pi,\\n.hljs-doctype,\\n.hljs-shebang,\\n.hljs-cdata {\\n  color: #999;\\n  font-weight: bold;\\n}\\n.hljs-deletion {\\n  background: #fdd;\\n}\\n.hljs-addition {\\n  background: #dfd;\\n}\\n.diff .hljs-change {\\n  background: #0086b3;\\n}\\n.hljs-chunk {\\n  color: #aaa;\\n}\\n\"],\"sourceRoot\":\"webpack://\"}]);\n\t\n\t// exports\n\n\n/***/ },\n\n/***/ 157:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"static/fonts/icomoon.0a74426.eot\";\n\n/***/ },\n\n/***/ 158:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"static/fonts/icomoon.0a74426.eot\";\n\n/***/ },\n\n/***/ 159:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"static/fonts/icomoon.9f5fd7b.ttf\";\n\n/***/ },\n\n/***/ 160:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"static/fonts/icomoon.7d4ac7d.woff\";\n\n/***/ },\n\n/***/ 161:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"static/img/icomoon.f558046.svg\";\n\n/***/ },\n\n/***/ 162:\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(154);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(4)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!../../../node_modules/.0.25.0@css-loader/index.js?sourceMap!../../../node_modules/.10.3.0@vue-loader/lib/style-rewriter.js?id=data-v-40fe4466!../../../node_modules/.1.0.44@vux-loader/src/style-loader.js!../../../node_modules/.10.3.0@vue-loader/lib/selector.js?type=styles&index=0!./wangeditor.vue\", function() {\n\t\t\t\tvar newContent = require(\"!!../../../node_modules/.0.25.0@css-loader/index.js?sourceMap!../../../node_modules/.10.3.0@vue-loader/lib/style-rewriter.js?id=data-v-40fe4466!../../../node_modules/.1.0.44@vux-loader/src/style-loader.js!../../../node_modules/.10.3.0@vue-loader/lib/selector.js?type=styles&index=0!./wangeditor.vue\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ },\n\n/***/ 165:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\n\t/* styles */\n\t__webpack_require__(162)\n\t\n\tvar Component = __webpack_require__(5)(\n\t  /* script */\n\t  __webpack_require__(195),\n\t  /* template */\n\t  __webpack_require__(167),\n\t  /* scopeId */\n\t  null,\n\t  /* cssModules */\n\t  null\n\t)\n\t\n\tmodule.exports = Component.exports\n\n\n/***/ },\n\n/***/ 167:\n/***/ function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    style: ({\n\t      width: _vm.editorShow_width + 'px',\n\t      backgroundColor: _vm.editorShow_color\n\t    })\n\t  }, [_c('div', {\n\t    style: ({\n\t      height: _vm.editorShow_height + 'px',\n\t      backgroundColor: _vm.editorShow_color\n\t    }),\n\t    attrs: {\n\t      \"id\": \"wangeditor\"\n\t    }\n\t  })])\n\t},staticRenderFns: []}\n\n/***/ },\n\n/***/ 195:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function($) {'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _wangeditor = __webpack_require__(197);\n\t\n\tvar _wangeditor2 = _interopRequireDefault(_wangeditor);\n\t\n\tvar _qiniu = __webpack_require__(196);\n\t\n\tvar _qiniu2 = _interopRequireDefault(_qiniu);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t__webpack_require__(82);\n\texports.default = {\n\t    data: function data() {\n\t        return {\n\t            editor: '',\n\t            content: '',\n\t            updateImageParam: {\n\t                uri: \"http://truesign-app.oss-cn-beijing.aliyuncs.com\",\n\t                param: {\n\t                    type: 'oss',\n\t                    request_uri: 'http://iamsee.com:5001/common/updateimg2ossByClientOneditor?app=o_app'\n\t                },\n\t\n\t                status: 1,\n\t                sys_msg: \"oss\"\n\t            },\n\t            alioss_param: {\n\t                AccessKeyId: '82risUcDiLqqWZky',\n\t                AccessKeySecret: 'gAiFRb4JIBEYsb7J1HarWVqiNf0tCm',\n\t                region: 'oss-cn-beijing.aliyuncs.com',\n\t                bucket: 'truesign-app'\n\t\n\t            }\n\t        };\n\t    },\n\t\n\t    props: {\n\t        editorShow_width: {\n\t            type: String,\n\t            default: '100%',\n\t            required: false\n\t\n\t        },\n\t        editorShow_height: {\n\t            type: String,\n\t            default: '200',\n\t            required: false\n\t\n\t        },\n\t        editorShow_color: {\n\t            type: String,\n\t            default: '#f5f5f5',\n\t            required: false\n\t\n\t        }\n\t\n\t    },\n\t    computed: {},\n\t\n\t    mounted: function mounted() {\n\t        this.editor = new wangEditor('wangeditor');\n\t        this.initEditorConfig();\n\t        this.createEditor();\n\t        $('.wangEditor-container').css('background-color', this.editorShow_color);\n\t        $('.wangEditor-menu-container').css('background-color', this.editorShow_color);\n\t    },\n\t\n\t    methods: {\n\t        initEditorConfig: function initEditorConfig() {\n\t            var vm = this;\n\t            this.editor.config.withCredentials = false;\n\t\n\t            this.editor.config.uploadImgUrl = this.updateImageParam.uri;\n\t\n\t            this.editor.config.uploadParams = this.updateImageParam.param;\n\t            this.editor.config.uploadImgFileName = 'file';\n\t\n\t            this.editor.config.menus = ['source', '|', 'bold', 'underline', 'italic', 'strikethrough', 'eraser', 'forecolor', 'bgcolor', '|', 'quote', 'fontfamily', 'fontsize', 'head', 'unorderlist', 'orderlist', 'alignleft', 'aligncenter', 'alignright', '|', 'link', 'unlink', 'table', 'emotion', '|', 'img', 'video', 'location', 'insertcode', '|', 'undo', 'redo', 'fullscreen'];\n\t            this.editor.config.uploadImgFns.onload = function (resultText, xhr) {\n\t                vm.uploadOnLoad(resultText, xhr);\n\t            };\n\t\n\t            this.editor.onchange = function () {\n\t                vm.editorchange();\n\t            };\n\t        },\n\t        createEditor: function createEditor() {\n\t\n\t            this.editor.create();\n\t        },\n\t        uploadInit: function uploadInit() {\n\t            console.log('uploadInit');\n\t\n\t            var editor = this.editor;\n\t\n\t            var btnId = editor.customUploadBtnId;\n\t\n\t            var containerId = editor.customUploadContainerId;\n\t\n\t            var uploader = _qiniu2.default.uploader();\n\t        },\n\t        uploadOnLoad: function uploadOnLoad(resultText, xhr) {\n\t            resultText = JSON.parse(resultText);\n\t            var file_path = resultText.file_path;\n\t            var originalName = this.editor.uploadImgOriginalName || '';\n\t            this.editor.command(null, 'insertHtml', '<div><img src=\"' + file_path + '\" alt=\"' + originalName + '\" style=\"width:30%;\"/></div>');\n\t        },\n\t        editorchange: function editorchange() {\n\t            var editor_content = {\n\t                text: this.editor.$txt.text(),\n\t                html: this.editor.$txt.html()\n\t            };\n\t            this.$root.eventHub.$emit('editor_content', editor_content);\n\t        },\n\t        formatContent: function formatContent(content) {\n\t            this.content = content;\n\t            this.outputContent();\n\t        },\n\t        outputContent: function outputContent() {\n\t            this.$emit('input', this.content);\n\t        }\n\t    },\n\t    components: {}\n\t};\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ },\n\n/***/ 196:\n/***/ function(module, exports) {\n\n\t/*!\n\t * qiniu-js-sdk v1.0.19\n\t *\n\t * Copyright 2015 by Qiniu\n\t * Released under GPL V2 License.\n\t *\n\t * GitHub: http://github.com/qiniu/js-sdk\n\t *\n\t * Date: 2017-3-15\n\t*/\n\t\n\t/*global plupload ,mOxie*/\n\t/*global ActiveXObject */\n\t/*exported Qiniu */\n\t/*exported QiniuJsSDK */\n\t\n\t;(function( global ){\n\t\n\t/**\n\t * Creates new cookie or removes cookie with negative expiration\n\t * @param  key       The key or identifier for the store\n\t * @param  value     Contents of the store\n\t * @param  exp       Expiration - creation defaults to 30 days\n\t */\n\tfunction createCookie(key, value, exp) {\n\t    var date = new Date();\n\t    date.setTime(date.getTime() + (exp * 24 * 60 * 60 * 1000));\n\t    var expires = \"; expires=\" + date.toGMTString();\n\t    document.cookie = key + \"=\" + value + expires + \"; path=/\";\n\t}\n\t\n\t/**\n\t * Returns contents of cookie\n\t * @param  key       The key or identifier for the store\n\t */\n\tfunction readCookie(key) {\n\t    var nameEQ = key + \"=\";\n\t    var ca = document.cookie.split(';');\n\t    for (var i = 0, max = ca.length; i < max; i++) {\n\t        var c = ca[i];\n\t        while (c.charAt(0) === ' ') {\n\t            c = c.substring(1, c.length);\n\t        }\n\t        if (c.indexOf(nameEQ) === 0) {\n\t            return c.substring(nameEQ.length, c.length);\n\t        }\n\t    }\n\t    return null;\n\t}\n\t\n\t// if current browser is not support localStorage\n\t// use cookie to make a polyfill\n\tif ( !window.localStorage ) {\n\t    window.localStorage = {\n\t        setItem: function (key, value) {\n\t            createCookie(key, value, 30);\n\t        },\n\t        getItem: function (key) {\n\t            return readCookie(key);\n\t        },\n\t        removeItem: function (key) {\n\t            createCookie(key, '', -1);\n\t        }\n\t    };\n\t}\n\t\n\tfunction QiniuJsSDK() {\n\t\n\t    var that = this;\n\t\n\t    /**\n\t     * detect IE version\n\t     * if current browser is not IE\n\t     *     it will return false\n\t     * else\n\t     *     it will return version of current IE browser\n\t     * @return {Number|Boolean} IE version or false\n\t     */\n\t    this.detectIEVersion = function() {\n\t        var v = 4,\n\t            div = document.createElement('div'),\n\t            all = div.getElementsByTagName('i');\n\t        while (\n\t            div.innerHTML = '<!--[if gt IE ' + v + ']><i></i><![endif]-->',\n\t            all[0]\n\t        ) {\n\t            v++;\n\t        }\n\t        return v > 4 ? v : false;\n\t    };\n\t\n\t    var logger = {\n\t        MUTE: 0,\n\t        FATA: 1,\n\t        ERROR: 2,\n\t        WARN: 3,\n\t        INFO: 4,\n\t        DEBUG: 5,\n\t        TRACE: 6,\n\t        level: 0\n\t    };\n\t\n\t    function log(type, args){\n\t        var header = \"[qiniu-js-sdk][\"+type+\"]\";\n\t        var msg = header;\n\t        for (var i = 0; i < args.length; i++) {\n\t            if (typeof args[i] === \"string\") {\n\t                msg += \" \" + args[i];\n\t            } else {\n\t                msg += \" \" + that.stringifyJSON(args[i]);\n\t            }\n\t        }\n\t        if (that.detectIEVersion()) {\n\t            // http://stackoverflow.com/questions/5538972/console-log-apply-not-working-in-ie9\n\t            //var log = Function.prototype.bind.call(console.log, console);\n\t            //log.apply(console, args);\n\t            console.log(msg);\n\t        }else{\n\t            args.unshift(header);\n\t            console.log.apply(console, args);\n\t        }\n\t        if (document.getElementById('qiniu-js-sdk-log')) {\n\t            document.getElementById('qiniu-js-sdk-log').innerHTML += '<p>'+msg+'</p>';\n\t        }\n\t    }\n\t\n\t    function makeLogFunc(code){\n\t        var func = code.toLowerCase();\n\t        logger[func] = function(){\n\t            // logger[func].history = logger[func].history || [];\n\t            // logger[func].history.push(arguments);\n\t            if(window.console && window.console.log && logger.level>=logger[code]){\n\t                var args = Array.prototype.slice.call(arguments);\n\t                log(func,args);\n\t            }\n\t        };\n\t    }\n\t\n\t    for (var property in logger){\n\t        if (logger.hasOwnProperty(property) && (typeof logger[property]) === \"number\" && !logger.hasOwnProperty(property.toLowerCase())) {\n\t            makeLogFunc(property);\n\t        }\n\t    }\n\t\n\t\n\t    var qiniuUploadUrl;\n\t    if (window.location.protocol === 'https:') {\n\t        qiniuUploadUrl = 'https://up.qbox.me';\n\t    } else {\n\t        qiniuUploadUrl = 'http://upload.qiniu.com';\n\t    }\n\t\n\t    /**\n\t     * qiniu upload urls\n\t     * 'qiniuUploadUrls' is used to change target when current url is not avaliable\n\t     * @type {Array}\n\t     */\n\t    var qiniuUploadUrls = [\n\t        \"http://upload.qiniu.com\",\n\t        \"http://up.qiniu.com\"\n\t    ];\n\t\n\t    var qiniuUpHosts = {\n\t       \"http\": [\n\t           \"http://upload.qiniu.com\",\n\t           \"http://up.qiniu.com\"\n\t       ],\n\t       \"https\": [\n\t           \"https://up.qbox.me\"\n\t       ]\n\t    };\n\t\n\t    var changeUrlTimes = 0;\n\t\n\t    /**\n\t     * reset upload url\n\t     * if current page protocal is https\n\t     *     it will always return 'https://up.qbox.me'\n\t     * else\n\t     *     it will set 'qiniuUploadUrl' value with 'qiniuUploadUrls' looply\n\t     */\n\t    this.resetUploadUrl = function(){\n\t\tvar hosts = window.location.protocol === 'https:' ? qiniuUpHosts.https : qiniuUpHosts.http;\n\t\tvar i = changeUrlTimes % hosts.length;\n\t\tqiniuUploadUrl = hosts[i];\n\t\tchangeUrlTimes++;\n\t\tlogger.debug('resetUploadUrl: '+qiniuUploadUrl);\n\t    };\n\t\n\t    // this.resetUploadUrl();\n\t\n\t\n\t    /**\n\t     * is image\n\t     * @param  {String}  url of a file\n\t     * @return {Boolean} file is a image or not\n\t     */\n\t    this.isImage = function(url) {\n\t        url = url.split(/[?#]/)[0];\n\t        return (/\\.(png|jpg|jpeg|gif|bmp)$/i).test(url);\n\t    };\n\t\n\t    /**\n\t     * get file extension\n\t     * @param  {String} filename\n\t     * @return {String} file extension\n\t     * @example\n\t     *     input: test.txt\n\t     *     output: txt\n\t     */\n\t    this.getFileExtension = function(filename) {\n\t        var tempArr = filename.split(\".\");\n\t        var ext;\n\t        if (tempArr.length === 1 || (tempArr[0] === \"\" && tempArr.length === 2)) {\n\t            ext = \"\";\n\t        } else {\n\t            ext = tempArr.pop().toLowerCase(); //get the extension and make it lower-case\n\t        }\n\t        return ext;\n\t    };\n\t\n\t    /**\n\t     * encode string by utf8\n\t     * @param  {String} string to encode\n\t     * @return {String} encoded string\n\t     */\n\t    this.utf8_encode = function(argString) {\n\t        // http://kevin.vanzonneveld.net\n\t        // +   original by: Webtoolkit.info (http://www.webtoolkit.info/)\n\t        // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t        // +   improved by: sowberry\n\t        // +    tweaked by: Jack\n\t        // +   bugfixed by: Onno Marsman\n\t        // +   improved by: Yves Sucaet\n\t        // +   bugfixed by: Onno Marsman\n\t        // +   bugfixed by: Ulrich\n\t        // +   bugfixed by: Rafal Kukawski\n\t        // +   improved by: kirilloid\n\t        // +   bugfixed by: kirilloid\n\t        // *     example 1: this.utf8_encode('Kevin van Zonneveld');\n\t        // *     returns 1: 'Kevin van Zonneveld'\n\t\n\t        if (argString === null || typeof argString === 'undefined') {\n\t            return '';\n\t        }\n\t\n\t        var string = (argString + ''); // .replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n\t        var utftext = '',\n\t            start, end, stringl = 0;\n\t\n\t        start = end = 0;\n\t        stringl = string.length;\n\t        for (var n = 0; n < stringl; n++) {\n\t            var c1 = string.charCodeAt(n);\n\t            var enc = null;\n\t\n\t            if (c1 < 128) {\n\t                end++;\n\t            } else if (c1 > 127 && c1 < 2048) {\n\t                enc = String.fromCharCode(\n\t                    (c1 >> 6) | 192, (c1 & 63) | 128\n\t                );\n\t            } else if (c1 & 0xF800 ^ 0xD800 > 0) {\n\t                enc = String.fromCharCode(\n\t                    (c1 >> 12) | 224, ((c1 >> 6) & 63) | 128, (c1 & 63) | 128\n\t                );\n\t            } else { // surrogate pairs\n\t                if (c1 & 0xFC00 ^ 0xD800 > 0) {\n\t                    throw new RangeError('Unmatched trail surrogate at ' + n);\n\t                }\n\t                var c2 = string.charCodeAt(++n);\n\t                if (c2 & 0xFC00 ^ 0xDC00 > 0) {\n\t                    throw new RangeError('Unmatched lead surrogate at ' + (n - 1));\n\t                }\n\t                c1 = ((c1 & 0x3FF) << 10) + (c2 & 0x3FF) + 0x10000;\n\t                enc = String.fromCharCode(\n\t                    (c1 >> 18) | 240, ((c1 >> 12) & 63) | 128, ((c1 >> 6) & 63) | 128, (c1 & 63) | 128\n\t                );\n\t            }\n\t            if (enc !== null) {\n\t                if (end > start) {\n\t                    utftext += string.slice(start, end);\n\t                }\n\t                utftext += enc;\n\t                start = end = n + 1;\n\t            }\n\t        }\n\t\n\t        if (end > start) {\n\t            utftext += string.slice(start, stringl);\n\t        }\n\t\n\t        return utftext;\n\t    };\n\t\n\t    this.base64_decode = function (data) {\n\t        // http://kevin.vanzonneveld.net\n\t        // +   original by: Tyler Akins (http://rumkin.com)\n\t        // +   improved by: Thunder.m\n\t        // +      input by: Aman Gupta\n\t        // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t        // +   bugfixed by: Onno Marsman\n\t        // +   bugfixed by: Pellentesque Malesuada\n\t        // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t        // +      input by: Brett Zamir (http://brett-zamir.me)\n\t        // +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t        // *     example 1: base64_decode('S2V2aW4gdmFuIFpvbm5ldmVsZA==');\n\t        // *     returns 1: 'Kevin van Zonneveld'\n\t        // mozilla has this native\n\t        // - but breaks in 2.0.0.12!\n\t        //if (typeof this.window['atob'] == 'function') {\n\t        //    return atob(data);\n\t        //}\n\t        var b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\t        var o1, o2, o3, h1, h2, h3, h4, bits, i = 0,\n\t        ac = 0,\n\t        dec = \"\",\n\t        tmp_arr = [];\n\t\n\t        if (!data) {\n\t            return data;\n\t        }\n\t\n\t        data += '';\n\t\n\t        do { // unpack four hexets into three octets using index points in b64\n\t            h1 = b64.indexOf(data.charAt(i++));\n\t            h2 = b64.indexOf(data.charAt(i++));\n\t            h3 = b64.indexOf(data.charAt(i++));\n\t            h4 = b64.indexOf(data.charAt(i++));\n\t\n\t            bits = h1 << 18 | h2 << 12 | h3 << 6 | h4;\n\t\n\t            o1 = bits >> 16 & 0xff;\n\t            o2 = bits >> 8 & 0xff;\n\t            o3 = bits & 0xff;\n\t\n\t            if (h3 === 64) {\n\t                tmp_arr[ac++] = String.fromCharCode(o1);\n\t            } else if (h4 === 64) {\n\t                tmp_arr[ac++] = String.fromCharCode(o1, o2);\n\t            } else {\n\t                tmp_arr[ac++] = String.fromCharCode(o1, o2, o3);\n\t            }\n\t        } while (i < data.length);\n\t\n\t        dec = tmp_arr.join('');\n\t\n\t        return dec;\n\t    };\n\t\n\t    /**\n\t     * encode data by base64\n\t     * @param  {String} data to encode\n\t     * @return {String} encoded data\n\t     */\n\t    this.base64_encode = function(data) {\n\t        // http://kevin.vanzonneveld.net\n\t        // +   original by: Tyler Akins (http://rumkin.com)\n\t        // +   improved by: Bayron Guevara\n\t        // +   improved by: Thunder.m\n\t        // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t        // +   bugfixed by: Pellentesque Malesuada\n\t        // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t        // -    depends on: this.utf8_encode\n\t        // *     example 1: this.base64_encode('Kevin van Zonneveld');\n\t        // *     returns 1: 'S2V2aW4gdmFuIFpvbm5ldmVsZA=='\n\t        // mozilla has this native\n\t        // - but breaks in 2.0.0.12!\n\t        //if (typeof this.window['atob'] == 'function') {\n\t        //    return atob(data);\n\t        //}\n\t        var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\t        var o1, o2, o3, h1, h2, h3, h4, bits, i = 0,\n\t            ac = 0,\n\t            enc = '',\n\t            tmp_arr = [];\n\t\n\t        if (!data) {\n\t            return data;\n\t        }\n\t\n\t        data = this.utf8_encode(data + '');\n\t\n\t        do { // pack three octets into four hexets\n\t            o1 = data.charCodeAt(i++);\n\t            o2 = data.charCodeAt(i++);\n\t            o3 = data.charCodeAt(i++);\n\t\n\t            bits = o1 << 16 | o2 << 8 | o3;\n\t\n\t            h1 = bits >> 18 & 0x3f;\n\t            h2 = bits >> 12 & 0x3f;\n\t            h3 = bits >> 6 & 0x3f;\n\t            h4 = bits & 0x3f;\n\t\n\t            // use hexets to index into b64, and append result to encoded string\n\t            tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\n\t        } while (i < data.length);\n\t\n\t        enc = tmp_arr.join('');\n\t\n\t        switch (data.length % 3) {\n\t            case 1:\n\t                enc = enc.slice(0, -2) + '==';\n\t                break;\n\t            case 2:\n\t                enc = enc.slice(0, -1) + '=';\n\t                break;\n\t        }\n\t\n\t        return enc;\n\t    };\n\t\n\t    /**\n\t     * encode string in url by base64\n\t     * @param {String} string in url\n\t     * @return {String} encoded string\n\t     */\n\t    this.URLSafeBase64Encode = function(v) {\n\t        v = this.base64_encode(v);\n\t        return v.replace(/\\//g, '_').replace(/\\+/g, '-');\n\t    };\n\t\n\t    this.URLSafeBase64Decode = function(v) {\n\t        v = v.replace(/_/g, '/').replace(/-/g, '+');\n\t        return this.base64_decode(v);\n\t    };\n\t\n\t    // TODO: use mOxie\n\t    /**\n\t     * craete object used to AJAX\n\t     * @return {Object}\n\t     */\n\t    this.createAjax = function(argument) {\n\t        var xmlhttp = {};\n\t        if (window.XMLHttpRequest) {\n\t            xmlhttp = new XMLHttpRequest();\n\t        } else {\n\t            xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\n\t        }\n\t        return xmlhttp;\n\t    };\n\t\n\t    // TODO: enhance IE compatibility\n\t    /**\n\t     * parse json string to javascript object\n\t     * @param  {String} json string\n\t     * @return {Object} object\n\t     */\n\t    this.parseJSON = function(data) {\n\t        // Attempt to parse using the native JSON parser first\n\t        if (window.JSON && window.JSON.parse) {\n\t            return window.JSON.parse(data);\n\t        }\n\t\n\t        //var rx_one = /^[\\],:{}\\s]*$/,\n\t        //    rx_two = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g,\n\t        //    rx_three = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g,\n\t        //    rx_four = /(?:^|:|,)(?:\\s*\\[)+/g,\n\t        var    rx_dangerous = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n\t\n\t        //var json;\n\t\n\t        var text = String(data);\n\t        rx_dangerous.lastIndex = 0;\n\t        if(rx_dangerous.test(text)){\n\t            text = text.replace(rx_dangerous, function(a){\n\t               return '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n\t            });\n\t        }\n\t\n\t        // todo 使用一下判断,增加安全性\n\t        //if (\n\t        //    rx_one.test(\n\t        //        text\n\t        //            .replace(rx_two, '@')\n\t        //            .replace(rx_three, ']')\n\t        //            .replace(rx_four, '')\n\t        //    )\n\t        //) {\n\t        //    return eval('(' + text + ')');\n\t        //}\n\t\n\t        return eval('('+text+')');\n\t    };\n\t\n\t    /**\n\t     * parse javascript object to json string\n\t     * @param  {Object} object\n\t     * @return {String} json string\n\t     */\n\t    this.stringifyJSON = function(obj) {\n\t        // Attempt to parse using the native JSON parser first\n\t        if (window.JSON && window.JSON.stringify) {\n\t            return window.JSON.stringify(obj);\n\t        }\n\t        switch (typeof (obj)) {\n\t            case 'string':\n\t                return '\"' + obj.replace(/([\"\\\\])/g, '\\\\$1') + '\"';\n\t            case 'array':\n\t                return '[' + obj.map(that.stringifyJSON).join(',') + ']';\n\t            case 'object':\n\t                if (obj instanceof Array) {\n\t                    var strArr = [];\n\t                    var len = obj.length;\n\t                    for (var i = 0; i < len; i++) {\n\t                        strArr.push(that.stringifyJSON(obj[i]));\n\t                    }\n\t                    return '[' + strArr.join(',') + ']';\n\t                } else if (obj === null) {\n\t                    return 'null';\n\t                } else {\n\t                    var string = [];\n\t                    for (var property in obj) {\n\t                        if (obj.hasOwnProperty(property)) {\n\t                            string.push(that.stringifyJSON(property) + ':' + that.stringifyJSON(obj[property]));\n\t                        }\n\t                    }\n\t                    return '{' + string.join(',') + '}';\n\t                }\n\t                break;\n\t            case 'number':\n\t                return obj;\n\t            case false:\n\t                return obj;\n\t            case 'boolean':\n\t                return obj;\n\t        }\n\t    };\n\t\n\t    /**\n\t     * trim space beside text\n\t     * @param  {String} untrimed string\n\t     * @return {String} trimed string\n\t     */\n\t    this.trim = function(text) {\n\t        return text === null ? \"\" : text.replace(/^\\s+|\\s+$/g, '');\n\t    };\n\t\n\t    /**\n\t     * create a uploader by QiniuJsSDK\n\t     * @param  {object} options to create a new uploader\n\t     * @return {object} uploader\n\t     */\n\t    this.uploader = function(op) {\n\t\n\t        /********** inner function define start **********/\n\t\n\t        // according the different condition to reset chunk size\n\t        // and the upload strategy according with the chunk size\n\t        // when chunk size is zero will cause to direct upload\n\t        // see the statement binded on 'BeforeUpload' event\n\t        var reset_chunk_size = function() {\n\t            var ie = that.detectIEVersion();\n\t            var BLOCK_BITS, MAX_CHUNK_SIZE, chunk_size;\n\t            // case Safari 5、Windows 7、iOS 7 set isSpecialSafari to true\n\t            var isSpecialSafari = (mOxie.Env.browser === \"Safari\" && mOxie.Env.version <= 5 && mOxie.Env.os === \"Windows\" && mOxie.Env.osVersion === \"7\") || (mOxie.Env.browser === \"Safari\" && mOxie.Env.os === \"iOS\" && mOxie.Env.osVersion === \"7\");\n\t            // case IE 9-，chunk_size is not empty and flash is included in runtimes\n\t            // set op.chunk_size to zero\n\t            //if (ie && ie < 9 && op.chunk_size && op.runtimes.indexOf('flash') >= 0) {\n\t            if (ie && ie < 9 && op.chunk_size && op.runtimes.indexOf('flash') >= 0) {\n\t                //  link: http://www.plupload.com/docs/Frequently-Asked-Questions#when-to-use-chunking-and-when-not\n\t                //  when plupload chunk_size setting is't null ,it cause bug in ie8/9  which runs  flash runtimes (not support html5) .\n\t                op.chunk_size = 0;\n\t            } else if (isSpecialSafari) {\n\t                // win7 safari / iOS7 safari have bug when in chunk upload mode\n\t                // reset chunk_size to 0\n\t                // disable chunk in special version safari\n\t                op.chunk_size = 0;\n\t            } else {\n\t                BLOCK_BITS = 20;\n\t                MAX_CHUNK_SIZE = 4 << BLOCK_BITS; //4M\n\t\n\t                chunk_size = plupload.parseSize(op.chunk_size);\n\t                if (chunk_size > MAX_CHUNK_SIZE) {\n\t                    op.chunk_size = MAX_CHUNK_SIZE;\n\t                }\n\t                // qiniu service  max_chunk_size is 4m\n\t                // reset chunk_size to max_chunk_size(4m) when chunk_size > 4m\n\t            }\n\t            // if op.chunk_size set 0 will be cause to direct upload\n\t        };\n\t\n\t        var getHosts = function(hosts) {\n\t            var result = [];\n\t            for (var i = 0; i < hosts.length; i++) {\n\t                var host = hosts[i];\n\t                if (host.indexOf('-H') === 0) {\n\t                    result.push(host.split(' ')[2]);\n\t                } else {\n\t                    result.push(host);\n\t                }\n\t            }\n\t            return result;\n\t        };\n\t\n\t        var getPutPolicy = function (uptoken) {\n\t            var segments = uptoken.split(\":\");\n\t            var ak = segments[0];\n\t            var putPolicy = that.parseJSON(that.URLSafeBase64Decode(segments[2]));\n\t            putPolicy.ak = ak;\n\t            if (putPolicy.scope.indexOf(\":\") >= 0) {\n\t                putPolicy.bucket = putPolicy.scope.split(\":\")[0];\n\t                putPolicy.key = putPolicy.scope.split(\":\")[1];\n\t            } else {\n\t                putPolicy.bucket = putPolicy.scope;\n\t            }\n\t            return putPolicy;\n\t        };\n\t\n\t        var getUpHosts = function(uptoken) {\n\t            var putPolicy = getPutPolicy(uptoken);\n\t            // var uphosts_url = \"//uc.qbox.me/v1/query?ak=\"+ak+\"&bucket=\"+putPolicy.scope;\n\t            // IE 9- is not support protocal relative url\n\t            var uphosts_url = window.location.protocol + \"//uc.qbox.me/v1/query?ak=\" + putPolicy.ak + \"&bucket=\" + putPolicy.bucket;\n\t            logger.debug(\"putPolicy: \", putPolicy);\n\t            logger.debug(\"get uphosts from: \", uphosts_url);\n\t            var ie = that.detectIEVersion();\n\t            var ajax;\n\t            if (ie && ie <= 9) {\n\t                ajax = new mOxie.XMLHttpRequest();\n\t                mOxie.Env.swf_url = op.flash_swf_url;\n\t            }else{\n\t                ajax = that.createAjax();\n\t            }\n\t            ajax.open('GET', uphosts_url, false);\n\t            var onreadystatechange = function(){\n\t                logger.debug(\"ajax.readyState: \", ajax.readyState);\n\t                if (ajax.readyState === 4) {\n\t                    logger.debug(\"ajax.status: \", ajax.status);\n\t                    if (ajax.status < 400) {\n\t                        var res = that.parseJSON(ajax.responseText);\n\t                        qiniuUpHosts.http = getHosts(res.http.up);\n\t                        qiniuUpHosts.https = getHosts(res.https.up);\n\t                        logger.debug(\"get new uphosts: \", qiniuUpHosts);\n\t                        that.resetUploadUrl();\n\t                    } else {\n\t                        logger.error(\"get uphosts error: \", ajax.responseText);\n\t                    }\n\t                }\n\t            };\n\t            if (ie && ie <= 9) {\n\t                ajax.bind('readystatechange', onreadystatechange);\n\t            }else{\n\t                ajax.onreadystatechange = onreadystatechange;\n\t            }\n\t            ajax.send();\n\t            // ajax.send();\n\t            // if (ajax.status < 400) {\n\t            //     var res = that.parseJSON(ajax.responseText);\n\t            //     qiniuUpHosts.http = getHosts(res.http.up);\n\t            //     qiniuUpHosts.https = getHosts(res.https.up);\n\t            //     logger.debug(\"get new uphosts: \", qiniuUpHosts);\n\t            //     that.resetUploadUrl();\n\t            // } else {\n\t            //     logger.error(\"get uphosts error: \", ajax.responseText);\n\t            // }\n\t            return;\n\t        };\n\t\n\t        var getUptoken = function(file) {\n\t            if (!that.token || (op.uptoken_url && that.tokenInfo.isExpired())) {\n\t                return getNewUpToken(file);\n\t            } else {\n\t                return that.token;\n\t            }\n\t        };\n\t\n\t        // getNewUptoken maybe called at Init Event or BeforeUpload Event\n\t        // case Init Event, the file param of getUptken will be set a null value\n\t        // if op.uptoken has value, set uptoken with op.uptoken\n\t        // else if op.uptoken_url has value, set uptoken from op.uptoken_url\n\t        // else if op.uptoken_func has value, set uptoken by result of op.uptoken_func\n\t        var getNewUpToken = function(file) {\n\t            if (op.uptoken) {\n\t                that.token = op.uptoken;\n\t            } else if (op.uptoken_url) {\n\t                logger.debug(\"get uptoken from: \", that.uptoken_url);\n\t                // TODO: use mOxie\n\t                var ajax = that.createAjax();\n\t                ajax.open('GET', that.uptoken_url, false);\n\t                ajax.setRequestHeader(\"If-Modified-Since\", \"0\");\n\t                // ajax.onreadystatechange = function() {\n\t                //     if (ajax.readyState === 4 && ajax.status === 200) {\n\t                //         var res = that.parseJSON(ajax.responseText);\n\t                //         that.token = res.uptoken;\n\t                //     }\n\t                // };\n\t                ajax.send();\n\t                if (ajax.status === 200) {\n\t                    var res = that.parseJSON(ajax.responseText);\n\t                    that.token = res.uptoken;\n\t                    var segments = that.token.split(\":\");\n\t                    var putPolicy = that.parseJSON(that.URLSafeBase64Decode(segments[2]));\n\t                    if (!that.tokenMap) {\n\t                        that.tokenMap = {};\n\t                    }\n\t                    var getTimestamp = function(time) {\n\t                        return Math.ceil(time.getTime()/1000);\n\t                    };\n\t                    var serverTime = getTimestamp(new Date(ajax.getResponseHeader(\"date\")));\n\t                    var clientTime = getTimestamp(new Date());\n\t                    that.tokenInfo = {\n\t                        serverDelay: clientTime - serverTime,\n\t                        deadline: putPolicy.deadline,\n\t                        isExpired: function() {\n\t                            var leftTime = this.deadline - getTimestamp(new Date()) + this.serverDelay;\n\t                            return leftTime < 600;\n\t                        }\n\t                    };\n\t                    logger.debug(\"get new uptoken: \", that.token);\n\t                    logger.debug(\"get token info: \", that.tokenInfo);\n\t                } else {\n\t                    logger.error(\"get uptoken error: \", ajax.responseText);\n\t                }\n\t            } else if (op.uptoken_func) {\n\t                logger.debug(\"get uptoken from uptoken_func\");\n\t                that.token = op.uptoken_func(file);\n\t                logger.debug(\"get new uptoken: \", that.token);\n\t            } else {\n\t                logger.error(\"one of [uptoken, uptoken_url, uptoken_func] settings in options is required!\");\n\t            }\n\t            if (that.token) {\n\t                getUpHosts(that.token);\n\t            }\n\t            return that.token;\n\t        };\n\t\n\t        // get file key according with the user passed options\n\t        var getFileKey = function(up, file, func) {\n\t            // WARNING\n\t            // When you set the key in putPolicy by \"scope\": \"bucket:key\"\n\t            // You should understand the risk of override a file in the bucket\n\t            // So the code below that automatically get key from uptoken has been commented\n\t            // var putPolicy = getPutPolicy(that.token)\n\t            // if (putPolicy.key) {\n\t            //     logger.debug(\"key is defined in putPolicy.scope: \", putPolicy.key)\n\t            //     return putPolicy.key\n\t            // }\n\t            var key = '',\n\t                unique_names = false;\n\t            if (!op.save_key) {\n\t                unique_names = up.getOption && up.getOption('unique_names');\n\t                unique_names = unique_names || (up.settings && up.settings.unique_names);\n\t                if (unique_names) {\n\t                    var ext = that.getFileExtension(file.name);\n\t                    key = ext ? file.id + '.' + ext : file.id;\n\t                } else if (typeof func === 'function') {\n\t                    key = func(up, file);\n\t                } else {\n\t                    key = file.name;\n\t                }\n\t            }\n\t            return key;\n\t        };\n\t\n\t        /********** inner function define end **********/\n\t\n\t        if (op.log_level) {\n\t            logger.level = op.log_level;\n\t        }\n\t\n\t        if (!op.domain) {\n\t            throw 'domain setting in options is required!';\n\t        }\n\t\n\t        if (!op.browse_button) {\n\t            throw 'browse_button setting in options is required!';\n\t        }\n\t\n\t        if (!op.uptoken && !op.uptoken_url && !op.uptoken_func) {\n\t            throw 'one of [uptoken, uptoken_url, uptoken_func] settings in options is required!';\n\t        }\n\t\n\t        logger.debug(\"init uploader start\");\n\t\n\t        logger.debug(\"environment: \", mOxie.Env);\n\t\n\t        logger.debug(\"userAgent: \", navigator.userAgent);\n\t\n\t        var option = {};\n\t\n\t        // hold the handler from user passed options\n\t        var _Error_Handler = op.init && op.init.Error;\n\t        var _FileUploaded_Handler = op.init && op.init.FileUploaded;\n\t\n\t        // replace the handler for intercept\n\t        op.init.Error = function() {};\n\t        op.init.FileUploaded = function() {};\n\t\n\t        that.uptoken_url = op.uptoken_url;\n\t        that.token = '';\n\t        that.key_handler = typeof op.init.Key === 'function' ? op.init.Key : '';\n\t        this.domain = op.domain;\n\t        // TODO: ctx is global in scope of a uploader instance\n\t        // this maybe cause error\n\t        var ctx = '';\n\t        var speedCalInfo = {\n\t            isResumeUpload: false,\n\t            resumeFilesize: 0,\n\t            startTime: '',\n\t            currentTime: ''\n\t        };\n\t\n\t        reset_chunk_size();\n\t        logger.debug(\"invoke reset_chunk_size()\");\n\t        logger.debug(\"op.chunk_size: \", op.chunk_size);\n\t\n\t        var defaultSetting = {\n\t            url: qiniuUploadUrl,\n\t            multipart_params: {\n\t                token: ''\n\t            }\n\t        };\n\t        var ie = that.detectIEVersion();\n\t        // case IE 9-\n\t        // add accept in multipart params\n\t        if (ie && ie <= 9) {\n\t            defaultSetting.multipart_params.accept = 'text/plain; charset=utf-8';\n\t            logger.debug(\"add accept text/plain in multipart params\");\n\t        }\n\t\n\t        // compose options with user passed options and default setting\n\t        plupload.extend(option, op, defaultSetting);\n\t\n\t        logger.debug(\"option: \", option);\n\t\n\t        // create a new uploader with composed options\n\t        var uploader = new plupload.Uploader(option);\n\t\n\t        logger.debug(\"new plupload.Uploader(option)\");\n\t\n\t        // bind getNewUpToken to 'Init' event\n\t        uploader.bind('Init', function(up, params) {\n\t            logger.debug(\"Init event activated\");\n\t            // if op.get_new_uptoken is not true\n\t            //      invoke getNewUptoken when uploader init\n\t            // else\n\t            //      getNewUptoken everytime before a new file upload\n\t            if(!op.get_new_uptoken){\n\t                getNewUpToken(null);\n\t            }\n\t            //getNewUpToken(null);\n\t        });\n\t\n\t        logger.debug(\"bind Init event\");\n\t\n\t        // bind 'FilesAdded' event\n\t        // when file be added and auto_start has set value\n\t        // uploader will auto start upload the file\n\t        uploader.bind('FilesAdded', function(up, files) {\n\t            logger.debug(\"FilesAdded event activated\");\n\t            var auto_start = up.getOption && up.getOption('auto_start');\n\t            auto_start = auto_start || (up.settings && up.settings.auto_start);\n\t            logger.debug(\"auto_start: \", auto_start);\n\t            logger.debug(\"files: \", files);\n\t\n\t            // detect is iOS\n\t            var is_ios = function (){\n\t                if(mOxie.Env.OS.toLowerCase()===\"ios\") {\n\t                    return true;\n\t                } else {\n\t                    return false;\n\t                }\n\t            };\n\t\n\t            // if current env os is iOS change file name to [time].[ext]\n\t            if (is_ios()) {\n\t                for (var i = 0; i < files.length; i++) {\n\t                    var file = files[i];\n\t                    var ext = that.getFileExtension(file.name);\n\t                    file.name = file.id + \".\" + ext;\n\t                }\n\t            }\n\t\n\t            if (auto_start) {\n\t                setTimeout(function(){\n\t                    up.start();\n\t                    logger.debug(\"invoke up.start()\");\n\t                }, 0);\n\t                // up.start();\n\t                // plupload.each(files, function(i, file) {\n\t                //     up.start();\n\t                //     logger.debug(\"invoke up.start()\")\n\t                //     logger.debug(\"file: \", file);\n\t                // });\n\t            }\n\t            up.refresh(); // Reposition Flash/Silverlight\n\t        });\n\t\n\t        logger.debug(\"bind FilesAdded event\");\n\t\n\t        // bind 'BeforeUpload' event\n\t        // intercept the process of upload\n\t        // - prepare uptoken\n\t        // - according the chunk size to make differnt upload strategy\n\t        // - resume upload with the last breakpoint of file\n\t        uploader.bind('BeforeUpload', function(up, file) {\n\t            logger.debug(\"BeforeUpload event activated\");\n\t            // add a key named speed for file object\n\t            file.speed = file.speed || 0;\n\t            ctx = '';\n\t\n\t            if(op.get_new_uptoken){\n\t                getNewUpToken(file);\n\t            }\n\t\n\t            var directUpload = function(up, file, func) {\n\t                speedCalInfo.startTime = new Date().getTime();\n\t                var multipart_params_obj;\n\t                if (op.save_key) {\n\t                    multipart_params_obj = {\n\t                        'token': that.token\n\t                    };\n\t                } else {\n\t                    multipart_params_obj = {\n\t                        'key': getFileKey(up, file, func),\n\t                        'token': that.token\n\t                    };\n\t                }\n\t                var ie = that.detectIEVersion();\n\t                // case IE 9-\n\t                // add accept in multipart params\n\t                if (ie && ie <= 9) {\n\t                    multipart_params_obj.accept = 'text/plain; charset=utf-8';\n\t                    logger.debug(\"add accept text/plain in multipart params\");\n\t                }\n\t\n\t                logger.debug(\"directUpload multipart_params_obj: \", multipart_params_obj);\n\t\n\t                var x_vars = op.x_vars;\n\t                if (x_vars !== undefined && typeof x_vars === 'object') {\n\t                    for (var x_key in x_vars) {\n\t                        if (x_vars.hasOwnProperty(x_key)) {\n\t                            if (typeof x_vars[x_key] === 'function') {\n\t                                multipart_params_obj['x:' + x_key] = x_vars[x_key](up, file);\n\t                            } else if (typeof x_vars[x_key] !== 'object') {\n\t                                multipart_params_obj['x:' + x_key] = x_vars[x_key];\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t\n\t                up.setOption({\n\t                    'url': qiniuUploadUrl,\n\t                    'multipart': true,\n\t                    'chunk_size': is_android_weixin_or_qq() ? op.max_file_size : undefined,\n\t                    'multipart_params': multipart_params_obj\n\t                });\n\t            };\n\t\n\t            // detect is weixin or qq inner browser\n\t            var is_android_weixin_or_qq = function (){\n\t                var ua = navigator.userAgent.toLowerCase();\n\t                if((ua.match(/MicroMessenger/i) || mOxie.Env.browser === \"QQBrowser\" || ua.match(/V1_AND_SQ/i)) && mOxie.Env.OS.toLowerCase()===\"android\") {\n\t                    return true;\n\t                } else {\n\t                    return false;\n\t                }\n\t            };\n\t\n\t            var chunk_size = up.getOption && up.getOption('chunk_size');\n\t            chunk_size = chunk_size || (up.settings && up.settings.chunk_size);\n\t\n\t            logger.debug(\"uploader.runtime: \",uploader.runtime);\n\t            logger.debug(\"chunk_size: \",chunk_size);\n\t\n\t            // TODO: flash support chunk upload\n\t            if ((uploader.runtime === 'html5' || uploader.runtime === 'flash') && chunk_size) {\n\t                if (file.size < chunk_size || is_android_weixin_or_qq()) {\n\t                    logger.debug(\"directUpload because file.size < chunk_size || is_android_weixin_or_qq()\");\n\t                    // direct upload if file size is less then the chunk size\n\t                    directUpload(up, file, that.key_handler);\n\t                } else {\n\t                    // TODO: need a polifill to make it work in IE 9-\n\t                    // ISSUE: if file.name is existed in localStorage\n\t                    // but not the same file maybe cause error\n\t                    var localFileInfo = localStorage.getItem(file.name);\n\t                    var blockSize = chunk_size;\n\t                    if (localFileInfo) {\n\t                        // TODO: although only the html5 runtime will enter this statement\n\t                        // but need uniform way to make convertion between string and json\n\t                        localFileInfo = that.parseJSON(localFileInfo);\n\t                        var now = (new Date()).getTime();\n\t                        var before = localFileInfo.time || 0;\n\t                        var aDay = 24 * 60 * 60 * 1000; //  milliseconds of one day\n\t                        // if the last upload time is within one day\n\t                        //      will upload continuously follow the last breakpoint\n\t                        // else\n\t                        //      will reupload entire file\n\t                        if (now - before < aDay) {\n\t\n\t                            if (localFileInfo.percent !== 100) {\n\t                                if (file.size === localFileInfo.total) {\n\t                                    // TODO: if file.name and file.size is the same\n\t                                    // but not the same file will cause error\n\t                                    file.percent = localFileInfo.percent;\n\t                                    file.loaded = localFileInfo.offset;\n\t                                    ctx = localFileInfo.ctx;\n\t\n\t                                    // set speed info\n\t                                    speedCalInfo.isResumeUpload = true;\n\t                                    speedCalInfo.resumeFilesize = localFileInfo.offset;\n\t\n\t                                    // set block size\n\t                                    if (localFileInfo.offset + blockSize > file.size) {\n\t                                        blockSize = file.size - localFileInfo.offset;\n\t                                    }\n\t                                } else {\n\t                                    // remove file info when file.size is conflict with file info\n\t                                    localStorage.removeItem(file.name);\n\t                                }\n\t\n\t                            } else {\n\t                                // remove file info when upload percent is 100%\n\t                                // avoid 499 bug\n\t                                localStorage.removeItem(file.name);\n\t                            }\n\t                        } else {\n\t                            // remove file info when last upload time is over one day\n\t                            localStorage.removeItem(file.name);\n\t                        }\n\t                    }\n\t                    speedCalInfo.startTime = new Date().getTime();\n\t                    var multipart_params_obj = {};\n\t                    var ie = that.detectIEVersion();\n\t                    // case IE 9-\n\t                    // add accept in multipart params\n\t                    if (ie && ie <= 9) {\n\t                        multipart_params_obj.accept = 'text/plain; charset=utf-8';\n\t                        logger.debug(\"add accept text/plain in multipart params\");\n\t                    }\n\t                    // TODO: to support bput\n\t                    // http://developer.qiniu.com/docs/v6/api/reference/up/bput.html\n\t                    up.setOption({\n\t                        'url': qiniuUploadUrl + '/mkblk/' + blockSize,\n\t                        'multipart': false,\n\t                        'chunk_size': chunk_size,\n\t                        'required_features': \"chunks\",\n\t                        'headers': {\n\t                            'Authorization': 'UpToken ' + getUptoken(file)\n\t                        },\n\t                        'multipart_params': multipart_params_obj\n\t                    });\n\t                }\n\t            } else {\n\t                logger.debug(\"directUpload because uploader.runtime !== 'html5' || uploader.runtime !== 'flash' || !chunk_size\");\n\t                // direct upload if runtime is not html5\n\t                directUpload(up, file, that.key_handler);\n\t            }\n\t        });\n\t\n\t        logger.debug(\"bind BeforeUpload event\");\n\t\n\t        // bind 'UploadProgress' event\n\t        // calculate upload speed\n\t        uploader.bind('UploadProgress', function(up, file) {\n\t            logger.trace(\"UploadProgress event activated\");\n\t            speedCalInfo.currentTime = new Date().getTime();\n\t            var timeUsed = speedCalInfo.currentTime - speedCalInfo.startTime; // ms\n\t            var fileUploaded = file.loaded || 0;\n\t            if (speedCalInfo.isResumeUpload) {\n\t                fileUploaded = file.loaded - speedCalInfo.resumeFilesize;\n\t            }\n\t            file.speed = (fileUploaded / timeUsed * 1000).toFixed(0) || 0; // unit: byte/s\n\t        });\n\t\n\t        logger.debug(\"bind UploadProgress event\");\n\t\n\t        // bind 'ChunkUploaded' event\n\t        // store the chunk upload info and set next chunk upload url\n\t        uploader.bind('ChunkUploaded', function(up, file, info) {\n\t            logger.debug(\"ChunkUploaded event activated\");\n\t            logger.debug(\"file: \", file);\n\t            logger.debug(\"info: \", info);\n\t            var res = that.parseJSON(info.response);\n\t            logger.debug(\"res: \", res);\n\t            // ctx should look like '[chunk01_ctx],[chunk02_ctx],[chunk03_ctx],...'\n\t            ctx = ctx ? ctx + ',' + res.ctx : res.ctx;\n\t            var leftSize = info.total - info.offset;\n\t            var chunk_size = up.getOption && up.getOption('chunk_size');\n\t            chunk_size = chunk_size || (up.settings && up.settings.chunk_size);\n\t            if (leftSize < chunk_size) {\n\t                up.setOption({\n\t                    'url': qiniuUploadUrl + '/mkblk/' + leftSize\n\t                });\n\t                logger.debug(\"up.setOption url: \", qiniuUploadUrl + '/mkblk/' + leftSize);\n\t            }\n\t            up.setOption({\n\t                'headers': {\n\t                    'Authorization': 'UpToken ' + getUptoken(file)\n\t                }\n\t            });\n\t            localStorage.setItem(file.name, that.stringifyJSON({\n\t                ctx: ctx,\n\t                percent: file.percent,\n\t                total: info.total,\n\t                offset: info.offset,\n\t                time: (new Date()).getTime()\n\t            }));\n\t        });\n\t\n\t        logger.debug(\"bind ChunkUploaded event\");\n\t\n\t        var retries = qiniuUploadUrls.length;\n\t\n\t        // if error is unkown switch upload url and retry\n\t        var unknow_error_retry = function(file){\n\t            if (retries-- > 0) {\n\t                setTimeout(function(){\n\t                    that.resetUploadUrl();\n\t                    file.status = plupload.QUEUED;\n\t                    uploader.stop();\n\t                    uploader.start();\n\t                }, 0);\n\t                return true;\n\t            }else{\n\t                retries = qiniuUploadUrls.length;\n\t                return false;\n\t            }\n\t        };\n\t\n\t        // bind 'Error' event\n\t        // check the err.code and return the errTip\n\t        uploader.bind('Error', (function(_Error_Handler) {\n\t            return function(up, err) {\n\t                logger.error(\"Error event activated\");\n\t                logger.error(\"err: \", err);\n\t                var errTip = '';\n\t                var file = err.file;\n\t                if (file) {\n\t                    switch (err.code) {\n\t                        case plupload.FAILED:\n\t                            errTip = '上传失败。请稍后再试。';\n\t                            break;\n\t                        case plupload.FILE_SIZE_ERROR:\n\t                            var max_file_size = up.getOption && up.getOption('max_file_size');\n\t                            max_file_size = max_file_size || (up.settings && up.settings.max_file_size);\n\t                            errTip = '浏览器最大可上传' + max_file_size + '。更大文件请使用命令行工具。';\n\t                            break;\n\t                        case plupload.FILE_EXTENSION_ERROR:\n\t                            errTip = '文件验证失败。请稍后重试。';\n\t                            break;\n\t                        case plupload.HTTP_ERROR:\n\t                            if (err.response === '') {\n\t                                // Fix parseJSON error ,when http error is like net::ERR_ADDRESS_UNREACHABLE\n\t                                errTip = err.message || '未知网络错误。';\n\t                                if (!unknow_error_retry(file)) {\n\t                                    return;\n\t                                }\n\t                                break;\n\t                            }\n\t                            var errorObj = that.parseJSON(err.response);\n\t                            var errorText = errorObj.error;\n\t                            switch (err.status) {\n\t                                case 400:\n\t                                    errTip = \"请求报文格式错误。\";\n\t                                    break;\n\t                                case 401:\n\t                                    errTip = \"客户端认证授权失败。请重试或提交反馈。\";\n\t                                    break;\n\t                                case 405:\n\t                                    errTip = \"客户端请求错误。请重试或提交反馈。\";\n\t                                    break;\n\t                                case 579:\n\t                                    errTip = \"资源上传成功，但回调失败。\";\n\t                                    break;\n\t                                case 599:\n\t                                    errTip = \"网络连接异常。请重试或提交反馈。\";\n\t                                    if (!unknow_error_retry(file)) {\n\t                                        return;\n\t                                    }\n\t                                    break;\n\t                                case 614:\n\t                                    errTip = \"文件已存在。\";\n\t                                    try {\n\t                                        errorObj = that.parseJSON(errorObj.error);\n\t                                        errorText = errorObj.error || 'file exists';\n\t                                    } catch (e) {\n\t                                        errorText = errorObj.error || 'file exists';\n\t                                    }\n\t                                    break;\n\t                                case 631:\n\t                                    errTip = \"指定空间不存在。\";\n\t                                    break;\n\t                                case 701:\n\t                                    errTip = \"上传数据块校验出错。请重试或提交反馈。\";\n\t                                    break;\n\t                                default:\n\t                                    errTip = \"未知错误。\";\n\t                                    if (!unknow_error_retry(file)) {\n\t                                        return;\n\t                                    }\n\t                                    break;\n\t                            }\n\t                            errTip = errTip + '(' + err.status + '：' + errorText + ')';\n\t                            break;\n\t                        case plupload.SECURITY_ERROR:\n\t                            errTip = '安全配置错误。请联系网站管理员。';\n\t                            break;\n\t                        case plupload.GENERIC_ERROR:\n\t                            errTip = '上传失败。请稍后再试。';\n\t                            break;\n\t                        case plupload.IO_ERROR:\n\t                            errTip = '上传失败。请稍后再试。';\n\t                            break;\n\t                        case plupload.INIT_ERROR:\n\t                            errTip = '网站配置错误。请联系网站管理员。';\n\t                            uploader.destroy();\n\t                            break;\n\t                        default:\n\t                            errTip = err.message + err.details;\n\t                            if (!unknow_error_retry(file)) {\n\t                                return;\n\t                            }\n\t                            break;\n\t                    }\n\t                    if (_Error_Handler) {\n\t                        _Error_Handler(up, err, errTip);\n\t                    }\n\t                }\n\t                up.refresh(); // Reposition Flash/Silverlight\n\t            };\n\t        })(_Error_Handler));\n\t\n\t        logger.debug(\"bind Error event\");\n\t\n\t        // bind 'FileUploaded' event\n\t        // intercept the complete of upload\n\t        // - get downtoken from downtoken_url if bucket is private\n\t        // - invoke mkfile api to compose chunks if upload strategy is chunk upload\n\t        uploader.bind('FileUploaded', (function(_FileUploaded_Handler) {\n\t            return function(up, file, info) {\n\t                logger.debug(\"FileUploaded event activated\");\n\t                logger.debug(\"file: \", file);\n\t                logger.debug(\"info: \", info);\n\t                var last_step = function(up, file, info) {\n\t                    if (op.downtoken_url) {\n\t                        // if op.dowontoken_url is not empty\n\t                        // need get downtoken before invoke the _FileUploaded_Handler\n\t                        var ajax_downtoken = that.createAjax();\n\t                        ajax_downtoken.open('POST', op.downtoken_url, true);\n\t                        ajax_downtoken.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n\t                        ajax_downtoken.onreadystatechange = function() {\n\t                            if (ajax_downtoken.readyState === 4) {\n\t                                if (ajax_downtoken.status === 200) {\n\t                                    var res_downtoken;\n\t                                    try {\n\t                                        res_downtoken = that.parseJSON(ajax_downtoken.responseText);\n\t                                    } catch (e) {\n\t                                        throw ('invalid json format');\n\t                                    }\n\t                                    var info_extended = {};\n\t                                    plupload.extend(info_extended, that.parseJSON(info), res_downtoken);\n\t                                    if (_FileUploaded_Handler) {\n\t                                        _FileUploaded_Handler(up, file, that.stringifyJSON(info_extended));\n\t                                    }\n\t                                } else {\n\t                                    uploader.trigger('Error', {\n\t                                        status: ajax_downtoken.status,\n\t                                        response: ajax_downtoken.responseText,\n\t                                        file: file,\n\t                                        code: plupload.HTTP_ERROR\n\t                                    });\n\t                                }\n\t                            }\n\t                        };\n\t                        ajax_downtoken.send('key=' + that.parseJSON(info).key + '&domain=' + op.domain);\n\t                    } else if (_FileUploaded_Handler) {\n\t                        _FileUploaded_Handler(up, file, info);\n\t                    }\n\t                };\n\t\n\t                var res = that.parseJSON(info.response);\n\t                ctx = ctx ? ctx : res.ctx;\n\t                // if ctx is not empty\n\t                //      that means the upload strategy is chunk upload\n\t                //      befroe the invoke the last_step\n\t                //      we need request the mkfile to compose all uploaded chunks\n\t                // else\n\t                //      invalke the last_step\n\t                logger.debug(\"ctx: \", ctx);\n\t                if (ctx) {\n\t                    var key = '';\n\t                    logger.debug(\"save_key: \", op.save_key);\n\t                    if (!op.save_key) {\n\t                        key = getFileKey(up, file, that.key_handler);\n\t                        key = key ? '/key/' + that.URLSafeBase64Encode(key) : '';\n\t                    }\n\t\n\t                    var fname = '/fname/' + that.URLSafeBase64Encode(file.name);\n\t\n\t                    logger.debug(\"op.x_vars: \", op.x_vars);\n\t                    var x_vars = op.x_vars,\n\t                        x_val = '',\n\t                        x_vars_url = '';\n\t                    if (x_vars !== undefined && typeof x_vars === 'object') {\n\t                        for (var x_key in x_vars) {\n\t                            if (x_vars.hasOwnProperty(x_key)) {\n\t                                if (typeof x_vars[x_key] === 'function') {\n\t                                    x_val = that.URLSafeBase64Encode(x_vars[x_key](up, file));\n\t                                } else if (typeof x_vars[x_key] !== 'object') {\n\t                                    x_val = that.URLSafeBase64Encode(x_vars[x_key]);\n\t                                }\n\t                                x_vars_url += '/x:' + x_key + '/' + x_val;\n\t                            }\n\t                        }\n\t                    }\n\t\n\t                    var url = qiniuUploadUrl + '/mkfile/' + file.size + key + fname + x_vars_url;\n\t\n\t                    var ie = that.detectIEVersion();\n\t                    var ajax;\n\t                    if (ie && ie <= 9) {\n\t                        ajax = new mOxie.XMLHttpRequest();\n\t                        mOxie.Env.swf_url = op.flash_swf_url;\n\t                    }else{\n\t                        ajax = that.createAjax();\n\t                    }\n\t                    ajax.open('POST', url, true);\n\t                    ajax.setRequestHeader('Content-Type', 'text/plain;charset=UTF-8');\n\t                    ajax.setRequestHeader('Authorization', 'UpToken ' + that.token);\n\t                    var onreadystatechange = function(){\n\t                        logger.debug(\"ajax.readyState: \", ajax.readyState);\n\t                        if (ajax.readyState === 4) {\n\t                            localStorage.removeItem(file.name);\n\t                            var info;\n\t                            if (ajax.status === 200) {\n\t                                info = ajax.responseText;\n\t                                logger.debug(\"mkfile is success: \", info);\n\t                                last_step(up, file, info);\n\t                            } else {\n\t                                info = {\n\t                                    status: ajax.status,\n\t                                    response: ajax.responseText,\n\t                                    file: file,\n\t                                    code: -200,\n\t                                    responseHeaders: ajax.getAllResponseHeaders()\n\t                                };\n\t                                logger.debug(\"mkfile is error: \", info);\n\t                                uploader.trigger('Error', info);\n\t                            }\n\t                        }\n\t                    };\n\t                    if (ie && ie <= 9) {\n\t                        ajax.bind('readystatechange', onreadystatechange);\n\t                    }else{\n\t                        ajax.onreadystatechange = onreadystatechange;\n\t                    }\n\t                    ajax.send(ctx);\n\t                    logger.debug(\"mkfile: \", url);\n\t                } else {\n\t                    last_step(up, file, info.response);\n\t                }\n\t\n\t            };\n\t        })(_FileUploaded_Handler));\n\t\n\t        logger.debug(\"bind FileUploaded event\");\n\t\n\t        // init uploader\n\t        uploader.init();\n\t\n\t        logger.debug(\"invoke uploader.init()\");\n\t\n\t        logger.debug(\"init uploader end\");\n\t\n\t        return uploader;\n\t    };\n\t\n\t    /**\n\t     * get url by key\n\t     * @param  {String} key of file\n\t     * @return {String} url of file\n\t     */\n\t    this.getUrl = function(key) {\n\t        if (!key) {\n\t            return false;\n\t        }\n\t        key = encodeURI(key);\n\t        var domain = this.domain;\n\t        if (domain.slice(domain.length - 1) !== '/') {\n\t            domain = domain + '/';\n\t        }\n\t        return domain + key;\n\t    };\n\t\n\t    /**\n\t     * invoke the imageView2 api of Qiniu\n\t     * @param  {Object} api params\n\t     * @param  {String} key of file\n\t     * @return {String} url of processed image\n\t     */\n\t    this.imageView2 = function(op, key) {\n\t\n\t        if (!/^\\d$/.test(op.mode)) {\n\t            return false;\n\t        }\n\t\n\t        var mode = op.mode,\n\t            w = op.w || '',\n\t            h = op.h || '',\n\t            q = op.q || '',\n\t            format = op.format || '';\n\t\n\t        if (!w && !h) {\n\t            return false;\n\t        }\n\t\n\t        var imageUrl = 'imageView2/' + mode;\n\t        imageUrl += w ? '/w/' + w : '';\n\t        imageUrl += h ? '/h/' + h : '';\n\t        imageUrl += q ? '/q/' + q : '';\n\t        imageUrl += format ? '/format/' + format : '';\n\t        if (key) {\n\t            imageUrl = this.getUrl(key) + '?' + imageUrl;\n\t        }\n\t        return imageUrl;\n\t    };\n\t\n\t    /**\n\t     * invoke the imageMogr2 api of Qiniu\n\t     * @param  {Object} api params\n\t     * @param  {String} key of file\n\t     * @return {String} url of processed image\n\t     */\n\t    this.imageMogr2 = function(op, key) {\n\t        var auto_orient = op['auto-orient'] || '',\n\t            thumbnail = op.thumbnail || '',\n\t            strip = op.strip || '',\n\t            gravity = op.gravity || '',\n\t            crop = op.crop || '',\n\t            quality = op.quality || '',\n\t            rotate = op.rotate || '',\n\t            format = op.format || '',\n\t            blur = op.blur || '';\n\t        //Todo check option\n\t\n\t        var imageUrl = 'imageMogr2';\n\t\n\t        imageUrl += auto_orient ? '/auto-orient' : '';\n\t        imageUrl += thumbnail ? '/thumbnail/' + thumbnail : '';\n\t        imageUrl += strip ? '/strip' : '';\n\t        imageUrl += gravity ? '/gravity/' + gravity : '';\n\t        imageUrl += quality ? '/quality/' + quality : '';\n\t        imageUrl += crop ? '/crop/' + crop : '';\n\t        imageUrl += rotate ? '/rotate/' + rotate : '';\n\t        imageUrl += format ? '/format/' + format : '';\n\t        imageUrl += blur ? '/blur/' + blur : '';\n\t\n\t        if (key) {\n\t            imageUrl = this.getUrl(key) + '?' + imageUrl;\n\t        }\n\t        return imageUrl;\n\t    };\n\t\n\t    /**\n\t     * invoke the watermark api of Qiniu\n\t     * @param  {Object} api params\n\t     * @param  {String} key of file\n\t     * @return {String} url of processed image\n\t     */\n\t    this.watermark = function(op, key) {\n\t        var mode = op.mode;\n\t        if (!mode) {\n\t            return false;\n\t        }\n\t\n\t        var imageUrl = 'watermark/' + mode;\n\t\n\t        if (mode === 1) {\n\t            var image = op.image || '';\n\t            if (!image) {\n\t                return false;\n\t            }\n\t            imageUrl += image ? '/image/' + this.URLSafeBase64Encode(image) : '';\n\t        } else if (mode === 2) {\n\t            var text = op.text ? op.text : '',\n\t                font = op.font ? op.font : '',\n\t                fontsize = op.fontsize ? op.fontsize : '',\n\t                fill = op.fill ? op.fill : '';\n\t            if (!text) {\n\t                return false;\n\t            }\n\t            imageUrl += text ? '/text/' + this.URLSafeBase64Encode(text) : '';\n\t            imageUrl += font ? '/font/' + this.URLSafeBase64Encode(font) : '';\n\t            imageUrl += fontsize ? '/fontsize/' + fontsize : '';\n\t            imageUrl += fill ? '/fill/' + this.URLSafeBase64Encode(fill) : '';\n\t        } else {\n\t            // Todo mode3\n\t            return false;\n\t        }\n\t\n\t        var dissolve = op.dissolve || '',\n\t            gravity = op.gravity || '',\n\t            dx = op.dx || '',\n\t            dy = op.dy || '';\n\t\n\t        imageUrl += dissolve ? '/dissolve/' + dissolve : '';\n\t        imageUrl += gravity ? '/gravity/' + gravity : '';\n\t        imageUrl += dx ? '/dx/' + dx : '';\n\t        imageUrl += dy ? '/dy/' + dy : '';\n\t\n\t        if (key) {\n\t            imageUrl = this.getUrl(key) + '?' + imageUrl;\n\t        }\n\t        return imageUrl;\n\t    };\n\t\n\t    /**\n\t     * invoke the imageInfo api of Qiniu\n\t     * @param  {String} key of file\n\t     * @return {Object} image info\n\t     */\n\t    this.imageInfo = function(key) {\n\t        if (!key) {\n\t            return false;\n\t        }\n\t        var url = this.getUrl(key) + '?imageInfo';\n\t        var xhr = this.createAjax();\n\t        var info;\n\t        var that = this;\n\t        xhr.open('GET', url, false);\n\t        xhr.onreadystatechange = function() {\n\t            if (xhr.readyState === 4 && xhr.status === 200) {\n\t                info = that.parseJSON(xhr.responseText);\n\t            }\n\t        };\n\t        xhr.send();\n\t        return info;\n\t    };\n\t\n\t    /**\n\t     * invoke the exif api of Qiniu\n\t     * @param  {String} key of file\n\t     * @return {Object} image exif\n\t     */\n\t    this.exif = function(key) {\n\t        if (!key) {\n\t            return false;\n\t        }\n\t        var url = this.getUrl(key) + '?exif';\n\t        var xhr = this.createAjax();\n\t        var info;\n\t        var that = this;\n\t        xhr.open('GET', url, false);\n\t        xhr.onreadystatechange = function() {\n\t            if (xhr.readyState === 4 && xhr.status === 200) {\n\t                info = that.parseJSON(xhr.responseText);\n\t            }\n\t        };\n\t        xhr.send();\n\t        return info;\n\t    };\n\t\n\t    /**\n\t     * invoke the exif or imageInfo api of Qiniu\n\t     * according with type param\n\t     * @param  {String} ['exif'|'imageInfo']type of info\n\t     * @param  {String} key of file\n\t     * @return {Object} image exif or info\n\t     */\n\t    this.get = function(type, key) {\n\t        if (!key || !type) {\n\t            return false;\n\t        }\n\t        if (type === 'exif') {\n\t            return this.exif(key);\n\t        } else if (type === 'imageInfo') {\n\t            return this.imageInfo(key);\n\t        }\n\t        return false;\n\t    };\n\t\n\t    /**\n\t     * invoke api of Qiniu like a pipeline\n\t     * @param  {Array of Object} params of a series api call\n\t     * each object in array is options of api which name is set as 'fop' property\n\t     * each api's output will be next api's input\n\t     * @param  {String} key of file\n\t     * @return {String|Boolean} url of processed image\n\t     */\n\t    this.pipeline = function(arr, key) {\n\t        var isArray = Object.prototype.toString.call(arr) === '[object Array]';\n\t        var option, errOp, imageUrl = '';\n\t        if (isArray) {\n\t            for (var i = 0, len = arr.length; i < len; i++) {\n\t                option = arr[i];\n\t                if (!option.fop) {\n\t                    return false;\n\t                }\n\t                switch (option.fop) {\n\t                    case 'watermark':\n\t                        imageUrl += this.watermark(option) + '|';\n\t                        break;\n\t                    case 'imageView2':\n\t                        imageUrl += this.imageView2(option) + '|';\n\t                        break;\n\t                    case 'imageMogr2':\n\t                        imageUrl += this.imageMogr2(option) + '|';\n\t                        break;\n\t                    default:\n\t                        errOp = true;\n\t                        break;\n\t                }\n\t                if (errOp) {\n\t                    return false;\n\t                }\n\t            }\n\t            if (key) {\n\t                imageUrl = this.getUrl(key) + '?' + imageUrl;\n\t                var length = imageUrl.length;\n\t                if (imageUrl.slice(length - 1) === '|') {\n\t                    imageUrl = imageUrl.slice(0, length - 1);\n\t                }\n\t            }\n\t            return imageUrl;\n\t        }\n\t        return false;\n\t    };\n\t}\n\t\n\tvar Qiniu = new QiniuJsSDK();\n\t\n\tglobal.Qiniu = Qiniu;\n\t\n\tglobal.QiniuJsSDK = QiniuJsSDK;\n\t\n\t})( window );\n\n\n/***/ },\n\n/***/ 197:\n/***/ function(module, exports, __webpack_require__) {\n\n\t(function (factory) {\n\t    if (typeof window.define === 'function') {\n\t        if (window.define.amd) {\n\t            // AMD模式\n\t            window.define('wangEditor', [\"jquery\"], factory);\n\t        } else if (window.define.cmd) {\n\t            // CMD模式\n\t            window.define(function (require, exports, module) {\n\t                return factory;\n\t            });\n\t        } else {\n\t            // 全局模式\n\t            factory(window.jQuery);\n\t        }\n\t    } else if (typeof module === \"object\" && typeof module.exports === \"object\") {\n\t        // commonjs\n\t\n\t        // 引用 css —— webapck\n\t        __webpack_require__(82);\n\t        module.exports = factory(\n\t            // 传入 jquery ，支持使用 npm 方式或者自己定义jquery的路径\n\t            __webpack_require__(9)\n\t        );\n\t    } else {\n\t        // 全局模式\n\t        factory(window.jQuery);\n\t    }\n\t})(function($){\n\t    \n\t    // 验证是否引用jquery\n\t    if (!$ || !$.fn || !$.fn.jquery) {\n\t        alert('在引用wangEditor.js之前，先引用jQuery，否则无法使用 wangEditor');\n\t        return;\n\t    }\n\t\n\t    // 定义扩展函数\n\t    var _e = function (fn) {\n\t        var E = window.wangEditor;\n\t        if (E) {\n\t            // 执行传入的函数\n\t            fn(E, $);\n\t        }\n\t    };\n\t// 定义构造函数\n\t(function (window, $) {\n\t    if (window.wangEditor) {\n\t        // 重复引用\n\t        alert('一个页面不能重复引用 wangEditor.js 或 wangEditor.min.js ！！！');\n\t        return;\n\t    }\n\t\n\t    // 编辑器（整体）构造函数\n\t    var E = function (elem) {\n\t        // 支持 id 和 element 两种形式\n\t        if (typeof elem === 'string') {\n\t            elem = '#' + elem;\n\t        }\n\t\n\t        // ---------------获取基本节点------------------\n\t        var $elem = $(elem);\n\t        if ($elem.length !== 1) {\n\t            return;\n\t        }\n\t        var nodeName = $elem[0].nodeName;\n\t        if (nodeName !== 'TEXTAREA' && nodeName !== 'DIV') {\n\t            // 只能是 textarea 和 div ，其他类型的元素不行\n\t            return;   \n\t        }\n\t        this.valueNodeName = nodeName.toLowerCase();\n\t        this.$valueContainer = $elem;\n\t\n\t        // 记录 elem 的 prev 和 parent（最后渲染 editor 要用到）\n\t        this.$prev = $elem.prev();\n\t        this.$parent = $elem.parent();\n\t\n\t        // ------------------初始化------------------\n\t        this.init();\n\t    };\n\t\n\t    E.fn = E.prototype;\n\t\n\t    E.$body = $('body');\n\t    E.$document = $(document);\n\t    E.$window = $(window);\n\t    E.userAgent = navigator.userAgent;\n\t    E.getComputedStyle = window.getComputedStyle;\n\t    E.w3cRange = typeof document.createRange === 'function';\n\t    E.hostname = location.hostname.toLowerCase();\n\t    E.websiteHost = 'wangeditor.github.io|www.wangeditor.com|wangeditor.coding.me';\n\t    E.isOnWebsite = E.websiteHost.indexOf(E.hostname) >= 0;\n\t    E.docsite = 'http://www.kancloud.cn/wangfupeng/wangeditor2/113961';\n\t\n\t    // 暴露给全局对象\n\t    window.wangEditor = E;\n\t\n\t    // 注册 plugin 事件，用于用户自定义插件\n\t    // 用户在引用 wangEditor.js 之后，还可以通过 E.plugin() 注入自定义函数，\n\t    // 该函数将会在 editor.create() 方法的最后一步执行\n\t    E.plugin = function (fn) {\n\t        if (!E._plugins) {\n\t            E._plugins = [];\n\t        }\n\t\n\t        if (typeof fn === 'function') {\n\t            E._plugins.push(fn);\n\t        }\n\t    };\n\t\n\t})(window, $);\n\t// editor 绑定事件\n\t_e(function (E, $) {\n\t\n\t    E.fn.init = function () {\n\t\n\t        // 初始化 editor 默认配置\n\t        this.initDefaultConfig();\n\t\n\t        // 增加container\n\t        this.addEditorContainer();\n\t\n\t        // 增加编辑区域\n\t        this.addTxt();\n\t\n\t        // 增加menuContainer\n\t        this.addMenuContainer();\n\t\n\t        // 初始化菜单集合\n\t        this.menus = {};\n\t\n\t        // 初始化commandHooks\n\t        this.commandHooks();\n\t\n\t    };\n\t\n\t});\n\t// editor api\n\t_e(function (E, $) {\n\t\n\t    // 预定义 ready 事件\n\t    E.fn.ready = function (fn) {\n\t\n\t        if (!this.readyFns) {\n\t            this.readyFns = [];\n\t        }\n\t\n\t        this.readyFns.push(fn);\n\t    };\n\t\n\t    // 处理ready事件\n\t    E.fn.readyHeadler = function () {\n\t        var fns = this.readyFns;\n\t\n\t        while (fns.length) {\n\t            fns.shift().call(this);\n\t        }\n\t    };\n\t\n\t    // 更新内容到 $valueContainer\n\t    E.fn.updateValue = function () {\n\t        var editor = this;\n\t        var $valueContainer = editor.$valueContainer;\n\t        var $txt = editor.txt.$txt;\n\t\n\t        if ($valueContainer === $txt) {\n\t            // 传入生成编辑器的div，即是编辑区域\n\t            return;\n\t        }\n\t\n\t        var value = $txt.html();\n\t        $valueContainer.val(value);\n\t    };\n\t\n\t    // 获取初始化的内容\n\t    E.fn.getInitValue = function () {\n\t        var editor = this;\n\t        var $valueContainer = editor.$valueContainer;\n\t        var currentValue = '';\n\t        var nodeName = editor.valueNodeName;\n\t        if (nodeName === 'div') {\n\t            currentValue = $valueContainer.html();\n\t        } else if (nodeName === 'textarea') {\n\t            currentValue = $valueContainer.val();\n\t        }\n\t\n\t        return currentValue;\n\t    };\n\t\n\t    // 触发菜单updatestyle\n\t    E.fn.updateMenuStyle = function () {\n\t        var menus = this.menus;\n\t\n\t        $.each(menus, function (k, menu) {\n\t            menu.updateSelected();\n\t        });\n\t    };\n\t\n\t    // 除了传入的 menuIds，其他全部启用\n\t    E.fn.enableMenusExcept = function (menuIds) {\n\t        if (this._disabled) {\n\t            // 编辑器处于禁用状态，则不执行改操作\n\t            return;\n\t        }\n\t        // menuIds参数：支持数组和字符串\n\t        menuIds = menuIds || [];\n\t        if (typeof menuIds === 'string') {\n\t            menuIds = [menuIds];\n\t        }\n\t\n\t        $.each(this.menus, function (k, menu) {\n\t            if (menuIds.indexOf(k) >= 0) {\n\t                return;\n\t            }\n\t            menu.disabled(false);\n\t        });\n\t    };\n\t\n\t    // 除了传入的 menuIds，其他全部禁用\n\t    E.fn.disableMenusExcept = function (menuIds) {\n\t        if (this._disabled) {\n\t            // 编辑器处于禁用状态，则不执行改操作\n\t            return;\n\t        }\n\t        // menuIds参数：支持数组和字符串\n\t        menuIds = menuIds || [];\n\t        if (typeof menuIds === 'string') {\n\t            menuIds = [menuIds];\n\t        }\n\t\n\t        $.each(this.menus, function (k, menu) {\n\t            if (menuIds.indexOf(k) >= 0) {\n\t                return;\n\t            }\n\t            menu.disabled(true);\n\t        });\n\t    };\n\t\n\t    // 隐藏所有 dropPanel droplist modal\n\t    E.fn.hideDropPanelAndModal = function () {\n\t        var menus = this.menus;\n\t\n\t        $.each(menus, function (k, menu) {\n\t            var m = menu.dropPanel || menu.dropList || menu.modal;\n\t            if (m && m.hide) {\n\t                m.hide();\n\t            }\n\t        });\n\t    };\n\t\n\t});\n\t// selection range API\n\t_e(function (E, $) {\n\t\n\t    // 用到 w3c range 的函数，如果检测到浏览器不支持 w3c range，则赋值为空函数\n\t    var ieRange = !E.w3cRange;\n\t    function emptyFn() {}\n\t\n\t    // 设置或读取当前的range\n\t    E.fn.currentRange = function (cr){\n\t        if (cr) {\n\t            this._rangeData = cr;\n\t        } else {\n\t            return this._rangeData;\n\t        }\n\t    };\n\t\n\t    // 将当前选区折叠\n\t    E.fn.collapseRange = function (range, opt) {\n\t        // opt 参数说明：'start'-折叠到开始; 'end'-折叠到结束\n\t        opt = opt || 'end';\n\t        opt = opt === 'start' ? true : false;\n\t\n\t        range = range || this.currentRange();\n\t        \n\t        if (range) {\n\t            // 合并，保存\n\t            range.collapse(opt);\n\t            this.currentRange(range);\n\t        }\n\t    };\n\t\n\t    // 获取选区的文字\n\t    E.fn.getRangeText = ieRange ? emptyFn : function (range) {\n\t        range = range || this.currentRange();\n\t        if (!range) {\n\t            return;\n\t        }\n\t        return range.toString();\n\t    };\n\t\n\t    // 获取选区对应的DOM对象\n\t    E.fn.getRangeElem = ieRange ? emptyFn : function (range) {\n\t        range = range || this.currentRange();\n\t        var dom = range.commonAncestorContainer;\n\t\n\t        if (dom.nodeType === 1) {\n\t            return dom;\n\t        } else {\n\t            return dom.parentNode;\n\t        }\n\t    };\n\t\n\t    // 选区内容是否为空？\n\t    E.fn.isRangeEmpty = ieRange ? emptyFn : function (range) {\n\t        range = range || this.currentRange();\n\t\n\t        if (range && range.startContainer) {\n\t            if (range.startContainer === range.endContainer) {\n\t                if (range.startOffset === range.endOffset) {\n\t                    return true;\n\t                }\n\t            }\n\t        }\n\t\n\t        return false;\n\t    };\n\t\n\t    // 保存选区数据\n\t    E.fn.saveSelection = ieRange ? emptyFn : function (range) {\n\t        var self = this,\n\t            _parentElem,\n\t            selection,\n\t            txt = self.txt.$txt.get(0);\n\t\n\t        if (range) {\n\t            _parentElem = range.commonAncestorContainer;\n\t        } else {\n\t            selection = document.getSelection();\n\t            if (selection.getRangeAt && selection.rangeCount) {\n\t                range = document.getSelection().getRangeAt(0);\n\t                _parentElem = range.commonAncestorContainer;\n\t            }\n\t        }\n\t        // 确定父元素一定要包含在编辑器区域内\n\t        if (_parentElem && ($.contains(txt, _parentElem) || txt === _parentElem) ) {\n\t            // 保存选择区域\n\t            self.currentRange(range);\n\t        }\n\t    };\n\t\n\t    // 恢复选中区域\n\t    E.fn.restoreSelection = ieRange ? emptyFn : function (range) {\n\t        var selection;\n\t\n\t        range = range || this.currentRange();\n\t\n\t        if (!range) {\n\t            return;\n\t        }\n\t\n\t        // 使用 try catch 来防止 IE 某些情况报错\n\t        try {\n\t            selection = document.getSelection();\n\t            selection.removeAllRanges();\n\t            selection.addRange(range);\n\t        } catch (ex) {\n\t            E.error('执行 editor.restoreSelection 时，IE可能会有异常，不影响使用');\n\t        }\n\t    };\n\t\n\t    // 根据elem恢复选区\n\t    E.fn.restoreSelectionByElem = ieRange ? emptyFn : function (elem, opt) {\n\t        // opt参数说明：'start'-折叠到开始，'end'-折叠到结束，'all'-全部选中\n\t        if (!elem) {\n\t            return;\n\t        }\n\t        opt = opt || 'end'; // 默认为折叠到结束\n\t\n\t        // 根据elem获取选区\n\t        this.setRangeByElem(elem);\n\t\n\t        // 根据 opt 折叠选区\n\t        if (opt === 'start') {\n\t            this.collapseRange(this.currentRange(), 'start');\n\t        }\n\t        if (opt === 'end') {\n\t            this.collapseRange(this.currentRange(), 'end');\n\t        }\n\t        \n\t        // 恢复选区\n\t        this.restoreSelection();\n\t    };\n\t\n\t    // 初始化选区\n\t    E.fn.initSelection = ieRange ? emptyFn : function () {\n\t        var editor = this;\n\t        if( editor.currentRange() ){\n\t            //如果currentRange有值，则不用再初始化\n\t            return;\n\t        }\n\t\n\t        var range;\n\t        var $txt = editor.txt.$txt;\n\t        var $firstChild = $txt.children().first();\n\t        \n\t        if ($firstChild.length) {\n\t            editor.restoreSelectionByElem($firstChild.get(0));\n\t        }\n\t    };\n\t\n\t    // 根据元素创建选区\n\t    E.fn.setRangeByElem = ieRange ? emptyFn : function (elem) {\n\t        var editor = this;\n\t        var txtElem = editor.txt.$txt.get(0);\n\t        if (!elem || !$.contains(txtElem, elem)) {\n\t            return;\n\t        }\n\t\n\t        // 找到elem的第一个 textNode 和 最后一个 textNode\n\t        var firstTextNode = elem.firstChild;\n\t        while (firstTextNode) {\n\t            if (firstTextNode.nodeType === 3) {\n\t                break;\n\t            }\n\t            // 继续向下\n\t            firstTextNode = firstTextNode.firstChild;\n\t        }\n\t        var lastTextNode = elem.lastChild;\n\t        while (lastTextNode) {\n\t            if (lastTextNode.nodeType === 3) {\n\t                break;\n\t            }\n\t            // 继续向下\n\t            lastTextNode = lastTextNode.lastChild;\n\t        }\n\t        \n\t        var range = document.createRange();\n\t        if (firstTextNode && lastTextNode) {\n\t            // 说明 elem 有内容，能取到子元素\n\t            range.setStart(firstTextNode, 0);\n\t            range.setEnd(lastTextNode, lastTextNode.textContent.length);\n\t        } else {\n\t            // 说明 elem 无内容\n\t            range.setStart(elem, 0);\n\t            range.setEnd(elem, 0);\n\t        }\n\t\n\t        // 保存选区\n\t        editor.saveSelection(range);\n\t    };\n\t\n\t});\n\t// selection range API - IE8及以下\n\t_e(function (E, $) {\n\t\n\t    if (E.w3cRange) {\n\t        // 说明支持 W3C 的range方法\n\t        return;\n\t    }\n\t\n\t    // -----------------IE8时，需要重写以下方法-------------------\n\t\n\t    // 获取选区的文字\n\t    E.fn.getRangeText = function (range) {\n\t        range = range || this.currentRange();\n\t        if (!range) {\n\t            return;\n\t        }\n\t        return range.text;\n\t    };\n\t\n\t    // 获取选区对应的DOM对象\n\t    E.fn.getRangeElem = function (range) {\n\t        range = range || this.currentRange();\n\t        if (!range) {\n\t            return;\n\t        }\n\t        var dom = range.parentElement();\n\t\n\t        if (dom.nodeType === 1) {\n\t            return dom;\n\t        } else {\n\t            return dom.parentNode;\n\t        }\n\t    };\n\t\n\t    // 选区内容是否为空？\n\t    E.fn.isRangeEmpty = function (range) {\n\t        range = range || this.currentRange();\n\t\n\t        if (range && range.text) {\n\t            return false;\n\t        }\n\t\n\t        return true;\n\t    };\n\t\n\t    // 保存选区数据\n\t    E.fn.saveSelection = function (range) {\n\t        var self = this,\n\t            _parentElem,\n\t            selection,\n\t            txt = self.txt.$txt.get(0);\n\t\n\t        if (range) {\n\t            _parentElem = range.parentElement();\n\t        } else {\n\t            range = document.selection.createRange();\n\t            if(typeof range.parentElement === 'undefined'){\n\t                //IE6、7中，insertImage后会执行此处\n\t                //由于找不到range.parentElement，所以干脆将_parentElem赋值为null\n\t                _parentElem = null;\n\t            }else{\n\t                _parentElem = range.parentElement();\n\t            }\n\t        }\n\t\n\t        // 确定父元素一定要包含在编辑器区域内\n\t        if (_parentElem && ($.contains(txt, _parentElem) || txt === _parentElem) ) {\n\t            // 保存选择区域\n\t            self.currentRange(range);\n\t        }\n\t    };\n\t\n\t    // 恢复选中区域\n\t    E.fn.restoreSelection = function (currentRange){\n\t        var editor = this,\n\t            selection,\n\t            range;\n\t\n\t        currentRange = currentRange || editor.currentRange();\n\t        if(!currentRange){\n\t            return;\n\t        }\n\t\n\t        range = document.selection.createRange();\n\t        try {\n\t            // 此处，plupload上传上传图片时，IE8-会报一个『参数无效』的错误\n\t            range.setEndPoint('EndToEnd', currentRange);\n\t        } catch (ex) {\n\t\n\t        }\n\t        \n\t        if(currentRange.text.length === 0){\n\t            try {\n\t                // IE8 插入表情会报错\n\t                range.collapse(false);\n\t            } catch (ex) {\n\t                \n\t            }\n\t            \n\t        }else{\n\t            range.setEndPoint('StartToStart', currentRange);\n\t        }\n\t        range.select();\n\t    };\n\t\n\t});\n\t// editor command hooks\n\t_e(function (E, $) {\n\t    \n\t    E.fn.commandHooks = function () {\n\t        var editor = this;\n\t        var commandHooks = {};\n\t        \n\t        // insertHtml\n\t        commandHooks.insertHtml = function (html) {\n\t            var $elem = $(html);\n\t            var rangeElem = editor.getRangeElem();\n\t            var targetElem;\n\t            \n\t            targetElem = editor.getLegalTags(rangeElem);\n\t            if (!targetElem) {\n\t                return;\n\t            }\n\t\n\t            $(targetElem).after($elem);\n\t        };\n\t\n\t        // 保存到对象\n\t        editor.commandHooks = commandHooks;\n\t    };\n\t\n\t});\n\t// editor command API\n\t_e(function (E, $) {\n\t\n\t    // 基本命令\n\t    E.fn.command = function (e, commandName, commandValue, callback) {\n\t        var editor = this;\n\t        var hooks;\n\t        \n\t        function commandFn() {\n\t            if (!commandName) {\n\t                return;\n\t            }\n\t            if (editor.queryCommandSupported(commandName)) {\n\t                // 默认命令\n\t                document.execCommand(commandName, false, commandValue);\n\t            } else {\n\t                // hooks 命令\n\t                hooks = editor.commandHooks;\n\t                if (commandName in hooks) {\n\t                    hooks[commandName](commandValue);\n\t                }\n\t            }\n\t        }\n\t\n\t        this.customCommand(e, commandFn, callback);\n\t    };\n\t\n\t    // 针对一个elem对象执行基础命令\n\t    E.fn.commandForElem = function (elemOpt, e, commandName, commandValue, callback) {\n\t        // 取得查询elem的查询条件和验证函数\n\t        var selector;\n\t        var check;\n\t        if (typeof elemOpt === 'string') {\n\t            selector = elemOpt;\n\t        } else {\n\t            selector = elemOpt.selector;\n\t            check = elemOpt.check;\n\t        }\n\t\n\t        // 查询elem\n\t        var rangeElem = this.getRangeElem();\n\t        rangeElem = this.getSelfOrParentByName(rangeElem, selector, check);\n\t\n\t        // 根据elem设置range\n\t        if (rangeElem) {\n\t            this.setRangeByElem(rangeElem);\n\t        }\n\t\n\t        // 然后执行基础命令\n\t        this.command(e, commandName, commandValue, callback);\n\t    };\n\t\n\t    // 自定义命令\n\t    E.fn.customCommand = function (e, commandFn, callback) {\n\t        var editor = this;\n\t        var range = editor.currentRange();\n\t\n\t        if (!range) {\n\t            // 目前没有选区，则无法执行命令\n\t            e && e.preventDefault();\n\t            return;\n\t        }\n\t        // 记录内容，以便撤销（执行命令之前就要记录）\n\t        editor.undoRecord();\n\t\n\t        // 恢复选区（有 range 参数）\n\t        this.restoreSelection(range);\n\t\n\t        // 执行命令事件\n\t        commandFn.call(editor);\n\t\n\t        // 保存选区（无参数，要从浏览器直接获取range信息）\n\t        this.saveSelection();\n\t        // 重新恢复选区（无参数，要取得刚刚从浏览器得到的range信息）\n\t        this.restoreSelection();\n\t\n\t        // 执行 callback\n\t        if (callback && typeof callback === 'function') {\n\t            callback.call(editor);\n\t        }\n\t\n\t        // 最后插入空行\n\t        editor.txt.insertEmptyP();\n\t\n\t        // 包裹暴露的img和text\n\t        editor.txt.wrapImgAndText();\n\t\n\t        // 更新内容\n\t        editor.updateValue();\n\t\n\t        // 更新菜单样式\n\t        editor.updateMenuStyle();\n\t\n\t        // 隐藏 dropPanel dropList modal  设置 200ms 间隔\n\t        function hidePanelAndModal() {\n\t            editor.hideDropPanelAndModal();\n\t        } \n\t        setTimeout(hidePanelAndModal, 200);\n\t\n\t        if (e) {\n\t            e.preventDefault();\n\t        }\n\t    };\n\t\n\t    // 封装 document.queryCommandValue 函数\n\t    // IE8 直接执行偶尔会报错，因此直接用 try catch 封装一下\n\t    E.fn.queryCommandValue = function (commandName) {\n\t        var result = '';\n\t        try {\n\t            result = document.queryCommandValue(commandName);\n\t        } catch (ex) {\n\t\n\t        }\n\t        return result;\n\t    };\n\t\n\t    // 封装 document.queryCommandState 函数\n\t    // IE8 直接执行偶尔会报错，因此直接用 try catch 封装一下\n\t    E.fn.queryCommandState = function (commandName) {\n\t        var result = false;\n\t        try {\n\t            result = document.queryCommandState(commandName);\n\t        } catch (ex) {\n\t\n\t        }\n\t        return result;\n\t    };\n\t\n\t    // 封装 document.queryCommandSupported 函数\n\t    E.fn.queryCommandSupported = function (commandName) {\n\t        var result = false;\n\t        try {\n\t            result = document.queryCommandSupported(commandName);\n\t        } catch (ex) {\n\t\n\t        }\n\t        return result;\n\t    };\n\t\n\t});\n\t// dom selector\n\t_e(function (E, $) {\n\t\n\t    var matchesSelector;\n\t\n\t    // matchesSelector hook\n\t    function _matchesSelectorForIE(selector) {\n\t        var elem = this;\n\t        var $elems = $(selector);\n\t        var result = false;\n\t\n\t        // 用jquery查找 selector 所有对象，如果其中有一个和传入 elem 相同，则证明 elem 符合 selector\n\t        $elems.each(function () {\n\t            if (this === elem) {\n\t                result = true;\n\t                return false;\n\t            }\n\t        });\n\t\n\t        return result;\n\t    }\n\t\n\t    // 从当前的elem，往上去查找合法标签 如 p head table blockquote ul ol 等\n\t    E.fn.getLegalTags = function (elem) {\n\t        var legalTags = this.config.legalTags;\n\t        if (!legalTags) {\n\t            E.error('配置项中缺少 legalTags 的配置');\n\t            return;\n\t        }\n\t        return this.getSelfOrParentByName(elem, legalTags);\n\t    };\n\t\n\t    // 根据条件，查询自身或者父元素，符合即返回\n\t    E.fn.getSelfOrParentByName = function (elem, selector, check) {\n\t\n\t        if (!elem || !selector) {\n\t            return;\n\t        }\n\t\n\t        if (!matchesSelector) {\n\t            // 定义 matchesSelector 函数\n\t            matchesSelector = elem.webkitMatchesSelector || \n\t                              elem.mozMatchesSelector ||\n\t                              elem.oMatchesSelector || \n\t                              elem.matchesSelector;\n\t        }\n\t        if (!matchesSelector) {\n\t            // 如果浏览器本身不支持 matchesSelector 则使用自定义的hook\n\t            matchesSelector = _matchesSelectorForIE;\n\t        }\n\t\n\t        var txt = this.txt.$txt.get(0);\n\t\n\t        while (elem && txt !== elem && $.contains(txt, elem)) {\n\t            if (matchesSelector.call(elem, selector)) {\n\t                // 符合 selector 查询条件\n\t\n\t                if (!check) {\n\t                    // 没有 check 验证函数，直接返回即可\n\t                    return elem;\n\t                }\n\t\n\t                if (check(elem)) {\n\t                    // 如果有 check 验证函数，还需 check 函数的确认\n\t                    return elem;\n\t                }\n\t            }\n\t\n\t            // 如果上一步没经过验证，则将跳转到父元素\n\t            elem = elem.parentNode;\n\t        }\n\t\n\t        return;\n\t    };\n\t\n\t});\n\t// undo redo\n\t_e(function (E, $) {\n\t\n\t    var length = 20;  // 缓存的最大长度\n\t    function _getRedoList(editor) {\n\t        if (editor._redoList == null) {\n\t            editor._redoList = [];\n\t        }\n\t        return editor._redoList;\n\t    }\n\t    function _getUndoList(editor) {\n\t        if (editor._undoList == null) {\n\t            editor._undoList = [];\n\t        }\n\t        return editor._undoList;\n\t    }\n\t\n\t    // 数据处理\n\t    function _handle(editor, data, type) {\n\t        // var range = data.range;\n\t        // var range2 = range.cloneRange && range.cloneRange();\n\t        var val = data.val;\n\t        var html = editor.txt.$txt.html();\n\t\n\t        if(val == null) {\n\t            return;\n\t        }\n\t\n\t        if (val === html) {\n\t            if (type === 'redo') { \n\t                editor.redo();\n\t                return;\n\t            } else if (type === 'undo') {\n\t                editor.undo();\n\t                return;\n\t            } else {\n\t                return;\n\t            }\n\t        }\n\t\n\t        // 保存数据\n\t        editor.txt.$txt.html(val);\n\t        // 更新数据到textarea（有必要的话）\n\t        editor.updateValue();\n\t\n\t        // onchange 事件\n\t        if (editor.onchange && typeof editor.onchange === 'function') {\n\t            editor.onchange.call(editor);\n\t        }\n\t\n\t        // ?????\n\t        // 注释：$txt 被重新赋值之后，range会被重置，cloneRange() 也不好使\n\t        // // 重置选区\n\t        // if (range2) {\n\t        //     editor.restoreSelection(range2);\n\t        // }\n\t    }\n\t\n\t    // 记录\n\t    E.fn.undoRecord = function () {\n\t        var editor = this;\n\t        var $txt = editor.txt.$txt;\n\t        var val = $txt.html();\n\t        var undoList = _getUndoList(editor);\n\t        var redoList = _getRedoList(editor);\n\t        var currentVal = undoList.length ? undoList[0] : '';\n\t\n\t        if (val === currentVal.val) {\n\t            return;\n\t        }\n\t\n\t        // 清空 redolist\n\t        if (redoList.length) {\n\t            redoList = [];\n\t        }\n\t\n\t        // 添加数据到 undoList\n\t        undoList.unshift({\n\t            range: editor.currentRange(),  // 将当前的range也记录下\n\t            val: val\n\t        });\n\t\n\t        // 限制 undoList 长度\n\t        if (undoList.length > length) {\n\t            undoList.pop();\n\t        }\n\t    };\n\t\n\t    // undo 操作\n\t    E.fn.undo = function () {\n\t        var editor = this;\n\t        var undoList = _getUndoList(editor);\n\t        var redoList = _getRedoList(editor);\n\t\n\t        if (!undoList.length) {\n\t            return;\n\t        }\n\t\n\t        // 取出 undolist 第一个值，加入 redolist\n\t        var data = undoList.shift();\n\t        redoList.unshift(data);\n\t\n\t        // 并修改编辑器的内容\n\t        _handle(this, data, 'undo');\n\t    };\n\t\n\t    // redo 操作\n\t    E.fn.redo = function () {\n\t        var editor = this;\n\t        var undoList = _getUndoList(editor);\n\t        var redoList = _getRedoList(editor);\n\t        if (!redoList.length) {\n\t            return;\n\t        }\n\t\n\t        // 取出 redolist 第一个值，加入 undolist\n\t        var data = redoList.shift();\n\t        undoList.unshift(data);\n\t\n\t        // 并修改编辑器的内容\n\t        _handle(this, data, 'redo');\n\t    };\n\t});\n\t// 暴露给用户的 API\n\t_e(function (E, $) {\n\t\n\t    // 创建编辑器\n\t    E.fn.create = function () {\n\t        var editor = this;\n\t\n\t        // 检查 E.$body 是否有值\n\t        // 如果在 body 之前引用了 js 文件，body 尚未加载，可能没有值\n\t        if (!E.$body || E.$body.length === 0) {\n\t            E.$body = $('body');\n\t            E.$document = $(document);\n\t            E.$window = $(window);\n\t        }\n\t\n\t        // 执行 addMenus 之前：\n\t        // 1. 允许用户修改 editor.UI 自定义配置UI\n\t        // 2. 允许用户通过修改 editor.menus 来自定义配置菜单\n\t        // 因此要在 create 时执行，而不是 init           \n\t        editor.addMenus();\n\t\n\t        // 渲染\n\t        editor.renderMenus();\n\t        editor.renderMenuContainer();\n\t        editor.renderTxt();\n\t        editor.renderEditorContainer();\n\t\n\t        // 绑定事件\n\t        editor.eventMenus();\n\t        editor.eventMenuContainer();\n\t        editor.eventTxt();\n\t\n\t        // 处理ready事件\n\t        editor.readyHeadler();\n\t\n\t        // 初始化选区\n\t        editor.initSelection();\n\t\n\t        // $txt 快捷方式\n\t        editor.$txt = editor.txt.$txt;\n\t\n\t        // 执行用户自定义事件，通过 E.ready() 添加\n\t        var _plugins = E._plugins;\n\t        if (_plugins && _plugins.length) {\n\t            $.each(_plugins, function (k, val) {\n\t                val.call(editor);\n\t            });\n\t        }\n\t    };\n\t\n\t    // 禁用编辑器\n\t    E.fn.disable = function () {\n\t        this.txt.$txt.removeAttr('contenteditable');\n\t        this.disableMenusExcept();\n\t\n\t        // 先禁用，再记录状态\n\t        this._disabled = true;\n\t    };\n\t    // 启用编辑器\n\t    E.fn.enable = function () {\n\t        // 先解除状态记录，再启用\n\t        this._disabled = false;\n\t        this.txt.$txt.attr('contenteditable', 'true');\n\t        this.enableMenusExcept();\n\t    };\n\t\n\t    // 销毁编辑器\n\t    E.fn.destroy = function () {\n\t        var self = this;\n\t        var $valueContainer = self.$valueContainer;\n\t        var $editorContainer = self.$editorContainer;\n\t        var valueNodeName = self.valueNodeName;\n\t\n\t        if (valueNodeName === 'div') {\n\t            // div 生成的编辑器\n\t            $valueContainer.removeAttr('contenteditable');\n\t            $editorContainer.after($valueContainer);\n\t            $editorContainer.hide();\n\t        } else {\n\t            // textarea 生成的编辑器\n\t            $valueContainer.show();\n\t            $editorContainer.hide();\n\t        }\n\t    };\n\t\n\t    // 撤销 销毁编辑器\n\t    E.fn.undestroy = function () {\n\t        var self = this;\n\t        var $valueContainer = self.$valueContainer;\n\t        var $editorContainer = self.$editorContainer;\n\t        var $menuContainer = self.menuContainer.$menuContainer;\n\t        var valueNodeName = self.valueNodeName;\n\t\n\t        if (valueNodeName === 'div') {\n\t            // div 生成的编辑器\n\t            $valueContainer.attr('contenteditable', 'true');\n\t            $menuContainer.after($valueContainer);\n\t            $editorContainer.show();\n\t        } else {\n\t            // textarea 生成的编辑器\n\t            $valueContainer.hide();\n\t            $editorContainer.show();\n\t        }\n\t    };\n\t\n\t    // 清空内容的快捷方式\n\t    E.fn.clear = function () {\n\t        var editor = this;\n\t        var $txt = editor.txt.$txt;\n\t        $txt.html('<p><br></p>');\n\t        editor.restoreSelectionByElem($txt.find('p').get(0));\n\t    };\n\t\n\t});\n\t// menuContainer 构造函数\n\t_e(function (E, $) {\n\t\n\t    // 定义构造函数\n\t    var MenuContainer = function (editor) {\n\t        this.editor = editor;\n\t        this.init();\n\t    };\n\t\n\t    MenuContainer.fn = MenuContainer.prototype;\n\t\n\t    // 暴露给 E 即 window.wangEditor\n\t    E.MenuContainer = MenuContainer;\n\t\n\t});\n\t// MenuContainer.fn bind fn\n\t_e(function (E, $) {\n\t\n\t    var MenuContainer = E.MenuContainer;\n\t\n\t    // 初始化\n\t    MenuContainer.fn.init = function () {\n\t        var self = this;\n\t        var $menuContainer = $('<div class=\"wangEditor-menu-container clearfix\"></div>');\n\t\n\t        self.$menuContainer = $menuContainer;\n\t\n\t        // change shadow\n\t        self.changeShadow();\n\t    };\n\t\n\t    // 编辑区域滚动时，增加shadow\n\t    MenuContainer.fn.changeShadow = function () {\n\t        var $menuContainer = this.$menuContainer;\n\t        var editor = this.editor;\n\t        var $txt = editor.txt.$txt;\n\t\n\t        $txt.on('scroll', function () {\n\t            if ($txt.scrollTop() > 10) {\n\t                $menuContainer.addClass('wangEditor-menu-shadow');\n\t            } else {\n\t                $menuContainer.removeClass('wangEditor-menu-shadow');\n\t            }\n\t        });\n\t    };\n\t\n\t});\n\t// MenuContainer.fn API\n\t_e(function (E, $) {\n\t\n\t    var MenuContainer = E.MenuContainer;\n\t\n\t    MenuContainer.fn.render = function () {\n\t        var $menuContainer = this.$menuContainer;\n\t        var $editorContainer = this.editor.$editorContainer;\n\t\n\t        $editorContainer.append($menuContainer);\n\t    };\n\t    \n\t    // 获取菜单栏的高度\n\t    MenuContainer.fn.height = function () {\n\t        var $menuContainer = this.$menuContainer;\n\t        return $menuContainer.height();\n\t    };\n\t\n\t    // 添加菜单\n\t    MenuContainer.fn.appendMenu = function (groupIdx, menu) {\n\t        // 判断是否需要新增一个菜单组\n\t        this._addGroup(groupIdx);\n\t        // 增加菜单（返回 $menuItem）\n\t        return this._addOneMenu(menu);\n\t    };\n\t    MenuContainer.fn._addGroup = function (groupIdx) {\n\t        var $menuContainer = this.$menuContainer;\n\t        var $menuGroup;\n\t        if (!this.$currentGroup || this.currentGroupIdx !== groupIdx) {\n\t            $menuGroup = $('<div class=\"menu-group clearfix\"></div>');\n\t            $menuContainer.append($menuGroup);\n\t\n\t            this.$currentGroup = $menuGroup;\n\t            this.currentGroupIdx = groupIdx;\n\t        }\n\t    };\n\t    MenuContainer.fn._addOneMenu = function (menu) {\n\t        var $menuNormal = menu.$domNormal;\n\t        var $menuSelected = menu.$domSelected;\n\t\n\t        var $menuGroup = this.$currentGroup;\n\t        var $item = $('<div class=\"menu-item clearfix\"></div>');\n\t        $menuSelected.hide();\n\t        $item.append($menuNormal).append($menuSelected);\n\t        $menuGroup.append($item);\n\t\n\t        return $item;\n\t    };\n\t\n\t});\n\t// menu 构造函数\n\t_e(function (E, $) {\n\t\n\t    // 定义构造函数\n\t    var Menu = function (opt) {\n\t        this.editor = opt.editor;\n\t        this.id = opt.id;\n\t        this.title = opt.title;\n\t        this.$domNormal = opt.$domNormal;\n\t        this.$domSelected = opt.$domSelected || opt.$domNormal;\n\t\n\t        // document.execCommand 的参数\n\t        this.commandName = opt.commandName;\n\t        this.commandValue = opt.commandValue;\n\t        this.commandNameSelected = opt.commandNameSelected || opt.commandName;\n\t        this.commandValueSelected = opt.commandValueSelected || opt.commandValue;\n\t    };\n\t\n\t    Menu.fn = Menu.prototype;\n\t\n\t    // 暴露给 E 即 window.wangEditor\n\t    E.Menu = Menu;\n\t});\n\t// Menu.fn 初始化绑定的事件\n\t_e(function (E, $) {\n\t\n\t    var Menu = E.Menu;\n\t\n\t    // 初始化UI\n\t    Menu.fn.initUI = function () {\n\t        var editor = this.editor;\n\t        var uiConfig = editor.UI.menus;\n\t        var menuId = this.id;\n\t        var menuUI = uiConfig[menuId];\n\t\n\t        if (this.$domNormal && this.$domSelected) {\n\t            // 自定义的菜单中，已经传入了 $dom 无需从配置文件中查找生成\n\t            return;\n\t        }\n\t\n\t        if (menuUI == null) {\n\t            E.warn('editor.UI配置中，没有菜单 \"' + menuId + '\" 的UI配置，只能取默认值');\n\t            \n\t            // 必须写成 uiConfig['default'];\n\t            // 写成 uiConfig.default IE8会报错\n\t            menuUI = uiConfig['default'];\n\t        }\n\t\n\t        // 正常状态\n\t        this.$domNormal = $(menuUI.normal);\n\t\n\t        // 选中状态\n\t        if (/^\\./.test(menuUI.selected)) {\n\t            // 增加一个样式\n\t            this.$domSelected = this.$domNormal.clone().addClass(menuUI.selected.slice(1));\n\t        } else {\n\t            // 一个新的dom对象\n\t            this.$domSelected = $(menuUI.selected);\n\t        }\n\t    };\n\t\n\t});\n\t// Menu.fn API\n\t_e(function (E, $) {\n\t\n\t    var Menu = E.Menu;\n\t\n\t    // 渲染菜单\n\t    Menu.fn.render = function (groupIdx) {\n\t        // 渲染UI\n\t        this.initUI();\n\t        \n\t        var editor = this.editor;\n\t        var menuContainer = editor.menuContainer;\n\t        var $menuItem = menuContainer.appendMenu(groupIdx, this);\n\t        var onRender = this.onRender;\n\t\n\t        // 渲染tip\n\t        this._renderTip($menuItem);\n\t\n\t        // 执行 onRender 函数\n\t        if (onRender && typeof onRender === 'function') {\n\t            onRender.call(this);\n\t        }\n\t    };\n\t    Menu.fn._renderTip = function ($menuItem) {\n\t        var self = this;\n\t        var editor = self.editor;\n\t        var title = self.title;\n\t        var $tip = $('<div class=\"menu-tip\"></div>');\n\t        // var $triangle = $('<i class=\"tip-triangle\"></i>'); // 小三角\n\t\n\t        // 计算 tip 宽度\n\t        var $tempDiv;\n\t        if (!self.tipWidth) {\n\t            // 设置一个纯透明的 p（absolute;top:-10000px;不会显示在内容区域）\n\t            // 内容赋值为 title ，为了计算tip宽度\n\t            $tempDiv = $('<p style=\"opacity:0; filter:Alpha(opacity=0); position:absolute;top:-10000px;\">' + title + '</p>');\n\t            // 先添加到body，计算完再 remove\n\t            E.$body.append($tempDiv);\n\t            editor.ready(function () {\n\t                var editor = this;\n\t                var titleWidth = $tempDiv.outerWidth() + 5; // 多出 5px 的冗余\n\t                var currentWidth = $tip.outerWidth();\n\t                var currentMarginLeft = parseFloat($tip.css('margin-left'), 10);\n\t                // 计算完，拿到数据，则弃用\n\t                $tempDiv.remove();\n\t                $tempDiv = null;\n\t\n\t                // 重新设置样式\n\t                $tip.css({\n\t                    width: titleWidth,\n\t                    'margin-left': currentMarginLeft + (currentWidth - titleWidth)/2\n\t                });\n\t\n\t                // 存储\n\t                self.tipWidth = titleWidth;\n\t            });\n\t        }\n\t\n\t        // $tip.append($triangle);\n\t        $tip.append(title);\n\t        $menuItem.append($tip);\n\t\n\t        function show() {\n\t            $tip.show();\n\t        }\n\t        function hide() {\n\t            $tip.hide();\n\t        }\n\t\n\t        var timeoutId;\n\t        $menuItem.find('a').on('mouseenter', function (e) {\n\t            if (!self.active() && !self.disabled()) {\n\t                timeoutId = setTimeout(show, 200);\n\t            }\n\t        }).on('mouseleave', function (e) {\n\t            timeoutId && clearTimeout(timeoutId);\n\t            hide();\n\t        }).on('click', hide);\n\t    };\n\t\n\t    // 绑定事件\n\t    Menu.fn.bindEvent = function () {\n\t        var self = this;\n\t\n\t        var $domNormal = self.$domNormal;\n\t        var $domSelected = self.$domSelected;\n\t\n\t        // 试图获取该菜单定义的事件（未selected），没有则自己定义\n\t        var clickEvent = self.clickEvent;\n\t        if (!clickEvent) {\n\t            clickEvent = function (e) {\n\t                // -----------dropPanel dropList modal-----------\n\t                var dropObj = self.dropPanel || self.dropList || self.modal;\n\t                if (dropObj && dropObj.show) {\n\t                    if (dropObj.isShowing) {\n\t                        dropObj.hide();\n\t                    } else {\n\t                        dropObj.show();\n\t                    }\n\t                    return;\n\t                }\n\t\n\t                // -----------command-----------\n\t                var editor = self.editor;\n\t                var commandName;\n\t                var commandValue;\n\t\n\t                var selected = self.selected;\n\t                if (selected) {\n\t                    commandName = self.commandNameSelected;\n\t                    commandValue = self.commandValueSelected;\n\t                } else {\n\t                    commandName = self.commandName;\n\t                    commandValue = self.commandValue;\n\t                }\n\t\n\t                if (commandName) {\n\t                    // 执行命令\n\t                    editor.command(e, commandName, commandValue);\n\t                } else {\n\t                    // 提示\n\t                    E.warn('菜单 \"' + self.id + '\" 未定义click事件');\n\t                    e.preventDefault();\n\t                }\n\t            };\n\t        }\n\t        // 获取菜单定义的selected情况下的点击事件\n\t        var clickEventSelected = self.clickEventSelected || clickEvent;\n\t\n\t        // 将事件绑定到菜单dom上\n\t        $domNormal.click(function (e) {\n\t            if (!self.disabled()) {\n\t                clickEvent.call(self, e);\n\t                self.updateSelected();\n\t            }\n\t            e.preventDefault();\n\t        });\n\t        $domSelected.click(function (e) {\n\t            if (!self.disabled()) {\n\t                clickEventSelected.call(self, e);\n\t                self.updateSelected();\n\t            }\n\t            e.preventDefault();\n\t        });\n\t    };\n\t\n\t    // 更新选中状态\n\t    Menu.fn.updateSelected = function () {\n\t        var self = this;\n\t        var editor = self.editor;\n\t\n\t        // 试图获取用户自定义的判断事件\n\t        var updateSelectedEvent = self.updateSelectedEvent;\n\t        if (!updateSelectedEvent) {\n\t            // 用户未自定义，则设置默认值\n\t            updateSelectedEvent = function () {\n\t                var self = this;\n\t                var editor = self.editor;\n\t                var commandName = self.commandName;\n\t                var commandValue = self.commandValue;\n\t\n\t                if (commandValue) {\n\t                    if (editor.queryCommandValue(commandName).toLowerCase() === commandValue.toLowerCase()) {\n\t                        return true;\n\t                    }\n\t                } else if (editor.queryCommandState(commandName)) {\n\t                    return true;\n\t                }\n\t\n\t                return false;\n\t            };\n\t        }\n\t\n\t        // 获取结果\n\t        var result = updateSelectedEvent.call(self);\n\t        result = !!result;\n\t\n\t        // 存储结果、显示效果\n\t        self.changeSelectedState(result);\n\t    };\n\t\n\t    // 切换选中状态、显示效果\n\t    Menu.fn.changeSelectedState = function (state) {\n\t        var self = this;\n\t        var selected = self.selected;\n\t\n\t        if (state != null && typeof state === 'boolean') {\n\t            if (selected === state) {\n\t                // 计算结果和当前的状态一样\n\t                return;\n\t            }\n\t            // 存储结果\n\t            self.selected = state;\n\t\n\t            // 切换菜单的显示\n\t            if (state) {\n\t                // 选中\n\t                self.$domNormal.hide();\n\t                self.$domSelected.show();\n\t            } else {\n\t                // 未选中\n\t                self.$domNormal.show();\n\t                self.$domSelected.hide();\n\t            }\n\t        } // if\n\t    };\n\t\n\t    // 点击菜单，显示了 dropPanel modal 时，菜单的状态 \n\t    Menu.fn.active = function (active) {\n\t        if (active == null) {\n\t            return this._activeState;\n\t        }\n\t        this._activeState = active;\n\t    };\n\t    Menu.fn.activeStyle = function (active) {\n\t        var selected = this.selected;\n\t        var $dom = this.$domNormal;\n\t        var $domSelected = this.$domSelected;\n\t\n\t        if (active) {\n\t            $dom.addClass('active');\n\t            $domSelected.addClass('active');\n\t        } else {\n\t            $dom.removeClass('active');\n\t            $domSelected.removeClass('active');\n\t        }\n\t\n\t        // 记录状态 （ menu hover 时会取状态用 ）\n\t        this.active(active);\n\t    };\n\t\n\t    // 菜单的启用和禁用\n\t    Menu.fn.disabled = function (opt) {\n\t        // 参数为空，取值\n\t        if (opt == null) {\n\t            return !!this._disabled;\n\t        }\n\t\n\t        if (this._disabled === opt) {\n\t            // 要设置的参数值和当前参数只一样，无需再次设置\n\t            return;\n\t        }\n\t\n\t        var $dom = this.$domNormal;\n\t        var $domSelected = this.$domSelected;\n\t\n\t        // 设置样式\n\t        if (opt) {\n\t            $dom.addClass('disable');\n\t            $domSelected.addClass('disable');\n\t        } else {\n\t            $dom.removeClass('disable');\n\t            $domSelected.removeClass('disable');\n\t        }\n\t\n\t        // 存储\n\t        this._disabled = opt;\n\t    };\n\t\n\t});\n\t// dropList 构造函数\n\t_e(function (E, $) {\n\t\n\t    // 定义构造函数\n\t    var DropList = function (editor, menu, opt) {\n\t        this.editor = editor;\n\t        this.menu = menu;\n\t\n\t        // list 的数据源，格式 {'commandValue': 'title', ...}\n\t        this.data = opt.data;\n\t        // 要为每个item自定义的模板\n\t        this.tpl = opt.tpl;\n\t        // 为了执行 editor.commandForElem 而传入的elem查询方式\n\t        this.selectorForELemCommand = opt.selectorForELemCommand;\n\t\n\t        // 执行事件前后的钩子\n\t        this.beforeEvent = opt.beforeEvent;\n\t        this.afterEvent = opt.afterEvent;\n\t\n\t        // 初始化\n\t        this.init();\n\t    };\n\t\n\t    DropList.fn = DropList.prototype;\n\t\n\t    // 暴露给 E 即 window.wangEditor\n\t    E.DropList = DropList;\n\t});\n\t// dropList fn bind\n\t_e(function (E, $) {\n\t\n\t    var DropList = E.DropList;\n\t\n\t    // init\n\t    DropList.fn.init = function () {\n\t        var self = this;\n\t\n\t        // 生成dom对象\n\t        self.initDOM();\n\t\n\t        // 绑定command事件\n\t        self.bindEvent();\n\t\n\t        // 声明隐藏的事件\n\t        self.initHideEvent();\n\t    };\n\t\n\t    // 初始化dom结构\n\t    DropList.fn.initDOM = function () {\n\t        var self = this;\n\t        var data = self.data;\n\t        var tpl = self.tpl || '<span>{#title}</span>';\n\t        var $list = $('<div class=\"wangEditor-drop-list clearfix\"></div>');\n\t\n\t        var itemContent;\n\t        var $item;\n\t        $.each(data, function (commandValue, title) {\n\t            itemContent = tpl.replace(/{#commandValue}/ig, commandValue).replace(/{#title}/ig, title);\n\t            $item = $('<a href=\"#\" commandValue=\"' + commandValue + '\"></a>');\n\t            $item.append(itemContent);\n\t            $list.append($item);\n\t        });\n\t\n\t        self.$list = $list;\n\t    };\n\t\n\t    // 绑定事件\n\t    DropList.fn.bindEvent = function () {\n\t        var self = this;\n\t        var editor = self.editor;\n\t        var menu = self.menu;\n\t        var commandName = menu.commandName;\n\t        var selectorForELemCommand = self.selectorForELemCommand;\n\t        var $list = self.$list;\n\t\n\t        // 执行事件前后的钩子函数\n\t        var beforeEvent = self.beforeEvent;\n\t        var afterEvent = self.afterEvent;\n\t\n\t        $list.on('click', 'a[commandValue]', function (e) {\n\t            // 正式命令执行之前\n\t            if (beforeEvent && typeof beforeEvent === 'function') {\n\t                beforeEvent.call(e);\n\t            }\n\t\n\t            // 执行命令\n\t            var commandValue = $(e.currentTarget).attr('commandValue');\n\t            if (menu.selected && editor.isRangeEmpty() && selectorForELemCommand) {\n\t                // 当前处于选中状态，并且选中内容为空\n\t                editor.commandForElem(selectorForELemCommand, e, commandName, commandValue);\n\t            } else {\n\t                // 当前未处于选中状态，或者有选中内容。则执行默认命令\n\t                editor.command(e, commandName, commandValue);\n\t            }\n\t\n\t            // 正式命令之后的钩子\n\t            if (afterEvent && typeof afterEvent === 'function') {\n\t                afterEvent.call(e);\n\t            }\n\t        });\n\t    };\n\t\n\t    // 点击其他地方，立即隐藏 droplist\n\t    DropList.fn.initHideEvent = function () {\n\t        var self = this;\n\t\n\t        // 获取 list elem\n\t        var thisList = self.$list.get(0);\n\t\n\t        E.$body.on('click', function (e) {\n\t            if (!self.isShowing) {\n\t                return;\n\t            }\n\t            var trigger = e.target;\n\t\n\t            // 获取菜单elem\n\t            var menu = self.menu;\n\t            var menuDom;\n\t            if (menu.selected) {\n\t                menuDom = menu.$domSelected.get(0);\n\t            } else {\n\t                menuDom = menu.$domNormal.get(0);\n\t            }\n\t\n\t            if (menuDom === trigger || $.contains(menuDom, trigger)) {\n\t                // 说明由本菜单点击触发的\n\t                return;\n\t            }\n\t\n\t            if (thisList === trigger || $.contains(thisList, trigger)) {\n\t                // 说明由本list点击触发的\n\t                return;\n\t            }\n\t\n\t            // 其他情况，隐藏 list\n\t            self.hide();\n\t        });\n\t\n\t        E.$window.scroll(function () {\n\t            self.hide();\n\t        });\n\t\n\t        E.$window.on('resize', function () {\n\t            self.hide();\n\t        });\n\t    };\n\t\n\t});\n\t// dropListfn api\n\t_e(function (E, $) {\n\t    \n\t    var DropList = E.DropList;\n\t\n\t    // 渲染\n\t    DropList.fn._render = function () {\n\t        var self = this;\n\t        var editor = self.editor;\n\t        var $list = self.$list;\n\t\n\t        // 渲染到页面\n\t        editor.$editorContainer.append($list);\n\t\n\t        // 记录状态\n\t        self.rendered = true;\n\t    };\n\t\n\t    // 定位\n\t    DropList.fn._position = function () {\n\t        var self = this;\n\t        var $list = self.$list;\n\t        var editor = self.editor;\n\t        var menu = self.menu;\n\t        var $menuContainer = editor.menuContainer.$menuContainer;\n\t        var $menuDom = menu.selected ? menu.$domSelected : menu.$domNormal;\n\t        // 注意这里的 offsetParent() 要返回 .menu-item 的 position\n\t        // 因为 .menu-item 是 position:relative\n\t        var menuPosition = $menuDom.offsetParent().position();\n\t\n\t        // 取得 menu 的位置、尺寸属性\n\t        var menuTop = menuPosition.top;\n\t        var menuLeft = menuPosition.left;\n\t        var menuHeight = $menuDom.offsetParent().height();\n\t        var menuWidth = $menuDom.offsetParent().width();\n\t\n\t        // 取得 list 的尺寸属性\n\t        var listWidth = $list.outerWidth();\n\t        // var listHeight = $list.outerHeight();\n\t\n\t        // 取得 $txt 的尺寸\n\t        var txtWidth = editor.txt.$txt.outerWidth();\n\t\n\t        // ------------开始计算-------------\n\t\n\t        // 初步计算 list 位置属性\n\t        var top = menuTop + menuHeight;\n\t        var left = menuLeft + menuWidth/2;\n\t        var marginLeft = 0 - menuWidth/2;\n\t\n\t        // 如果超出了有边界，则要左移（且和右侧有间隙）\n\t        var valWithTxt = (left + listWidth) - txtWidth;\n\t        if (valWithTxt > -10) {\n\t            marginLeft = marginLeft - valWithTxt - 10;\n\t        }\n\t        // 设置样式\n\t        $list.css({\n\t            top: top,\n\t            left: left,\n\t            'margin-left': marginLeft\n\t        });\n\t\n\t        // 如果因为向下滚动而导致菜单fixed，则再加一步处理\n\t        if (editor._isMenufixed) {\n\t            top = top + (($menuContainer.offset().top + $menuContainer.outerHeight()) - $list.offset().top);\n\t\n\t            // 重新设置top\n\t            $list.css({\n\t                top: top\n\t            });\n\t        }\n\t    };\n\t\n\t    // 显示\n\t    DropList.fn.show = function () {\n\t        var self = this;\n\t        var menu = self.menu;\n\t        if (!self.rendered) {\n\t            // 第一次show之前，先渲染\n\t            self._render();\n\t        }\n\t\n\t        if (self.isShowing) {\n\t            return;\n\t        }\n\t\n\t        var $list = self.$list;\n\t        $list.show();\n\t\n\t        // 定位\n\t        self._position();\n\t\n\t        // 记录状态\n\t        self.isShowing = true;\n\t\n\t        // 菜单状态\n\t        menu.activeStyle(true);\n\t    };\n\t\n\t    // 隐藏\n\t    DropList.fn.hide = function () {\n\t        var self = this;\n\t        var menu = self.menu;\n\t        if (!self.isShowing) {\n\t            return;\n\t        }\n\t\n\t        var $list = self.$list;\n\t        $list.hide();\n\t\n\t        // 记录状态\n\t        self.isShowing = false;\n\t\n\t        // 菜单状态\n\t        menu.activeStyle(false);\n\t    };\n\t});\n\t// dropPanel 构造函数\n\t_e(function (E, $) {\n\t\n\t    // 定义构造函数\n\t    var DropPanel = function (editor, menu, opt) {\n\t        this.editor = editor;\n\t        this.menu = menu;\n\t        this.$content = opt.$content;\n\t        this.width = opt.width || 200;\n\t        this.height = opt.height;\n\t        this.onRender = opt.onRender;\n\t\n\t        // init\n\t        this.init();\n\t    };\n\t\n\t    DropPanel.fn = DropPanel.prototype;\n\t\n\t    // 暴露给 E 即 window.wangEditor\n\t    E.DropPanel = DropPanel;\n\t});\n\t// dropPanel fn bind\n\t_e(function (E, $) {\n\t\n\t    var DropPanel = E.DropPanel;\n\t\n\t    // init\n\t    DropPanel.fn.init = function () {\n\t        var self = this;\n\t\n\t        // 生成dom对象\n\t        self.initDOM();\n\t\n\t        // 声明隐藏的事件\n\t        self.initHideEvent();\n\t    };\n\t\n\t    // init DOM\n\t    DropPanel.fn.initDOM = function () {\n\t        var self = this;\n\t        var $content = self.$content;\n\t        var width = self.width;\n\t        var height = self.height;\n\t        var $panel = $('<div class=\"wangEditor-drop-panel clearfix\"></div>');\n\t        var $triangle = $('<div class=\"tip-triangle\"></div>');\n\t\n\t        $panel.css({\n\t            width: width,\n\t            height: height ? height : 'auto'\n\t        });\n\t        $panel.append($triangle);\n\t        $panel.append($content);\n\t\n\t        // 添加对象数据\n\t        self.$panel = $panel;\n\t        self.$triangle = $triangle;\n\t    };\n\t\n\t    // 点击其他地方，立即隐藏 dropPanel\n\t    DropPanel.fn.initHideEvent = function () {\n\t        var self = this;\n\t\n\t        // 获取 panel elem\n\t        var thisPanle = self.$panel.get(0);\n\t\n\t        E.$body.on('click', function (e) {\n\t            if (!self.isShowing) {\n\t                return;\n\t            }\n\t            var trigger = e.target;\n\t\n\t            // 获取菜单elem\n\t            var menu = self.menu;\n\t            var menuDom;\n\t            if (menu.selected) {\n\t                menuDom = menu.$domSelected.get(0);\n\t            } else {\n\t                menuDom = menu.$domNormal.get(0);\n\t            }\n\t\n\t            if (menuDom === trigger || $.contains(menuDom, trigger)) {\n\t                // 说明由本菜单点击触发的\n\t                return;\n\t            }\n\t\n\t            if (thisPanle === trigger || $.contains(thisPanle, trigger)) {\n\t                // 说明由本panel点击触发的\n\t                return;\n\t            }\n\t\n\t            // 其他情况，隐藏 panel\n\t            self.hide();\n\t        });\n\t\n\t        E.$window.scroll(function (e) {\n\t            self.hide();\n\t        });\n\t\n\t        E.$window.on('resize', function () {\n\t            self.hide();\n\t        });\n\t    };\n\t\n\t});\n\t// dropPanel fn api\n\t_e(function (E, $) {\n\t   \n\t    var DropPanel = E.DropPanel;\n\t\n\t    // 渲染\n\t    DropPanel.fn._render = function () {\n\t        var self = this;\n\t        var onRender = self.onRender;\n\t        var editor = self.editor;\n\t        var $panel = self.$panel;\n\t\n\t        // 渲染到页面\n\t        editor.$editorContainer.append($panel);\n\t\n\t        // 渲染后的回调事件\n\t        onRender && onRender.call(self);\n\t\n\t        // 记录状态\n\t        self.rendered = true;\n\t    };\n\t\n\t    // 定位\n\t    DropPanel.fn._position = function () {\n\t        var self = this;\n\t        var $panel = self.$panel;\n\t        var $triangle = self.$triangle;\n\t        var editor = self.editor;\n\t        var $menuContainer = editor.menuContainer.$menuContainer;\n\t        var menu = self.menu;\n\t        var $menuDom = menu.selected ? menu.$domSelected : menu.$domNormal;\n\t        // 注意这里的 offsetParent() 要返回 .menu-item 的 position\n\t        // 因为 .menu-item 是 position:relative\n\t        var menuPosition = $menuDom.offsetParent().position();\n\t\n\t        // 取得 menu 的位置、尺寸属性\n\t        var menuTop = menuPosition.top;\n\t        var menuLeft = menuPosition.left;\n\t        var menuHeight = $menuDom.offsetParent().height();\n\t        var menuWidth = $menuDom.offsetParent().width();\n\t\n\t        // 取得 panel 的尺寸属性\n\t        var panelWidth = $panel.outerWidth();\n\t        // var panelHeight = $panel.outerHeight();\n\t\n\t        // 取得 $txt 的尺寸\n\t        var txtWidth = editor.txt.$txt.outerWidth();\n\t\n\t        // ------------开始计算-------------\n\t\n\t        // 初步计算 panel 位置属性\n\t        var top = menuTop + menuHeight;\n\t        var left = menuLeft + menuWidth/2;\n\t        var marginLeft = 0 - panelWidth/2;\n\t        var marginLeft2 = marginLeft;  // 下文用于和 marginLeft 比较，来设置三角形tip的位置\n\t\n\t        // 如果超出了左边界，则移动回来（要和左侧有10px间隙）\n\t        if ((0 - marginLeft) > (left - 10)) {\n\t            marginLeft = 0 - (left - 10);\n\t        }\n\t\n\t        // 如果超出了有边界，则要左移（且和右侧有10px间隙）\n\t        var valWithTxt = (left + panelWidth + marginLeft) - txtWidth;\n\t        if (valWithTxt > -10) {\n\t            marginLeft = marginLeft - valWithTxt - 10;\n\t        }\n\t\n\t        // 设置样式\n\t        $panel.css({\n\t            top: top,\n\t            left: left,\n\t            'margin-left': marginLeft\n\t        });\n\t\n\t        // 如果因为向下滚动而导致菜单fixed，则再加一步处理\n\t        if (editor._isMenufixed) {\n\t            top = top + (($menuContainer.offset().top + $menuContainer.outerHeight()) - $panel.offset().top);\n\t\n\t            // 重新设置top\n\t            $panel.css({\n\t                top: top\n\t            });\n\t        }\n\t\n\t        // 设置三角形 tip 的位置\n\t        $triangle.css({\n\t            'margin-left': marginLeft2 - marginLeft - 5\n\t        });\n\t    };\n\t\n\t    // focus 第一个 input\n\t    DropPanel.fn.focusFirstInput = function () {\n\t        var self = this;\n\t        var $panel = self.$panel;\n\t        $panel.find('input[type=text],textarea').each(function () {\n\t            var $input = $(this);\n\t            if ($input.attr('disabled') == null) {\n\t                $input.focus();\n\t                return false;\n\t            }\n\t        });\n\t    };\n\t\n\t    // 显示\n\t    DropPanel.fn.show = function () {\n\t        var self = this;\n\t        var menu = self.menu;\n\t        if (!self.rendered) {\n\t            // 第一次show之前，先渲染\n\t            self._render();\n\t        }\n\t\n\t        if (self.isShowing) {\n\t            return;\n\t        }\n\t\n\t        var $panel = self.$panel;\n\t        $panel.show();\n\t\n\t        // 定位\n\t        self._position();\n\t\n\t        // 记录状态\n\t        self.isShowing = true;\n\t\n\t        // 菜单状态\n\t        menu.activeStyle(true);\n\t\n\t        if (E.w3cRange) {\n\t            // 高级浏览器\n\t            self.focusFirstInput();\n\t        } else {\n\t            // 兼容 IE8 input placeholder\n\t            E.placeholderForIE8($panel);\n\t        }\n\t    };\n\t\n\t    // 隐藏\n\t    DropPanel.fn.hide = function () {\n\t        var self = this;\n\t        var menu = self.menu;\n\t        if (!self.isShowing) {\n\t            return;\n\t        }\n\t\n\t        var $panel = self.$panel;\n\t        $panel.hide();\n\t\n\t        // 记录状态\n\t        self.isShowing = false;\n\t\n\t        // 菜单状态\n\t        menu.activeStyle(false);\n\t    };\n\t\n\t});\n\t// modal 构造函数\n\t_e(function (E, $) {\n\t\n\t    // 定义构造函数\n\t    var Modal = function (editor, menu, opt) {\n\t        this.editor = editor;\n\t        this.menu = menu;\n\t        this.$content = opt.$content;\n\t\n\t        this.init();\n\t    };\n\t\n\t    Modal.fn = Modal.prototype;\n\t\n\t    // 暴露给 E 即 window.wangEditor\n\t    E.Modal = Modal;\n\t});\n\t// modal fn bind\n\t_e(function (E, $) {\n\t\n\t    var Modal = E.Modal;\n\t\n\t    Modal.fn.init = function () {\n\t        var self = this;\n\t\n\t        // 初始化dom\n\t        self.initDom();\n\t\n\t        // 初始化隐藏事件\n\t        self.initHideEvent();\n\t    };\n\t\n\t    // 初始化dom\n\t    Modal.fn.initDom = function () {\n\t        var self = this;\n\t        var $content = self.$content;\n\t        var $modal = $('<div class=\"wangEditor-modal\"></div>');\n\t        var $close = $('<div class=\"wangEditor-modal-close\"><i class=\"wangeditor-menu-img-cancel-circle\"></i></div>');\n\t\n\t        $modal.append($close);\n\t        $modal.append($content);\n\t\n\t        // 记录数据\n\t        self.$modal = $modal;\n\t        self.$close = $close;\n\t    };\n\t\n\t    // 初始化隐藏事件\n\t    Modal.fn.initHideEvent = function () {\n\t        var self = this;\n\t        var $close = self.$close;\n\t        var modal = self.$modal.get(0);\n\t\n\t        // 点击 $close 按钮，隐藏\n\t        $close.click(function () {\n\t            self.hide();\n\t        });\n\t\n\t        // 点击其他部分，隐藏\n\t        E.$body.on('click', function (e) {\n\t            if (!self.isShowing) {\n\t                return;\n\t            }\n\t            var trigger = e.target;\n\t\n\t            // 获取菜单elem\n\t            var menu = self.menu;\n\t            var menuDom;\n\t            if (menu) {\n\t                if (menu.selected) {\n\t                    menuDom = menu.$domSelected.get(0);\n\t                } else {\n\t                    menuDom = menu.$domNormal.get(0);\n\t                }\n\t\n\t                if (menuDom === trigger || $.contains(menuDom, trigger)) {\n\t                    // 说明由本菜单点击触发的\n\t                    return;\n\t                }\n\t            }\n\t\n\t            if (modal === trigger || $.contains(modal, trigger)) {\n\t                // 说明由本panel点击触发的\n\t                return;\n\t            }\n\t\n\t            // 其他情况，隐藏 panel\n\t            self.hide();\n\t        });\n\t    };\n\t});\n\t// modal fn api\n\t_e(function (E, $) {\n\t\n\t    var Modal = E.Modal;\n\t\n\t    // 渲染\n\t    Modal.fn._render = function () {\n\t        var self = this;\n\t        var editor = self.editor;\n\t        var $modal = self.$modal;\n\t\n\t        // $modal的z-index，在配置的z-index基础上再 +10\n\t        $modal.css('z-index', editor.config.zindex + 10 + '');\n\t\n\t        // 渲染到body最后面\n\t        E.$body.append($modal);\n\t\n\t        // 记录状态\n\t        self.rendered = true;\n\t    };\n\t\n\t    // 定位\n\t    Modal.fn._position = function () {\n\t        var self = this;\n\t        var $modal = self.$modal;\n\t        var top = $modal.offset().top;\n\t        var width = $modal.outerWidth();\n\t        var height = $modal.outerHeight();\n\t        var marginLeft = 0 - (width / 2);\n\t        var marginTop = 0 - (height / 2);\n\t        var sTop = E.$window.scrollTop();\n\t\n\t        // 保证modal最顶部，不超过浏览器上边框\n\t        if ((height / 2) > top) {\n\t            marginTop = 0 - top;\n\t        }\n\t\n\t        $modal.css({\n\t            'margin-left': marginLeft + 'px',\n\t            'margin-top': (marginTop + sTop) + 'px'\n\t        });\n\t    };\n\t\n\t    // 显示\n\t    Modal.fn.show = function () {\n\t        var self = this;\n\t        var menu = self.menu;\n\t        if (!self.rendered) {\n\t            // 第一次show之前，先渲染\n\t            self._render();\n\t        }\n\t\n\t        if (self.isShowing) {\n\t            return;\n\t        }\n\t        // 记录状态\n\t        self.isShowing = true;\n\t\n\t        var $modal = self.$modal;\n\t        $modal.show();\n\t\n\t        // 定位\n\t        self._position();\n\t\n\t        // 激活菜单状态\n\t        menu && menu.activeStyle(true);\n\t    };\n\t\n\t    // 隐藏\n\t    Modal.fn.hide = function () {\n\t        var self = this;\n\t        var menu = self.menu;\n\t        if (!self.isShowing) {\n\t            return;\n\t        }\n\t        // 记录状态\n\t        self.isShowing = false;\n\t\n\t        // 隐藏\n\t        var $modal = self.$modal;\n\t        $modal.hide();\n\t\n\t        // 菜单状态\n\t        menu && menu.activeStyle(false);\n\t    };\n\t});\n\t// txt 构造函数\n\t_e(function (E, $) {\n\t\n\t    // 定义构造函数\n\t    var Txt = function (editor) {\n\t        this.editor = editor;\n\t\n\t        // 初始化\n\t        this.init();\n\t    };\n\t\n\t    Txt.fn = Txt.prototype;\n\t\n\t    // 暴露给 E 即 window.wangEditor\n\t    E.Txt = Txt;\n\t});\n\t// Txt.fn bind fn\n\t_e(function (E, $) {\n\t\n\t    var Txt = E.Txt;\n\t\n\t    // 初始化\n\t    Txt.fn.init = function () {\n\t        var self = this;\n\t        var editor = self.editor;\n\t        var $valueContainer = editor.$valueContainer;\n\t        var currentValue = editor.getInitValue();\n\t        var $txt;\n\t\n\t        if ($valueContainer.get(0).nodeName === 'DIV') {\n\t            // 如果传入生成编辑器的元素就是div，则直接使用\n\t            $txt = $valueContainer;\n\t            $txt.addClass(\"wangEditor-txt\");\n\t            $txt.attr('contentEditable', 'true');\n\t        } else {\n\t            // 如果不是div（是textarea），则创建一个div\n\t            $txt = $(\n\t                '<div class=\"wangEditor-txt\" contentEditable=\"true\">' +\n\t                    currentValue +\n\t                '</div>'\n\t            );\n\t        }\n\t\n\t        // 试图最后插入一个空行，ready之后才行\n\t        editor.ready(function () {\n\t            self.insertEmptyP();\n\t        });\n\t\n\t        self.$txt = $txt;\n\t\n\t        // 删除时，如果没有内容了，就添加一个 <p><br></p>\n\t        self.contentEmptyHandle();\n\t\n\t        // enter时，不能使用 div 换行\n\t        self.bindEnterForDiv();\n\t\n\t        // enter时，用 p 包裹 text\n\t        self.bindEnterForText();\n\t\n\t        // tab 插入4个空格\n\t        self.bindTabEvent();\n\t\n\t        // 处理粘贴内容\n\t        self.bindPasteFilter();\n\t\n\t        // $txt.formatText() 方法\n\t        self.bindFormatText();\n\t\n\t        // 定义 $txt.html() 方法\n\t        self.bindHtml();\n\t    };\n\t\n\t    // 删除时，如果没有内容了，就添加一个 <p><br></p>\n\t    Txt.fn.contentEmptyHandle = function () {\n\t        var self = this;\n\t        var editor = self.editor;\n\t        var $txt = self.$txt;\n\t        var $p;\n\t\n\t        $txt.on('keydown', function (e) {\n\t            if (e.keyCode !== 8) {\n\t                return;\n\t            }\n\t            var txtHtml = $.trim($txt.html().toLowerCase());\n\t            if (txtHtml === '<p><br></p>') {\n\t                // 如果最后还剩余一个空行，就不再继续删除了\n\t                e.preventDefault();\n\t                return;\n\t            }\n\t        });\n\t\n\t        $txt.on('keyup', function (e) {\n\t            if (e.keyCode !== 8) {\n\t                return;\n\t            }\n\t            var txtHtml = $.trim($txt.html().toLowerCase());\n\t            // ff时用 txtHtml === '<br>' 判断，其他用 !txtHtml 判断\n\t            if (!txtHtml || txtHtml === '<br>') {\n\t                // 内容空了\n\t                $p = $('<p><br/></p>');\n\t                $txt.html(''); // 一定要先清空，否则在 ff 下有问题\n\t                $txt.append($p);\n\t                editor.restoreSelectionByElem($p.get(0));\n\t            }\n\t        });\n\t    };\n\t\n\t    // enter时，不能使用 div 换行\n\t    Txt.fn.bindEnterForDiv = function () {\n\t        var tags = E.config.legalTags; // 配置中编辑器要求的合法标签，如 p head table blockquote ul ol 等\n\t        var self = this;\n\t        var editor = self.editor;\n\t        var $txt = self.$txt;\n\t\n\t        var $keydownDivElem;\n\t        function divHandler() {\n\t            if (!$keydownDivElem) {\n\t                return;\n\t            }\n\t\n\t            var $pElem = $('<p>' + $keydownDivElem.html() + '</p>');\n\t            $keydownDivElem.after($pElem);\n\t            $keydownDivElem.remove();\n\t        }\n\t\n\t        $txt.on('keydown keyup', function (e) {\n\t            if (e.keyCode !== 13) {\n\t                return;\n\t            }\n\t            // 查找合法标签\n\t            var rangeElem = editor.getRangeElem();\n\t            var targetElem = editor.getLegalTags(rangeElem);\n\t            var $targetElem;\n\t            var $pElem;\n\t\n\t            if (!targetElem) {\n\t                // 没找到合法标签，就去查找 div\n\t                targetElem = editor.getSelfOrParentByName(rangeElem, 'div');\n\t                if (!targetElem) {\n\t                    return;\n\t                }\n\t                $targetElem = $(targetElem);\n\t\n\t                if (e.type === 'keydown') {\n\t                    // 异步执行（同步执行会出现问题）\n\t                    $keydownDivElem = $targetElem;\n\t                    setTimeout(divHandler, 0);\n\t                }\n\t\n\t                if (e.type === 'keyup') {\n\t                    // 将 div 的内容移动到 p 里面，并移除 div\n\t                    $pElem = $('<p>' + $targetElem.html() + '</p>');\n\t                    $targetElem.after($pElem);\n\t                    $targetElem.remove();\n\t\n\t                    // 如果是回车结束，将选区定位到行首\n\t                    editor.restoreSelectionByElem($pElem.get(0), 'start');\n\t                }\n\t            }\n\t        });\n\t    };\n\t\n\t    // enter时，用 p 包裹 text\n\t    Txt.fn.bindEnterForText = function () {\n\t        var self = this;\n\t        var $txt = self.$txt;\n\t        var handle;\n\t        $txt.on('keyup', function (e) {\n\t            if (e.keyCode !== 13) {\n\t                return;\n\t            }\n\t            if (!handle) {\n\t                handle = function() {\n\t                    self.wrapImgAndText();\n\t                };\n\t            }\n\t            setTimeout(handle);\n\t        });\n\t    };\n\t\n\t    // tab 时，插入4个空格\n\t    Txt.fn.bindTabEvent = function () {\n\t        var self = this;\n\t        var editor = self.editor;\n\t        var $txt = self.$txt;\n\t\n\t        $txt.on('keydown', function (e) {\n\t            if (e.keyCode !== 9) {\n\t                // 只监听 tab 按钮\n\t                return;\n\t            }\n\t            // 如果浏览器支持 insertHtml 则插入4个空格。如果不支持，就不管了\n\t            if (editor.queryCommandSupported('insertHtml')) {\n\t                editor.command(e, 'insertHtml', '&nbsp;&nbsp;&nbsp;&nbsp;');\n\t            }\n\t        });\n\t    };\n\t\n\t    // 处理粘贴内容\n\t    Txt.fn.bindPasteFilter = function () {\n\t        var self = this;\n\t        var editor = self.editor;\n\t        var resultHtml = '';  //存储最终的结果\n\t        var $txt = self.$txt;\n\t        var legalTags = editor.config.legalTags;\n\t        var legalTagArr = legalTags.split(',');\n\t\n\t        $txt.on('paste', function (e) {\n\t            if (!editor.config.pasteFilter) {\n\t                // 配置中取消了粘贴过滤\n\t                return;\n\t            }\n\t\n\t            var currentNodeName = editor.getRangeElem().nodeName;\n\t            if (currentNodeName === 'TD' || currentNodeName === 'TH') {\n\t                // 在表格的单元格中粘贴，忽略所有内容。否则会出现异常情况\n\t                return;\n\t            }\n\t\n\t            resultHtml = ''; // 先清空 resultHtml\n\t\n\t            var pasteHtml, $paste, docSplitHtml;\n\t            var data = e.clipboardData || e.originalEvent.clipboardData;\n\t            var ieData = window.clipboardData;\n\t\n\t            if (editor.config.pasteText) {\n\t                // 只粘贴纯文本\n\t\n\t                if (data && data.getData) {\n\t                    // w3c\n\t                    pasteHtml = data.getData('text/plain');\n\t                } else if (ieData && ieData.getData) {\n\t                    // IE\n\t                    pasteHtml = ieData.getData('text');\n\t                } else {\n\t                    // 其他情况\n\t                    return;\n\t                }\n\t\n\t                // 拼接为 <p> 标签\n\t                if (pasteHtml) {\n\t                    resultHtml = '<p>' + pasteHtml + '</p>';\n\t                }\n\t\n\t            } else {\n\t                // 粘贴过滤了样式的、只有标签的 html\n\t\n\t                if (data && data.getData) {\n\t                    // w3c\n\t\n\t                    // 获取粘贴过来的html\n\t                    pasteHtml = data.getData('text/html');\n\t\n\t                    // 过滤从 word excel 粘贴过来的乱码\n\t                    docSplitHtml = pasteHtml.split('</html>');\n\t                    if (docSplitHtml.length === 2) {\n\t                        pasteHtml = docSplitHtml[0];\n\t                    }\n\t\n\t                    if (pasteHtml) {\n\t                        // 创建dom\n\t                        $paste = $('<div>' + pasteHtml + '</div>');\n\t                        // 处理，并将结果存储到 resultHtml 『全局』变量\n\t                        handle($paste.get(0));\n\t                    } else {\n\t                        // 得不到html，试图获取text\n\t                        pasteHtml = data.getData('text/plain');\n\t                        if (pasteHtml) {\n\t                            // 替换特殊字符\n\t                            pasteHtml = pasteHtml.replace(/[ ]/g, '&nbsp;')\n\t                                                 .replace(/</g, '&lt;')\n\t                                                 .replace(/>/g, '&gt;')\n\t                                                 .replace(/\\n/g, '</p><p>');\n\t                            // 拼接\n\t                            resultHtml = '<p>' + pasteHtml + '</p>';\n\t\n\t                            // 查询链接\n\t                            resultHtml = resultHtml.replace(/<p>(https?:\\/\\/.*?)<\\/p>/ig, function (match, link) {\n\t                                return '<p><a href=\"' + link + '\" target=\"_blank\">' + link + '</p>';\n\t                            });\n\t                        }\n\t                    }\n\t                    \n\t                } else if (ieData && ieData.getData) {\n\t                    // IE 直接从剪切板中取出纯文本格式\n\t                    resultHtml = ieData.getData('text');\n\t                    if (!resultHtml) {\n\t                        return;\n\t                    }\n\t                    // 拼接为 <p> 标签\n\t                    resultHtml = '<p>' + resultHtml + '</p>';\n\t                    resultHtml = resultHtml.replace(new RegExp('\\n', 'g'), '</p><p>');\n\t                } else {\n\t                    // 其他情况\n\t                    return;\n\t                }\n\t            }\n\t\n\t            // 执行命令\n\t            if (resultHtml) {\n\t                editor.command(e, 'insertHtml', resultHtml);\n\t\n\t                // 删除内容为空的 p 和嵌套的 p\n\t                self.clearEmptyOrNestP();\n\t            }\n\t        });\n\t\n\t        // 处理粘贴的内容\n\t        function handle(elem) {\n\t            if (!elem || !elem.nodeType || !elem.nodeName) {\n\t                return;\n\t            }\n\t            var $elem;\n\t            var nodeName = elem.nodeName.toLowerCase();\n\t            var nodeType = elem.nodeType;\n\t            var childNodesClone;\n\t\n\t            // 只处理文本和普通node标签\n\t            if (nodeType !== 3 && nodeType !== 1) {\n\t                return;\n\t            }\n\t\n\t            $elem = $(elem);\n\t\n\t            // 如果是容器，则继续深度遍历\n\t            if (nodeName === 'div') {\n\t                childNodesClone = [];\n\t                $.each(elem.childNodes, function (index, item) {\n\t                    // elem.childNodes 可获取TEXT节点，而 $elem.children() 就获取不到\n\t                    // 先将 elem.childNodes 拷贝一份，一面在循环递归过程中 elem 发生变化\n\t                    childNodesClone.push(item);\n\t                });\n\t                // 遍历子元素，执行操作\n\t                $.each(childNodesClone, function () {\n\t                    handle(this);\n\t                });\n\t                return;\n\t            }\n\t            \n\t            if (legalTagArr.indexOf(nodeName) >= 0) {\n\t                // 如果是合法标签之内的，则根据元素类型，获取值\n\t                resultHtml += getResult(elem);\n\t            } else if (nodeType === 3) {\n\t                // 如果是文本，则直接插入 p 标签\n\t                resultHtml += '<p>' + elem.textContent + '</p>';\n\t            } else if (nodeName === 'br') {\n\t                // <br>保留\n\t                resultHtml += '<br/>';\n\t            }\n\t            else {\n\t                // 忽略的标签\n\t                if (['meta', 'style', 'script', 'object', 'form', 'iframe', 'hr'].indexOf(nodeName) >= 0) {\n\t                    return;\n\t                }\n\t                // 其他标签，移除属性，插入 p 标签\n\t                $elem = $(removeAttrs(elem));\n\t                // 注意，这里的 clone() 是必须的，否则会出错\n\t                resultHtml += $('<div>').append($elem.clone()).html();\n\t            }\n\t        }\n\t\n\t        // 获取元素的结果\n\t        function getResult(elem) {\n\t            var nodeName = elem.nodeName.toLowerCase();\n\t            var $elem;\n\t            var htmlForP = '';\n\t            var htmlForLi = '';\n\t\n\t            if (['blockquote'].indexOf(nodeName) >= 0) {\n\t\n\t                // 直接取出元素text即可\n\t                $elem = $(elem);\n\t                return '<' + nodeName + '>' + $elem.text() + '</' + nodeName + '>';\n\t\n\t            } else if (['p', 'h1', 'h2', 'h3', 'h4', 'h5'].indexOf(nodeName) >= 0) {\n\t\n\t                //p head 取出 text 和链接\n\t                elem = removeAttrs(elem);\n\t                $elem = $(elem);\n\t                htmlForP = $elem.html();\n\t\n\t                // 剔除 a img 之外的元素\n\t                htmlForP = htmlForP.replace(/<.*?>/ig, function (tag) {\n\t                    if (tag === '</a>' || tag.indexOf('<a ') === 0 || tag.indexOf('<img ') === 0) {\n\t                        return tag;\n\t                    } else {\n\t                        return '';\n\t                    }\n\t                });\n\t\n\t                return '<' + nodeName + '>' + htmlForP + '</' + nodeName + '>';\n\t\n\t            } else if (['ul', 'ol'].indexOf(nodeName) >= 0) {\n\t                \n\t                // ul ol元素，获取子元素（li元素）的text link img，再拼接\n\t                $elem = $(elem);\n\t                $elem.children().each(function () {\n\t                    var $li = $(removeAttrs(this));\n\t                    var html = $li.html();\n\t\n\t                    html = html.replace(/<.*?>/ig, function (tag) {\n\t                        if (tag === '</a>' || tag.indexOf('<a ') === 0 || tag.indexOf('<img ') === 0) {\n\t                            return tag;\n\t                        } else {\n\t                            return '';\n\t                        }\n\t                    });\n\t\n\t                    htmlForLi += '<li>' + html + '</li>';\n\t                });\n\t                return '<' + nodeName + '>' + htmlForLi + '</' + nodeName + '>';\n\t            \n\t            } else {\n\t                \n\t                // 其他元素，移除元素属性\n\t                $elem = $(removeAttrs(elem));\n\t                return $('<div>').append($elem).html();\n\t            }\n\t        }\n\t\n\t        // 移除一个元素（子元素）的attr\n\t        function removeAttrs(elem) {\n\t            var attrs = elem.attributes || [];\n\t            var attrNames = [];\n\t            var exception = ['href', 'target', 'src', 'alt', 'rowspan', 'colspan']; //例外情况\n\t\n\t            // 先存储下elem中所有 attr 的名称\n\t            $.each(attrs, function (key, attr) {\n\t                if (attr && attr.nodeType === 2) {\n\t                    attrNames.push(attr.nodeName);\n\t                }\n\t            });\n\t            // 再根据名称删除所有attr\n\t            $.each(attrNames, function (key, attr) {\n\t                if (exception.indexOf(attr) < 0) {\n\t                    // 除了 exception 规定的例外情况，删除其他属性\n\t                    elem.removeAttribute(attr);\n\t                }\n\t            });\n\t\n\t\n\t            // 递归子节点\n\t            var children = elem.childNodes;\n\t            if (children.length) {\n\t                $.each(children, function (key, value) {\n\t                    removeAttrs(value);\n\t                });\n\t            }\n\t\n\t            return elem;\n\t        }\n\t    };\n\t\n\t    // 绑定 $txt.formatText() 方法\n\t    Txt.fn.bindFormatText = function () {\n\t        var self = this;\n\t        var editor = self.editor;\n\t        var $txt = self.$txt;\n\t        var legalTags = E.config.legalTags;\n\t        var legalTagArr = legalTags.split(',');\n\t        var length = legalTagArr.length;\n\t        var regArr = [];\n\t\n\t        // 将 E.config.legalTags 配置的有效字符，生成正则表达式\n\t        $.each(legalTagArr, function (k, tag) {\n\t            var reg = '\\>\\\\s*\\<(' + tag + ')\\>';\n\t            regArr.push(new RegExp(reg, 'ig'));\n\t        });\n\t\n\t        // 增加 li \n\t        regArr.push(new RegExp('\\>\\\\s*\\<(li)\\>', 'ig'));\n\t\n\t        // 增加 tr\n\t        regArr.push(new RegExp('\\>\\\\s*\\<(tr)\\>', 'ig'));\n\t\n\t        // 增加 code\n\t        regArr.push(new RegExp('\\>\\\\s*\\<(code)\\>', 'ig'));\n\t\n\t        // 生成 formatText 方法\n\t        $txt.formatText = function () {\n\t            var $temp = $('<div>');\n\t            var html = $txt.html();\n\t\n\t            // 去除空格\n\t            html = html.replace(/\\s*</ig, '<');\n\t\n\t            // 段落、表格之间换行\n\t            $.each(regArr, function (k, reg) {\n\t                if (!reg.test(html)) {\n\t                    return;\n\t                }\n\t                html = html.replace(reg, function (matchStr, tag) {\n\t                    return '>\\n<' + tag + '>';\n\t                });\n\t            });\n\t\n\t            $temp.html(html);\n\t            return $temp.text();\n\t        };\n\t    };\n\t\n\t    // 定制 $txt.html 方法\n\t    Txt.fn.bindHtml = function () {\n\t        var self = this;\n\t        var editor = self.editor;\n\t        var $txt = self.$txt;\n\t        var $valueContainer = editor.$valueContainer;\n\t        var valueNodeName = editor.valueNodeName;\n\t\n\t        $txt.html = function (html) {\n\t            var result;\n\t\n\t            if (valueNodeName === 'div') {\n\t                // div 生成的编辑器，取值、赋值，都直接触发jquery的html方法\n\t                result = $.fn.html.call($txt, html);\n\t            }\n\t\n\t            // textarea 生成的编辑器，则需要考虑赋值时，也给textarea赋值\n\t\n\t            if (html === undefined) {\n\t                // 取值，直接触发jquery原生html方法\n\t                result = $.fn.html.call($txt);\n\t\n\t                // 替换 html 中，src和href属性中的 & 字符。\n\t                // 因为 .html() 或者 .innerHTML 会把所有的 & 字符都改成 &amp; 但是 src 和 href 中的要保持 &\n\t                result = result.replace(/(href|src)\\=\\\"(.*)\\\"/igm, function (a, b, c) {\n\t                    return b + '=\"' + c.replace('&amp;', '&') + '\"';\n\t                });\n\t            } else {\n\t                // 赋值，需要同时给 textarea 赋值\n\t                result = $.fn.html.call($txt, html);\n\t                $valueContainer.val(html);\n\t            }\n\t\n\t            if (html === undefined) {\n\t                return result;\n\t            } else {\n\t                // 手动触发 change 事件，因为 $txt 监控了 change 事件来判断是否需要执行 editor.onchange \n\t                $txt.change();\n\t            }\n\t        };\n\t    };\n\t});\n\t// Txt.fn api\n\t_e(function (E, $) {\n\t\n\t    var Txt = E.Txt;\n\t\n\t    var txtChangeEventNames = 'propertychange change click keyup input paste';\n\t\n\t    // 渲染\n\t    Txt.fn.render = function () {\n\t        var $txt = this.$txt;\n\t        var $editorContainer = this.editor.$editorContainer;\n\t        $editorContainer.append($txt);\n\t    };\n\t\n\t    // 计算高度\n\t    Txt.fn.initHeight = function () {\n\t        var editor = this.editor;\n\t        var $txt = this.$txt;\n\t        var valueContainerHeight = editor.$valueContainer.height();\n\t        var menuHeight = editor.menuContainer.height();\n\t        var txtHeight = valueContainerHeight - menuHeight;\n\t\n\t        // 限制最小为 50px\n\t        txtHeight = txtHeight < 50 ? 50 : txtHeight;\n\t\n\t        $txt.height(txtHeight);\n\t\n\t        // 记录原始高度\n\t        editor.valueContainerHeight = valueContainerHeight;\n\t\n\t        // 设置 max-height\n\t        this.initMaxHeight(txtHeight, menuHeight);\n\t    };\n\t\n\t    // 计算最大高度\n\t    Txt.fn.initMaxHeight = function (txtHeight, menuHeight) {\n\t        var editor = this.editor;\n\t        var $menuContainer = editor.menuContainer.$menuContainer;\n\t        var $txt = this.$txt;\n\t        var $wrap = $('<div>');\n\t\n\t        // 需要浏览器支持 max-height，否则不管\n\t        if (window.getComputedStyle && 'max-height'in window.getComputedStyle($txt.get(0))) {\n\t            // 获取 max-height 并判断是否有值\n\t            var maxHeight = parseInt(editor.$valueContainer.css('max-height'));\n\t            if (isNaN(maxHeight)) {\n\t                return;\n\t            }\n\t\n\t            // max-height 和『全屏』暂时有冲突\n\t            if (editor.menus.fullscreen) {\n\t                E.warn('max-height和『全屏』菜单一起使用时，会有一些问题尚未解决，请暂时不要两个同时使用');\n\t                return;\n\t            }\n\t\n\t            // 标记\n\t            editor.useMaxHeight = true;\n\t\n\t            // 设置maxheight\n\t            $wrap.css({\n\t                'max-height': (maxHeight - menuHeight) + 'px',\n\t                'overflow-y': 'auto'\n\t            });\n\t            $txt.css({\n\t                'height': 'auto',\n\t                'overflow-y': 'visible',\n\t                'min-height': txtHeight + 'px'\n\t            });\n\t\n\t            // 滚动式，菜单阴影\n\t            $wrap.on('scroll', function () {\n\t                if ($txt.parent().scrollTop() > 10) {\n\t                    $menuContainer.addClass('wangEditor-menu-shadow');\n\t                } else {\n\t                    $menuContainer.removeClass('wangEditor-menu-shadow');\n\t                }\n\t            });\n\t\n\t            // 需在编辑器区域外面再包裹一层\n\t            $txt.wrap($wrap);\n\t        }\n\t    };\n\t\n\t    // 保存选区\n\t    Txt.fn.saveSelectionEvent = function () {\n\t        var $txt = this.$txt;\n\t        var editor = this.editor;\n\t        var timeoutId;\n\t        var dt = Date.now();\n\t\n\t        function save() {\n\t            editor.saveSelection();\n\t        }\n\t\n\t        // 同步保存选区\n\t        function saveSync() {\n\t            // 100ms之内，不重复保存\n\t            if (Date.now() - dt < 100) {\n\t                return;\n\t            }\n\t\n\t            dt = Date.now();\n\t            save();\n\t        }\n\t\n\t        // 异步保存选区\n\t        function saveAync() {\n\t            // 节流，防止高频率重复操作\n\t            if (timeoutId) {\n\t                clearTimeout(timeoutId);\n\t            }\n\t            timeoutId = setTimeout(save, 300);\n\t        }\n\t\n\t        // txt change 、focus、blur 时随时保存选区\n\t        $txt.on(txtChangeEventNames + ' focus blur', function (e) {\n\t            // 先同步保存选区，为了让接下来就马上要执行 editor.getRangeElem() 的程序\n\t            // 能够获取到正确的 rangeElem\n\t            saveSync();\n\t\n\t            // 再异步保存选区，为了确定更加准确的选区，为后续的操作做准备\n\t            saveAync();\n\t        });\n\t\n\t        // 鼠标拖拽选择时，可能会拖拽到编辑器区域外面再松手，此时 $txt 就监听不到 click事件了\n\t        $txt.on('mousedown', function () {\n\t            $txt.on('mouseleave.saveSelection', function (e) {\n\t                // 先同步后异步，如上述注释\n\t                saveSync();\n\t                saveAync();\n\t\n\t                // 顺道吧菜单状态也更新了\n\t                editor.updateMenuStyle();\n\t            });\n\t        }).on('mouseup', function () {\n\t            $txt.off('mouseleave.saveSelection');\n\t        });\n\t        \n\t    };\n\t\n\t    // 随时更新 value\n\t    Txt.fn.updateValueEvent = function () {\n\t        var $txt = this.$txt;\n\t        var editor = this.editor;\n\t        var timeoutId, oldValue;\n\t\n\t        // 触发 onchange 事件\n\t        function doOnchange() {\n\t            var val = $txt.html();\n\t            if (oldValue === val) {\n\t                // 无变化\n\t                return;\n\t            }\n\t\n\t            // 触发 onchange 事件\n\t            if (editor.onchange && typeof editor.onchange === 'function') {\n\t                editor.onchange.call(editor);\n\t            }\n\t\n\t            // 更新内容\n\t            editor.updateValue();\n\t\n\t            // 记录最新内容\n\t            oldValue = val;\n\t        }\n\t\n\t        // txt change 时随时更新内容\n\t        $txt.on(txtChangeEventNames, function (e) {\n\t            // 初始化\n\t            if (oldValue == null) {\n\t                oldValue = $txt.html();\n\t            }\n\t\n\t            // 监控内容变化（停止操作 100ms 之后立即执行）\n\t            if (timeoutId) {\n\t                clearTimeout(timeoutId);\n\t            }\n\t            timeoutId = setTimeout(doOnchange, 100);\n\t        });\n\t    };\n\t\n\t    // 随时更新 menustyle\n\t    Txt.fn.updateMenuStyleEvent = function () {\n\t        var $txt = this.$txt;\n\t        var editor = this.editor;\n\t\n\t        // txt change 时随时更新内容\n\t        $txt.on(txtChangeEventNames, function (e) {\n\t            editor.updateMenuStyle();\n\t        });\n\t    };\n\t\n\t    // 最后插入试图插入 <p><br><p>\n\t    Txt.fn.insertEmptyP = function () {\n\t        var $txt = this.$txt;\n\t        var $children = $txt.children();\n\t\n\t        if ($children.length === 0) {\n\t            $txt.append($('<p><br></p>'));\n\t            return;\n\t        }\n\t\n\t        if ($.trim($children.last().html()).toLowerCase() !== '<br>') {\n\t            $txt.append($('<p><br></p>'));\n\t        }\n\t    };\n\t\n\t    // 将编辑器暴露出来的文字和图片，都用 p 来包裹\n\t    Txt.fn.wrapImgAndText = function () {\n\t        var $txt = this.$txt;\n\t        var $imgs = $txt.children('img');\n\t        var txt = $txt[0];\n\t        var childNodes = txt.childNodes;\n\t        var childrenLength = childNodes.length;\n\t        var i, childNode, p;\n\t\n\t        // 处理图片\n\t        $imgs.length && $imgs.each(function () {\n\t            $(this).wrap('<p>');\n\t        });\n\t\n\t        // 处理文字\n\t        for (i = 0; i < childrenLength; i++) {\n\t            childNode = childNodes[i];\n\t            if (childNode.nodeType === 3 && childNode.textContent && $.trim(childNode.textContent)) {\n\t                $(childNode).wrap('<p>');\n\t            }\n\t        }\n\t    };\n\t\n\t    // 清空内容为空的<p>，以及重复包裹的<p>（在windows下的chrome粘贴文字之后，会出现上述情况）\n\t    Txt.fn.clearEmptyOrNestP = function () {\n\t        var $txt = this.$txt;\n\t        var $pList = $txt.find('p');\n\t\n\t        $pList.each(function () {\n\t            var $p = $(this);\n\t            var $children = $p.children();\n\t            var childrenLength = $children.length;\n\t            var $firstChild;\n\t            var content = $.trim($p.html());\n\t\n\t            // 内容为空的p\n\t            if (!content) {\n\t                $p.remove();\n\t                return;\n\t            }\n\t\n\t            // 嵌套的p\n\t            if (childrenLength === 1) {\n\t                $firstChild = $children.first();\n\t                if ($firstChild.get(0) && $firstChild.get(0).nodeName === 'P') {\n\t                    $p.html( $firstChild.html() );\n\t                }\n\t            }\n\t        });\n\t    };\n\t\n\t    // 获取 scrollTop\n\t    Txt.fn.scrollTop = function (val) {\n\t        var self = this;\n\t        var editor = self.editor;\n\t        var $txt = self.$txt;\n\t\n\t        if (editor.useMaxHeight) {\n\t            return $txt.parent().scrollTop(val);\n\t        } else {\n\t            return $txt.scrollTop(val);\n\t        }\n\t    };\n\t\n\t    // 鼠标hover时候，显示p、head的高度\n\t    Txt.fn.showHeightOnHover = function () {\n\t        var editor = this.editor;\n\t        var $editorContainer = editor.$editorContainer;\n\t        var menuContainer = editor.menuContainer;\n\t        var $txt = this.$txt;\n\t        var $tip = $('<i class=\"height-tip\"><i>');\n\t        var isTipInTxt = false;\n\t\n\t        function addAndShowTip($target) {\n\t            if (!isTipInTxt) {\n\t                $editorContainer.append($tip);\n\t                isTipInTxt = true;\n\t            }\n\t\n\t            var txtTop = $txt.position().top;\n\t            var txtHeight = $txt.outerHeight();\n\t\n\t            var height = $target.height();\n\t            var top = $target.position().top;\n\t            var marginTop = parseInt($target.css('margin-top'), 10);\n\t            var paddingTop = parseInt($target.css('padding-top'), 10);\n\t            var marginBottom = parseInt($target.css('margin-bottom'), 10);\n\t            var paddingBottom = parseInt($target.css('padding-bottom'), 10);\n\t\n\t            // 计算初步的结果\n\t            var resultHeight = height + paddingTop + marginTop + paddingBottom + marginBottom;\n\t            var resultTop = top + menuContainer.height();\n\t            \n\t            // var spaceValue;\n\t\n\t            // // 判断是否超出下边界\n\t            // spaceValue = (resultTop + resultHeight) - (txtTop + txtHeight);\n\t            // if (spaceValue > 0) {\n\t            //     resultHeight = resultHeight - spaceValue;\n\t            // }\n\t\n\t            // // 判断是否超出了下边界\n\t            // spaceValue = txtTop > resultTop;\n\t            // if (spaceValue) {\n\t            //     resultHeight = resultHeight - spaceValue;\n\t            //     top = top + spaceValue;\n\t            // }\n\t\n\t            // 按照最终结果渲染\n\t            $tip.css({\n\t                height: height + paddingTop + marginTop + paddingBottom + marginBottom,\n\t                top: top + menuContainer.height()\n\t            });\n\t        }\n\t        function removeTip() {\n\t            if (!isTipInTxt) {\n\t                return;\n\t            }\n\t            $tip.remove();\n\t            isTipInTxt = false;\n\t        }\n\t\n\t        $txt.on('mouseenter', 'ul,ol,blockquote,p,h1,h2,h3,h4,h5,table,pre', function (e) {\n\t            addAndShowTip($(e.currentTarget));\n\t        }).on('mouseleave', function () {\n\t            removeTip();\n\t        });\n\t    };\n\t\n\t});\n\t// 工具函数\n\t_e(function (E, $) {\n\t\n\t    // IE8 [].indexOf()\n\t    if(!Array.prototype.indexOf){\n\t        //IE低版本不支持 arr.indexOf \n\t        Array.prototype.indexOf = function(elem){\n\t            var i = 0,\n\t                length = this.length;\n\t            for(; i<length; i++){\n\t                if(this[i] === elem){\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        //IE低版本不支持 arr.lastIndexOf\n\t        Array.prototype.lastIndexOf = function(elem){\n\t            var length = this.length;\n\t            for(length = length - 1; length >= 0; length--){\n\t                if(this[length] === elem){\n\t                    return length;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t    }\n\t\n\t    // IE8 Date.now()\n\t    if (!Date.now) {\n\t        Date.now = function () {\n\t            return new Date().valueOf(); \n\t        };\n\t    }\n\t\n\t    // console.log && console.warn && console.error\n\t    var console = window.console;\n\t    var emptyFn = function () {};\n\t    $.each(['info', 'log', 'warn', 'error'], function (key, value) {\n\t        if (console == null) {\n\t            E[value] = emptyFn;\n\t        } else {\n\t            E[value] = function (info) {\n\t                // 通过配置来控制打印输出\n\t                if (E.config && E.config.printLog) {\n\t                    console[value]('wangEditor提示: ' + info);\n\t                }\n\t            };\n\t        }\n\t    });\n\t\n\t    // 获取随机数\n\t    E.random = function () {\n\t        return Math.random().toString().slice(2);\n\t    };\n\t\n\t    // 浏览器是否支持 placeholder\n\t    E.placeholder = 'placeholder' in document.createElement('input');\n\t\n\t    // 兼容IE8的 input placeholder\n\t    E.placeholderForIE8 = function ($container) {\n\t        if (E.placeholder) {\n\t            return;\n\t        }\n\t        $container.find('input[placeholder]').each(function () {\n\t            var $input = $(this);\n\t            var placeholder = $input.attr('placeholder');\n\t\n\t            if ($input.val() === '') {\n\t                $input.css('color', '#666');\n\t                $input.val(placeholder);\n\t\n\t                $input.on('focus.placeholder click.placeholder', function () {\n\t                    $input.val('');\n\t                    $input.css('color', '#333');\n\t                    $input.off('focus.placeholder click.placeholder');\n\t                });\n\t            }\n\t        });\n\t    };\n\t});\n\t// 语言包\n\t_e(function (E, $) {\n\t    E.langs = {};\n\t    \n\t    // 中文\n\t    E.langs['zh-cn'] = {\n\t        bold: '粗体',\n\t        underline: '下划线',\n\t        italic: '斜体',\n\t        forecolor: '文字颜色',\n\t        bgcolor: '背景色',\n\t        strikethrough: '删除线',\n\t        eraser: '清空格式',\n\t        source: '源码',\n\t        quote: '引用',\n\t        fontfamily: '字体',\n\t        fontsize: '字号',\n\t        head: '标题',\n\t        orderlist: '有序列表',\n\t        unorderlist: '无序列表',\n\t        alignleft: '左对齐',\n\t        aligncenter: '居中',\n\t        alignright: '右对齐',\n\t        link: '链接',\n\t        text: '文本',\n\t        submit: '提交',\n\t        cancel: '取消',\n\t        unlink: '取消链接',\n\t        table: '表格',\n\t        emotion: '表情',\n\t        img: '图片',\n\t        uploadImg: '上传图片',\n\t        linkImg: '网络图片',\n\t        video: '视频',\n\t        'width': '宽',\n\t        'height': '高',\n\t        location: '位置',\n\t        loading: '加载中',\n\t        searchlocation: '搜索位置',\n\t        dynamicMap: '动态地图',\n\t        clearLocation: '清除位置',\n\t        langDynamicOneLocation: '动态地图只能显示一个位置',\n\t        insertcode: '插入代码',\n\t        undo: '撤销',\n\t        redo: '重复',\n\t        fullscreen: '全屏',\n\t        openLink: '打开链接'\n\t    };\n\t\n\t    // 英文\n\t    E.langs.en = {\n\t        bold: 'Bold',\n\t        underline: 'Underline',\n\t        italic: 'Italic',\n\t        forecolor: 'Color',\n\t        bgcolor: 'Backcolor',\n\t        strikethrough: 'Strikethrough',\n\t        eraser: 'Eraser',\n\t        source: 'Codeview',\n\t        quote: 'Quote',\n\t        fontfamily: 'Font family',\n\t        fontsize: 'Font size',\n\t        head: 'Head',\n\t        orderlist: 'Ordered list',\n\t        unorderlist: 'Unordered list',\n\t        alignleft: 'Align left',\n\t        aligncenter: 'Align center',\n\t        alignright: 'Align right',\n\t        link: 'Insert link',\n\t        text: 'Text',\n\t        submit: 'Submit',\n\t        cancel: 'Cancel',\n\t        unlink: 'Unlink',\n\t        table: 'Table',\n\t        emotion: 'Emotions',\n\t        img: 'Image',\n\t        uploadImg: 'Upload',\n\t        linkImg: 'Link',\n\t        video: 'Video',\n\t        'width': 'width',\n\t        'height': 'height',\n\t        location: 'Location',\n\t        loading: 'Loading',\n\t        searchlocation: 'search',\n\t        dynamicMap: 'Dynamic',\n\t        clearLocation: 'Clear',\n\t        langDynamicOneLocation: 'Only one location in dynamic map',\n\t        insertcode: 'Insert Code',\n\t        undo: 'Undo',\n\t        redo: 'Redo',\n\t        fullscreen: 'Full screnn',\n\t        openLink: 'open link'\n\t    };\n\t});\n\t// 全局配置\n\t_e(function (E, $) {\n\t\n\t    E.config = {};\n\t\n\t    // 全屏时的 z-index\n\t    E.config.zindex = 10000;\n\t\n\t    // 是否打印log\n\t    E.config.printLog = true;\n\t\n\t    // 菜单吸顶：false - 不吸顶；number - 吸顶，值为top值\n\t    E.config.menuFixed = 0;\n\t\n\t    // 编辑源码时，过滤 javascript\n\t    E.config.jsFilter = true;\n\t\n\t    // 编辑器允许的标签\n\t    E.config.legalTags = 'p,h1,h2,h3,h4,h5,h6,blockquote,table,ul,ol,pre';\n\t\n\t    // 语言包\n\t    E.config.lang = E.langs['zh-cn'];\n\t\n\t    // 菜单配置\n\t    E.config.menus = [\n\t        'source',\n\t        '|',\n\t        'bold',\n\t        'underline',\n\t        'italic',\n\t        'strikethrough',\n\t        'eraser',\n\t        'forecolor',\n\t        'bgcolor',\n\t        '|',\n\t        'quote',\n\t        'fontfamily',\n\t        'fontsize',\n\t        'head',\n\t        'unorderlist',\n\t        'orderlist',\n\t        'alignleft',\n\t        'aligncenter',\n\t        'alignright',\n\t        '|',\n\t        'link',\n\t        'unlink',\n\t        'table',\n\t        'emotion',\n\t        '|',\n\t        'img',\n\t        'video',\n\t        'location',\n\t        'insertcode',\n\t        '|',\n\t        'undo',\n\t        'redo',\n\t        'fullscreen'\n\t    ];\n\t\n\t    // 颜色配置\n\t    E.config.colors = {\n\t        // 'value': 'title'\n\t        '#880000': '暗红色',\n\t        '#800080': '紫色',\n\t        '#ff0000': '红色',\n\t        '#ff00ff': '鲜粉色',\n\t        '#000080': '深蓝色',\n\t        '#0000ff': '蓝色',\n\t        '#00ffff': '湖蓝色',\n\t        '#008080': '蓝绿色',\n\t        '#008000': '绿色',\n\t        '#808000': '橄榄色',\n\t        '#00ff00': '浅绿色',\n\t        '#ffcc00': '橙黄色',\n\t        '#808080': '灰色',\n\t        '#c0c0c0': '银色',\n\t        '#000000': '黑色',\n\t        '#ffffff': '白色'\n\t    };\n\t\n\t    // 字体\n\t    E.config.familys = [\n\t        '宋体', '黑体', '楷体', '微软雅黑',\n\t        'Arial', 'Verdana', 'Georgia',\n\t        'Times New Roman', 'Microsoft JhengHei',\n\t        'Trebuchet MS', 'Courier New', 'Impact', 'Comic Sans MS', 'Consolas'\n\t    ];\n\t\n\t    // 字号\n\t    E.config.fontsizes = {\n\t        // 格式：'value': 'title'\n\t        1: '12px',\n\t        2: '13px',\n\t        3: '16px',\n\t        4: '18px',\n\t        5: '24px',\n\t        6: '32px',\n\t        7: '48px'\n\t    };\n\t\n\t    // 表情包\n\t    E.config.emotionsShow = 'icon'; // 显示项，默认为'icon'，也可以配置成'value'\n\t    E.config.emotions = {\n\t        // 'default': {\n\t        //     title: '默认',\n\t        //     data: './emotions.data'\n\t        // },\n\t        'weibo': {\n\t            title: '微博表情',\n\t            data: [\n\t                {\n\t                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/7a/shenshou_thumb.gif',\n\t                    value: '[草泥马]'    \n\t                },\n\t                {\n\t                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/60/horse2_thumb.gif',\n\t                    value: '[神马]'    \n\t                },\n\t                {\n\t                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/bc/fuyun_thumb.gif',\n\t                    value: '[浮云]'    \n\t                },\n\t                {\n\t                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c9/geili_thumb.gif',\n\t                    value: '[给力]'    \n\t                },\n\t                {\n\t                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/f2/wg_thumb.gif',\n\t                    value: '[围观]'    \n\t                },\n\t                {\n\t                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/70/vw_thumb.gif',\n\t                    value: '[威武]'\n\t                },\n\t                {\n\t                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6e/panda_thumb.gif',\n\t                    value: '[熊猫]'\n\t                },\n\t                {\n\t                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/81/rabbit_thumb.gif',\n\t                    value: '[兔子]'\n\t                },\n\t                {\n\t                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/bc/otm_thumb.gif',\n\t                    value: '[奥特曼]'\n\t                },\n\t                {\n\t                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/15/j_thumb.gif',\n\t                    value: '[囧]'\n\t                },\n\t                {\n\t                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/89/hufen_thumb.gif',\n\t                    value: '[互粉]'\n\t                },\n\t                {\n\t                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c4/liwu_thumb.gif',\n\t                    value: '[礼物]'\n\t                },\n\t                {\n\t                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/ac/smilea_thumb.gif',\n\t                    value: '[呵呵]'\n\t                },\n\t                {\n\t                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/0b/tootha_thumb.gif',\n\t                    value: '[哈哈]'\n\t                }\n\t            ]\n\t        }\n\t    };\n\t\n\t    // 百度地图的key\n\t    E.config.mapAk = 'TVhjYjq1ICT2qqL5LdS8mwas';\n\t\n\t    // 上传图片的配置\n\t    // server地址\n\t    E.config.uploadImgUrl = '';\n\t    // 超时时间\n\t    E.config.uploadTimeout = 20 * 1000;\n\t    // 用于存储上传回调事件\n\t    E.config.uploadImgFns = {};\n\t    // 自定义上传图片的filename\n\t    // E.config.uploadImgFileName = 'customFileName';\n\t\n\t    // 自定义上传，设置为 true 之后，显示上传图标\n\t    E.config.customUpload = false;\n\t    // 自定义上传的init事件\n\t    // E.config.customUploadInit = function () {....};\n\t\n\t    // 自定义上传时传递的参数（如 token）\n\t    E.config.uploadParams = {\n\t        /* token: 'abcdef12345' */\n\t    };\n\t\n\t    // 自定义上传是的header参数\n\t    E.config.uploadHeaders = {\n\t         /* 'Accept' : 'text/x-json' */\n\t    };\n\t\n\t    // 跨域上传时传递 cookie，默认为 true\n\t    E.config.withCredentials = true;\n\t\n\t    // 隐藏网络图片，默认为 false\n\t    E.config.hideLinkImg = false;\n\t\n\t    // 是否过滤粘贴内容\n\t    E.config.pasteFilter = true;\n\t\n\t    // 是否粘贴纯文本，当 editor.config.pasteFilter === false 时候，此配置将失效\n\t    E.config.pasteText = false;\n\t\n\t    // 插入代码时，默认的语言\n\t    E.config.codeDefaultLang = 'javascript';\n\t\n\t});\n\t// 全局UI\n\t_e(function (E, $) {\n\t\n\t     E.UI = {};\n\t\n\t     // 为菜单自定义配置的UI\n\t     E.UI.menus = {\n\t        // 这个 default 不加引号，在 IE8 会报错\n\t        'default': {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-command\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        bold: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-bold\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        underline: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-underline\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        italic: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-italic\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        forecolor: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-pencil\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        bgcolor: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-brush\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        strikethrough: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-strikethrough\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        eraser: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-eraser\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        quote: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-quotes-left\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        source: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-code\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        fontfamily: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-font2\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        fontsize: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-text-height\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        head: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-header\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        orderlist: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-list-numbered\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        unorderlist: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-list-bullet\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        alignleft: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-align-left\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        aligncenter: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-align-center\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        alignright: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-align-right\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        link: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-link\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        unlink: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-unlink\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        table: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-table\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        emotion: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-happy\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        img: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-picture\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        video: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-play\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        location: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-location\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        insertcode: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-terminal\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        undo: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-ccw\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        redo: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-cw\"></i></a>',\n\t            selected: '.selected'\n\t        },\n\t        fullscreen: {\n\t            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-enlarge2\"></i></a>',\n\t            selected: '<a href=\"#\" tabindex=\"-1\" class=\"selected\"><i class=\"wangeditor-menu-img-shrink2\"></i></a>'\n\t        }\n\t     };\n\t     \n\t});\n\t// 对象配置\n\t_e(function (E, $) {\n\t\n\t    E.fn.initDefaultConfig = function () {\n\t        var editor = this;\n\t        editor.config = $.extend({}, E.config);\n\t        editor.UI = $.extend({}, E.UI);\n\t    };\n\t\n\t});\n\t// 增加 container\n\t_e(function (E, $) {\n\t\n\t    E.fn.addEditorContainer = function () {\n\t        this.$editorContainer = $('<div class=\"wangEditor-container\"></div>');\n\t    };\n\t\n\t});\n\t// 增加编辑区域对象\n\t_e(function (E, $) {\n\t\n\t    E.fn.addTxt = function () {\n\t        var editor = this;\n\t        var txt = new E.Txt(editor);\n\t\n\t        editor.txt = txt;\n\t    };\n\t\n\t});\n\t// 增加menuContainer对象\n\t_e(function (E, $) {\n\t\n\t    E.fn.addMenuContainer = function () {\n\t        var editor = this;\n\t        editor.menuContainer = new E.MenuContainer(editor);\n\t    };\n\t\n\t});\n\t// 增加menus\n\t_e(function (E, $) {\n\t\n\t    // 存储创建菜单的函数\n\t    E.createMenuFns = [];\n\t    E.createMenu = function (fn) {\n\t        E.createMenuFns.push(fn);\n\t    };\n\t\n\t    // 创建所有菜单\n\t    E.fn.addMenus = function () {\n\t        var editor = this;\n\t        var menuIds = editor.config.menus;\n\t\n\t        // 检验 menuId 是否在配置中存在\n\t        function check(menuId) {\n\t            if (menuIds.indexOf(menuId) >= 0) {\n\t                return true;\n\t            }\n\t            return false;\n\t        }\n\t\n\t        // 遍历所有的菜单创建函数，并执行\n\t        $.each(E.createMenuFns, function (k, createMenuFn) {\n\t            createMenuFn.call(editor, check);\n\t        });\n\t    };\n\t\n\t});\n\t// bold菜单\n\t_e(function (E, $) {\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'bold';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.bold,\n\t            commandName: 'Bold'\n\t        });\n\t\n\t        // 定义选中状态下的click事件\n\t        menu.clickEventSelected = function (e) {\n\t            var isRangeEmpty = editor.isRangeEmpty();\n\t            if (!isRangeEmpty) {\n\t                // 如果选区有内容，则执行基础命令\n\t                editor.command(e, 'Bold');\n\t            } else {\n\t                // 如果选区没有内容\n\t                editor.commandForElem('b,strong,h1,h2,h3,h4,h5', e, 'Bold');\n\t            }\n\t        };\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t\n\t});\n\t// underline菜单\n\t_e(function (E, $) {\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'underline';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.underline,\n\t            commandName: 'Underline'\n\t        });\n\t\n\t        // 定义选中状态下的click事件\n\t        menu.clickEventSelected = function (e) {\n\t            var isRangeEmpty = editor.isRangeEmpty();\n\t            if (!isRangeEmpty) {\n\t                // 如果选区有内容，则执行基础命令\n\t                editor.command(e, 'Underline');\n\t            } else {\n\t                // 如果选区没有内容\n\t                editor.commandForElem('u,a', e, 'Underline');\n\t            }\n\t        };\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t\n\t});\n\t// italic 菜单\n\t_e(function (E, $) {\n\t    \n\t    E.createMenu(function (check) {\n\t        var menuId = 'italic';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.italic,\n\t            commandName: 'Italic'\n\t        });\n\t\n\t        // 定义选中状态下的click事件\n\t        menu.clickEventSelected = function (e) {\n\t            var isRangeEmpty = editor.isRangeEmpty();\n\t            if (!isRangeEmpty) {\n\t                // 如果选区有内容，则执行基础命令\n\t                editor.command(e, 'Italic');\n\t            } else {\n\t                // 如果选区没有内容\n\t                editor.commandForElem('i', e, 'Italic');\n\t            }\n\t        };\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t\n\t});\n\t// forecolor 菜单\n\t_e(function (E, $) {\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'forecolor';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t        var configColors = editor.config.colors;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.forecolor\n\t        });\n\t\n\t        // 创建 dropPanel\n\t        var $content = $('<div></div>');\n\t        $.each(configColors, function (k, v) {\n\t            $content.append(\n\t                [\n\t                    '<a href=\"#\" class=\"color-item\"',\n\t                    '    title=\"' + v + '\" commandValue=\"' + k + '\" ',\n\t                    '    style=\"color: ' + k + '\" ',\n\t                    '><i class=\"wangeditor-menu-img-pencil\"></i></a>'\n\t                ].join('')\n\t            );\n\t        });\n\t        $content.on('click', 'a[commandValue]', function (e) {\n\t            // 执行命令\n\t            var $elem = $(this);\n\t            var commandValue = $elem.attr('commandValue');\n\t\n\t            if (menu.selected && editor.isRangeEmpty()) {\n\t                // 当前处于选中状态，并且选中内容为空\n\t                editor.commandForElem('font[color]', e, 'forecolor', commandValue);\n\t            } else {\n\t                // 当前未处于选中状态，或者有选中内容。则执行默认命令\n\t                editor.command(e, 'forecolor', commandValue);\n\t            }\n\t        });\n\t        menu.dropPanel = new E.DropPanel(editor, menu, {\n\t            $content: $content,\n\t            width: 125\n\t        });\n\t\n\t        // 定义 update selected 事件\n\t        menu.updateSelectedEvent = function () {\n\t            var rangeElem = editor.getRangeElem();\n\t            rangeElem = editor.getSelfOrParentByName(rangeElem, 'font[color]');\n\t            if (rangeElem) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t\n\t});\n\t// bgcolor 菜单\n\t_e(function (E, $) {\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'bgcolor';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t        var configColors = editor.config.colors;\n\t\n\t        // 检查元素是否有 background-color: 内联样式\n\t        function checkElemFn(elem) {\n\t            var cssText;\n\t            if (elem && elem.style && elem.style.cssText != null) {\n\t                cssText = elem.style.cssText;\n\t                if (cssText && cssText.indexOf('background-color:') >= 0) {\n\t                    return true;\n\t                }\n\t            }\n\t            return false;\n\t        }\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.bgcolor\n\t        });\n\t\n\t        // 创建 dropPanel\n\t        var $content = $('<div></div>');\n\t        $.each(configColors, function (k, v) {\n\t            $content.append(\n\t                [\n\t                    '<a href=\"#\" class=\"color-item\"',\n\t                    '    title=\"' + v + '\" commandValue=\"' + k + '\" ',\n\t                    '    style=\"color: ' + k + '\" ',\n\t                    '><i class=\"wangeditor-menu-img-brush\"></i></a>'\n\t                ].join('')\n\t            );\n\t        });\n\t        $content.on('click', 'a[commandValue]', function (e) {\n\t            // 执行命令\n\t\n\t            var $elem = $(this);\n\t            var commandValue = $elem.attr('commandValue');\n\t\n\t            if (menu.selected && editor.isRangeEmpty()) {\n\t                // 当前处于选中状态，并且选中内容为空。使用 commandForElem 执行命令\n\t                editor.commandForElem({\n\t                    selector: 'span,font',\n\t                    check: checkElemFn\n\t                }, e, 'BackColor', commandValue);\n\t            } else {\n\t                // 当前未处于选中状态，或者有选中内容。则执行默认命令\n\t                editor.command(e, 'BackColor', commandValue);\n\t            }\n\t        });\n\t        menu.dropPanel = new E.DropPanel(editor, menu, {\n\t            $content: $content,\n\t            width: 125\n\t        });\n\t\n\t        // 定义 update selected 事件\n\t        menu.updateSelectedEvent = function () {\n\t            var rangeElem = editor.getRangeElem();\n\t            rangeElem = editor.getSelfOrParentByName(rangeElem, 'span,font', checkElemFn);\n\t            \n\t            if (rangeElem) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t\n\t});\n\t// strikethrough 菜单\n\t_e(function (E, $) {\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'strikethrough';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.strikethrough,\n\t            commandName: 'StrikeThrough'\n\t        });\n\t\n\t        // 定义选中状态下的click事件\n\t        menu.clickEventSelected = function (e) {\n\t            var isRangeEmpty = editor.isRangeEmpty();\n\t            if (!isRangeEmpty) {\n\t                // 如果选区有内容，则执行基础命令\n\t                editor.command(e, 'StrikeThrough');\n\t            } else {\n\t                // 如果选区没有内容\n\t                editor.commandForElem('strike', e, 'StrikeThrough');\n\t            }\n\t        };\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t\n\t});\n\t// eraser 菜单\n\t_e(function (E, $) {\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'eraser';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.eraser,\n\t            commandName: 'RemoveFormat'\n\t        });\n\t\n\t        // 定义点击事件\n\t        menu.clickEvent = function (e) {\n\t            var isRangeEmpty = editor.isRangeEmpty();\n\t\n\t            if (!isRangeEmpty) {\n\t                // 选区不是空的，则执行默认命令\n\t                editor.command(e, 'RemoveFormat');\n\t                return;\n\t            }\n\t\n\t            var $clearElem;\n\t\n\t            // 自定义的命令函数\n\t            function commandFn() {\n\t                var editor = this;\n\t                var rangeElem;\n\t                var pElem, $pElem;\n\t                var quoteElem, $quoteElem;\n\t                var listElem, $listElem;\n\t\n\t                // 获取选区 elem\n\t                rangeElem = editor.getRangeElem();\n\t                // 第一步，获取 quote 父元素\n\t                quoteElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n\t                if (quoteElem) {\n\t                    $quoteElem = $(quoteElem);\n\t                    $clearElem = $('<p>' + $quoteElem.text() + '</p>');\n\t                    $quoteElem.after($clearElem).remove();\n\t                }\n\t                // 第二步，获取 p h 父元素\n\t                pElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5');\n\t                if (pElem) {\n\t                    $pElem = $(pElem);\n\t                    $clearElem = $('<p>' + $pElem.text() + '</p>');\n\t                    $pElem.after($clearElem).remove();\n\t                }\n\t                // 第三步，获取list\n\t                listElem = editor.getSelfOrParentByName(rangeElem, 'ul,ol');\n\t                if (listElem) {\n\t                    $listElem = $(listElem);\n\t                    $clearElem = $('<p>' + $listElem.text() + '</p>');\n\t                    $listElem.after($clearElem).remove();\n\t                }\n\t            }\n\t\n\t            // 自定义 callback 事件\n\t            function callback() {\n\t                // callback中，设置range为clearElem\n\t                var editor = this;\n\t                if ($clearElem) {\n\t                    editor.restoreSelectionByElem($clearElem.get(0));\n\t                }\n\t            }\n\t\n\t            // 执行自定义命令\n\t            editor.customCommand(e, commandFn, callback);\n\t        };\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t\n\t});\n\t// source 菜单\n\t_e(function (E, $) {\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'source';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t        var txtHtml;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.source\n\t        });\n\t\n\t        menu.isShowCode = false;\n\t\n\t        // 更新内容\n\t        function updateValue() {\n\t            var $code = menu.$codeTextarea;\n\t            var $txt = editor.txt.$txt;\n\t            var value = $.trim($code.val()); // 取值\n\t\n\t            if (!value) {\n\t                value = '<p><br></p>';\n\t            }\n\t            \n\t            // 过滤js代码\n\t            if (editor.config.jsFilter) {\n\t                \n\t                value = value.replace(/<script[\\s\\S]*?<\\/script>/ig, '');\n\t            }\n\t            // 赋值\n\t            try {\n\t                $txt.html(value);\n\t            } catch (ex) {\n\t                // 更新 html 源码出错，一般都是取消了 js 过滤之后，js报错导致的\n\t            }\n\t        }\n\t\n\t        // 定义click事件\n\t        menu.clickEvent = function (e) {\n\t            var self = this;\n\t            var editor = self.editor;\n\t            var $txt = editor.txt.$txt;\n\t            var txtOuterHeight = $txt.outerHeight();\n\t            var txtHeight = $txt.height();\n\t\n\t            if (!self.$codeTextarea) {\n\t                self.$codeTextarea = $('<textarea class=\"code-textarea\"></textarea>');\n\t            }\n\t            var $code = self.$codeTextarea;\n\t            $code.css({\n\t                height: txtHeight,\n\t                'margin-top': txtOuterHeight - txtHeight\n\t            });\n\t\n\t            // 赋值\n\t            $code.val($txt.html());\n\t\n\t            // 监控变化\n\t            $code.on('change', function (e) {\n\t                updateValue();\n\t            });\n\t\n\t            // 渲染\n\t            $txt.after($code).hide();\n\t            $code.show();\n\t\n\t            // 更新状态\n\t            menu.isShowCode = true;\n\t\n\t            // 执行 updateSelected 事件\n\t            this.updateSelected();\n\t\n\t            // 禁用其他菜单\n\t            editor.disableMenusExcept('source');\n\t\n\t            // 记录当前html值\n\t            txtHtml = $txt.html();\n\t        };\n\t\n\t        // 定义选中状态下的click事件\n\t        menu.clickEventSelected = function (e) {\n\t            var self = this;\n\t            var editor = self.editor;\n\t            var $txt = editor.txt.$txt;\n\t            var $code = self.$codeTextarea;\n\t            var value;\n\t\n\t            if (!$code) {\n\t                return;\n\t            }\n\t\n\t            // 更新内容\n\t            updateValue();\n\t\n\t            // 渲染\n\t            $code.after($txt).hide();\n\t            $txt.show();\n\t\n\t            // 更新状态\n\t            menu.isShowCode = false;\n\t\n\t            // 执行 updateSelected 事件\n\t            this.updateSelected();\n\t\n\t            // 启用其他菜单\n\t            editor.enableMenusExcept('source');\n\t\n\t            // 判断是否执行 onchange 事件\n\t            if ($txt.html() !== txtHtml) {\n\t                if (editor.onchange && typeof editor.onchange === 'function') {\n\t                    editor.onchange.call(editor);\n\t                }\n\t            }\n\t        };\n\t\n\t        // 定义切换选中状态事件\n\t        menu.updateSelectedEvent = function () {\n\t            return this.isShowCode;\n\t        };\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t\n\t});\n\t// quote 菜单\n\t_e(function (E, $) {\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'quote';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.quote,\n\t            commandName: 'formatBlock',\n\t            commandValue: 'blockquote'\n\t        });\n\t\n\t        // 定义click事件\n\t        menu.clickEvent = function (e) {\n\t            var rangeElem = editor.getRangeElem();\n\t            var $rangeElem;\n\t            if (!rangeElem) {\n\t                e.preventDefault();\n\t                return;\n\t            }\n\t            var currentQuote = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n\t            var $quote;\n\t\n\t            if (currentQuote) {\n\t                // 说明当前在quote之内，不做任何处理\n\t                e.preventDefault();\n\t                return;\n\t            }\n\t\n\t            rangeElem = editor.getLegalTags(rangeElem);\n\t            $rangeElem = $(rangeElem);\n\t\n\t            // 无文字，则不允许执行引用\n\t            if (!$rangeElem.text()) {\n\t                return;\n\t            }\n\t\n\t\n\t            if (!rangeElem) {\n\t                // 执行默认命令\n\t                // IE8 下执行此处（不过，经测试代码无效，也不报错）\n\t                editor.command(e, 'formatBlock', 'blockquote');\n\t                return;\n\t            }\n\t\n\t            // 自定义command事件\n\t            function commandFn() {\n\t                $quote = $('<p>' + $rangeElem.text() + '</p>');\n\t                $rangeElem.after($quote).remove();\n\t                $quote.wrap('<blockquote>');\n\t            }\n\t\n\t            // 自定义 callback 事件\n\t            function callback() {\n\t                // callback中，设置range为quote\n\t                var editor = this;\n\t                if ($quote) {\n\t                    editor.restoreSelectionByElem($quote.get(0));\n\t                }\n\t            }\n\t\n\t            // 执行自定义命令\n\t            editor.customCommand(e, commandFn, callback);\n\t        };\n\t\n\t        // 定义选中状态下的click事件\n\t        menu.clickEventSelected = function (e) {\n\t            var rangeElem;\n\t            var quoteElem;\n\t            var $lastChild;\n\t\n\t            // 获取当前选区的elem，并试图往上找 quote 元素\n\t            rangeElem = editor.getRangeElem();\n\t            quoteElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n\t            if (!quoteElem) {\n\t                // 没找到，则返回\n\t                e.preventDefault();\n\t                return;\n\t            }\n\t\n\t            // 自定义的command事件\n\t            function commandFn() {\n\t                var $quoteElem;\n\t                var $children;\n\t\n\t                $quoteElem = $(quoteElem);\n\t                $children = $quoteElem.children();\n\t                if ($children.length) {\n\t                    $children.each(function (k) {\n\t                        var $item = $(this);\n\t                        if ($item.get(0).nodeName === 'P') {\n\t                            $quoteElem.after($item);\n\t                        } else {\n\t                            $quoteElem.after('<p>' + $item.text() + '</p>');\n\t                        }\n\t                        $lastChild = $item;  // 记录最后一个子元素，用于callback中的range定位\n\t                    });\n\t                    $quoteElem.remove();\n\t                    return;\n\t                }\n\t            }\n\t\n\t            // 自定义的callback函数\n\t            function callback() {\n\t                // callback中，设置range为lastChild\n\t                var editor = this;\n\t                if ($lastChild) {\n\t                    editor.restoreSelectionByElem($lastChild.get(0));\n\t                }\n\t            }\n\t\n\t            // 执行自定义命令\n\t            editor.customCommand(e, commandFn, callback);\n\t        };\n\t\n\t        // 定义更新选中状态的事件\n\t        menu.updateSelectedEvent = function () {\n\t            var self = this; //菜单对象\n\t            var editor = self.editor;\n\t            var rangeElem;\n\t\n\t            rangeElem = editor.getRangeElem();\n\t            rangeElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n\t\n\t            if (rangeElem) {\n\t                return true;\n\t            }\n\t\n\t            return false;\n\t        };\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t\n\t        // --------------- 两次点击 enter 跳出引用 ---------------\n\t        editor.ready(function () {\n\t            var editor = this;\n\t            var $txt = editor.txt.$txt;\n\t            var isPrevEnter = false;  // 是不是刚刚在quote中按了 enter 键\n\t            $txt.on('keydown', function (e) {\n\t                if (e.keyCode !== 13) {\n\t                    // 不是 enter 键\n\t                    isPrevEnter = false;\n\t                    return;\n\t                }\n\t\n\t                var rangeElem = editor.getRangeElem();\n\t                rangeElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n\t                if (!rangeElem) {\n\t                    // 选区不是 quote\n\t                    isPrevEnter = false;\n\t                    return;\n\t                }\n\t\n\t                if (!isPrevEnter) {\n\t                    // 最近没有在qote中按enter键\n\t                    isPrevEnter = true;\n\t                    return;\n\t                }\n\t\n\t                var currentRangeElem = editor.getRangeElem();\n\t                var $currentRangeElem = $(currentRangeElem);\n\t                if ($currentRangeElem.length) {\n\t                    $currentRangeElem.parent().after($currentRangeElem);\n\t                }\n\t\n\t                // 设置选区\n\t                editor.restoreSelectionByElem(currentRangeElem, 'start');\n\t\n\t                isPrevEnter = false;\n\t                // 阻止默认行文\n\t                e.preventDefault();\n\t\n\t            });\n\t        }); // editor.ready(\n\t\n\t        // --------------- 处理quote中无内容时不能删除的问题 ---------------\n\t        editor.ready(function () {\n\t            var editor = this;\n\t            var $txt = editor.txt.$txt;\n\t            var $rangeElem;\n\t\n\t            function commandFn() {\n\t                $rangeElem && $rangeElem.remove();\n\t            }\n\t            function callback() {\n\t                if (!$rangeElem) {\n\t                    return;\n\t                }\n\t                var $prev = $rangeElem.prev();\n\t                if ($prev.length) {\n\t                    // 有 prev 则定位到 prev 最后\n\t                    editor.restoreSelectionByElem($prev.get(0));\n\t                } else {\n\t                    // 无 prev 则初始化选区\n\t                    editor.initSelection();\n\t                }\n\t            }\n\t\n\t            $txt.on('keydown', function (e) {\n\t                if (e.keyCode !== 8) {\n\t                    // 不是 backspace 键\n\t                    return;\n\t                }\n\t\n\t                var rangeElem = editor.getRangeElem();\n\t                rangeElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n\t                if (!rangeElem) {\n\t                    // 选区不是 quote\n\t                    return;\n\t                }\n\t                $rangeElem = $(rangeElem);\n\t\n\t                var text = $rangeElem.text();\n\t                if (text) {\n\t                    // quote 中还有内容\n\t                    return;\n\t                }\n\t                editor.customCommand(e, commandFn, callback);\n\t\n\t            }); // $txt.on\n\t        }); // editor.ready(\n\t    });\n\t\n\t});\n\t// 字体 菜单\n\t_e(function (E, $) {\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'fontfamily';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t        var configFamilys = editor.config.familys;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.fontfamily,\n\t            commandName: 'fontName'\n\t        });\n\t\n\t        // 初始化数据\n\t        var data  = {};\n\t        /*\n\t            data 需要的结构\n\t            {\n\t                'commandValue': 'title'\n\t                ...\n\t            }\n\t        */\n\t        $.each(configFamilys, function (k, v) {\n\t            // configFamilys 是数组，data 是对象\n\t            data[v] = v;\n\t        });\n\t\n\t        // 创建droplist\n\t        var tpl = '<span style=\"font-family:{#commandValue};\">{#title}</span>';\n\t        menu.dropList = new E.DropList(editor, menu, {\n\t            data: data,\n\t            tpl: tpl,\n\t            selectorForELemCommand: 'font[face]'  // 为了执行 editor.commandForElem 而传入的elem查询方式\n\t        });\n\t\n\t        // 定义 update selected 事件\n\t        menu.updateSelectedEvent = function () {\n\t            var rangeElem = editor.getRangeElem();\n\t            rangeElem = editor.getSelfOrParentByName(rangeElem, 'font[face]');\n\t            if (rangeElem) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t});\n\t// 字号 菜单\n\t_e(function (E, $) {\n\t    E.createMenu(function (check) {\n\t        var menuId = 'fontsize';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t        var configSize = editor.config.fontsizes;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.fontsize,\n\t            commandName: 'fontSize'\n\t        });\n\t\n\t        // 初始化数据\n\t        var data  = configSize;\n\t        /*\n\t            data 需要的结构\n\t            {\n\t                'commandValue': 'title'\n\t                ...\n\t            }\n\t        */\n\t\n\t        // 创建droplist\n\t        var tpl = '<span style=\"font-size:{#title};\">{#title}</span>';\n\t        menu.dropList = new E.DropList(editor, menu, {\n\t            data: data,\n\t            tpl: tpl,\n\t            selectorForELemCommand: 'font[size]'  // 为了执行 editor.commandForElem 而传入的elem查询方式\n\t        });\n\t\n\t        // 定义 update selected 事件\n\t        menu.updateSelectedEvent = function () {\n\t            var rangeElem = editor.getRangeElem();\n\t            rangeElem = editor.getSelfOrParentByName(rangeElem, 'font[size]');\n\t            if (rangeElem) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t});\n\t// head 菜单\n\t_e(function (E, $) {\n\t    E.createMenu(function (check) {\n\t        var menuId = 'head';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.head,\n\t            commandName: 'formatBlock'\n\t        });\n\t\n\t        // 初始化数据\n\t        var data  = {\n\t            '<h1>': '标题1',\n\t            '<h2>': '标题2',\n\t            '<h3>': '标题3',\n\t            '<h4>': '标题4',\n\t            '<h5>': '标题5'\n\t        };\n\t        /*\n\t            data 需要的结构\n\t            {\n\t                'commandValue': 'title'\n\t                ...\n\t            }\n\t        */\n\t\n\t        var isOrderedList;\n\t        function beforeEvent(e) {\n\t            if (editor.queryCommandState('InsertOrderedList')) {\n\t                isOrderedList = true;\n\t\n\t                // 先取消有序列表\n\t                editor.command(e, 'InsertOrderedList');\n\t            } else {\n\t                isOrderedList = false;\n\t            }\n\t        }\n\t\n\t        function afterEvent(e) {\n\t            if (isOrderedList) {\n\t                // 再设置有序列表\n\t                editor.command(e, 'InsertOrderedList');\n\t            }\n\t        }\n\t\n\t        // 创建droplist\n\t        var tpl = '{#commandValue}{#title}';\n\t        menu.dropList = new E.DropList(editor, menu, {\n\t            data: data,\n\t            tpl: tpl,\n\t            // 对 ol 直接设置 head，会出现每个 li 的 index 都变成 1 的问题，因此要先取消 ol，然后设置 head，最后再增加上 ol\n\t            beforeEvent: beforeEvent,\n\t            afterEvent: afterEvent\n\t        });\n\t\n\t        // 定义 update selected 事件\n\t        menu.updateSelectedEvent = function () {\n\t            var rangeElem = editor.getRangeElem();\n\t            rangeElem = editor.getSelfOrParentByName(rangeElem, 'h1,h2,h3,h4,h5');\n\t            if (rangeElem) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t});\n\t// unorderlist 菜单\n\t_e(function (E, $) {\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'unorderlist';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.unorderlist,\n\t            commandName: 'InsertUnorderedList'\n\t        });\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t\n\t});\n\t// orderlist 菜单\n\t_e(function (E, $) {\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'orderlist';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.orderlist,\n\t            commandName: 'InsertOrderedList'\n\t        });\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t\n\t});\n\t// alignleft 菜单\n\t_e(function (E, $) {\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'alignleft';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.alignleft,\n\t            commandName: 'JustifyLeft'\n\t        });\n\t\n\t        // 定义 update selected 事件\n\t        menu.updateSelectedEvent = function () {\n\t            var rangeElem = editor.getRangeElem();\n\t            rangeElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5,li', function (elem) {\n\t                var cssText;\n\t                if (elem && elem.style && elem.style.cssText != null) {\n\t                    cssText = elem.style.cssText;\n\t                    if (cssText && /text-align:\\s*left;/.test(cssText)) {\n\t                        return true;\n\t                    }\n\t                }\n\t                if ($(elem).attr('align') === 'left') {\n\t                    // ff 中，设置align-left之后，会是 <p align=\"left\">xxx</p>\n\t                    return true;\n\t                }\n\t                return false;\n\t            });\n\t            if (rangeElem) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t\n\t});\n\t// aligncenter 菜单\n\t_e(function (E, $) {\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'aligncenter';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.aligncenter,\n\t            commandName: 'JustifyCenter'\n\t        });\n\t\n\t        // 定义 update selected 事件\n\t        menu.updateSelectedEvent = function () {\n\t            var rangeElem = editor.getRangeElem();\n\t            rangeElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5,li', function (elem) {\n\t                var cssText;\n\t                if (elem && elem.style && elem.style.cssText != null) {\n\t                    cssText = elem.style.cssText;\n\t                    if (cssText && /text-align:\\s*center;/.test(cssText)) {\n\t                        return true;\n\t                    }\n\t                }\n\t                if ($(elem).attr('align') === 'center') {\n\t                    // ff 中，设置align-center之后，会是 <p align=\"center\">xxx</p>\n\t                    return true;\n\t                }\n\t                return false;\n\t            });\n\t            if (rangeElem) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t\n\t});\n\t// alignright 菜单\n\t_e(function (E, $) {\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'alignright';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.alignright,\n\t            commandName: 'JustifyRight'\n\t        });\n\t\n\t        // 定义 update selected 事件\n\t        menu.updateSelectedEvent = function () {\n\t            var rangeElem = editor.getRangeElem();\n\t            rangeElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5,li', function (elem) {\n\t                var cssText;\n\t                if (elem && elem.style && elem.style.cssText != null) {\n\t                    cssText = elem.style.cssText;\n\t                    if (cssText && /text-align:\\s*right;/.test(cssText)) {\n\t                        return true;\n\t                    }\n\t                }\n\t                if ($(elem).attr('align') === 'right') {\n\t                    // ff 中，设置align-right之后，会是 <p align=\"right\">xxx</p>\n\t                    return true;\n\t                }\n\t                return false;\n\t            });\n\t            if (rangeElem) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t\n\t});\n\t// link 菜单\n\t_e(function (E, $) {\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'link';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.link\n\t        });\n\t\n\t        // 创建 dropPanel\n\t        var $content = $('<div></div>');\n\t        var $div1 = $('<div style=\"margin:20px 10px;\" class=\"clearfix\"></div>');\n\t        var $div2 = $div1.clone();\n\t        var $div3 = $div1.clone().css('margin', '0 10px');\n\t        var $textInput = $('<input type=\"text\" class=\"block\" placeholder=\"' + lang.text + '\"/>');\n\t        var $urlInput = $('<input type=\"text\" class=\"block\" placeholder=\"' + lang.link + '\"/>');\n\t        var $btnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n\t        var $btnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n\t\n\t        $div1.append($textInput);\n\t        $div2.append($urlInput);\n\t        $div3.append($btnSubmit).append($btnCancel);\n\t        $content.append($div1).append($div2).append($div3);\n\t        \n\t        menu.dropPanel = new E.DropPanel(editor, menu, {\n\t            $content: $content,\n\t            width: 300\n\t        });\n\t\n\t        // 定义click事件\n\t        menu.clickEvent = function (e) {\n\t            var menu = this;\n\t            var dropPanel = menu.dropPanel;\n\t\n\t            // -------------隐藏----------------\n\t            if (dropPanel.isShowing) {\n\t                dropPanel.hide();\n\t                return;\n\t            }\n\t\n\t            // -------------显示----------------\n\t\n\t            // 重置 input\n\t            $textInput.val('');\n\t            $urlInput.val('http://');\n\t\n\t            // 获取url\n\t            var url = '';\n\t            var rangeElem = editor.getRangeElem();\n\t            rangeElem = editor.getSelfOrParentByName(rangeElem, 'a');\n\t            if (rangeElem) {\n\t                url = rangeElem.href || '';\n\t            }\n\t\n\t            // 获取 text\n\t            var text = '';\n\t            var isRangeEmpty = editor.isRangeEmpty();\n\t            if (!isRangeEmpty) {\n\t                // 选区不是空\n\t                text = editor.getRangeText() || '';\n\t            } else if (rangeElem) {\n\t                // 如果选区空，并且在 a 标签之内\n\t                text = rangeElem.textContent || rangeElem.innerHTML;\n\t            }\n\t\n\t            // 设置 url 和 text\n\t            url && $urlInput.val(url);\n\t            text && $textInput.val(text);\n\t\n\t            // 如果有选区内容，textinput 不能修改\n\t            if (!isRangeEmpty) {\n\t                $textInput.attr('disabled', true);\n\t            } else {\n\t                $textInput.removeAttr('disabled');\n\t            }\n\t\n\t            // 显示（要设置好了所有input的值和属性之后再显示）\n\t            dropPanel.show();\n\t        };\n\t\n\t        // 定义 update selected 事件\n\t        menu.updateSelectedEvent = function () {\n\t            var rangeElem = editor.getRangeElem();\n\t            rangeElem = editor.getSelfOrParentByName(rangeElem, 'a');\n\t            if (rangeElem) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t\n\t        // 『取消』 按钮\n\t        $btnCancel.click(function (e) {\n\t            e.preventDefault();\n\t            menu.dropPanel.hide();\n\t        });\n\t\n\t        // 『确定』按钮\n\t        $btnSubmit.click(function (e) {\n\t            e.preventDefault();\n\t            var rangeElem = editor.getRangeElem();\n\t            var targetElem = editor.getSelfOrParentByName(rangeElem, 'a');\n\t            var isRangeEmpty = editor.isRangeEmpty();\n\t\n\t            var $linkElem, linkHtml;\n\t            var commandFn, callback;\n\t            var $txt = editor.txt.$txt;\n\t            var $oldLinks, $newLinks;\n\t            var uniqId = 'link' + E.random();\n\t\n\t            // 获取数据\n\t            var url = $.trim($urlInput.val());\n\t            var text = $.trim($textInput.val());\n\t\n\t            if (!url) {\n\t                menu.dropPanel.focusFirstInput();\n\t                return;\n\t            }\n\t            if (!text) {\n\t                text = url;\n\t            }\n\t\n\t            if (!isRangeEmpty) {\n\t                // 选中区域有内容，则执行默认命令\n\t\n\t                // 获取目前 txt 内所有链接，并为当前链接做一个标记\n\t                $oldLinks = $txt.find('a');\n\t                $oldLinks.attr(uniqId, '1');\n\t\n\t                // 执行命令 \n\t                editor.command(e, 'createLink', url);\n\t\n\t                // 去的没有标记的链接，即刚刚插入的链接\n\t                $newLinks = $txt.find('a').not('[' + uniqId + ']');\n\t                $newLinks.attr('target', '_blank'); // 增加 _blank\n\t\n\t                // 去掉之前做的标记\n\t                $oldLinks.removeAttr(uniqId);\n\t\n\t            } else if (targetElem) {\n\t                // 无选中区域，在 a 标签之内，修改该 a 标签的内容和链接\n\t                $linkElem = $(targetElem);\n\t                commandFn = function () {\n\t                    $linkElem.attr('href', url);\n\t                    $linkElem.text(text);\n\t                };\n\t                callback = function () {\n\t                    var editor = this;\n\t                    editor.restoreSelectionByElem(targetElem);\n\t                };\n\t                // 执行命令\n\t                editor.customCommand(e, commandFn, callback);\n\t            } else {\n\t                // 无选中区域，不在 a 标签之内，插入新的链接\n\t\n\t                linkHtml = '<a href=\"' + url + '\" target=\"_blank\">' + text + '</a>';\n\t                if (E.userAgent.indexOf('Firefox') > 0) {\n\t                    linkHtml += '<span>&nbsp;</span>';\n\t                }\n\t                editor.command(e, 'insertHtml', linkHtml);\n\t            }\n\t\n\t        });\n\t        \n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t\n\t});\n\t// unlink 菜单\n\t_e(function (E, $) {\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'unlink';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.unlink,\n\t            commandName: 'unLink'\n\t        });\n\t\n\t        // click 事件\n\t        menu.clickEvent = function  (e) {\n\t            var isRangeEmpty = editor.isRangeEmpty();\n\t            if (!isRangeEmpty) {\n\t                // 有选中区域，或者IE8，执行默认命令\n\t                editor.command(e, 'unLink');\n\t                return;\n\t            }\n\t\n\t            // 无选中区域...\n\t\n\t            var rangeElem = editor.getRangeElem();\n\t            var aElem = editor.getSelfOrParentByName(rangeElem, 'a');\n\t            if (!aElem) {\n\t                // 不在 a 之内，返回\n\t                e.preventDefault();\n\t                return;\n\t            }\n\t\n\t            // 在 a 之内\n\t            var $a = $(aElem);\n\t            var $span = $('<span>' + $a.text() + '</span>');\n\t            function commandFn() {\n\t                $a.after($span).remove();\n\t            }\n\t            function callback() {\n\t                editor.restoreSelectionByElem($span.get(0));\n\t            }\n\t            editor.customCommand(e, commandFn, callback);\n\t        };\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t\n\t});\n\t// table 菜单\n\t_e(function (E, $) {\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'table';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.table\n\t        });\n\t\n\t        // dropPanel 内容\n\t        var $content = $('<div style=\"font-size: 14px; color: #666; text-align:right;\"></div>');\n\t        var $table = $('<table class=\"choose-table\" style=\"margin-bottom:10px;margin-top:5px;\">');\n\t        var $row = $('<span>0</span>');\n\t        var $rowspan = $('<span> 行 </span>');\n\t        var $col = $('<span>0</span>');\n\t        var $colspan = $('<span> 列</span>');\n\t        var $tr;\n\t        var i, j;\n\t\n\t        // 创建一个n行n列的表格\n\t        for (i = 0; i < 15; i++) {\n\t            $tr = $('<tr index=\"' + (i + 1) + '\">');\n\t            for (j = 0; j < 20; j++) {\n\t                $tr.append($('<td index=\"' + (j + 1) + '\">'));\n\t            }\n\t            $table.append($tr);\n\t        }\n\t        $content.append($table);\n\t        $content.append($row).append($rowspan).append($col).append($colspan);\n\t\n\t        // 定义table事件\n\t        $table.on('mouseenter', 'td', function (e) {\n\t            var $currentTd = $(e.currentTarget);\n\t            var currentTdIndex = $currentTd.attr('index');\n\t            var $currentTr = $currentTd.parent();\n\t            var currentTrIndex = $currentTr.attr('index');\n\t\n\t            // 显示\n\t            $row.text(currentTrIndex);\n\t            $col.text(currentTdIndex);\n\t\n\t            // 遍历设置背景颜色\n\t            $table.find('tr').each(function () {\n\t                var $tr = $(this);\n\t                var trIndex = $tr.attr('index');\n\t                if (parseInt(trIndex, 10) <= parseInt(currentTrIndex, 10)) {\n\t                    // 该行需要可能需要设置背景色\n\t                    $tr.find('td').each(function () {\n\t                        var $td = $(this);\n\t                        var tdIndex = $td.attr('index');\n\t                        if (parseInt(tdIndex, 10) <= parseInt(currentTdIndex, 10)) {\n\t                            // 需要设置背景色\n\t                            $td.addClass('active');\n\t                        } else {\n\t                            // 需要移除背景色\n\t                            $td.removeClass('active');\n\t                        }\n\t                    });\n\t                } else {\n\t                    // 改行不需要设置背景色\n\t                    $tr.find('td').removeClass('active');\n\t                }\n\t            });\n\t        }).on('mouseleave', function (e) {\n\t            // mouseleave 删除背景色\n\t            $table.find('td').removeClass('active');\n\t\n\t            $row.text(0);\n\t            $col.text(0);\n\t        });\n\t\n\t        // 插入表格\n\t        $table.on('click', 'td', function (e) {\n\t            var $currentTd = $(e.currentTarget);\n\t            var currentTdIndex = $currentTd.attr('index');\n\t            var $currentTr = $currentTd.parent();\n\t            var currentTrIndex = $currentTr.attr('index');\n\t\n\t            var rownum = parseInt(currentTrIndex, 10);\n\t            var colnum = parseInt(currentTdIndex, 10);\n\t\n\t            // -------- 拼接tabel html --------\n\t\n\t            var i, j;\n\t            var tableHtml = '<table>';\n\t            for (i = 0; i < rownum; i++) {\n\t                tableHtml += '<tr>';\n\t\n\t                for (j = 0; j < colnum; j++) {\n\t                    tableHtml += '<td><span>&nbsp;</span></td>';\n\t                }\n\t                tableHtml += '</tr>';\n\t            }\n\t            tableHtml += '</table>';\n\t\n\t            // -------- 执行命令 --------\n\t            editor.command(e, 'insertHtml', tableHtml);\n\t        });\n\t\n\t        // 创建 panel\n\t        menu.dropPanel = new E.DropPanel(editor, menu, {\n\t            $content: $content,\n\t            width: 262\n\t        });\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t\n\t});\n\t// emotion 菜单\n\t_e(function (E, $) {\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'emotion';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var config = editor.config;\n\t        var lang = config.lang;\n\t        var configEmotions = config.emotions;\n\t        var emotionsShow = config.emotionsShow;\n\t\n\t        // 记录每一个表情图片的地址\n\t        editor.emotionUrls = [];\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.emotion\n\t        });\n\t\n\t        // 添加表情图片的函数\n\t        function insertEmotionImgs(data, $tabContent) {\n\t            // 添加表情图片\n\t            $.each(data, function (k, emotion) {\n\t                var src = emotion.icon || emotion.url;\n\t                var value = emotion.value || emotion.title;\n\t                // 通过配置 editor.config.emotionsShow 的值来修改插入到编辑器的内容（图片/value）\n\t                var commandValue = emotionsShow === 'icon' ? src : value;\n\t                var $command = $('<a href=\"#\" commandValue=\"' + commandValue + '\"></a>');\n\t                var $img = $('<img>');\n\t                $img.attr('_src', src);  // 先将 src 复制到 '_src' 属性，先不加载\n\t\n\t                $command.append($img);\n\t                $tabContent.append($command);\n\t\n\t                // 记录下每一个表情图片的地址\n\t                editor.emotionUrls.push(src);\n\t            });\n\t        }\n\t\n\t        // 拼接 dropPanel 内容\n\t        var $panelContent = $('<div class=\"panel-tab\"></div>');\n\t        var $tabContainer = $('<div class=\"tab-container\"></div>');\n\t        var $contentContainer = $('<div class=\"content-container emotion-content-container\"></div>');\n\t        $.each(configEmotions, function (k, emotion) {\n\t            var title = emotion.title;\n\t            var data = emotion.data;\n\t\n\t            E.log('正在处理 ' + title + ' 表情的数据...');\n\t\n\t            // 增加该组表情的tab和content\n\t            var $tab = $('<a href=\"#\">' + title +' </a>');\n\t            $tabContainer.append($tab);\n\t            var $tabContent = $('<div class=\"content\"></div>');\n\t            $contentContainer.append($tabContent);\n\t\n\t            // tab 切换事件\n\t            $tab.click(function (e) {\n\t                $tabContainer.children().removeClass('selected');\n\t                $contentContainer.children().removeClass('selected');\n\t                $tabContent.addClass('selected');\n\t                $tab.addClass('selected');\n\t                e.preventDefault();\n\t            });\n\t\n\t            // 处理data\n\t            if (typeof data === 'string') {\n\t                // url 形式，需要通过ajax从该url获取数据\n\t                E.log('将通过 ' + data + ' 地址ajax下载表情包');\n\t                $.get(data, function (result) {\n\t                    result = $.parseJSON(result);\n\t                    E.log('下载完毕，得到 ' + result.length + ' 个表情');\n\t                    insertEmotionImgs(result, $tabContent);\n\t                });\n\t                \n\t            } else if ( Object.prototype.toString.call(data).toLowerCase().indexOf('array') > 0 ) {\n\t                // 数组，即 data 直接就是表情包数据\n\t                insertEmotionImgs(data, $tabContent);\n\t            } else {\n\t                // 其他情况，data格式不对\n\t                E.error('data 数据格式错误，请修改为正确格式，参考文档：' + E.docsite);\n\t                return;\n\t            }\n\t        });\n\t        $panelContent.append($tabContainer).append($contentContainer);\n\t\n\t        // 默认显示第一个tab\n\t        $tabContainer.children().first().addClass('selected');\n\t        $contentContainer.children().first().addClass('selected');\n\t\n\t        // 插入表情command事件\n\t        $contentContainer.on('click', 'a[commandValue]', function (e) {\n\t            var $a = $(e.currentTarget);\n\t            var commandValue = $a.attr('commandValue');\n\t            var img;\n\t\n\t            // commandValue 有可能是图片url，也有可能是表情的 value，需要区别对待\n\t\n\t            if (emotionsShow === 'icon') {\n\t                // 插入图片\n\t                editor.command(e, 'InsertImage', commandValue);\n\t            } else {\n\t                // 插入value\n\t                editor.command(e, 'insertHtml', '<span>' + commandValue + '</span>');\n\t            }\n\t\n\t            e.preventDefault();\n\t        });\n\t\n\t        // 添加panel\n\t        menu.dropPanel = new E.DropPanel(editor, menu, {\n\t            $content: $panelContent,\n\t            width: 350\n\t        });\n\t\n\t        // 定义click事件（异步加载表情图片）\n\t        menu.clickEvent = function (e) {\n\t            var menu = this;\n\t            var dropPanel = menu.dropPanel;\n\t\n\t            // -------------隐藏-------------\n\t            if (dropPanel.isShowing) {\n\t                dropPanel.hide();\n\t                return;\n\t            }\n\t\n\t            // -------------显示-------------\n\t            dropPanel.show();\n\t\n\t            // 异步加载图片\n\t            if (menu.imgLoaded) {\n\t                return;\n\t            }\n\t            $contentContainer.find('img').each(function () {\n\t                var $img = $(this);\n\t                var _src = $img.attr('_src');\n\t                $img.on('error', function () {\n\t                    E.error('加载不出表情图片 ' + _src);\n\t                });\n\t                $img.attr('src', _src);\n\t                $img.removeAttr('_src');\n\t            });\n\t            menu.imgLoaded = true;\n\t        };\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t\n\t});\n\t// img 菜单\n\t_e(function (E, $) {\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'img';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.img\n\t        });\n\t\n\t        // 创建 panel content\n\t        var $panelContent = $('<div class=\"panel-tab\"></div>');\n\t        var $tabContainer = $('<div class=\"tab-container\"></div>');\n\t        var $contentContainer = $('<div class=\"content-container\"></div>');\n\t        $panelContent.append($tabContainer).append($contentContainer);\n\t\n\t        // tab\n\t        var $uploadTab = $('<a href=\"#\">' + lang.uploadImg + '</a>');\n\t        var $linkTab = $('<a href=\"#\">' + lang.linkImg + '</a>');\n\t        $tabContainer.append($uploadTab).append($linkTab);\n\t\n\t        // 上传图片 content\n\t        var $uploadContent = $('<div class=\"content\"></div>');\n\t        $contentContainer.append($uploadContent);\n\t\n\t        // 网络图片 content\n\t        var $linkContent = $('<div class=\"content\"></div>');\n\t        $contentContainer.append($linkContent);\n\t        linkContentHandler(editor, menu, $linkContent);\n\t\n\t        // 添加panel\n\t        menu.dropPanel = new E.DropPanel(editor, menu, {\n\t            $content: $panelContent,\n\t            width: 400,\n\t            onRender: function () {\n\t                // 渲染后的回调事件，用于执行自定义上传的init\n\t                // 因为渲染之后，上传面板的dom才会被渲染到页面，才能让第三方空间获取到\n\t                var init = editor.config.customUploadInit;\n\t                init && init.call(editor);\n\t            }\n\t        });\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t\n\t        // tab 切换事件\n\t        function tabToggle() {\n\t            $uploadTab.click(function (e) {\n\t                $tabContainer.children().removeClass('selected');\n\t                $contentContainer.children().removeClass('selected');\n\t                $uploadContent.addClass('selected');\n\t                $uploadTab.addClass('selected');\n\t                e.preventDefault();\n\t            });\n\t            $linkTab.click(function (e) {\n\t                $tabContainer.children().removeClass('selected');\n\t                $contentContainer.children().removeClass('selected');\n\t                $linkContent.addClass('selected');\n\t                $linkTab.addClass('selected');\n\t                e.preventDefault();\n\t\n\t                // focus input\n\t                if (E.placeholder) {\n\t                    $linkContent.find('input[type=text]').focus();\n\t                }\n\t            });\n\t\n\t            // 默认情况\n\t            // $uploadTab.addClass('selected');\n\t            // $uploadContent.addClass('selected');\n\t            $uploadTab.click();\n\t        }\n\t\n\t        // 隐藏上传图片\n\t        function hideUploadImg() {\n\t            $tabContainer.remove();\n\t            $uploadContent.remove();\n\t            $linkContent.addClass('selected');\n\t        }\n\t\n\t        // 隐藏网络图片\n\t        function hideLinkImg() {\n\t            $tabContainer.remove();\n\t            $linkContent.remove();\n\t            $uploadContent.addClass('selected');\n\t        }\n\t\n\t        // 判断用户是否配置了上传图片\n\t        editor.ready(function () {\n\t            var editor = this;\n\t            var config = editor.config;\n\t            var uploadImgUrl = config.uploadImgUrl;\n\t            var customUpload = config.customUpload;\n\t            var linkImg = config.hideLinkImg;\n\t            var $uploadImgPanel;\n\t\n\t            if (uploadImgUrl || customUpload) {\n\t                // 第一，暴露出 $uploadContent 以便用户自定义 ！！！重要\n\t                editor.$uploadContent = $uploadContent;\n\t\n\t                // 第二，绑定tab切换事件\n\t                tabToggle();\n\t\n\t                if (linkImg) {\n\t                    // 隐藏网络图片\n\t                    hideLinkImg();\n\t                }\n\t            } else {\n\t                // 未配置上传图片功能\n\t                hideUploadImg();\n\t            }\n\t\n\t            // 点击 $uploadContent 立即隐藏 dropPanel\n\t            // 为了兼容IE8、9的上传，因为IE8、9使用 modal 上传\n\t            // 这里使用异步，为了不妨碍高级浏览器通过点击 $uploadContent 选择文件\n\t            function hidePanel() {\n\t                menu.dropPanel.hide();\n\t            }\n\t            $uploadContent.click(function () {\n\t                setTimeout(hidePanel);\n\t            });\n\t        });\n\t    });\n\t\n\t    // --------------- 处理网络图片content ---------------\n\t    function linkContentHandler (editor, menu, $linkContent) {\n\t        var lang = editor.config.lang;\n\t        var $urlContainer = $('<div style=\"margin:20px 10px 10px 10px;\"></div>');\n\t        var $urlInput = $('<input type=\"text\" class=\"block\" placeholder=\"http://\"/>');\n\t        $urlContainer.append($urlInput);\n\t        var $btnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n\t        var $btnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n\t\n\t        $linkContent.append($urlContainer).append($btnSubmit).append($btnCancel);\n\t\n\t        // 取消\n\t        $btnCancel.click(function (e) {\n\t            e.preventDefault();\n\t            menu.dropPanel.hide();\n\t        });\n\t\n\t        // callback \n\t        function callback() {\n\t            $urlInput.val('');\n\t        }\n\t\n\t        // 确定\n\t        $btnSubmit.click(function (e) {\n\t            e.preventDefault();\n\t            var url = $.trim($urlInput.val());\n\t            if (!url) {\n\t                // 无内容\n\t                $urlInput.focus();\n\t                return;\n\t            }\n\t\n\t            var imgHtml = '<img style=\"max-width:100%;\" src=\"' + url + '\"/>';\n\t            editor.command(e, 'insertHtml', imgHtml, callback);\n\t        });\n\t    }\n\t\n\t});\n\t// video 菜单\n\t_e(function (E, $) {\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'video';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t        var reg = /^<(iframe)|(embed)/i;  // <iframe... 或者 <embed... 格式\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.video\n\t        });\n\t\n\t        // 创建 panel 内容\n\t        var $content = $('<div></div>');\n\t        var $linkInputContainer = $('<div style=\"margin:20px 10px;\"></div>');\n\t        var $linkInput = $('<input type=\"text\" class=\"block\" placeholder=\\'格式如：<iframe src=\"...\" frameborder=0 allowfullscreen></iframe>\\'/>');\n\t        $linkInputContainer.append($linkInput);\n\t        var $sizeContainer = $('<div style=\"margin:20px 10px;\"></div>');\n\t        var $widthInput = $('<input type=\"text\" value=\"640\" style=\"width:50px;text-align:center;\"/>');\n\t        var $heightInput = $('<input type=\"text\" value=\"498\" style=\"width:50px;text-align:center;\"/>');\n\t        $sizeContainer.append('<span> ' + lang.width + ' </span>')\n\t                      .append($widthInput)\n\t                      .append('<span> px &nbsp;&nbsp;&nbsp;</span>')\n\t                      .append('<span> ' + lang.height + ' </span>')\n\t                      .append($heightInput)\n\t                      .append('<span> px </span>');\n\t        var $btnContainer = $('<div></div>');\n\t        var $howToCopy = $('<a href=\"http://www.kancloud.cn/wangfupeng/wangeditor2/134973\" target=\"_blank\" style=\"display:inline-block;margin-top:10px;margin-left:10px;color:#999;\">如何复制视频链接？</a>');\n\t        var $btnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n\t        var $btnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n\t        $btnContainer.append($howToCopy).append($btnSubmit).append($btnCancel);\n\t        $content.append($linkInputContainer).append($sizeContainer).append($btnContainer);\n\t\n\t        // 取消按钮\n\t        $btnCancel.click(function (e) {\n\t            e.preventDefault();\n\t            $linkInput.val('');\n\t            menu.dropPanel.hide();\n\t        });\n\t\n\t        // 确定按钮\n\t        $btnSubmit.click(function (e) {\n\t            e.preventDefault();\n\t            var link = $.trim($linkInput.val());\n\t            var $link;\n\t            var width = parseInt($widthInput.val());\n\t            var height = parseInt($heightInput.val());\n\t            var $div = $('<div>');\n\t            var html = '<p>{content}</p>';\n\t\n\t            // 验证数据\n\t            if (!link) {\n\t                menu.dropPanel.focusFirstInput();\n\t                return;\n\t            }\n\t\n\t            if (!reg.test(link)) {\n\t                alert('视频链接格式错误！');\n\t                menu.dropPanel.focusFirstInput();\n\t                return;\n\t            }\n\t\n\t            if (isNaN(width) || isNaN(height)) {\n\t                alert('宽度或高度不是数字！');\n\t                return;\n\t            }\n\t\n\t            $link = $(link);\n\t\n\t            // 设置高度和宽度\n\t            $link.attr('width', width)\n\t                 .attr('height', height);\n\t\n\t            // 拼接字符串\n\t            html = html.replace('{content}', $div.append($link).html());\n\t\n\t            // 执行命令\n\t            editor.command(e, 'insertHtml', html);\n\t            $linkInput.val('');\n\t        });\n\t\n\t        // 创建panel\n\t        menu.dropPanel = new E.DropPanel(editor, menu, {\n\t            $content: $content,\n\t            width: 400\n\t        });\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t\n\t});\n\t// location 菜单\n\t_e(function (E, $) {\n\t\n\t    // 判断浏览器的 input 是否支持 keyup\n\t    var inputKeyup = (function (input) {\n\t        return 'onkeyup' in input;\n\t    })(document.createElement('input'));\n\t\n\t    // 百度地图的key\n\t    E.baiduMapAk = 'TVhjYjq1ICT2qqL5LdS8mwas';\n\t\n\t    // 一个页面中，如果有多个编辑器，地图会出现问题。这个参数记录一下，如果超过 1 就提示\n\t    E.numberOfLocation = 0;\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'location';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t\n\t        if (++E.numberOfLocation > 1) {\n\t            E.error('目前不支持在一个页面多个编辑器上同时使用地图，可通过自定义菜单配置去掉地图菜单');\n\t            return;\n\t        }\n\t\n\t        var editor = this;\n\t        var config = editor.config;\n\t        var lang = config.lang;\n\t        var ak = config.mapAk;\n\t\n\t        // 地图的变量存储到这个地方\n\t        editor.mapData = {};\n\t        var mapData = editor.mapData;\n\t\n\t        // ---------- 地图事件 ----------\n\t        mapData.markers = [];\n\t        mapData.mapContainerId = 'map' + E.random();\n\t\n\t        mapData.clearLocations = function () {\n\t            var map = mapData.map;\n\t            if (!map) {\n\t                return;\n\t            }\n\t            map.clearOverlays();\n\t\n\t            //同时，清空marker数组\n\t            mapData.markers = [];\n\t        };\n\t\n\t        mapData.searchMap = function () {\n\t            var map = mapData.map;\n\t            if (!map) {\n\t                return;\n\t            }\n\t\n\t            var BMap = window.BMap;\n\t            var cityName = $cityInput.val();\n\t            var locationName = $searchInput.val();\n\t            var myGeo, marker;\n\t\n\t            if(cityName !== ''){\n\t                if(!locationName || locationName === ''){\n\t                    map.centerAndZoom(cityName, 11);\n\t                }\n\t\n\t                //地址解析\n\t                if(locationName && locationName !== ''){\n\t                    myGeo = new BMap.Geocoder();\n\t                    // 将地址解析结果显示在地图上,并调整地图视野\n\t                    myGeo.getPoint(locationName, function(point){\n\t                        if (point) {\n\t                            map.centerAndZoom(point, 13);\n\t                            marker = new BMap.Marker(point);\n\t                            map.addOverlay(marker);\n\t                            marker.enableDragging();  //允许拖拽\n\t                            mapData.markers.push(marker);  //将marker加入到数组中\n\t                        }else{\n\t                            // alert('未找到');\n\t                            map.centerAndZoom(cityName, 11);  //找不到则重新定位到城市\n\t                        }\n\t                    }, cityName);\n\t                }\n\t            } // if(cityName !== '')\n\t        };\n\t\n\t        // load script 之后的 callback\n\t        var hasCallback = false;\n\t        window.baiduMapCallBack = function(){\n\t            // 避免重复加载\n\t            if (hasCallback) {\n\t                return;\n\t            } else {\n\t                hasCallback = true;\n\t            }\n\t\n\t            var BMap = window.BMap;\n\t            if (!mapData.map) {\n\t                // 创建Map实例\n\t                mapData.map = new BMap.Map(mapData.mapContainerId);\n\t            }\n\t            var map = mapData.map;\n\t\n\t            map.centerAndZoom(new BMap.Point(116.404, 39.915), 11);  // 初始化地图,设置中心点坐标和地图级别\n\t            map.addControl(new BMap.MapTypeControl());   //添加地图类型控件\n\t            map.setCurrentCity(\"北京\");          // 设置地图显示的城市 此项是必须设置的\n\t            map.enableScrollWheelZoom(true);     //开启鼠标滚轮缩放\n\t\n\t            //根据IP定位\n\t            function locationFun(result){\n\t                var cityName = result.name;\n\t                map.setCenter(cityName);\n\t\n\t                // 设置城市名称\n\t                $cityInput.val(cityName);\n\t                if (E.placeholder) {\n\t                    $searchInput.focus();\n\t                }\n\t                var timeoutId, searchFn;\n\t                if (inputKeyup) {\n\t                   // 并绑定搜索事件 - input 支持 keyup\n\t                   searchFn = function (e) {\n\t                       if (e.type === 'keyup' && e.keyCode === 13) {\n\t                           e.preventDefault();\n\t                       }\n\t                       if (timeoutId) {\n\t                           clearTimeout(timeoutId);\n\t                       }\n\t                       timeoutId = setTimeout(mapData.searchMap, 500);\n\t                   };\n\t                   $cityInput.on('keyup change paste', searchFn);\n\t                   $searchInput.on('keyup change paste', searchFn); \n\t                } else {\n\t                    // 并绑定搜索事件 - input 不支持 keyup\n\t                    searchFn = function () {\n\t                        if (!$content.is(':visible')) {\n\t                            // panel 不显示了，就不用再监控了\n\t                            clearTimeout(timeoutId);\n\t                            return;\n\t                        }\n\t\n\t                        var currentCity = '';\n\t                        var currentSearch = '';\n\t                        var city = $cityInput.val();\n\t                        var search = $searchInput.val();\n\t\n\t                        if (city !== currentCity || search !== currentSearch) {\n\t                            // 刚获取的数据和之前的数据不一致，执行查询\n\t                            mapData.searchMap();\n\t                            // 更新数据\n\t                            currentCity = city;\n\t                            currentSearch = search;\n\t                        }\n\t\n\t                        // 继续监控\n\t                        if (timeoutId) {\n\t                            clearTimeout(timeoutId);\n\t                        }\n\t                        timeoutId = setTimeout(searchFn, 1000);\n\t                    };\n\t                    // 开始监控\n\t                    timeoutId = setTimeout(searchFn, 1000);\n\t                }\n\t            }\n\t            var myCity = new BMap.LocalCity();\n\t            myCity.get(locationFun);\n\t\n\t            //鼠标点击，创建位置\n\t            map.addEventListener(\"click\", function(e){\n\t                var marker = new BMap.Marker(new BMap.Point(e.point.lng, e.point.lat)); \n\t                map.addOverlay(marker);  \n\t                marker.enableDragging();\n\t                mapData.markers.push(marker);  //加入到数组中\n\t            }, false);\n\t        };\n\t\n\t        mapData.loadMapScript = function () {\n\t            var script = document.createElement(\"script\");\n\t            script.type = \"text/javascript\";\n\t            script.src = \"https://api.map.baidu.com/api?v=2.0&ak=\" + ak + \"&s=1&callback=baiduMapCallBack\";  // baiduMapCallBack是一个本地函数\n\t            try {\n\t                // IE10- 报错\n\t                document.body.appendChild(script);\n\t            } catch (ex) {\n\t                E.error('加载地图过程中发生错误');\n\t            }\n\t        };\n\t\n\t        // 初始化地图\n\t        mapData.initMap = function () {\n\t            if (window.BMap) {\n\t                // 不是第一次，直接处理地图即可\n\t                window.baiduMapCallBack();\n\t            } else {\n\t                // 第一次，先加载地图 script，再处理地图（script加载完自动执行处理）\n\t                mapData.loadMapScript();\n\t            }\n\t        };\n\t\n\t        // ---------- 创建 menu 对象 ----------\n\t\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.location\n\t        });\n\t\n\t        editor.menus[menuId] = menu;\n\t\n\t        // ---------- 构建UI ----------\n\t\n\t        // panel content \n\t        var $content = $('<div></div>');\n\t\n\t        // 搜索框\n\t        var $inputContainer = $('<div style=\"margin:10px 0;\"></div>');\n\t        var $cityInput = $('<input type=\"text\"/>');\n\t        $cityInput.css({\n\t            width: '80px',\n\t            'text-align': 'center'\n\t        });\n\t        var $searchInput = $('<input type=\"text\"/>');\n\t        $searchInput.css({\n\t            width: '300px',\n\t            'margin-left': '10px'\n\t        }).attr('placeholder', lang.searchlocation);\n\t        var $clearBtn = $('<button class=\"right link\">' + lang.clearLocation + '</button>');\n\t        $inputContainer.append($clearBtn)\n\t                       .append($cityInput)\n\t                       .append($searchInput);\n\t        $content.append($inputContainer);\n\t\n\t        // 清除位置按钮\n\t        $clearBtn.click(function (e) {\n\t            $searchInput.val('');\n\t            $searchInput.focus();\n\t            mapData.clearLocations();\n\t            e.preventDefault();\n\t        });\n\t\n\t        // 地图\n\t        var $map = $('<div id=\"' + mapData.mapContainerId + '\"></div>');\n\t        $map.css({\n\t            height: '260px',\n\t            width: '100%',\n\t            position: 'relative',\n\t            'margin-top': '10px',\n\t            border: '1px solid #f1f1f1'\n\t        });\n\t        var $mapLoading = $('<span>' + lang.loading + '</span>');\n\t        $mapLoading.css({\n\t            position: 'absolute',\n\t            width: '100px',\n\t            'text-align': 'center',\n\t            top: '45%',\n\t            left: '50%',\n\t            'margin-left': '-50px'\n\t        });\n\t        $map.append($mapLoading);\n\t        $content.append($map);\n\t\n\t        // 按钮\n\t        var $btnContainer = $('<div style=\"margin:10px 0;\"></div>');\n\t        var $btnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n\t        var $btnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n\t        var $checkLabel = $('<label style=\"display:inline-block;margin-top:10px;color:#666;\"></label>');\n\t        var $check = $('<input type=\"checkbox\">');\n\t        $checkLabel.append($check).append('<span style=\"display:inline-block;margin-left:5px;\">  ' + lang.dynamicMap + '</span>');\n\t        $btnContainer.append($checkLabel)\n\t                     .append($btnSubmit)\n\t                     .append($btnCancel);\n\t        $content.append($btnContainer);\n\t\n\t        function callback() {\n\t            $searchInput.val('');\n\t        }\n\t\n\t        // 『取消』按钮事件\n\t        $btnCancel.click(function (e) {\n\t            e.preventDefault();\n\t            callback();\n\t            menu.dropPanel.hide();\n\t        });\n\t\n\t        // 『确定』按钮事件\n\t        $btnSubmit.click(function (e) {\n\t            e.preventDefault();\n\t            var map = mapData.map,\n\t                isDynamic = $check.is(':checked'),\n\t                markers =  mapData.markers,\n\t\n\t                center = map.getCenter(),\n\t                centerLng = center.lng,\n\t                centerLat = center.lat,\n\t\n\t                zoom = map.getZoom(),\n\t\n\t                size = map.getSize(),\n\t                sizeWidth = size.width,\n\t                sizeHeight = size.height,\n\t\n\t                position,\n\t                src,\n\t                iframe;\n\t\n\t            if(isDynamic){\n\t                //动态地址\n\t                src = 'http://ueditor.baidu.com/ueditor/dialogs/map/show.html#';\n\t            }else{\n\t                //静态地址\n\t                src = 'http://api.map.baidu.com/staticimage?';\n\t            }\n\t\n\t            //src参数\n\t            src = src +'center=' + centerLng + ',' + centerLat +\n\t                '&zoom=' + zoom +\n\t                '&width=' + sizeWidth +\n\t                '&height=' + sizeHeight;\n\t            if(markers.length > 0){\n\t                src = src + '&markers=';\n\t\n\t                //添加所有的marker\n\t                $.each(markers, function(key, value){\n\t                    position = value.getPosition();\n\t                    if(key > 0){\n\t                        src = src + '|';\n\t                    }\n\t                    src = src + position.lng + ',' + position.lat;\n\t                });\n\t            }\n\t\n\t            if(isDynamic){\n\t                if(markers.length > 1){\n\t                    alert( lang.langDynamicOneLocation );\n\t                    return;\n\t                }\n\t\n\t                src += '&markerStyles=l,A';\n\t\n\t                //插入iframe\n\t                iframe = '<iframe class=\"ueditor_baidumap\" src=\"{src}\" frameborder=\"0\" width=\"' + sizeWidth + '\" height=\"' + sizeHeight + '\"></iframe>';\n\t                iframe = iframe.replace('{src}', src);\n\t                editor.command(e, 'insertHtml', iframe, callback);\n\t            }else{\n\t                //插入图片\n\t                editor.command(e, 'insertHtml', '<img style=\"max-width:100%;\" src=\"' + src + '\"/>', callback);\n\t            }\n\t        });\n\t\n\t        // 根据 UI 创建菜单 panel\n\t        menu.dropPanel = new E.DropPanel(editor, menu, {\n\t            $content: $content,\n\t            width: 500\n\t        });\n\t\n\t        // ---------- 事件 ----------\n\t\n\t        // render 时执行事件\n\t        menu.onRender = function () {\n\t            if (ak === E.baiduMapAk) {\n\t                E.warn('建议在配置中自定义百度地图的mapAk，否则可能影响地图功能，文档：' + E.docsite);\n\t            }\n\t        };\n\t\n\t        // click 事件\n\t        menu.clickEvent = function (e) {\n\t            var menu = this;\n\t            var dropPanel = menu.dropPanel;\n\t            var firstTime = false;\n\t\n\t            // -------------隐藏-------------\n\t            if (dropPanel.isShowing) {\n\t                dropPanel.hide();\n\t                return;\n\t            }\n\t\n\t            // -------------显示-------------\n\t            if (!mapData.map) {\n\t                // 第一次，先加载地图\n\t                firstTime = true;\n\t            }\n\t            \n\t            dropPanel.show();\n\t            mapData.initMap();\n\t\n\t            if (!firstTime) {\n\t                $searchInput.focus();\n\t            }\n\t        };\n\t\n\t    });\n\t\n\t});\n\t// insertcode 菜单\n\t_e(function (E, $) {\n\t\n\t    // 加载 highlightjs 代码\n\t    function loadHljs() {\n\t        if (E.userAgent.indexOf('MSIE 8') > 0) {\n\t            // 不支持 IE8\n\t            return;\n\t        }\n\t        if (window.hljs) {\n\t            // 不要重复加载\n\t            return;\n\t        }\n\t        var script = document.createElement(\"script\");\n\t        script.type = \"text/javascript\";\n\t        script.src = \"//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js\";\n\t        document.body.appendChild(script);\n\t    }\n\t    \n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'insertcode';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t\n\t        // 加载 highlightjs 代码\n\t        setTimeout(loadHljs, 0);\n\t\n\t        var editor = this;\n\t        var config = editor.config;\n\t        var lang = config.lang;\n\t        var $txt = editor.txt.$txt;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.insertcode\n\t        });\n\t\n\t        // click 事件\n\t        menu.clickEvent = function (e) {\n\t            var menu = this;\n\t            var dropPanel = menu.dropPanel;\n\t\n\t            // 隐藏\n\t            if (dropPanel.isShowing) {\n\t                dropPanel.hide();\n\t                return;\n\t            }\n\t\n\t            // 显示\n\t            $textarea.val('');\n\t            dropPanel.show();\n\t\n\t            // highlightjs 语言列表\n\t            var hljs = window.hljs;\n\t            if (hljs && hljs.listLanguages) {\n\t                if ($langSelect.children().length !== 0) {\n\t                    return;\n\t                }\n\t                $langSelect.css({\n\t                    'margin-top': '9px',\n\t                    'margin-left': '5px'\n\t                });\n\t                $.each(hljs.listLanguages(), function (key, lang) {\n\t                    if (lang === 'xml') {\n\t                        lang = 'html';\n\t                    }\n\t                    if (lang === config.codeDefaultLang) {\n\t                        $langSelect.append('<option value=\"' + lang + '\" selected=\"selected\">' + lang + '</option>');\n\t                    } else {\n\t                        $langSelect.append('<option value=\"' + lang + '\">' + lang + '</option>');\n\t                    }\n\t                });\n\t            } else {\n\t                $langSelect.hide();\n\t            }\n\t        };\n\t\n\t        // 选中状态下的 click 事件\n\t        menu.clickEventSelected = function (e) {\n\t            var menu = this;\n\t            var dropPanel = menu.dropPanel;\n\t\n\t            // 隐藏\n\t            if (dropPanel.isShowing) {\n\t                dropPanel.hide();\n\t                return;\n\t            }\n\t\n\t            // 显示\n\t            dropPanel.show();\n\t\n\t            var rangeElem = editor.getRangeElem();\n\t            var targetElem = editor.getSelfOrParentByName(rangeElem, 'pre');\n\t            var $targetElem;\n\t            var className;\n\t            if (targetElem) {\n\t                // 确定找到 pre 之后，再找 code\n\t                targetElem = editor.getSelfOrParentByName(rangeElem, 'code');\n\t            }\n\t            if (!targetElem) {\n\t                return;\n\t            }\n\t            $targetElem = $(targetElem);\n\t\n\t            // 赋值内容\n\t            $textarea.val($targetElem.text());\n\t            if ($langSelect) {\n\t                // 赋值语言\n\t                className = $targetElem.attr('class');\n\t                if (className) {\n\t                    $langSelect.val(className.split(' ')[0]);\n\t                }\n\t            }\n\t        };\n\t\n\t        // 定义更新选中状态的事件\n\t        menu.updateSelectedEvent = function () {\n\t            var self = this; //菜单对象\n\t            var editor = self.editor;\n\t            var rangeElem;\n\t\n\t            rangeElem = editor.getRangeElem();\n\t            rangeElem = editor.getSelfOrParentByName(rangeElem, 'pre');\n\t\n\t            if (rangeElem) {\n\t                return true;\n\t            }\n\t\n\t            return false;\n\t        };\n\t\n\t        // 创建 panel\n\t        var $content = $('<div></div>');\n\t        var $textarea = $('<textarea></textarea>');\n\t        var $langSelect = $('<select></select>');\n\t        contentHandle($content);\n\t        menu.dropPanel = new E.DropPanel(editor, menu, {\n\t            $content: $content,\n\t            width: 500\n\t        });\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t\n\t        // ------ 增加 content 内容 ------\n\t        function contentHandle($content) {\n\t            // textarea 区域\n\t            var $textareaContainer = $('<div></div>');\n\t            $textareaContainer.css({\n\t                margin: '15px 5px 5px 5px',\n\t                height: '160px',\n\t                'text-align': 'center'\n\t            });\n\t            $textarea.css({\n\t                width: '100%',\n\t                height: '100%',\n\t                padding: '10px'\n\t            });\n\t            $textarea.on('keydown', function (e) {\n\t                // 取消 tab 键默认行为\n\t                if (e.keyCode === 9) {\n\t                    e.preventDefault();\n\t                }\n\t            });\n\t            $textareaContainer.append($textarea);\n\t            $content.append($textareaContainer);\n\t\n\t            // 按钮区域\n\t            var $btnContainer = $('<div></div>');\n\t            var $btnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n\t            var $btnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n\t\n\t            $btnContainer.append($btnSubmit).append($btnCancel).append($langSelect);\n\t            $content.append($btnContainer);\n\t\n\t            // 取消按钮\n\t            $btnCancel.click(function (e) {\n\t                e.preventDefault();\n\t                menu.dropPanel.hide();\n\t            });\n\t\n\t            // 确定按钮\n\t            var codeTpl = '<pre style=\"max-width:100%;overflow-x:auto;\"><code{#langClass}>{#content}</code></pre>';\n\t            $btnSubmit.click(function (e) {\n\t                e.preventDefault();\n\t                var val = $textarea.val();\n\t                if (!val) {\n\t                    // 无内容\n\t                    $textarea.focus();\n\t                    return;\n\t                }\n\t\n\t                var rangeElem = editor.getRangeElem();\n\t                if ($.trim($(rangeElem).text()) && codeTpl.indexOf('<p><br></p>') !== 0) {\n\t                    codeTpl = '<p><br></p>' + codeTpl;\n\t                }\n\t\n\t                var lang = $langSelect ? $langSelect.val() : ''; // 获取高亮语言\n\t                var langClass = '';\n\t                var doHightlight = function () {\n\t                    $txt.find('pre code').each(function (i, block) {\n\t                        var $block = $(block);\n\t                        if ($block.attr('codemark')) {\n\t                            // 有 codemark 标记的代码块，就不再重新格式化了\n\t                            return;\n\t                        } else if (window.hljs) {\n\t                            // 新代码块，格式化之后，立即标记 codemark\n\t                            window.hljs.highlightBlock(block);\n\t                            $block.attr('codemark', '1');\n\t                        }\n\t                    });\n\t                };\n\t\n\t                // 语言高亮样式\n\t                if (lang) {\n\t                    langClass = ' class=\"' + lang + ' hljs\"';\n\t                }\n\t\n\t                // 替换标签\n\t                val = val.replace(/&/gm, '&amp;')\n\t                         .replace(/</gm, '&lt;')\n\t                         .replace(/>/gm, '&gt;');\n\t\n\t                // ---- menu 未选中状态 ----\n\t                if (!menu.selected) {\n\t                    // 拼接html\n\t                    var html = codeTpl.replace('{#langClass}', langClass).replace('{#content}', val);\n\t                    editor.command(e, 'insertHtml', html, doHightlight);\n\t                    return;\n\t                }\n\t\n\t                // ---- menu 选中状态 ----\n\t                var targetElem = editor.getSelfOrParentByName(rangeElem, 'pre');\n\t                var $targetElem;\n\t                if (targetElem) {\n\t                    // 确定找到 pre 之后，再找 code\n\t                    targetElem = editor.getSelfOrParentByName(rangeElem, 'code');\n\t                }\n\t                if (!targetElem) {\n\t                    return;\n\t                }\n\t                $targetElem = $(targetElem);\n\t\n\t                function commandFn() {\n\t                    var className;\n\t                    if (lang) {\n\t                        className = $targetElem.attr('class');\n\t                        if (className !== lang + ' hljs') {\n\t                            $targetElem.attr('class', lang + ' hljs');\n\t                        }\n\t                    }\n\t                    $targetElem.html(val);\n\t                }\n\t                function callback() {\n\t                    editor.restoreSelectionByElem(targetElem);\n\t                    doHightlight();\n\t                }\n\t                editor.customCommand(e, commandFn, callback);\n\t            });\n\t        }\n\t\n\t        // ------ enter 时，不另起标签，只换行 ------\n\t        $txt.on('keydown', function (e) {\n\t            if (e.keyCode !== 13) {\n\t                return;\n\t            }\n\t            var rangeElem = editor.getRangeElem();\n\t            var targetElem = editor.getSelfOrParentByName(rangeElem, 'code');\n\t            if (!targetElem) {\n\t                return;\n\t            }\n\t\n\t            editor.command(e, 'insertHtml', '\\n');\n\t        });\n\t\n\t        // ------ 点击时，禁用其他标签 ------\n\t        function updateMenu() {\n\t            var rangeElem = editor.getRangeElem();\n\t            var targetElem = editor.getSelfOrParentByName(rangeElem, 'code');\n\t            if (targetElem) {\n\t                // 在 code 之内，禁用其他菜单\n\t                editor.disableMenusExcept('insertcode');\n\t            } else {\n\t                // 不是在 code 之内，启用其他菜单\n\t                editor.enableMenusExcept('insertcode');\n\t            }\n\t        }\n\t        $txt.on('keydown click', function (e) {\n\t            // 此处必须使用 setTimeout 异步处理，否则不对\n\t            setTimeout(updateMenu);\n\t        });\n\t    });\n\t\n\t});\n\t// undo 菜单\n\t_e(function (E, $) {\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'undo';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.undo\n\t        });\n\t\n\t        // click 事件\n\t        menu.clickEvent = function (e) {\n\t            editor.undo();\n\t        };\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t\n\t\n\t        // ------------ 初始化时、enter 时、打字中断时，做记录 ------------\n\t        // ------------ ctrl + z 是调用记录撤销，而不是使用浏览器默认的撤销 ------------\n\t        editor.ready(function () {\n\t            var editor = this;\n\t            var $txt = editor.txt.$txt;\n\t            var timeoutId;\n\t\n\t            // 执行undo记录\n\t            function undo() {\n\t                editor.undoRecord();\n\t            }\n\t\n\t            $txt.on('keydown', function (e) {\n\t                var keyCode = e.keyCode;\n\t\n\t                // 撤销 ctrl + z\n\t                if (e.ctrlKey && keyCode === 90) {\n\t                    editor.undo();\n\t                    return;\n\t                }\n\t\n\t                if (keyCode === 13) {\n\t                    // enter 做记录\n\t                    undo();\n\t                } else {\n\t                    // keyup 之后 1s 之内不操作，则做一次记录\n\t                    if (timeoutId) {\n\t                        clearTimeout(timeoutId);\n\t                    }\n\t                    timeoutId = setTimeout(undo, 1000);\n\t                }\n\t            });\n\t\n\t            // 初始化做记录\n\t            editor.undoRecord();\n\t        });\n\t    });\n\t\n\t});\n\t// redo 菜单\n\t_e(function (E, $) {\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'redo';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.redo\n\t        });\n\t\n\t        // click 事件\n\t        menu.clickEvent = function (e) {\n\t            editor.redo();\n\t        };\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t\n\t});\n\t// 全屏 菜单\n\t_e(function (E, $) {\n\t\n\t    // 记录全屏时的scrollTop\n\t    var scrollTopWhenFullScreen;\n\t\n\t    E.createMenu(function (check) {\n\t        var menuId = 'fullscreen';\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t        var editor = this;\n\t        var $txt = editor.txt.$txt;\n\t        var config = editor.config;\n\t        var zIndexConfig = config.zindex || 10000;\n\t        var lang = config.lang;\n\t\n\t        var isSelected = false;\n\t        var zIndex;\n\t\n\t        var maxHeight;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,\n\t            id: menuId,\n\t            title: lang.fullscreen\n\t        });\n\t\n\t        // 定义click事件\n\t        menu.clickEvent = function (e) {\n\t            // 增加样式\n\t            var $editorContainer = editor.$editorContainer;\n\t            $editorContainer.addClass('wangEditor-fullscreen');\n\t\n\t            // （先保存当前的）再设置z-index\n\t            zIndex = $editorContainer.css('z-index');\n\t            $editorContainer.css('z-index', zIndexConfig);\n\t\n\t            var $wrapper;\n\t            var txtHeight = $txt.height();\n\t            var txtOuterHeight = $txt.outerHeight();\n\t\n\t            if (editor.useMaxHeight) {\n\t                // 记录 max-height，并暂时去掉maxheight\n\t                maxHeight = $txt.css('max-height');\n\t                $txt.css('max-height', 'none');\n\t\n\t                // 如果使用了maxHeight， 将$txt从它的父元素中移出来\n\t                $wrapper = $txt.parent();\n\t                $wrapper.after($txt);\n\t                $wrapper.remove();\n\t                $txt.css('overflow-y', 'auto');\n\t            }\n\t\n\t            // 设置高度到全屏\n\t            var menuContainer = editor.menuContainer;\n\t            $txt.height(\n\t                E.$window.height() - \n\t                menuContainer.height() - \n\t                (txtOuterHeight - txtHeight)  // 去掉内边距和外边距\n\t            );\n\t\n\t            // 取消menuContainer的内联样式（menu吸顶时，会为 menuContainer 设置一些内联样式）\n\t            editor.menuContainer.$menuContainer.attr('style', '');\n\t\n\t            // 保存状态\n\t            isSelected = true;\n\t\n\t            // 记录编辑器是否全屏\n\t            editor.isFullScreen = true;\n\t\n\t            // 记录设置全屏时的高度\n\t            scrollTopWhenFullScreen = E.$window.scrollTop();\n\t        };\n\t\n\t        // 定义选中状态的 click 事件\n\t        menu.clickEventSelected = function (e) {\n\t            // 取消样式\n\t            var $editorContainer = editor.$editorContainer;\n\t            $editorContainer.removeClass('wangEditor-fullscreen');\n\t            $editorContainer.css('z-index', zIndex);\n\t\n\t            // 还原height\n\t            if (editor.useMaxHeight) {\n\t                $txt.css('max-height', maxHeight);\n\t            } else {\n\t                // editor.valueContainerHeight 在 editor.txt.initHeight() 中事先保存了\n\t                editor.$valueContainer.css('height', editor.valueContainerHeight);\n\t            }\n\t\n\t            // 重新计算高度\n\t            editor.txt.initHeight();\n\t\n\t            // 保存状态\n\t            isSelected = false;\n\t\n\t            // 记录编辑器是否全屏\n\t            editor.isFullScreen = false;\n\t\n\t            // 还原scrollTop\n\t            if (scrollTopWhenFullScreen != null) {\n\t                E.$window.scrollTop(scrollTopWhenFullScreen);\n\t            }\n\t        };\n\t\n\t        // 定义选中事件\n\t        menu.updateSelectedEvent = function (e) {\n\t            return isSelected;\n\t        };\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t\n\t});\n\t// 渲染menus\n\t_e(function (E, $) {\n\t\n\t    E.fn.renderMenus = function () {\n\t\n\t        var editor = this;\n\t        var menus = editor.menus;\n\t        var menuIds = editor.config.menus;\n\t        var menuContainer = editor.menuContainer;\n\t\n\t        var menu;\n\t        var groupIdx = 0;\n\t        $.each(menuIds, function (k, v) {\n\t            if (v === '|') {\n\t                groupIdx++;\n\t                return;\n\t            }\n\t\n\t            menu = menus[v];\n\t            if (menu) {\n\t                menu.render(groupIdx);\n\t            }\n\t        });\n\t    };\n\t\n\t});\n\t// 渲染menus\n\t_e(function (E, $) {\n\t\n\t    E.fn.renderMenuContainer = function () {\n\t\n\t        var editor = this;\n\t        var menuContainer = editor.menuContainer;\n\t        var $editorContainer = editor.$editorContainer;\n\t\n\t        menuContainer.render();\n\t\n\t    };\n\t\n\t});\n\t// 渲染 txt\n\t_e(function (E, $) {\n\t\n\t    E.fn.renderTxt = function () {\n\t\n\t        var editor = this;\n\t        var txt = editor.txt;\n\t\n\t        txt.render();\n\t\n\t        // ready 时候，计算txt的高度\n\t        editor.ready(function () {\n\t            txt.initHeight();\n\t        });\n\t    };\n\t\n\t});\n\t// 渲染 container\n\t_e(function (E, $) {\n\t\n\t    E.fn.renderEditorContainer = function () {\n\t\n\t        var editor = this;\n\t        var $valueContainer = editor.$valueContainer;\n\t        var $editorContainer = editor.$editorContainer;\n\t        var $txt = editor.txt.$txt;\n\t        var $prev, $parent;\n\t\n\t        // 将编辑器渲染到页面中\n\t        if ($valueContainer === $txt) {\n\t            $prev = editor.$prev;\n\t            $parent = editor.$parent;\n\t\n\t            if ($prev && $prev.length) {\n\t                // 有前置节点，就插入到前置节点的后面\n\t                $prev.after($editorContainer);\n\t            } else {\n\t                // 没有前置节点，就直接插入到父元素\n\t                $parent.prepend($editorContainer);\n\t            }\n\t\n\t        } else {\n\t            $valueContainer.after($editorContainer);\n\t            $valueContainer.hide();\n\t        }\n\t\n\t        // 设置宽度（这样设置宽度有问题）\n\t        // $editorContainer.css('width', $valueContainer.css('width'));\n\t    };\n\t\n\t});\n\t// 菜单事件\n\t_e(function (E, $) {\n\t\n\t    // 绑定每个菜单的click事件\n\t    E.fn.eventMenus = function () {\n\t\n\t        var menus = this.menus;\n\t\n\t        // 绑定菜单的点击事件\n\t        $.each(menus, function (k, v) {\n\t            v.bindEvent();\n\t        });\n\t\n\t    };\n\t\n\t});\n\t// 菜单container事件\n\t_e(function (E, $) {\n\t\n\t    E.fn.eventMenuContainer = function () {\n\t\n\t    };\n\t\n\t});\n\t// 编辑区域事件\n\t_e(function (E, $) {\n\t\n\t    E.fn.eventTxt = function () {\n\t\n\t        var txt = this.txt;\n\t\n\t        // txt内容变化时，保存选区\n\t        txt.saveSelectionEvent();\n\t\n\t        // txt内容变化时，随时更新 value\n\t        txt.updateValueEvent();\n\t\n\t        // txt内容变化时，随时更新 menu style\n\t        txt.updateMenuStyleEvent();\n\t\n\t        // // 鼠标hover时，显示 p head 高度（暂时关闭这个功能）\n\t        // if (!/ie/i.test(E.userAgent)) {\n\t        //     // 暂时不支持IE\n\t        //     txt.showHeightOnHover();\n\t        // }\n\t    };\n\t\n\t});\n\t// 上传图片事件\n\t_e(function (E, $) {\n\t\n\t    E.plugin(function () {\n\t        var editor = this;\n\t        var fns = editor.config.uploadImgFns; // editor.config.uploadImgFns = {} 在config文件中定义了\n\t\n\t        // -------- 定义load函数 --------\n\t        fns.onload || (fns.onload = function (resultText, xhr) {\n\t            E.log('上传结束，返回结果为 ' + resultText);\n\t\n\t            var editor = this;\n\t            var originalName = editor.uploadImgOriginalName || '';  // 上传图片时，已经将图片的名字存在 editor.uploadImgOriginalName\n\t            var img;\n\t            if (resultText.indexOf('error|') === 0) {\n\t                // 提示错误\n\t                E.warn('上传失败：' + resultText.split('|')[1]);\n\t                alert(resultText.split('|')[1]);\n\t            } else {\n\t                E.log('上传成功，即将插入编辑区域，结果为：' + resultText);\n\t\n\t                // 将结果插入编辑器\n\t                img = document.createElement('img');\n\t                img.onload = function () {\n\t                    var html = '<img src=\"' + resultText + '\" alt=\"' + originalName + '\" style=\"max-width:100%;\"/>';\n\t                    editor.command(null, 'insertHtml', html);\n\t\n\t                    E.log('已插入图片，地址 ' + resultText);\n\t                    img = null;\n\t                };\n\t                img.onerror = function () {\n\t                    E.error('使用返回的结果获取图片，发生错误。请确认以下结果是否正确：' + resultText);\n\t                    img = null;\n\t                };\n\t                img.src = resultText;\n\t            }\n\t\n\t        });\n\t\n\t        // -------- 定义tiemout函数 --------\n\t        fns.ontimeout || (fns.ontimeout = function (xhr) {\n\t            E.error('上传图片超时');\n\t            alert('上传图片超时');\n\t        });\n\t\n\t        // -------- 定义error函数 --------\n\t        fns.onerror || (fns.onerror = function (xhr) {\n\t            E.error('上传上图片发生错误');\n\t            alert('上传上图片发生错误');\n\t            console.log('xhr',xhr)\n\t        });\n\t\n\t    });\n\t});\n\t// xhr 上传图片\n\t_e(function (E, $) {\n\t\n\t    if (!window.FileReader || !window.FormData) {\n\t        // 如果不支持html5的文档操作，直接返回\n\t        return;\n\t    }\n\t\n\t    E.plugin(function () {\n\t\n\t        var editor = this;\n\t        var config = editor.config;\n\t\n\t        var uploadImgUrl = config.uploadImgUrl;\n\t        var uploadTimeout = config.uploadTimeout;\n\t\n\t        // 获取配置中的上传事件\n\t        var uploadImgFns = config.uploadImgFns;\n\t        var onload = uploadImgFns.onload;\n\t        var ontimeout = uploadImgFns.ontimeout;\n\t        var onerror = uploadImgFns.onerror;\n\t\n\t        if (!uploadImgUrl) {\n\t            return;\n\t        }\n\t\n\t        // -------- 将以base64的图片url数据转换为Blob --------\n\t        function convertBase64UrlToBlob(urlData, filetype){\n\t            //去掉url的头，并转换为byte\n\t            var bytes = window.atob(urlData.split(',')[1]);\n\t            \n\t            //处理异常,将ascii码小于0的转换为大于0\n\t            var ab = new ArrayBuffer(bytes.length);\n\t            var ia = new Uint8Array(ab);\n\t            var i;\n\t            for (i = 0; i < bytes.length; i++) {\n\t                ia[i] = bytes.charCodeAt(i);\n\t            }\n\t\n\t            return new Blob([ab], {type : filetype});\n\t        }\n\t\n\t        // -------- 插入图片的方法 --------\n\t        function insertImg(src, event) {\n\t            var img = document.createElement('img');\n\t            img.onload = function () {\n\t                var html = '<img src=\"' + src + '\" style=\"max-width:100%;\"/>';\n\t                editor.command(event, 'insertHtml', html);\n\t\n\t                E.log('已插入图片，地址 ' + src);\n\t                img = null;\n\t            };\n\t            img.onerror = function () {\n\t                E.error('使用返回的结果获取图片，发生错误。请确认以下结果是否正确：' + src);\n\t                img = null;\n\t            };\n\t            img.src = src;\n\t        }\n\t\n\t        // -------- onprogress 事件 --------\n\t        function updateProgress(e) {\n\t            if (e.lengthComputable) {\n\t                var percentComplete = e.loaded / e.total;\n\t                editor.showUploadProgress(percentComplete * 100);\n\t            }\n\t        }\n\t\n\t        // -------- xhr 上传图片 --------\n\t        editor.xhrUploadImg = function (opt) {\n\t            // opt 数据\n\t            var event = opt.event;\n\t            var fileName = opt.filename || '';\n\t            var base64 = opt.base64;\n\t            var fileType = opt.fileType || 'image/png'; // 无扩展名则默认使用 png\n\t            var name = opt.name || 'wangEditor_upload_file';\n\t            var loadfn = opt.loadfn || onload;\n\t            var errorfn = opt.errorfn || onerror;\n\t            var timeoutfn = opt.timeoutfn || ontimeout;\n\t\n\t            // 上传参数（如 token）\n\t            var params = editor.config.uploadParams || {};\n\t\n\t            // headers\n\t            var headers = editor.config.uploadHeaders || {};\n\t\n\t            // 获取文件扩展名\n\t            var fileExt = 'png';  // 默认为 png\n\t            if (fileName.indexOf('.') > 0) {\n\t                // 原来的文件名有扩展名\n\t                fileExt = fileName.slice(fileName.lastIndexOf('.') - fileName.length + 1);\n\t            } else if (fileType.indexOf('/') > 0 && fileType.split('/')[1]) {\n\t                // 文件名没有扩展名，通过类型获取，如从 'image/png' 取 'png'\n\t                fileExt = fileType.split('/')[1];\n\t            }\n\t\n\t            // ------------ begin 预览模拟上传 ------------\n\t            if (E.isOnWebsite) {\n\t                E.log('预览模拟上传');\n\t                insertImg(base64, event);\n\t                return;\n\t            }\n\t            // ------------ end 预览模拟上传 ------------\n\t\n\t            // 变量声明\n\t            var xhr = new XMLHttpRequest();\n\t            var timeoutId;\n\t            var src;\n\t            var formData = new FormData();\n\t\n\t            // 超时处理\n\t            function timeoutCallback() {\n\t                if (timeoutId) {\n\t                    clearTimeout(timeoutId);\n\t                }\n\t                if (xhr && xhr.abort) {\n\t                    xhr.abort();\n\t                }\n\t\n\t                // 超时了就阻止默认行为\n\t                event.preventDefault();\n\t\n\t                // 执行回调函数，提示什么内容，都应该在回调函数中定义\n\t                timeoutfn && timeoutfn.call(editor, xhr);\n\t\n\t                // 隐藏进度条\n\t                editor.hideUploadProgress();\n\t            }\n\t\n\t            xhr.onload = function () {\n\t                if (timeoutId) {\n\t                    clearTimeout(timeoutId);\n\t                }\n\t\n\t                // 记录文件名到 editor.uploadImgOriginalName ，插入图片时，可做 alt 属性用\n\t                editor.uploadImgOriginalName = fileName;\n\t                if (fileName.indexOf('.') > 0) {\n\t                    editor.uploadImgOriginalName = fileName.split('.')[0];\n\t                }\n\t\n\t                // 执行load函数，任何操作，都应该在load函数中定义\n\t                loadfn && loadfn.call(editor, xhr.responseText, xhr);\n\t\n\t                // 隐藏进度条\n\t                editor.hideUploadProgress();\n\t            };\n\t            xhr.onerror = function () {\n\t                if (timeoutId) {\n\t                    clearTimeout(timeoutId);\n\t                }\n\t\n\t                // 超时了就阻止默认行为\n\t                event.preventDefault();\n\t\n\t                // 执行error函数，错误提示，应该在error函数中定义\n\t                errorfn && errorfn.call(editor, xhr);\n\t\n\t                // 隐藏进度条\n\t                editor.hideUploadProgress();\n\t            };\n\t            // xhr.onprogress = updateProgress;\n\t            xhr.upload.onprogress = updateProgress;\n\t\n\t            if(params.type === 'oss'){\n\t                $.ajaxSettings.async = false;\n\t                $.post(params.request_uri,{fileExt:fileExt},function (upload_oss_param_response) {\n\t                    upload_oss_param_response = JSON.parse(upload_oss_param_response)\n\t                    uploadImgUrl=upload_oss_param_response.uri\n\t                    params=upload_oss_param_response.param\n\t\n\t                })\n\t                $.ajaxSettings.async = true;\n\t            }\n\t            // 添加参数\n\t            $.each(params, function (key, value) {\n\t                formData.append(key, value);\n\t            });\n\t            // 填充数据\n\t            formData.append(name, convertBase64UrlToBlob(base64, fileType), E.random() + '.' + fileExt);\n\t            // 开始上传\n\t            xhr.open('POST', uploadImgUrl, true);\n\t            // xhr.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");  // 将参数解析成传统form的方式上传\n\t\n\t            // 修改自定义配置的headers\n\t            $.each(headers, function (key, value) {\n\t                xhr.setRequestHeader(key, value);\n\t            });\n\t\n\t            // 跨域上传时，传cookie\n\t            // console.log('editor.config',editor.config)\n\t            xhr.withCredentials = editor.config.withCredentials || false;\n\t            // console.log('xhr.withCredentials',xhr.withCredentials)\n\t\n\t            // 发送数据\n\t            xhr.send(formData);\n\t            timeoutId = setTimeout(timeoutCallback, uploadTimeout);\n\t\n\t            E.log('开始上传...并开始超时计算');\n\t        };\n\t    });\n\t});\n\t// 进度条\n\t_e(function (E, $) {\n\t\n\t    E.plugin(function () {\n\t\n\t        var editor = this;\n\t        var menuContainer = editor.menuContainer;\n\t        var menuHeight = menuContainer.height();\n\t        var $editorContainer = editor.$editorContainer;\n\t        var width = $editorContainer.width();\n\t        var $progress = $('<div class=\"wangEditor-upload-progress\"></div>');\n\t\n\t        // 渲染事件\n\t        var isRender = false;\n\t        function render() {\n\t            if (isRender) {\n\t                return;\n\t            }\n\t            isRender = true;\n\t\n\t            $progress.css({\n\t                top: menuHeight + 'px'\n\t            });\n\t            $editorContainer.append($progress);\n\t        }\n\t\n\t        // ------ 显示进度 ------\n\t        editor.showUploadProgress = function (progress) {\n\t            if (timeoutId) {\n\t                clearTimeout(timeoutId);\n\t            }\n\t\n\t            // 显示之前，先判断是否渲染\n\t            render();\n\t\n\t            $progress.show();\n\t            $progress.width(progress * width / 100);\n\t        };\n\t\n\t        // ------ 隐藏进度条 ------\n\t        var timeoutId;\n\t        function hideProgress() {\n\t            $progress.hide();\n\t            timeoutId = null;\n\t        }\n\t        editor.hideUploadProgress = function (time) {\n\t            if (timeoutId) {\n\t                clearTimeout(timeoutId);\n\t            }\n\t            time = time || 750;\n\t            timeoutId = setTimeout(hideProgress, time);\n\t        };\n\t    });\n\t});\n\t// upload img 插件\n\t_e(function (E, $) {\n\t\n\t    E.plugin(function () {\n\t        var editor = this;\n\t        var config = editor.config;\n\t        var uploadImgUrl = config.uploadImgUrl;\n\t        var uploadTimeout = config.uploadTimeout;\n\t        var event;\n\t\n\t        if (!uploadImgUrl) {\n\t            return;\n\t        }\n\t\n\t        // 获取editor的上传dom\n\t        var $uploadContent = editor.$uploadContent;\n\t        if (!$uploadContent) {\n\t            return;\n\t        }\n\t\n\t        // 自定义UI，并添加到上传dom节点上\n\t        var $uploadIcon = $('<div class=\"upload-icon-container\"><i class=\"wangeditor-menu-img-upload\"></i></div>');\n\t        $uploadContent.append($uploadIcon);\n\t\n\t        // ---------- 构建上传对象 ----------\n\t        var upfile = new E.UploadFile({\n\t            editor: editor,\n\t            uploadUrl: uploadImgUrl,\n\t            timeout: uploadTimeout,\n\t            fileAccept: 'image/jpg,image/jpeg,image/png,image/gif,image/bmp'    // 只允许选择图片 \n\t        });\n\t\n\t        // 选择本地文件，上传\n\t        $uploadIcon.click(function (e) {\n\t            event = e;\n\t            upfile.selectFiles();\n\t        });\n\t    });\n\t});\n\t// h5 方式上传图片\n\t_e(function (E, $) {\n\t    if (!window.FileReader || !window.FormData) {\n\t        // 如果不支持html5的文档操作，直接返回\n\t        return;\n\t    }\n\t\n\t    // 构造函数\n\t    var UploadFile = function (opt) {\n\t        this.editor = opt.editor;\n\t        this.uploadUrl = opt.uploadUrl;\n\t        this.timeout = opt.timeout;\n\t        this.fileAccept = opt.fileAccept;\n\t        this.multiple = true;\n\t    };\n\t\n\t    UploadFile.fn = UploadFile.prototype;\n\t\n\t    // clear\n\t    UploadFile.fn.clear = function () {\n\t        this.$input.val('');\n\t        E.log('input value 已清空');\n\t    };\n\t\n\t    // 渲染\n\t    UploadFile.fn.render = function () {\n\t        var self = this;\n\t        if (self._hasRender) {\n\t            // 不要重复渲染\n\t            return;\n\t        }\n\t\n\t        E.log('渲染dom');\n\t\n\t        var fileAccept = self.fileAccept;\n\t        var acceptTpl = fileAccept ? 'accept=\"' + fileAccept + '\"' : '';\n\t        var multiple = self.multiple;\n\t        var multipleTpl = multiple ? 'multiple=\"multiple\"' : '';\n\t        var $input = $('<input type=\"file\" ' + acceptTpl + ' ' + multipleTpl + '/>');\n\t        var $container = $('<div style=\"display:none;\"></div>');\n\t\n\t        $container.append($input);\n\t        E.$body.append($container);\n\t\n\t        // onchange 事件\n\t        $input.on('change', function (e) {\n\t            self.selected(e, $input.get(0));\n\t        });\n\t\n\t        // 记录对象数据\n\t        self.$input = $input;\n\t\n\t        // 记录\n\t        self._hasRender = true;\n\t    };\n\t\n\t    // 选择\n\t    UploadFile.fn.selectFiles = function () {\n\t        var self = this;\n\t\n\t        E.log('使用 html5 方式上传');\n\t\n\t        // 先渲染\n\t        self.render();\n\t\n\t        // 选择\n\t        E.log('选择文件');\n\t        self.$input.click();\n\t    };\n\t\n\t    // 选中文件之后\n\t    UploadFile.fn.selected = function (e, input) {\n\t        var self = this;\n\t        var files = input.files || [];\n\t        if (files.length === 0) {\n\t            return;\n\t        }\n\t\n\t        E.log('选中 ' + files.length + ' 个文件');\n\t\n\t        // 遍历选中的文件，预览、上传\n\t        $.each(files, function (key, value) {\n\t            self.upload(value);\n\t        });\n\t    };\n\t\n\t    // 上传单个文件\n\t    UploadFile.fn.upload = function (file) {\n\t        var self = this;\n\t        var editor = self.editor;\n\t        var filename = file.name || '';\n\t        var fileType = file.type || '';\n\t        var uploadImgFns = editor.config.uploadImgFns;\n\t        var uploadFileName = editor.config.uploadImgFileName || 'wangEditorH5File';\n\t        var onload = uploadImgFns.onload;\n\t        var ontimeout = uploadImgFns.ontimeout;\n\t        var onerror = uploadImgFns.onerror;\n\t        var reader = new FileReader();\n\t\n\t        if (!onload || !ontimeout || !onerror) {\n\t            E.error('请为编辑器配置上传图片的 onload ontimeout onerror 回调事件');\n\t            return;\n\t        }\n\t\n\t\n\t        E.log('开始执行 ' + filename + ' 文件的上传');\n\t\n\t        // 清空 input 数据\n\t        function clearInput() {\n\t            self.clear();\n\t        }\n\t\n\t        // onload事件\n\t        reader.onload = function (e) {\n\t            E.log('已读取' + filename + '文件');\n\t\n\t            var base64 = e.target.result || this.result;\n\t            editor.xhrUploadImg({\n\t                event: e,\n\t                filename: filename,\n\t                base64: base64,\n\t                fileType: fileType,\n\t                name: uploadFileName,\n\t                loadfn: function (resultText, xhr) {\n\t                    clearInput();\n\t                    // 执行配置中的方法\n\t                    var editor = this;\n\t                    onload.call(editor, resultText, xhr);\n\t                },\n\t                errorfn: function (xhr) {\n\t                    clearInput();\n\t                    if (E.isOnWebsite) {\n\t                        alert('wangEditor官网暂时没有服务端，因此报错。实际项目中不会发生');\n\t                    }\n\t                    // 执行配置中的方法\n\t                    var editor = this;\n\t                    onerror.call(editor, xhr);\n\t                },\n\t                timeoutfn: function (xhr) {\n\t                    clearInput();\n\t                    if (E.isOnWebsite) {\n\t                        alert('wangEditor官网暂时没有服务端，因此超时。实际项目中不会发生');\n\t                    }\n\t                    // 执行配置中的方法\n\t                    var editor = this;\n\t                    ontimeout(editor, xhr);\n\t                }\n\t            });\n\t        };\n\t\n\t        // 开始取文件\n\t        reader.readAsDataURL(file);\n\t    };\n\t\n\t    // 暴露给 E\n\t    E.UploadFile = UploadFile;\n\t\n\t});\n\t// form方式上传图片\n\t_e(function (E, $) {\n\t\n\t    if (window.FileReader && window.FormData) {\n\t        // 如果支持 html5 上传，则返回\n\t        return;\n\t    }\n\t    \n\t    // 构造函数\n\t    var UploadFile = function (opt) {\n\t        this.editor = opt.editor;\n\t        this.uploadUrl = opt.uploadUrl;\n\t        this.timeout = opt.timeout;\n\t        this.fileAccept = opt.fileAccept;\n\t        this.multiple = false;\n\t    };\n\t\n\t    UploadFile.fn = UploadFile.prototype;\n\t\n\t    // clear\n\t    UploadFile.fn.clear = function () {\n\t        this.$input.val('');\n\t        E.log('input value 已清空');\n\t    };\n\t\n\t    // 隐藏modal\n\t    UploadFile.fn.hideModal = function () {\n\t        this.modal.hide();\n\t    };\n\t\n\t    // 渲染\n\t    UploadFile.fn.render = function () {\n\t        var self = this;\n\t        var editor = self.editor;\n\t        var uploadFileName = editor.config.uploadImgFileName || 'wangEditorFormFile';\n\t        if (self._hasRender) {\n\t            // 不要重复渲染\n\t            return;\n\t        }\n\t\n\t        // 服务器端路径\n\t        var uploadUrl = self.uploadUrl;\n\t\n\t        E.log('渲染dom');\n\t\n\t        // 创建 form 和 iframe\n\t        var iframeId = 'iframe' + E.random();\n\t        var $iframe = $('<iframe name=\"' + iframeId + '\" id=\"' + iframeId + '\" frameborder=\"0\" width=\"0\" height=\"0\"></iframe>');\n\t        var multiple = self.multiple;\n\t        var multipleTpl = multiple ? 'multiple=\"multiple\"' : '';\n\t        var $p = $('<p>选择图片并上传</p>');\n\t        var $input = $('<input type=\"file\" ' + multipleTpl + ' name=\"' + uploadFileName + '\"/>');\n\t        var $btn = $('<input type=\"submit\" value=\"上传\"/>');\n\t        var $form = $('<form enctype=\"multipart/form-data\" method=\"post\" action=\"' + uploadUrl + '\" target=\"' + iframeId + '\"></form>');\n\t        var $container = $('<div style=\"margin:10px 20px;\"></div>');\n\t\n\t        $form.append($p).append($input).append($btn);\n\t\n\t        // 增加用户配置的参数，如 token\n\t        $.each(editor.config.uploadParams, function (key, value) {\n\t            $form.append( $('<input type=\"hidden\" name=\"' + key + '\" value=\"' + value + '\"/>') );\n\t        });\n\t        alert(1)\n\t        $container.append($form);\n\t        $container.append($iframe);\n\t\n\t        self.$input = $input;\n\t        self.$iframe = $iframe;\n\t\n\t        // 生成 modal\n\t        var modal = new E.Modal(editor, undefined, {\n\t            $content: $container\n\t        });\n\t        self.modal = modal;\n\t\n\t        // 记录\n\t        self._hasRender = true;\n\t    };\n\t\n\t    // 绑定 iframe load 事件\n\t    UploadFile.fn.bindLoadEvent = function () {\n\t        var self = this;\n\t        if (self._hasBindLoad) {\n\t            // 不要重复绑定\n\t            return;\n\t        }\n\t\n\t        var editor = self.editor;\n\t        var $iframe = self.$iframe;\n\t        var iframe = $iframe.get(0);\n\t        var iframeWindow = iframe.contentWindow;\n\t        var onload = editor.config.uploadImgFns.onload;\n\t\n\t        // 定义load事件\n\t        function onloadFn() {\n\t            var resultText = $.trim(iframeWindow.document.body.innerHTML);\n\t            if (!resultText) {\n\t                return;\n\t            }\n\t\n\t            // 获取文件名\n\t            var fileFullName = self.$input.val();  // 结果如 C:\\folder\\abc.png 格式\n\t            var fileOriginalName = fileFullName;\n\t            if (fileFullName.lastIndexOf('\\\\') >= 0) {\n\t                // 获取 abc.png 格式\n\t                fileOriginalName = fileFullName.slice(fileFullName.lastIndexOf('\\\\') + 1);\n\t                if (fileOriginalName.indexOf('.') > 0) {\n\t                    // 获取 abc （即不带扩展名的文件名）\n\t                    fileOriginalName = fileOriginalName.split('.')[0];\n\t                }\n\t            }\n\t\n\t            // 将文件名暂存到 editor.uploadImgOriginalName ，插入图片时，可作为 alt 属性来用\n\t            editor.uploadImgOriginalName = fileOriginalName;\n\t\n\t            // 执行load函数，插入图片的操作，应该在load函数中执行\n\t            onload.call(editor, resultText);\n\t\n\t            // 清空 input 数据\n\t            self.clear();\n\t\n\t            // 隐藏modal\n\t            self.hideModal();\n\t        }\n\t\n\t        // 绑定 load 事件\n\t        if (iframe.attachEvent) {\n\t            iframe.attachEvent('onload', onloadFn);\n\t        } else {\n\t            iframe.onload = onloadFn;\n\t        }\n\t\n\t        // 记录\n\t        self._hasBindLoad = true;\n\t    };\n\t\n\t    UploadFile.fn.show = function () {\n\t        var self = this;\n\t        var modal = self.modal;\n\t\n\t        function show() {\n\t            modal.show();\n\t            self.bindLoadEvent();\n\t        }\n\t        setTimeout(show);\n\t    };\n\t\n\t    // 选择\n\t    UploadFile.fn.selectFiles = function () {\n\t        var self = this;\n\t\n\t        E.log('使用 form 方式上传');\n\t\n\t        // 先渲染\n\t        self.render();\n\t\n\t        // 先清空\n\t        self.clear();\n\t\n\t        // 显示\n\t        self.show();\n\t    };\n\t\n\t    // 暴露给 E\n\t    E.UploadFile = UploadFile;\n\t\n\t});\n\t// upload img 插件 粘贴图片\n\t_e(function (E, $) {\n\t    \n\t    E.plugin(function () {\n\t        var editor = this;\n\t        var txt = editor.txt;\n\t        var $txt = txt.$txt;\n\t        var config = editor.config;\n\t        var uploadImgUrl = config.uploadImgUrl;\n\t        var uploadFileName = config.uploadImgFileName || 'wangEditorPasteFile';\n\t        var pasteEvent;\n\t        var $imgsBeforePaste;\n\t\n\t        // 未配置上传图片url，则忽略\n\t        if (!uploadImgUrl) {\n\t            return;\n\t        }\n\t\n\t        // -------- 非 chrome 下，通过查找粘贴的图片的方式上传 --------\n\t        function findPasteImgAndUpload() {\n\t            var reg = /^data:(image\\/\\w+);base64/;\n\t            var $imgs = $txt.find('img');\n\t\n\t            E.log('粘贴后，检查到编辑器有' + $imgs.length + '个图片。开始遍历图片，试图找到刚刚粘贴过来的图片');\n\t\n\t            $.each($imgs, function () {\n\t                var img = this;\n\t                var $img = $(img);\n\t                var flag;\n\t                var base64 = $img.attr('src');\n\t                var type;\n\t\n\t                // 判断当前图片是否是粘贴之前的\n\t                $imgsBeforePaste.each(function () {\n\t                    if (img === this) {\n\t                        // 当前图片是粘贴之前的\n\t                        flag = true;\n\t                        return false;\n\t                    }\n\t                });\n\t\n\t                // 当前图片是粘贴之前的，则忽略\n\t                if (flag) {\n\t                    return;\n\t                }\n\t\n\t                E.log('找到一个粘贴过来的图片');\n\t\n\t                if (reg.test(base64)) {\n\t                    // 得到的粘贴的图片是 base64 格式，符合要求\n\t                    E.log('src 是 base64 格式，可以上传');\n\t                    type = base64.match(reg)[1];\n\t                    editor.xhrUploadImg({\n\t                        event: pasteEvent,\n\t                        base64: base64,\n\t                        fileType: type,\n\t                        name: uploadFileName\n\t                    });\n\t                } else {\n\t                    E.log('src 为 ' + base64 + ' ，不是 base64 格式，暂时不支持上传');\n\t                }\n\t\n\t                // 最终移除原图片\n\t                $img.remove();\n\t            });\n\t\n\t            E.log('遍历结束');\n\t        }\n\t\n\t        // 开始监控粘贴事件\n\t        $txt.on('paste', function (e) {\n\t            pasteEvent = e;\n\t            var data = pasteEvent.clipboardData || pasteEvent.originalEvent.clipboardData;\n\t            var text;\n\t            var items;\n\t\n\t            // -------- 试图获取剪切板中的文字，有文字的情况下，就不处理图片粘贴 --------\n\t            if (data == null) {\n\t                text = window.clipboardData && window.clipboardData.getData('text');\n\t            } else {\n\t                text = data.getData('text/plain') || data.getData('text/html');\n\t            }\n\t            if (text) {\n\t                return;\n\t            }\n\t\n\t            items = data && data.items;\n\t            if (items) {\n\t                // -------- chrome 可以用 data.items 取出图片 -----\n\t                E.log('通过 data.items 得到了数据');\n\t\n\t                $.each(items, function (key, value) {\n\t                    var fileType = value.type || '';\n\t                    if(fileType.indexOf('image') < 0) {\n\t                        // 不是图片\n\t                        return;\n\t                    }\n\t\n\t                    var file = value.getAsFile();\n\t                    var reader = new FileReader();\n\t\n\t                    E.log('得到一个粘贴图片');\n\t\n\t                    reader.onload = function (e) {\n\t                        E.log('读取到粘贴的图片');\n\t\n\t                        // 执行上传\n\t                        var base64 = e.target.result || this.result;\n\t                        editor.xhrUploadImg({\n\t                            event: pasteEvent,\n\t                            base64: base64,\n\t                            fileType: fileType,\n\t                            name: uploadFileName\n\t                        });\n\t                    };\n\t\n\t                    //读取粘贴的文件\n\t                    reader.readAsDataURL(file);\n\t                });\n\t            } else {\n\t                // -------- 非 chrome 不能用 data.items 取图片 -----\n\t\n\t                E.log('未从 data.items 得到数据，使用检测粘贴图片的方式');\n\t\n\t                // 获取\n\t                $imgsBeforePaste = $txt.find('img');\n\t                E.log('粘贴前，检查到编辑器有' + $imgsBeforePaste.length + '个图片');\n\t\n\t                // 异步上传找到的图片\n\t                setTimeout(findPasteImgAndUpload, 0);\n\t            }\n\t        });\n\t\n\t    });\n\t});\n\t// 拖拽上传图片 插件 \n\t_e(function (E, $) {\n\t\n\t    E.plugin(function () {\n\t\n\t        var editor = this;\n\t        var txt = editor.txt;\n\t        var $txt = txt.$txt;\n\t        var config = editor.config;\n\t        var uploadImgUrl = config.uploadImgUrl;\n\t        var uploadFileName = config.uploadImgFileName || 'wangEditorDragFile';\n\t\n\t        // 未配置上传图片url，则忽略\n\t        if (!uploadImgUrl) {\n\t            return;\n\t        }\n\t\n\t        // 阻止浏览器默认行为\n\t        E.$document.on('dragleave drop dragenter dragover', function (e) {\n\t            e.preventDefault();\n\t        });\n\t\n\t        // 监控 $txt drop 事件\n\t        $txt.on('drop', function (dragEvent) {\n\t            dragEvent.preventDefault();\n\t\n\t            var originalEvent = dragEvent.originalEvent;\n\t            var files = originalEvent.dataTransfer && originalEvent.dataTransfer.files;\n\t\n\t            if (!files || !files.length) {\n\t                return;\n\t            }\n\t\n\t            $.each(files, function (k, file) {\n\t                var type = file.type;\n\t                var name = file.name;\n\t\n\t                if (type.indexOf('image/') < 0) {\n\t                    // 只接收图片\n\t                    return;\n\t                }\n\t\n\t                E.log('得到图片 ' + name);\n\t\n\t                var reader = new FileReader();\n\t                reader.onload = function (e) {\n\t                    E.log('读取到图片 ' + name);\n\t\n\t                    // 执行上传\n\t                    var base64 = e.target.result || this.result;\n\t                    editor.xhrUploadImg({\n\t                        event: dragEvent,\n\t                        base64: base64,\n\t                        fileType: type,\n\t                        name: uploadFileName\n\t                    });\n\t                };\n\t\n\t                //读取粘贴的文件\n\t                reader.readAsDataURL(file);\n\t\n\t            });\n\t        });\n\t    });\n\t\n\t});\n\t// 编辑器区域 table toolbar\n\t_e(function (E, $) {\n\t\n\t    E.plugin(function () {\n\t        var editor = this;\n\t        var txt = editor.txt;\n\t        var $txt = txt.$txt;\n\t        var html = '';\n\t        // 说明：设置了 max-height 之后，$txt.parent() 负责滚动处理\n\t        var $currentTxt = editor.useMaxHeight ? $txt.parent() : $txt;\n\t        var $currentTable;\n\t\n\t        // 用到的dom节点\n\t        var isRendered = false;\n\t        var $toolbar = $('<div class=\"txt-toolbar\"></div>');\n\t        var $triangle = $('<div class=\"tip-triangle\"></div>');\n\t        var $delete = $('<a href=\"#\"><i class=\"wangeditor-menu-img-trash-o\"></i></a>');\n\t        var $zoomSmall = $('<a href=\"#\"><i class=\"wangeditor-menu-img-search-minus\"></i></a>');\n\t        var $zoomBig = $('<a href=\"#\"><i class=\"wangeditor-menu-img-search-plus\"></i></a>');\n\t\n\t        // 渲染到页面\n\t        function render() {\n\t            if (isRendered) {\n\t                return;\n\t            }\n\t            \n\t            // 绑定事件\n\t            bindEvent();\n\t\n\t            // 拼接 渲染到页面上\n\t            $toolbar.append($triangle)\n\t                    .append($delete)\n\t                    .append($zoomSmall)\n\t                    .append($zoomBig);\n\t            editor.$editorContainer.append($toolbar);\n\t            isRendered = true;\n\t        }\n\t\n\t        // 绑定事件\n\t        function bindEvent() {\n\t            // 统一执行命令的方法\n\t            var commandFn;\n\t            function command(e, callback) {\n\t                // 执行命令之前，先存储html内容\n\t                html = $txt.html();\n\t                // 监控内容变化\n\t                var cb = function  () {\n\t                    if (callback) {\n\t                        callback();\n\t                    }\n\t                    if (html !== $txt.html()) {\n\t                        $txt.change();\n\t                    }\n\t                };\n\t                // 执行命令\n\t                if (commandFn) {\n\t                    editor.customCommand(e, commandFn, cb);\n\t                }\n\t            }\n\t\n\t            // 删除\n\t            $delete.click(function (e) {\n\t                commandFn = function () {\n\t                    $currentTable.remove();\n\t                };\n\t                command(e, function () {\n\t                    setTimeout(hide, 100);\n\t                });\n\t            });\n\t\n\t            // 放大\n\t            $zoomBig.click(function (e) {\n\t                commandFn = function () {\n\t                    $currentTable.css({\n\t                        width: '100%'\n\t                    });\n\t                };\n\t                command(e, function () {\n\t                    setTimeout(show);\n\t                });\n\t            });\n\t\n\t            // 缩小\n\t            $zoomSmall.click(function (e) {\n\t                commandFn = function () {\n\t                    $currentTable.css({\n\t                        width: 'auto'\n\t                    });\n\t                };\n\t                command(e, function () {\n\t                    setTimeout(show);\n\t                });\n\t            });\n\t        }\n\t\n\t        // 显示 toolbar\n\t        function show() {\n\t            if (editor._disabled) {\n\t                // 编辑器已经被禁用，则不让显示\n\t                return;\n\t            }\n\t            if ($currentTable == null) {\n\t                return;\n\t            }\n\t            $currentTable.addClass('clicked');\n\t            var tablePosition = $currentTable.position();\n\t            var tableTop = tablePosition.top;\n\t            var tableLeft = tablePosition.left;\n\t            var tableHeight = $currentTable.outerHeight();\n\t            var tableWidth = $currentTable.outerWidth();\n\t\n\t            // --- 定位 toolbar ---\n\t\n\t            // 计算初步结果\n\t            var top = tableTop + tableHeight;\n\t            var left = tableLeft;\n\t            var marginLeft = 0;\n\t\n\t            var txtTop = $currentTxt.position().top;\n\t            var txtHeight = $currentTxt.outerHeight();\n\t            if (top > (txtTop + txtHeight)) {\n\t                // top 不得超出编辑范围\n\t                top = txtTop + txtHeight;\n\t            }\n\t\n\t            // 显示（方便计算 margin）\n\t            $toolbar.show();\n\t\n\t            // 计算 margin\n\t            var width = $toolbar.outerWidth();\n\t            marginLeft = tableWidth / 2 - width / 2;\n\t\n\t            // 定位\n\t            $toolbar.css({\n\t                top: top + 5,\n\t                left: left,\n\t                'margin-left': marginLeft\n\t            });\n\t            // 如果定位太靠左了\n\t            if (marginLeft < 0) {\n\t                // 得到三角形的margin-left\n\t                $toolbar.css('margin-left', '0');\n\t                $triangle.hide();\n\t            } else {\n\t                $triangle.show();\n\t            }\n\t        }\n\t        \n\t        // 隐藏 toolbar\n\t        function hide() {\n\t            if ($currentTable == null) {\n\t                return;\n\t            }\n\t            $currentTable.removeClass('clicked');\n\t            $currentTable = null;\n\t            $toolbar.hide();\n\t        }\n\t\n\t        // click table 事件\n\t        $currentTxt.on('click', 'table', function (e) {\n\t            var $table = $(e.currentTarget);\n\t\n\t            // 渲染\n\t            render();\n\t\n\t            if ($currentTable && ($currentTable.get(0) === $table.get(0))) {\n\t                setTimeout(hide, 100);\n\t                return;\n\t            }\n\t\n\t            // 显示 toolbar\n\t            $currentTable = $table;\n\t            show();\n\t\n\t            // 阻止冒泡\n\t            e.preventDefault();\n\t            e.stopPropagation();\n\t            \n\t        }).on('click keydown scroll', function (e) {\n\t            setTimeout(hide, 100);\n\t        });\n\t        E.$body.on('click keydown scroll', function (e) {\n\t            setTimeout(hide, 100);\n\t        });\n\t    });\n\t\n\t});\n\t// 编辑器区域 img toolbar\n\t_e(function (E, $) {\n\t\n\t    if (E.userAgent.indexOf('MSIE 8') > 0) {\n\t        return;\n\t    }\n\t    \n\t    E.plugin(function () {\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t        var txt = editor.txt;\n\t        var $txt = txt.$txt;\n\t        var html = '';\n\t        // 说明：设置了 max-height 之后，$txt.parent() 负责滚动处理\n\t        var $currentTxt = editor.useMaxHeight ? $txt.parent() : $txt;\n\t        var $editorContainer = editor.$editorContainer;\n\t        var $currentImg;\n\t        var currentLink = '';\n\t\n\t        // 用到的dom节点\n\t        var isRendered = false;\n\t        var $dragPoint = $('<div class=\"img-drag-point\"></div>');\n\t\n\t        var $toolbar = $('<div class=\"txt-toolbar\"></div>');\n\t        var $triangle = $('<div class=\"tip-triangle\"></div>');\n\t\n\t        var $menuContainer = $('<div></div>');\n\t        var $delete = $('<a href=\"#\"><i class=\"wangeditor-menu-img-trash-o\"></i></a>');\n\t        var $zoomSmall = $('<a href=\"#\"><i class=\"wangeditor-menu-img-search-minus\"></i></a>');\n\t        var $zoomBig = $('<a href=\"#\"><i class=\"wangeditor-menu-img-search-plus\"></i></a>');\n\t        // var $floatLeft = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-left\"></i></a>');\n\t        // var $noFloat = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-justify\"></i></a>');\n\t        // var $floatRight = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-right\"></i></a>');\n\t        var $alignLeft = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-left\"></i></a>');\n\t        var $alignCenter = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-center\"></i></a>');\n\t        var $alignRight = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-right\"></i></a>');\n\t        var $link = $('<a href=\"#\"><i class=\"wangeditor-menu-img-link\"></i></a>');\n\t        var $unLink = $('<a href=\"#\"><i class=\"wangeditor-menu-img-unlink\"></i></a>');\n\t\n\t        var $linkInputContainer = $('<div style=\"display:none;\"></div>');\n\t        var $linkInput = $('<input type=\"text\" style=\"height:26px; margin-left:10px; width:200px;\"/>');\n\t        var $linkBtnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n\t        var $linkBtnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n\t\n\t        // 记录是否正在拖拽\n\t        var isOnDrag = false;\n\t\n\t        // 获取 / 设置 链接\n\t        function imgLink(e, url) {\n\t            if (!$currentImg) {\n\t                return;\n\t            }\n\t            var commandFn;\n\t            var callback = function () {\n\t                // 及时保存currentLink\n\t                if (url != null) {\n\t                    currentLink = url;\n\t                }\n\t                if (html !== $txt.html()) {\n\t                    $txt.change();\n\t                }\n\t            };\n\t            var $link;\n\t            var inLink = false;\n\t            var $parent = $currentImg.parent();\n\t            if ($parent.get(0).nodeName.toLowerCase() === 'a') {\n\t                // 父元素就是图片链接\n\t                $link = $parent;\n\t                inLink = true;\n\t            } else {\n\t                // 父元素不是图片链接，则重新创建一个链接\n\t                $link = $('<a target=\"_blank\"></a>');\n\t            }\n\t\n\t            if (url == null) {\n\t                // url 无值，是获取链接\n\t                return $link.attr('href') || '';\n\t            } else if (url === '') {\n\t                // url 是空字符串，是取消链接\n\t                if (inLink) {\n\t                    commandFn = function () {\n\t                        $currentImg.unwrap();\n\t                    };\n\t                }\n\t            } else {\n\t                // url 有值，是设置链接\n\t                if (url === currentLink) {\n\t                    return;\n\t                }\n\t                commandFn = function () {\n\t                    $link.attr('href', url);\n\t\n\t                    if (!inLink) {\n\t                        // 当前图片未包含在链接中，则包含进来\n\t                        $currentImg.wrap($link);\n\t                    }\n\t                };\n\t            }\n\t\n\t            // 执行命令\n\t            if (commandFn) {\n\t                // 记录下执行命令之前的html内容\n\t                html = $txt.html();\n\t                // 执行命令\n\t                editor.customCommand(e, commandFn, callback);\n\t            }\n\t        }\n\t\n\t        // 渲染到页面\n\t        function render() {\n\t            if (isRendered) {\n\t                return;\n\t            }\n\t            \n\t            // 绑定事件\n\t            bindToolbarEvent();\n\t            bindDragEvent();\n\t\n\t            // 菜单放入 container\n\t            $menuContainer.append($delete)\n\t                            .append($zoomSmall)\n\t                            .append($zoomBig)\n\t                            // .append($floatLeft)\n\t                            // .append($noFloat)\n\t                            // .append($floatRight);\n\t                            .append($alignLeft)\n\t                            .append($alignCenter)\n\t                            .append($alignRight)\n\t                            .append($link)\n\t                            .append($unLink);\n\t\n\t            // 链接input放入container\n\t            $linkInputContainer.append($linkInput)\n\t                               .append($linkBtnCancel)\n\t                               .append($linkBtnSubmit);\n\t\n\t            // 拼接 渲染到页面上\n\t            $toolbar.append($triangle)\n\t                    .append($menuContainer)\n\t                    .append($linkInputContainer);\n\t                    \n\t            editor.$editorContainer.append($toolbar).append($dragPoint);\n\t            isRendered = true;\n\t        }\n\t\n\t        // 绑定toolbar事件\n\t        function bindToolbarEvent() {\n\t            // 统一执行命令的方法\n\t            var commandFn;\n\t            function customCommand(e, callback) {\n\t                var cb;\n\t                // 记录下执行命令之前的html内容\n\t                html = $txt.html();\n\t                cb = function () {\n\t                    if (callback) {\n\t                        callback();\n\t                    }\n\t                    if (html !== $txt.html()) {\n\t                        $txt.change();\n\t                    }\n\t                };\n\t                // 执行命令\n\t                if (commandFn) {\n\t                    editor.customCommand(e, commandFn, cb);\n\t                }\n\t            }\n\t\n\t            // 删除\n\t            $delete.click(function (e) {\n\t                // 删除之前先unlink\n\t                imgLink(e, '');\n\t\n\t                // 删除图片\n\t                commandFn = function () {\n\t                    $currentImg.remove();\n\t                };\n\t                customCommand(e, function () {\n\t                    setTimeout(hide, 100);\n\t                });\n\t            });\n\t\n\t            // 放大\n\t            $zoomBig.click(function (e) {\n\t                commandFn = function () {\n\t                    var img = $currentImg.get(0);\n\t                    var width = img.width;\n\t                    var height = img.height;\n\t                    width = width * 1.1;\n\t                    height = height * 1.1;\n\t\n\t                    $currentImg.css({\n\t                        width: width + 'px',\n\t                        height: height + 'px'\n\t                    });\n\t                };\n\t                customCommand(e, function () {\n\t                    setTimeout(show);\n\t                });\n\t            });\n\t\n\t            // 缩小\n\t            $zoomSmall.click(function (e) {\n\t                commandFn = function () {\n\t                    var img = $currentImg.get(0);\n\t                    var width = img.width;\n\t                    var height = img.height;\n\t                    width = width * 0.9;\n\t                    height = height * 0.9;\n\t\n\t                    $currentImg.css({\n\t                        width: width + 'px',\n\t                        height: height + 'px'\n\t                    });\n\t                };\n\t                customCommand(e, function () {\n\t                    setTimeout(show);\n\t                });\n\t            });\n\t\n\t            // // 左浮动\n\t            // $floatLeft.click(function (e) {\n\t            //     commandFn = function () {\n\t            //         $currentImg.css({\n\t            //             float: 'left'\n\t            //         });\n\t            //     };\n\t            //     customCommand(e, function () {\n\t            //         setTimeout(hide, 100);\n\t            //     });\n\t            // });\n\t\n\t            // alignLeft\n\t            $alignLeft.click(function (e) {\n\t                commandFn = function () {\n\t                    // 如果 img 增加了链接，那么 img.parent() 就是 a 标签，设置 align 没用的，因此必须找到 P 父节点来设置 align\n\t                    $currentImg.parents('p').css({\n\t                        'text-align': 'left'\n\t                    }).attr('align', 'left');\n\t                };\n\t                customCommand(e, function () {\n\t                    setTimeout(hide, 100);\n\t                });\n\t            });\n\t\n\t            // // 右浮动\n\t            // $floatRight.click(function (e) {\n\t            //     commandFn = function () {\n\t            //         $currentImg.css({\n\t            //             float: 'right'\n\t            //         });\n\t            //     };\n\t            //     customCommand(e, function () {\n\t            //         setTimeout(hide, 100);\n\t            //     });\n\t            // });\n\t\n\t            // alignRight\n\t            $alignRight.click(function (e) {\n\t                commandFn = function () {\n\t                    // 如果 img 增加了链接，那么 img.parent() 就是 a 标签，设置 align 没用的，因此必须找到 P 父节点来设置 align\n\t                    $currentImg.parents('p').css({\n\t                        'text-align': 'right'\n\t                    }).attr('align', 'right');\n\t                };\n\t                customCommand(e, function () {\n\t                    setTimeout(hide, 100);\n\t                });\n\t            });\n\t\n\t            // // 无浮动\n\t            // $noFloat.click(function (e) {\n\t            //     commandFn = function () {\n\t            //         $currentImg.css({\n\t            //             float: 'none'\n\t            //         });\n\t            //     };\n\t            //     customCommand(e, function () {\n\t            //         setTimeout(hide, 100);\n\t            //     });\n\t            // });\n\t\n\t            // alignCenter\n\t            $alignCenter.click(function (e) {\n\t                commandFn = function () {\n\t                    // 如果 img 增加了链接，那么 img.parent() 就是 a 标签，设置 align 没用的，因此必须找到 P 父节点来设置 align\n\t                    $currentImg.parents('p').css({\n\t                        'text-align': 'center'\n\t                    }).attr('align', 'center');\n\t                };\n\t                customCommand(e, function () {\n\t                    setTimeout(hide, 100);\n\t                });\n\t            });\n\t\n\t            // link\n\t            // 显示链接input\n\t            $link.click(function (e) {\n\t                e.preventDefault();\n\t\n\t                // 获取当前链接，并显示\n\t                currentLink = imgLink(e);\n\t                $linkInput.val(currentLink);\n\t\n\t                $menuContainer.hide();\n\t                $linkInputContainer.show();\n\t            });\n\t            // 设置链接\n\t            $linkBtnSubmit.click(function (e) {\n\t                e.preventDefault();\n\t\n\t                var url = $.trim($linkInput.val());\n\t                if (url) {\n\t                    // 设置链接，同时会自动更新 currentLink 的值\n\t                    imgLink(e, url);\n\t                }\n\t\n\t                // 隐藏 toolbar\n\t                setTimeout(hide);\n\t            });\n\t            // 取消设置链接\n\t            $linkBtnCancel.click(function (e) {\n\t                e.preventDefault();\n\t\n\t                // 重置链接 input\n\t                $linkInput.val(currentLink);\n\t\n\t                $menuContainer.show();\n\t                $linkInputContainer.hide();\n\t            });\n\t\n\t            // unlink\n\t            $unLink.click(function (e) {\n\t                e.preventDefault();\n\t\n\t                // 执行 unlink\n\t                imgLink(e, '');\n\t\n\t                // 隐藏 toolbar\n\t                setTimeout(hide);\n\t            });\n\t        }\n\t\n\t        // 绑定drag事件\n\t        function bindDragEvent() {\n\t            var _x, _y;\n\t            var dragMarginLeft, dragMarginTop;\n\t            var imgWidth, imgHeight;\n\t\n\t            function mousemove (e) {\n\t                var diffX, diffY;\n\t\n\t                // 计算差额\n\t                diffX = e.pageX - _x;\n\t                diffY = e.pageY - _y;\n\t\n\t                // --------- 计算拖拽点的位置 ---------\n\t                var currentDragMarginLeft = dragMarginLeft + diffX;\n\t                var currentDragMarginTop = dragMarginTop + diffY;\n\t                $dragPoint.css({\n\t                    'margin-left': currentDragMarginLeft,\n\t                    'margin-top': currentDragMarginTop\n\t                });\n\t\n\t                // --------- 计算图片的大小 ---------\n\t                var currentImgWidth = imgWidth + diffX;\n\t                var currentImggHeight = imgHeight + diffY;\n\t                $currentImg && $currentImg.css({\n\t                    width: currentImgWidth,\n\t                    height: currentImggHeight\n\t                });\n\t            }\n\t\n\t            $dragPoint.on('mousedown', function(e){\n\t                if (!$currentImg) {\n\t                    return;\n\t                }\n\t                // 当前鼠标位置\n\t                _x = e.pageX;\n\t                _y = e.pageY;\n\t\n\t                // 当前拖拽点的位置\n\t                dragMarginLeft = parseFloat($dragPoint.css('margin-left'), 10);\n\t                dragMarginTop = parseFloat($dragPoint.css('margin-top'), 10);\n\t\n\t                // 当前图片的大小\n\t                imgWidth = $currentImg.width();\n\t                imgHeight = $currentImg.height();\n\t\n\t                // 隐藏 $toolbar\n\t                $toolbar.hide();\n\t\n\t                // 绑定计算事件\n\t                E.$document.on('mousemove._dragResizeImg', mousemove);\n\t                E.$document.on('mouseup._dragResizeImg', function (e) {\n\t                    // 取消绑定\n\t                    E.$document.off('mousemove._dragResizeImg');\n\t                    E.$document.off('mouseup._dragResizeImg');\n\t\n\t                    // 隐藏，并还原拖拽点的位置\n\t                    hide();\n\t                    $dragPoint.css({\n\t                        'margin-left': dragMarginLeft,\n\t                        'margin-top': dragMarginTop\n\t                    });\n\t\n\t                    // 记录\n\t                    isOnDrag = false;\n\t                });\n\t\n\t                // 记录\n\t                isOnDrag = true;\n\t            });\n\t        }\n\t\n\t        // 显示 toolbar\n\t        function show() {\n\t            if (editor._disabled) {\n\t                // 编辑器已经被禁用，则不让显示\n\t                return;\n\t            }\n\t            if ($currentImg == null) {\n\t                return;\n\t            }\n\t            $currentImg.addClass('clicked');\n\t            var imgPosition = $currentImg.position();\n\t            var imgTop = imgPosition.top;\n\t            var imgLeft = imgPosition.left;\n\t            var imgHeight = $currentImg.outerHeight();\n\t            var imgWidth = $currentImg.outerWidth();\n\t\n\t\n\t            // --- 定位 dragpoint ---\n\t            $dragPoint.css({\n\t                top: imgTop + imgHeight,\n\t                left: imgLeft + imgWidth\n\t            });\n\t\n\t            // --- 定位 toolbar ---\n\t\n\t            // 计算初步结果\n\t            var top = imgTop + imgHeight;\n\t            var left = imgLeft;\n\t            var marginLeft = 0;\n\t\n\t            var txtTop = $currentTxt.position().top;\n\t            var txtHeight = $currentTxt.outerHeight();\n\t            if (top > (txtTop + txtHeight)) {\n\t                // top 不得超出编辑范围\n\t                top = txtTop + txtHeight;\n\t            } else {\n\t                // top 超出编辑范围，dragPoint就不显示了\n\t                $dragPoint.show();\n\t            }\n\t\n\t            // 显示（方便计算 margin）\n\t            $toolbar.show();\n\t\n\t            // 计算 margin\n\t            var width = $toolbar.outerWidth();\n\t            marginLeft = imgWidth / 2 - width / 2;\n\t\n\t            // 定位\n\t            $toolbar.css({\n\t                top: top + 5,\n\t                left: left,\n\t                'margin-left': marginLeft\n\t            });\n\t            // 如果定位太靠左了\n\t            if (marginLeft < 0) {\n\t                // 得到三角形的margin-left\n\t                $toolbar.css('margin-left', '0');\n\t                $triangle.hide();\n\t            } else {\n\t                $triangle.show();\n\t            }\n\t\n\t            // disable 菜单\n\t            editor.disableMenusExcept();\n\t        }\n\t        \n\t        // 隐藏 toolbar\n\t        function hide() {\n\t            if ($currentImg == null) {\n\t                return;\n\t            }\n\t            $currentImg.removeClass('clicked');\n\t            $currentImg = null;\n\t\n\t            $toolbar.hide();\n\t            $dragPoint.hide();\n\t\n\t            // enable 菜单\n\t            editor.enableMenusExcept();\n\t        }\n\t\n\t        // 判断img是否是一个表情\n\t        function isEmotion(imgSrc) {\n\t            var result = false;\n\t            if (!editor.emotionUrls) {\n\t                return result;\n\t            }\n\t            $.each(editor.emotionUrls, function (index, url) {\n\t                var flag = false;\n\t                if (imgSrc === url) {\n\t                    result = true;\n\t                    flag = true;\n\t                }\n\t                if (flag) {\n\t                    return false;  // break 循环\n\t                }\n\t            });\n\t            return result;\n\t        }\n\t\n\t        // click img 事件\n\t        $currentTxt.on('mousedown', 'img', function (e) {\n\t            e.preventDefault();\n\t        }).on('click', 'img', function (e) {\n\t            var $img = $(e.currentTarget);\n\t            var src = $img.attr('src');\n\t\n\t            if (!src || isEmotion(src)) {\n\t                // 是一个表情图标\n\t                return;\n\t            }\n\t\n\t            // ---------- 不是表情图标 ---------- \n\t\n\t            // 渲染\n\t            render();\n\t\n\t            if ($currentImg && ($currentImg.get(0) === $img.get(0))) {\n\t                setTimeout(hide, 100);\n\t                return;\n\t            }\n\t\n\t            // 显示 toolbar\n\t            $currentImg = $img;\n\t            show();\n\t\n\t            // 默认显示menuContainer，其他默认隐藏\n\t            $menuContainer.show();\n\t            $linkInputContainer.hide();\n\t\n\t            // 阻止冒泡\n\t            e.preventDefault();\n\t            e.stopPropagation();\n\t            \n\t        }).on('click keydown scroll', function (e) {\n\t            if (!isOnDrag) {\n\t                setTimeout(hide, 100);\n\t            }\n\t        });\n\t\n\t    });\n\t\n\t});\n\t// 编辑区域 link toolbar\n\t_e(function (E, $) {\n\t    E.plugin(function () {\n\t        var editor = this;\n\t        var lang = editor.config.lang;\n\t        var $txt = editor.txt.$txt;\n\t\n\t        // 当前命中的链接\n\t        var $currentLink;\n\t\n\t        var $toolbar = $('<div class=\"txt-toolbar\"></div>');\n\t        var $triangle = $('<div class=\"tip-triangle\"></div>');\n\t        var $triggerLink = $('<a href=\"#\" target=\"_blank\"><i class=\"wangeditor-menu-img-link\"></i> ' + lang.openLink + '</a>');\n\t        var isRendered;\n\t\n\t        // 记录当前的显示/隐藏状态\n\t        var isShow = false;\n\t\n\t        var showTimeoutId, hideTimeoutId;\n\t        var showTimeoutIdByToolbar, hideTimeoutIdByToolbar;\n\t\n\t        // 渲染 dom\n\t        function render() {\n\t            if (isRendered) {\n\t                return;\n\t            }\n\t\n\t            $toolbar.append($triangle)\n\t                    .append($triggerLink);\n\t\n\t            editor.$editorContainer.append($toolbar);\n\t\n\t            isRendered = true;\n\t        }\n\t\n\t        // 定位\n\t        function setPosition() {\n\t            if (!$currentLink) {\n\t                return;\n\t            }\n\t\n\t            var position = $currentLink.position();\n\t            var left = position.left;\n\t            var top = position.top;\n\t            var height = $currentLink.height();\n\t\n\t            // 初步计算top值\n\t            var topResult = top + height + 5;\n\t\n\t            // 判断 toolbar 是否超过了编辑器区域的下边界\n\t            var menuHeight = editor.menuContainer.height();\n\t            var txtHeight = editor.txt.$txt.outerHeight();\n\t            if (topResult > menuHeight + txtHeight) {\n\t                topResult = menuHeight + txtHeight + 5;\n\t            }\n\t\n\t            // 最终设置\n\t            $toolbar.css({\n\t                top: topResult,\n\t                left: left\n\t            });\n\t        }\n\t\n\t        // 显示 toolbar\n\t        function show() {\n\t            if (isShow) {\n\t                return;\n\t            }\n\t\n\t            if (!$currentLink) {\n\t                return;\n\t            }\n\t\n\t            render();\n\t\n\t            $toolbar.show();\n\t\n\t            // 设置链接\n\t            var href = $currentLink.attr('href');\n\t            $triggerLink.attr('href', href);\n\t\n\t            // 定位\n\t            setPosition();\n\t\n\t            isShow = true;\n\t        }\n\t\n\t        // 隐藏 toolbar\n\t        function hide() {\n\t            if (!isShow) {\n\t                return;\n\t            }\n\t\n\t            if (!$currentLink) {\n\t                return;\n\t            }\n\t\n\t            $toolbar.hide();\n\t            isShow = false;\n\t        }\n\t\n\t        // $txt 绑定事件\n\t        $txt.on('mouseenter', 'a', function (e) {\n\t            // 延时 500ms 显示toolbar\n\t            if (showTimeoutId) {\n\t                clearTimeout(showTimeoutId);\n\t            }\n\t            showTimeoutId = setTimeout(function () {\n\t                var a = e.currentTarget;\n\t                var $a = $(a);\n\t                $currentLink = $a;\n\t\n\t                var $img = $a.children('img');\n\t                if ($img.length) {\n\t                    // 该链接下包含一个图片\n\t\n\t                    // 图片点击时，隐藏toolbar\n\t                    $img.click(function (e) {\n\t                        hide();\n\t                    });\n\t\n\t                    if ($img.hasClass('clicked')) {\n\t                        // 图片还处于clicked状态，则不显示toolbar\n\t                        return;\n\t                    }\n\t                }\n\t\n\t                // 显示toolbar\n\t                show();\n\t            }, 500);\n\t        }).on('mouseleave', 'a', function (e) {\n\t            // 延时 500ms 隐藏toolbar\n\t            if (hideTimeoutId) {\n\t                clearTimeout(hideTimeoutId);\n\t            }\n\t            hideTimeoutId = setTimeout(hide, 500);\n\t        }).on('click keydown scroll', function (e) {\n\t            setTimeout(hide, 100);\n\t        });\n\t        // $toolbar 绑定事件\n\t        $toolbar.on('mouseenter', function (e) {\n\t            // 先中断掉 $txt.mouseleave 导致的隐藏\n\t            if (hideTimeoutId) {\n\t                clearTimeout(hideTimeoutId);\n\t            }\n\t        }).on('mouseleave', function (e) {\n\t            // 延时 500ms 显示toolbar\n\t            if (showTimeoutIdByToolbar) {\n\t                clearTimeout(showTimeoutIdByToolbar);\n\t            }\n\t            showTimeoutIdByToolbar = setTimeout(hide, 500);\n\t        });\n\t    });\n\t});\n\t// menu吸顶\n\t_e(function (E, $) {\n\t\n\t    E.plugin(function () {\n\t        var editor = this;\n\t        var menuFixed = editor.config.menuFixed;\n\t        if (menuFixed === false || typeof menuFixed !== 'number') {\n\t            // 没有配置菜单吸顶\n\t            return;\n\t        }\n\t        var bodyMarginTop = parseFloat(E.$body.css('margin-top'), 10);\n\t        if (isNaN(bodyMarginTop)) {\n\t            bodyMarginTop = 0;\n\t        }\n\t\n\t        var $editorContainer = editor.$editorContainer;\n\t        var editorTop = $editorContainer.offset().top;\n\t        var editorHeight = $editorContainer.outerHeight();\n\t        \n\t        var $menuContainer = editor.menuContainer.$menuContainer;\n\t        var menuCssPosition = $menuContainer.css('position');\n\t        var menuCssTop = $menuContainer.css('top');\n\t        var menuTop = $menuContainer.offset().top;\n\t        var menuHeight = $menuContainer.outerHeight();\n\t        \n\t        var $txt = editor.txt.$txt;\n\t\n\t        E.$window.scroll(function () {\n\t            //全屏模式不支持\n\t            if (editor.isFullScreen) {\n\t                return;\n\t            }\n\t\n\t            var sTop = E.$window.scrollTop();\n\t\n\t            // 需要重新计算宽度，因为浏览器可能此时出现滚动条\n\t            var menuWidth = $menuContainer.width();\n\t\n\t            // 如果 menuTop === 0 说明此前编辑器一直隐藏，后来显示出来了，要重新计算相关数据\n\t            if (menuTop === 0) {\n\t                menuTop = $menuContainer.offset().top;\n\t                editorTop = $editorContainer.offset().top;\n\t                editorHeight = $editorContainer.outerHeight();\n\t                menuHeight = $menuContainer.outerHeight();\n\t            }\n\t\n\t            if (sTop >= menuTop && sTop + menuFixed + menuHeight + 30 < editorTop + editorHeight) {\n\t                // 吸顶\n\t                $menuContainer.css({\n\t                    position: 'fixed',\n\t                    top: menuFixed\n\t                });\n\t\n\t                // 固定宽度\n\t                $menuContainer.width(menuWidth);\n\t\n\t                // 增加body margin-top\n\t                E.$body.css({\n\t                    'margin-top': bodyMarginTop + menuHeight\n\t                });\n\t\n\t                // 记录\n\t                if (!editor._isMenufixed) {\n\t                    editor._isMenufixed = true;\n\t                }\n\t            } else {\n\t                // 取消吸顶\n\t                $menuContainer.css({\n\t                    position: menuCssPosition,\n\t                    top: menuCssTop\n\t                });\n\t\n\t                // 取消宽度固定\n\t                $menuContainer.css('width', '100%');\n\t\n\t                // 还原 body margin-top\n\t                E.$body.css({\n\t                    'margin-top': bodyMarginTop\n\t                });\n\t\n\t                // 撤销记录\n\t                if (editor._isMenufixed) {\n\t                    editor._isMenufixed = false;\n\t                }\n\t            }\n\t        });\n\t    });\n\t\n\t});\n\t// 缩进 菜单插件\n\t_e(function (E, $) {\n\t\n\t    // 用 createMenu 方法创建菜单\n\t    E.createMenu(function (check) {\n\t\n\t        // 定义菜单id，不要和其他菜单id重复。编辑器自带的所有菜单id，可通过『参数配置-自定义菜单』一节查看\n\t        var menuId = 'indent';\n\t\n\t        // check将检查菜单配置（『参数配置-自定义菜单』一节描述）中是否该菜单id，如果没有，则忽略下面的代码。\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t\n\t        // this 指向 editor 对象自身\n\t        var editor = this;\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,  // 编辑器对象\n\t            id: menuId,  // 菜单id\n\t            title: '缩进', // 菜单标题\n\t\n\t            // 正常状态和选中装下的dom对象，样式需要自定义\n\t            $domNormal: $('<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-indent-left\"></i></a>'),\n\t            $domSelected: $('<a href=\"#\" tabindex=\"-1\" class=\"selected\"><i class=\"wangeditor-menu-img-indent-left\"></i></a>')\n\t        });\n\t\n\t        // 菜单正常状态下，点击将触发该事件\n\t        menu.clickEvent = function (e) {\n\t            var elem = editor.getRangeElem();\n\t            var p = editor.getSelfOrParentByName(elem, 'p');\n\t            var $p;\n\t\n\t            if (!p) {\n\t                // 未找到 p 元素，则忽略\n\t                return e.preventDefault();\n\t            }\n\t            $p = $(p);\n\t\n\t            // 使用自定义命令\n\t            function commandFn() {\n\t                $p.css('text-indent', '2em');\n\t            }\n\t            editor.customCommand(e, commandFn);\n\t        };\n\t\n\t        // 菜单选中状态下，点击将触发该事件\n\t        menu.clickEventSelected = function (e) {\n\t            var elem = editor.getRangeElem();\n\t            var p = editor.getSelfOrParentByName(elem, 'p');\n\t            var $p;\n\t\n\t            if (!p) {\n\t                // 未找到 p 元素，则忽略\n\t                return e.preventDefault();\n\t            }\n\t            $p = $(p);\n\t\n\t            // 使用自定义命令\n\t            function commandFn() {\n\t                $p.css('text-indent', '0');\n\t            }\n\t            editor.customCommand(e, commandFn);\n\t        };\n\t\n\t        // 根据当前选区，自定义更新菜单的选中状态或者正常状态\n\t        menu.updateSelectedEvent = function () {\n\t            // 获取当前选区所在的父元素\n\t            var elem = editor.getRangeElem();\n\t            var p = editor.getSelfOrParentByName(elem, 'p');\n\t            var $p;\n\t            var indent;\n\t\n\t            if (!p) {\n\t                // 未找到 p 元素，则标记为未处于选中状态\n\t                return false;\n\t            }\n\t            $p = $(p);\n\t            indent = $p.css('text-indent');\n\t\n\t            if (!indent || indent === '0px') {\n\t                // 得到的p，text-indent 属性是 0，则标记为未处于选中状态\n\t                return false;\n\t            }\n\t\n\t            // 找到 p 元素，并且 text-indent 不是 0，则标记为选中状态\n\t            return true;\n\t        };\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t    });\n\t\n\t});\n\t// 行高 菜单插件\n\t_e(function (E, $) {\n\t\n\t    // 用 createMenu 方法创建菜单\n\t    E.createMenu(function (check) {\n\t\n\t        // 定义菜单id，不要和其他菜单id重复。编辑器自带的所有菜单id，可通过『参数配置-自定义菜单』一节查看\n\t        var menuId = 'lineheight';\n\t\n\t        // check将检查菜单配置（『参数配置-自定义菜单』一节描述）中是否该菜单id，如果没有，则忽略下面的代码。\n\t        if (!check(menuId)) {\n\t            return;\n\t        }\n\t\n\t        // this 指向 editor 对象自身\n\t        var editor = this;\n\t\n\t        // 由于浏览器自身不支持 lineHeight 命令，因此要做一个hook\n\t        editor.commandHooks.lineHeight = function (value) {\n\t            var rangeElem = editor.getRangeElem();\n\t            var targetElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5,pre');\n\t            if (!targetElem) {\n\t                return;\n\t            }\n\t            $(targetElem).css('line-height', value + '');\n\t        };\n\t\n\t        // 创建 menu 对象\n\t        var menu = new E.Menu({\n\t            editor: editor,  // 编辑器对象\n\t            id: menuId,  // 菜单id\n\t            title: '行高', // 菜单标题\n\t            commandName: 'lineHeight', // 命令名称\n\t\n\t            // 正常状态和选中装下的dom对象，样式需要自定义\n\t            $domNormal: $('<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-arrows-v\"></i></a>'),\n\t            $domSelected: $('<a href=\"#\" tabindex=\"-1\" class=\"selected\"><i class=\"wangeditor-menu-img-arrows-v\"></i></a>')\n\t        });\n\t\n\t        // 数据源\n\t        var data  = {\n\t            // 格式： 'value' : 'title'\n\t            '1.0': '1.0倍',\n\t            '1.5': '1.5倍',\n\t            '1.8': '1.8倍',\n\t            '2.0': '2.0倍',\n\t            '2.5': '2.5倍',\n\t            '3.0': '3.0倍'\n\t        };\n\t\n\t        // 为menu创建droplist对象\n\t        var tpl = '<span style=\"line-height:{#commandValue}\">{#title}</span>';\n\t        menu.dropList = new E.DropList(editor, menu, {\n\t            data: data,  // 传入数据源\n\t            tpl: tpl  // 传入模板\n\t        });\n\t\n\t        // 增加到editor对象中\n\t        editor.menus[menuId] = menu;\n\t\n\t    });\n\t\n\t});\n\t// 自定义上传\n\t_e(function (E, $) {\n\t\n\t    E.plugin(function () {\n\t\n\t        var editor = this;\n\t        var customUpload = editor.config.customUpload;\n\t        if (!customUpload) {\n\t            return;\n\t        } else if (editor.config.uploadImgUrl) {\n\t            alert('自定义上传无效，详看浏览器日志console.log');\n\t            E.error('已经配置了 uploadImgUrl ，就不能再配置 customUpload ，两者冲突。将导致自定义上传无效。');\n\t            return;\n\t        }\n\t\n\t        var $uploadContent = editor.$uploadContent;\n\t        if (!$uploadContent) {\n\t            E.error('自定义上传，无法获取 editor.$uploadContent');\n\t        }\n\t\n\t        // UI\n\t        var $uploadIcon = $('<div class=\"upload-icon-container\"><i class=\"wangeditor-menu-img-upload\"></i></div>');\n\t        $uploadContent.append($uploadIcon);\n\t\n\t        // 设置id，并暴露\n\t        var btnId = 'upload' + E.random();\n\t        var containerId = 'upload' + E.random();\n\t        $uploadIcon.attr('id', btnId);\n\t        $uploadContent.attr('id', containerId);\n\t\n\t        editor.customUploadBtnId = btnId;\n\t        editor.customUploadContainerId = containerId;\n\t    });\n\t\n\t});\n\t// 版权提示\n\t_e(function (E, $) {\n\t    E.info('本页面富文本编辑器由 wangEditor 提供 http://wangeditor.github.io/ ');\n\t});\n\t    \n\t    // 最终返回wangEditor构造函数\n\t    return window.wangEditor;\n\t});\n\n/***/ }\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/16.b788b473c8c22f13f082.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../app_vue/node_modules/.0.25.0@css-loader/index.js?sourceMap!./wangEditor.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../app_vue/node_modules/.1.0.0@vue-style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../app_vue/node_modules/.0.25.0@css-loader/index.js?sourceMap!./wangEditor.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../../app_vue/node_modules/.0.25.0@css-loader/index.js?sourceMap!./wangEditor.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/.2.1.23@wangeditor/dist/css/wangEditor.css\n// module id = 82\n// module chunks = 1 2 16","exports = module.exports = require(\"../../../node_modules/.0.25.0@css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"p{line-height:15px!important}\", \"\", {\"version\":3,\"sources\":[\"/./src/components/tools/wangeditor.vue\"],\"names\":[],\"mappings\":\"AACA,EACI,0BAA2B,CAC9B\",\"file\":\"wangeditor.vue\",\"sourcesContent\":[\"\\np{\\n    line-height:15px !important\\n}\\n\"],\"sourceRoot\":\"webpack://\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.0.25.0@css-loader?sourceMap!./~/.10.3.0@vue-loader/lib/style-rewriter.js?id=data-v-40fe4466!./~/.1.0.44@vux-loader/src/style-loader.js!./~/.10.3.0@vue-loader/lib/selector.js?type=styles&index=0!./src/components/tools/wangeditor.vue\n// module id = 154\n// module chunks = 1 2 16","exports = module.exports = require(\"../../../../app_vue/node_modules/.0.25.0@css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".wangEditor-container{position:relative;background-color:#fff;border:1px solid #ccc;z-index:1;width:100%}.wangEditor-container a:focus,.wangEditor-container button:focus{outline:none}.wangEditor-container,.wangEditor-container *{margin:0;padding:0;box-sizing:border-box;line-height:1}.wangEditor-container img{border:none}.wangEditor-container .clearfix:after{content:\\\"\\\";display:table;clear:both}.wangEditor-container .clearfix{*zoom:1}.wangEditor-container textarea{border:none}.wangEditor-container textarea:focus{outline:none}.wangEditor-container .height-tip{position:absolute;width:3px;background-color:#ccc;left:0;transition:top .2s}.wangEditor-container .txt-toolbar{position:absolute;background-color:#fff;padding:3px 5px;border-top:2px solid #666;box-shadow:1px 3px 3px #999;border-left:1px\\\\9#ccc\\\\9;border-bottom:1px\\\\9#999\\\\9;border-right:1px\\\\9#999\\\\9}.wangEditor-container .txt-toolbar .tip-triangle{display:block;position:absolute;width:0;height:0;border:5px solid;border-color:transparent transparent #666;top:-12px;left:50%;margin-left:-5px}.wangEditor-container .txt-toolbar a{color:#666;display:inline-block;margin:0 3px;padding:5px;text-decoration:none;border-radius:3px}.wangEditor-container .txt-toolbar a:hover{background-color:#f1f1f1}.wangEditor-container .img-drag-point{display:block;position:absolute;width:12px;height:12px;border-radius:50%;cursor:se-resize;background-color:#666;margin-left:-6px;margin-top:-6px;box-shadow:1px 1px 5px #999}.wangEditor-container .wangEditor-upload-progress{position:absolute;height:1px;background:#1e88e5;width:0;display:none;-webkit-transition:width .5s;transition:width .5s}.wangEditor-fullscreen{position:fixed;top:0;bottom:0;left:0;right:0}.wangEditor-container .code-textarea{resize:none;width:100%;font-size:14px;line-height:1.5;font-family:Verdana;color:#333;padding:0 15px}.wangEditor-menu-container{width:100%;border-bottom:1px solid #f1f1f1;background-color:#fff}.wangEditor-menu-container a{text-decoration:none}.wangEditor-menu-container .menu-group{float:left;padding:0 8px;border-right:1px solid #f1f1f1}.wangEditor-menu-container .menu-item{float:left;position:relative;text-align:center;height:31px;width:35px}.wangEditor-menu-container .menu-item:hover{background-color:#f1f1f1}.wangEditor-menu-container .menu-item a{display:block;text-align:center;color:#666;width:100%;padding:8px 0;font-size:.9em}.wangEditor-menu-container .menu-item .selected{color:#1e88e5}.wangEditor-menu-container .menu-item .active{background-color:#f1f1f1}.wangEditor-menu-container .menu-item .disable{opacity:.5;filter:alpha(opacity=50)}.wangEditor-menu-container .menu-tip{display:block;position:absolute;z-index:20;width:60px;text-align:center;background-color:#666;color:#fff;padding:7px 0;font-size:12px;top:100%;left:50%;margin-left:-30px;border-radius:2px;box-shadow:1px 1px 5px #999;display:none}.wangEditor-menu-container .menu-tip-40{width:40px;margin-left:-20px}.wangEditor-menu-container .menu-tip-50{width:50px;margin-left:-25px}.wangEditor-menu-shadow{border-bottom:1px\\\\9#f1f1f1\\\\9;box-shadow:0 1px 3px #999}.wangEditor-container .wangEditor-txt{width:100%;text-align:left;padding:15px;padding-top:0;margin-top:5px;overflow-y:auto}.wangEditor-container .wangEditor-txt h1,.wangEditor-container .wangEditor-txt h2,.wangEditor-container .wangEditor-txt h3,.wangEditor-container .wangEditor-txt h4,.wangEditor-container .wangEditor-txt h5,.wangEditor-container .wangEditor-txt p{margin:10px 0;line-height:1.8}.wangEditor-container .wangEditor-txt h1 *,.wangEditor-container .wangEditor-txt h2 *,.wangEditor-container .wangEditor-txt h3 *,.wangEditor-container .wangEditor-txt h4 *,.wangEditor-container .wangEditor-txt h5 *,.wangEditor-container .wangEditor-txt p *{line-height:1.8}.wangEditor-container .wangEditor-txt ol,.wangEditor-container .wangEditor-txt ul{padding-left:20px}.wangEditor-container .wangEditor-txt img{cursor:pointer}.wangEditor-container .wangEditor-txt img.clicked,.wangEditor-container .wangEditor-txt table.clicked{box-shadow:1px 1px 10px #999}.wangEditor-container .wangEditor-txt pre code{line-height:1.5}.wangEditor-container .wangEditor-txt:focus{outline:none}.wangEditor-container .wangEditor-txt blockquote{display:block;border-left:8px solid #d0e5f2;padding:5px 10px;margin:10px 0;line-height:1.4;font-size:100%;background-color:#f1f1f1}.wangEditor-container .wangEditor-txt table{border:none;border-collapse:collapse}.wangEditor-container .wangEditor-txt table td,.wangEditor-container .wangEditor-txt table th{border:1px solid #999;padding:3px 5px;min-width:50px;height:20px}.wangEditor-container .wangEditor-txt pre{border:1px solid #ccc;background-color:#f8f8f8;padding:10px;margin:5px 0;font-size:.8em;border-radius:3px}.wangEditor-drop-list{display:none;position:absolute;background-color:#fff;overflow:hidden;z-index:10;transition:height .7s;border-top:1px solid #f1f1f1;box-shadow:1px 3px 3px #999;border-left:1px\\\\9#ccc\\\\9;border-bottom:1px\\\\9#999\\\\9;border-right:1px\\\\9#999\\\\9}.wangEditor-drop-list a{text-decoration:none;display:block;color:#666;padding:3px 5px}.wangEditor-drop-list a:hover{background-color:#f1f1f1}.txt-toolbar,.wangEditor-drop-panel{display:none;position:absolute;padding:10px;font-size:14px;background-color:#fff;z-index:10;border-top:2px solid #666;box-shadow:1px 3px 3px #999;border-left:1px\\\\9#ccc\\\\9;border-bottom:1px\\\\9#999\\\\9;border-right:1px\\\\9#999\\\\9}.txt-toolbar .tip-triangle,.wangEditor-drop-panel .tip-triangle{display:block;position:absolute;width:0;height:0;border:5px solid;border-color:transparent transparent #666;top:-12px;left:50%;margin-left:-5px}.txt-toolbar a,.wangEditor-drop-panel a{text-decoration:none}.txt-toolbar input[type=text],.wangEditor-drop-panel input[type=text]{border:none;border-bottom:1px solid #ccc;font-size:14px;height:20px;color:#333;padding:3px 0}.txt-toolbar input[type=text]:focus,.wangEditor-drop-panel input[type=text]:focus{outline:none;border-bottom:2px solid #1e88e5}.txt-toolbar input[type=text].block,.wangEditor-drop-panel input[type=text].block{display:block;width:100%}.txt-toolbar textarea,.wangEditor-drop-panel textarea{border:1px solid #ccc}.txt-toolbar textarea:focus,.wangEditor-drop-panel textarea:focus{outline:none;border-color:#1e88e5}.txt-toolbar button,.wangEditor-drop-panel button{font-size:14px;color:#1e88e5;border:none;padding:10px;background-color:#fff;cursor:pointer;border-radius:3px}.txt-toolbar button:hover,.wangEditor-drop-panel button:hover{background-color:#f1f1f1}.txt-toolbar button:focus,.wangEditor-drop-panel button:focus{outline:none}.txt-toolbar button.right,.wangEditor-drop-panel button.right{float:right;margin-left:10px}.txt-toolbar button.gray,.wangEditor-drop-panel button.gray{color:#999}.txt-toolbar button.link,.wangEditor-drop-panel button.link{padding:5px 10px}.txt-toolbar button.link:hover,.wangEditor-drop-panel button.link:hover{background-color:#fff;text-decoration:underline}.txt-toolbar .color-item,.wangEditor-drop-panel .color-item{display:block;float:left;width:25px;height:25px;text-align:center;padding:2px;border-radius:2px;text-decoration:underline}.txt-toolbar .color-item:hover,.wangEditor-drop-panel .color-item:hover{background-color:#f1f1f1}.txt-toolbar .list-menu-item,.wangEditor-drop-panel .list-menu-item{display:block;float:left;color:#333;padding:5px;border-radius:2px}.txt-toolbar .list-menu-item:hover,.wangEditor-drop-panel .list-menu-item:hover{background-color:#f1f1f1}.txt-toolbar table.choose-table,.wangEditor-drop-panel table.choose-table{border:none;border-collapse:collapse}.txt-toolbar table.choose-table td,.wangEditor-drop-panel table.choose-table td{border:1px solid #ccc;width:16px;height:12px}.txt-toolbar table.choose-table td.active,.wangEditor-drop-panel table.choose-table td.active{background-color:#ccc;opacity:.5;filter:alpha(opacity=50)}.txt-toolbar .panel-tab .tab-container,.wangEditor-drop-panel .panel-tab .tab-container{margin-bottom:5px}.txt-toolbar .panel-tab .tab-container a,.wangEditor-drop-panel .panel-tab .tab-container a{display:inline-block;color:#999;text-align:center;margin:0 5px;padding:5px}.txt-toolbar .panel-tab .tab-container a.selected,.wangEditor-drop-panel .panel-tab .tab-container a.selected{color:#1e88e5;border-bottom:2px solid #1e88e5}.txt-toolbar .panel-tab .content-container .content,.wangEditor-drop-panel .panel-tab .content-container .content{display:none}.txt-toolbar .panel-tab .content-container .content a,.wangEditor-drop-panel .panel-tab .content-container .content a{display:inline-block;margin:2px;padding:2px;border-radius:2px}.txt-toolbar .panel-tab .content-container .content a:hover,.wangEditor-drop-panel .panel-tab .content-container .content a:hover{background-color:#f1f1f1}.txt-toolbar .panel-tab .content-container .selected,.wangEditor-drop-panel .panel-tab .content-container .selected{display:block}.txt-toolbar .panel-tab .emotion-content-container,.wangEditor-drop-panel .panel-tab .emotion-content-container{height:200px;overflow-y:auto}.txt-toolbar .upload-icon-container,.wangEditor-drop-panel .upload-icon-container{color:#ccc;text-align:center;margin:20px 20px 15px!important;padding:5px!important;font-size:65px;cursor:pointer;border:2px dotted #f1f1f1;display:block!important}.txt-toolbar .upload-icon-container:hover,.wangEditor-drop-panel .upload-icon-container:hover{color:#666;border-color:#ccc}.wangEditor-modal{position:absolute;top:50%;left:50%;background-color:#fff;border-top:1px solid #f1f1f1;box-shadow:1px 3px 3px #999;border-top:1px\\\\9#ccc\\\\9;border-left:1px\\\\9#ccc\\\\9;border-bottom:1px\\\\9#999\\\\9;border-right:1px\\\\9#999\\\\9}.wangEditor-modal .wangEditor-modal-close{position:absolute;top:0;right:0;margin-top:-25px;margin-right:-25px;font-size:1.5em;color:#666;cursor:pointer}@font-face{font-family:icomoon;src:url(\" + require(\"../fonts/icomoon.eot?-qdfu1s\") + \");src:url(\" + require(\"../fonts/icomoon.eot\") + \"?#iefix-qdfu1s) format(\\\"embedded-opentype\\\"),url(\" + require(\"../fonts/icomoon.ttf?-qdfu1s\") + \") format(\\\"truetype\\\"),url(\" + require(\"../fonts/icomoon.woff?-qdfu1s\") + \") format(\\\"woff\\\"),url(\" + require(\"../fonts/icomoon.svg?-qdfu1s\") + \"#icomoon) format(\\\"svg\\\");font-weight:400;font-style:normal}[class*=\\\" wangeditor-menu-img-\\\"],[class^=wangeditor-menu-img-]{font-family:icomoon;speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.wangeditor-menu-img-link:before{content:\\\"\\\\E800\\\"}.wangeditor-menu-img-unlink:before{content:\\\"\\\\E801\\\"}.wangeditor-menu-img-code:before{content:\\\"\\\\E802\\\"}.wangeditor-menu-img-cancel:before{content:\\\"\\\\E803\\\"}.wangeditor-menu-img-terminal:before{content:\\\"\\\\E804\\\"}.wangeditor-menu-img-angle-down:before{content:\\\"\\\\E805\\\"}.wangeditor-menu-img-font:before{content:\\\"\\\\E806\\\"}.wangeditor-menu-img-bold:before{content:\\\"\\\\E807\\\"}.wangeditor-menu-img-italic:before{content:\\\"\\\\E808\\\"}.wangeditor-menu-img-header:before{content:\\\"\\\\E809\\\"}.wangeditor-menu-img-align-left:before{content:\\\"\\\\E80A\\\"}.wangeditor-menu-img-align-center:before{content:\\\"\\\\E80B\\\"}.wangeditor-menu-img-align-right:before{content:\\\"\\\\E80C\\\"}.wangeditor-menu-img-list-bullet:before{content:\\\"\\\\E80D\\\"}.wangeditor-menu-img-indent-left:before{content:\\\"\\\\E80E\\\"}.wangeditor-menu-img-indent-right:before{content:\\\"\\\\E80F\\\"}.wangeditor-menu-img-list-numbered:before{content:\\\"\\\\E810\\\"}.wangeditor-menu-img-underline:before{content:\\\"\\\\E811\\\"}.wangeditor-menu-img-table:before{content:\\\"\\\\E812\\\"}.wangeditor-menu-img-eraser:before{content:\\\"\\\\E813\\\"}.wangeditor-menu-img-text-height:before{content:\\\"\\\\E814\\\"}.wangeditor-menu-img-brush:before{content:\\\"\\\\E815\\\"}.wangeditor-menu-img-pencil:before{content:\\\"\\\\E816\\\"}.wangeditor-menu-img-minus:before{content:\\\"\\\\E817\\\"}.wangeditor-menu-img-picture:before{content:\\\"\\\\E818\\\"}.wangeditor-menu-img-file-image:before{content:\\\"\\\\E819\\\"}.wangeditor-menu-img-cw:before{content:\\\"\\\\E81A\\\"}.wangeditor-menu-img-ccw:before{content:\\\"\\\\E81B\\\"}.wangeditor-menu-img-music:before{content:\\\"\\\\E911\\\"}.wangeditor-menu-img-play:before{content:\\\"\\\\E912\\\"}.wangeditor-menu-img-location:before{content:\\\"\\\\E947\\\"}.wangeditor-menu-img-happy:before{content:\\\"\\\\E9DF\\\"}.wangeditor-menu-img-sigma:before{content:\\\"\\\\EA67\\\"}.wangeditor-menu-img-enlarge2:before{content:\\\"\\\\E98B\\\"}.wangeditor-menu-img-shrink2:before{content:\\\"\\\\E98C\\\"}.wangeditor-menu-img-newspaper:before{content:\\\"\\\\E904\\\"}.wangeditor-menu-img-camera:before{content:\\\"\\\\E90F\\\"}.wangeditor-menu-img-video-camera:before{content:\\\"\\\\E914\\\"}.wangeditor-menu-img-file-zip:before{content:\\\"\\\\E92B\\\"}.wangeditor-menu-img-stack:before{content:\\\"\\\\E92E\\\"}.wangeditor-menu-img-credit-card:before{content:\\\"\\\\E93F\\\"}.wangeditor-menu-img-address-book:before{content:\\\"\\\\E944\\\"}.wangeditor-menu-img-envelop:before{content:\\\"\\\\E945\\\"}.wangeditor-menu-img-drawer:before{content:\\\"\\\\E95C\\\"}.wangeditor-menu-img-download:before{content:\\\"\\\\E960\\\"}.wangeditor-menu-img-upload:before{content:\\\"\\\\E961\\\"}.wangeditor-menu-img-lock:before{content:\\\"\\\\E98F\\\"}.wangeditor-menu-img-unlocked:before{content:\\\"\\\\E990\\\"}.wangeditor-menu-img-wrench:before{content:\\\"\\\\E991\\\"}.wangeditor-menu-img-eye:before{content:\\\"\\\\E9CE\\\"}.wangeditor-menu-img-eye-blocked:before{content:\\\"\\\\E9D1\\\"}.wangeditor-menu-img-command:before{content:\\\"\\\\EA4E\\\"}.wangeditor-menu-img-font2:before{content:\\\"\\\\EA5C\\\"}.wangeditor-menu-img-libreoffice:before{content:\\\"\\\\EADE\\\"}.wangeditor-menu-img-quotes-left:before{content:\\\"\\\\E977\\\"}.wangeditor-menu-img-strikethrough:before{content:\\\"\\\\EA65\\\"}.wangeditor-menu-img-desktop:before{content:\\\"\\\\F108\\\"}.wangeditor-menu-img-tablet:before{content:\\\"\\\\F10A\\\"}.wangeditor-menu-img-search-plus:before{content:\\\"\\\\F00E\\\"}.wangeditor-menu-img-search-minus:before{content:\\\"\\\\F010\\\"}.wangeditor-menu-img-trash-o:before{content:\\\"\\\\F014\\\"}.wangeditor-menu-img-align-justify:before{content:\\\"\\\\F039\\\"}.wangeditor-menu-img-arrows-v:before{content:\\\"\\\\F07D\\\"}.wangeditor-menu-img-sigma2:before{content:\\\"\\\\EA68\\\"}.wangeditor-menu-img-omega:before{content:\\\"\\\\E900\\\"}.wangeditor-menu-img-cancel-circle:before{content:\\\"\\\\E901\\\"}.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8;-webkit-text-size-adjust:none}.diff .hljs-header,.hljs-comment{color:#998;font-style:italic}.css .rule .hljs-keyword,.hljs-keyword,.hljs-request,.hljs-status,.hljs-subst,.hljs-winutils,.nginx .hljs-title{color:#333;font-weight:700}.hljs-hexcolor,.hljs-number,.ruby .hljs-constant{color:teal}.hljs-doctag,.hljs-string,.hljs-tag .hljs-value,.tex .hljs-formula{color:#d14}.hljs-id,.hljs-title,.scss .hljs-preprocessor{color:#900;font-weight:700}.hljs-list .hljs-keyword,.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type,.tex .hljs-command,.vhdl .hljs-literal{color:#458;font-weight:700}.django .hljs-tag .hljs-keyword,.hljs-rule .hljs-property,.hljs-tag,.hljs-tag .hljs-title{color:navy;font-weight:400}.hljs-attribute,.hljs-name,.hljs-variable,.lisp .hljs-body{color:teal}.hljs-regexp{color:#009926}.clojure .hljs-keyword,.hljs-prompt,.hljs-symbol,.lisp .hljs-keyword,.ruby .hljs-symbol .hljs-string,.scheme .hljs-keyword,.tex .hljs-special{color:#990073}.hljs-built_in{color:#0086b3}.hljs-cdata,.hljs-doctype,.hljs-pi,.hljs-pragma,.hljs-preprocessor,.hljs-shebang{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.diff .hljs-change{background:#0086b3}.hljs-chunk{color:#aaa}\", \"\", {\"version\":3,\"sources\":[\"/../node_modules/.2.1.23@wangeditor/dist/css/wangEditor.css\"],\"names\":[],\"mappings\":\"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d,WAAiB,CAClB,AACD,8GAEE,cAAe,AACf,+BAAiC,CAClC,AACD,kHAEE,YAAc,CACf,AACD,sHAEE,qBAAsB,AACtB,WAAY,AACZ,YAAa,AACb,iBAAmB,CACpB,AACD,kIAEE,wBAA0B,CAC3B,AACD,oHAEE,aAAe,CAChB,AACD,gHAEE,aAAc,AACd,eAAiB,CAClB,AACD,kFAEE,WAAY,AACZ,kBAAmB,AACnB,gCAAuC,AACvC,sBAAwB,AACxB,eAAgB,AAChB,eAAgB,AAChB,0BAA2B,AAC3B,uBAA0B,CAC3B,AACD,8FAEE,WAAY,AACZ,iBAAmB,CACpB,AACD,kBACE,kBAAmB,AACnB,QAAS,AACT,SAAU,AACV,sBAAuB,AACvB,6BAA8B,AAC9B,4BAA6B,AAC7B,uBAAiC,AACjC,wBAAkC,AAClC,0BAAoC,AACpC,wBAAmC,CACpC,AACD,0CACE,kBAAmB,AACnB,MAAO,AACP,QAAS,AACT,iBAAkB,AAClB,mBAAoB,AACpB,gBAAiB,AACjB,WAAY,AACZ,cAAgB,CACjB,AACD,WACE,oBAAuB,AACvB,kCAAyC,AACzC,wMAAmP,AACnP,gBAAoB,AACpB,iBAAmB,CACpB,AACD,+DAEE,oBAAuB,AACvB,WAAY,AACZ,kBAAmB,AACnB,gBAAoB,AACpB,oBAAqB,AACrB,oBAAqB,AACrB,cAAe,AAEf,mCAAoC,AACpC,iCAAmC,CACpC,AACD,iCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,iCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,qCACE,eAAiB,CAClB,AACD,uCACE,eAAiB,CAClB,AACD,iCACE,eAAiB,CAClB,AACD,iCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,uCACE,eAAiB,CAClB,AACD,yCACE,eAAiB,CAClB,AACD,wCACE,eAAiB,CAClB,AACD,wCACE,eAAiB,CAClB,AACD,wCACE,eAAiB,CAClB,AACD,yCACE,eAAiB,CAClB,AACD,0CACE,eAAiB,CAClB,AACD,sCACE,eAAiB,CAClB,AACD,kCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,wCACE,eAAiB,CAClB,AACD,kCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,kCACE,eAAiB,CAClB,AACD,oCACE,eAAiB,CAClB,AACD,uCACE,eAAiB,CAClB,AACD,+BACE,eAAiB,CAClB,AACD,gCACE,eAAiB,CAClB,AACD,kCACE,eAAiB,CAClB,AACD,iCACE,eAAiB,CAClB,AACD,qCACE,eAAiB,CAClB,AACD,kCACE,eAAiB,CAClB,AACD,kCACE,eAAiB,CAClB,AACD,qCACE,eAAiB,CAClB,AACD,oCACE,eAAiB,CAClB,AACD,sCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,yCACE,eAAiB,CAClB,AACD,qCACE,eAAiB,CAClB,AACD,kCACE,eAAiB,CAClB,AACD,wCACE,eAAiB,CAClB,AACD,yCACE,eAAiB,CAClB,AACD,oCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,qCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,iCACE,eAAiB,CAClB,AACD,qCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,gCACE,eAAiB,CAClB,AACD,wCACE,eAAiB,CAClB,AACD,oCACE,eAAiB,CAClB,AACD,kCACE,eAAiB,CAClB,AACD,wCACE,eAAiB,CAClB,AACD,wCACE,eAAiB,CAClB,AACD,0CACE,eAAiB,CAClB,AACD,oCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,wCACE,eAAiB,CAClB,AACD,yCACE,eAAiB,CAClB,AACD,oCACE,eAAiB,CAClB,AACD,0CACE,eAAiB,CAClB,AACD,qCACE,eAAiB,CAClB,AACD,mCACE,eAAiB,CAClB,AACD,kCACE,eAAiB,CAClB,AACD,0CACE,eAAiB,CAClB,AACD,MACE,cAAe,AACf,gBAAiB,AACjB,aAAe,AACf,WAAY,AACZ,mBAAoB,AACpB,6BAA+B,CAChC,AACD,iCAEE,WAAY,AACZ,iBAAmB,CACpB,AACD,gHAOE,WAAY,AACZ,eAAkB,CACnB,AACD,iDAGE,UAAe,CAChB,AACD,mEAIE,UAAY,CACb,AACD,8CAGE,WAAY,AACZ,eAAkB,CACnB,AACD,qCAEE,eAAoB,CACrB,AACD,0EAIE,WAAY,AACZ,eAAkB,CACnB,AACD,0FAIE,WAAe,AACf,eAAoB,CACrB,AACD,2DAIE,UAAe,CAChB,AACD,aACE,aAAe,CAChB,AACD,8IAOE,aAAe,CAChB,AACD,eACE,aAAe,CAChB,AACD,iFAME,WAAY,AACZ,eAAkB,CACnB,AACD,eACE,eAAiB,CAClB,AACD,eACE,eAAiB,CAClB,AACD,mBACE,kBAAoB,CACrB,AACD,YACE,UAAY,CACb\",\"file\":\"wangEditor.css\",\"sourcesContent\":[\"/* 编辑器边框颜色 */\\n/* 菜单颜色、上边框颜色 */\\n/* 菜单选中状态的颜色 */\\n/* input focus 时的颜色 */\\n/* 按钮颜色 */\\n/* tab selected 状态下的颜色 */\\n.wangEditor-container {\\n  position: relative;\\n  background-color: #fff;\\n  border: 1px solid #ccc;\\n  z-index: 1;\\n  width: 100%;\\n}\\n.wangEditor-container a:focus,\\n.wangEditor-container button:focus {\\n  outline: none;\\n}\\n.wangEditor-container,\\n.wangEditor-container * {\\n  margin: 0;\\n  padding: 0;\\n  box-sizing: border-box;\\n  line-height: 1;\\n}\\n.wangEditor-container img {\\n  border: none;\\n}\\n.wangEditor-container .clearfix:after {\\n  content: '';\\n  display: table;\\n  clear: both;\\n}\\n.wangEditor-container .clearfix {\\n  *zoom: 1;\\n}\\n.wangEditor-container textarea {\\n  border: none;\\n}\\n.wangEditor-container textarea:focus {\\n  outline: none;\\n}\\n.wangEditor-container .height-tip {\\n  position: absolute;\\n  width: 3px;\\n  background-color: #ccc;\\n  left: 0;\\n  transition: top .2s;\\n}\\n.wangEditor-container .txt-toolbar {\\n  position: absolute;\\n  background-color: #fff;\\n  padding: 3px 5px;\\n  border-top: 2px solid #666;\\n  box-shadow: 1px 3px 3px #999;\\n  border-left: 1px\\\\9 solid\\\\9 #ccc\\\\9;\\n  border-bottom: 1px\\\\9 solid\\\\9 #999\\\\9;\\n  border-right: 1px\\\\9 solid\\\\9 #999\\\\9;\\n}\\n.wangEditor-container .txt-toolbar .tip-triangle {\\n  display: block;\\n  position: absolute;\\n  width: 0;\\n  height: 0;\\n  border: 5px solid;\\n  border-color: transparent transparent #666 transparent;\\n  top: -12px;\\n  left: 50%;\\n  margin-left: -5px;\\n}\\n.wangEditor-container .txt-toolbar a {\\n  color: #666;\\n  display: inline-block;\\n  margin: 0 3px;\\n  padding: 5px;\\n  text-decoration: none;\\n  border-radius: 3px;\\n}\\n.wangEditor-container .txt-toolbar a:hover {\\n  background-color: #f1f1f1;\\n}\\n.wangEditor-container .img-drag-point {\\n  display: block;\\n  position: absolute;\\n  width: 12px;\\n  height: 12px;\\n  border-radius: 50%;\\n  cursor: se-resize;\\n  background-color: #666;\\n  margin-left: -6px;\\n  margin-top: -6px;\\n  box-shadow: 1px 1px 5px #999;\\n}\\n.wangEditor-container .wangEditor-upload-progress {\\n  position: absolute;\\n  height: 1px;\\n  background: #1e88e5;\\n  width: 0;\\n  display: none;\\n  -webkit-transition: width .5s;\\n  -o-transition: width .5s;\\n  transition: width .5s;\\n}\\n.wangEditor-fullscreen {\\n  position: fixed;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n}\\n.wangEditor-container .code-textarea {\\n  resize: none;\\n  width: 100%;\\n  font-size: 14px;\\n  line-height: 1.5;\\n  font-family: 'Verdana';\\n  color: #333;\\n  padding: 0 15px 0 15px;\\n}\\n.wangEditor-menu-container {\\n  width: 100%;\\n  border-bottom: 1px solid #f1f1f1;\\n  background-color: #fff;\\n}\\n.wangEditor-menu-container a {\\n  text-decoration: none;\\n}\\n.wangEditor-menu-container .menu-group {\\n  float: left;\\n  padding: 0 8px;\\n  border-right: 1px solid #f1f1f1;\\n}\\n.wangEditor-menu-container .menu-item {\\n  float: left;\\n  position: relative;\\n  text-align: center;\\n  height: 31px;\\n  width: 35px;\\n}\\n.wangEditor-menu-container .menu-item:hover {\\n  background-color: #f1f1f1;\\n}\\n.wangEditor-menu-container .menu-item a {\\n  display: block;\\n  text-align: center;\\n  color: #666;\\n  width: 100%;\\n  padding: 8px 0;\\n  font-size: 0.9em;\\n}\\n.wangEditor-menu-container .menu-item .selected {\\n  color: #1e88e5;\\n}\\n.wangEditor-menu-container .menu-item .active {\\n  background-color: #f1f1f1;\\n}\\n.wangEditor-menu-container .menu-item .disable {\\n  opacity: 0.5;\\n  filter: alpha(opacity=50);\\n}\\n.wangEditor-menu-container .menu-tip {\\n  display: block;\\n  position: absolute;\\n  z-index: 20;\\n  width: 60px;\\n  text-align: center;\\n  background-color: #666;\\n  color: #fff;\\n  padding: 7px 0;\\n  font-size: 12px;\\n  top: 100%;\\n  left: 50%;\\n  margin-left: -30px;\\n  border-radius: 2px;\\n  box-shadow: 1px 1px 5px #999;\\n  display: none;\\n  /*// 小三角\\n        .tip-triangle {\\n            display: block;\\n            position: absolute;\\n            width: 0;\\n            height: 0;\\n            border:5px solid;\\n            border-color: transparent transparent @fore-color transparent;\\n            top: -10px;\\n            left: 50%;\\n            margin-left: -5px;\\n        }*/\\n}\\n.wangEditor-menu-container .menu-tip-40 {\\n  width: 40px;\\n  margin-left: -20px;\\n}\\n.wangEditor-menu-container .menu-tip-50 {\\n  width: 50px;\\n  margin-left: -25px;\\n}\\n.wangEditor-menu-shadow {\\n  /*border-bottom-width: 0;*/\\n  border-bottom: 1px\\\\9 solid\\\\9 #f1f1f1\\\\9;\\n  box-shadow: 0 1px 3px #999;\\n}\\n.wangEditor-container .wangEditor-txt {\\n  width: 100%;\\n  text-align: left;\\n  padding: 15px;\\n  padding-top: 0;\\n  margin-top: 5px;\\n  overflow-y: auto;\\n}\\n.wangEditor-container .wangEditor-txt p,\\n.wangEditor-container .wangEditor-txt h1,\\n.wangEditor-container .wangEditor-txt h2,\\n.wangEditor-container .wangEditor-txt h3,\\n.wangEditor-container .wangEditor-txt h4,\\n.wangEditor-container .wangEditor-txt h5 {\\n  margin: 10px 0;\\n  line-height: 1.8;\\n}\\n.wangEditor-container .wangEditor-txt p *,\\n.wangEditor-container .wangEditor-txt h1 *,\\n.wangEditor-container .wangEditor-txt h2 *,\\n.wangEditor-container .wangEditor-txt h3 *,\\n.wangEditor-container .wangEditor-txt h4 *,\\n.wangEditor-container .wangEditor-txt h5 * {\\n  line-height: 1.8;\\n}\\n.wangEditor-container .wangEditor-txt ul,\\n.wangEditor-container .wangEditor-txt ol {\\n  padding-left: 20px;\\n}\\n.wangEditor-container .wangEditor-txt img {\\n  cursor: pointer;\\n}\\n.wangEditor-container .wangEditor-txt img.clicked {\\n  box-shadow: 1px 1px 10px #999;\\n}\\n.wangEditor-container .wangEditor-txt table.clicked {\\n  box-shadow: 1px 1px 10px #999;\\n}\\n.wangEditor-container .wangEditor-txt pre code {\\n  line-height: 1.5;\\n}\\n.wangEditor-container .wangEditor-txt:focus {\\n  outline: none;\\n}\\n.wangEditor-container .wangEditor-txt blockquote {\\n  display: block;\\n  border-left: 8px solid #d0e5f2;\\n  padding: 5px 10px;\\n  margin: 10px 0;\\n  line-height: 1.4;\\n  font-size: 100%;\\n  background-color: #f1f1f1;\\n}\\n.wangEditor-container .wangEditor-txt table {\\n  border: none;\\n  border-collapse: collapse;\\n}\\n.wangEditor-container .wangEditor-txt table td,\\n.wangEditor-container .wangEditor-txt table th {\\n  border: 1px solid #999;\\n  padding: 3px 5px;\\n  min-width: 50px;\\n  height: 20px;\\n}\\n.wangEditor-container .wangEditor-txt pre {\\n  border: 1px solid #ccc;\\n  background-color: #f8f8f8;\\n  padding: 10px;\\n  margin: 5px 0px;\\n  font-size: 0.8em;\\n  border-radius: 3px;\\n}\\n.wangEditor-drop-list {\\n  display: none;\\n  position: absolute;\\n  background-color: #fff;\\n  overflow: hidden;\\n  z-index: 10;\\n  transition: height .7s;\\n  border-top: 1px solid #f1f1f1;\\n  box-shadow: 1px 3px 3px #999;\\n  border-left: 1px\\\\9 solid\\\\9 #ccc\\\\9;\\n  border-bottom: 1px\\\\9 solid\\\\9 #999\\\\9;\\n  border-right: 1px\\\\9 solid\\\\9 #999\\\\9;\\n}\\n.wangEditor-drop-list a {\\n  text-decoration: none;\\n  display: block;\\n  color: #666;\\n  padding: 3px 5px;\\n}\\n.wangEditor-drop-list a:hover {\\n  background-color: #f1f1f1;\\n}\\n.wangEditor-drop-panel,\\n.txt-toolbar {\\n  display: none;\\n  position: absolute;\\n  padding: 10px;\\n  font-size: 14px;\\n  /*border: 1px\\\\9 solid\\\\9 #cccccc\\\\9;*/\\n  background-color: #fff;\\n  z-index: 10;\\n  border-top: 2px solid #666;\\n  box-shadow: 1px 3px 3px #999;\\n  border-left: 1px\\\\9 solid\\\\9 #ccc\\\\9;\\n  border-bottom: 1px\\\\9 solid\\\\9 #999\\\\9;\\n  border-right: 1px\\\\9 solid\\\\9 #999\\\\9;\\n}\\n.wangEditor-drop-panel .tip-triangle,\\n.txt-toolbar .tip-triangle {\\n  display: block;\\n  position: absolute;\\n  width: 0;\\n  height: 0;\\n  border: 5px solid;\\n  border-color: transparent transparent #666 transparent;\\n  top: -12px;\\n  left: 50%;\\n  margin-left: -5px;\\n}\\n.wangEditor-drop-panel a,\\n.txt-toolbar a {\\n  text-decoration: none;\\n}\\n.wangEditor-drop-panel input[type=text],\\n.txt-toolbar input[type=text] {\\n  border: none;\\n  border-bottom: 1px solid #ccc;\\n  font-size: 14px;\\n  height: 20px;\\n  color: #333;\\n  padding: 3px 0;\\n}\\n.wangEditor-drop-panel input[type=text]:focus,\\n.txt-toolbar input[type=text]:focus {\\n  outline: none;\\n  border-bottom: 2px solid #1e88e5;\\n}\\n.wangEditor-drop-panel input[type=text].block,\\n.txt-toolbar input[type=text].block {\\n  display: block;\\n  width: 100%;\\n}\\n.wangEditor-drop-panel textarea,\\n.txt-toolbar textarea {\\n  border: 1px solid #ccc;\\n}\\n.wangEditor-drop-panel textarea:focus,\\n.txt-toolbar textarea:focus {\\n  outline: none;\\n  border-color: #1e88e5;\\n}\\n.wangEditor-drop-panel button,\\n.txt-toolbar button {\\n  font-size: 14px;\\n  color: #1e88e5;\\n  border: none;\\n  padding: 10px;\\n  background-color: #fff;\\n  cursor: pointer;\\n  border-radius: 3px;\\n}\\n.wangEditor-drop-panel button:hover,\\n.txt-toolbar button:hover {\\n  background-color: #f1f1f1;\\n}\\n.wangEditor-drop-panel button:focus,\\n.txt-toolbar button:focus {\\n  outline: none;\\n}\\n.wangEditor-drop-panel button.right,\\n.txt-toolbar button.right {\\n  float: right;\\n  margin-left: 10px;\\n}\\n.wangEditor-drop-panel button.gray,\\n.txt-toolbar button.gray {\\n  color: #999;\\n}\\n.wangEditor-drop-panel button.link,\\n.txt-toolbar button.link {\\n  padding: 5px 10px;\\n}\\n.wangEditor-drop-panel button.link:hover,\\n.txt-toolbar button.link:hover {\\n  background-color: #fff;\\n  text-decoration: underline;\\n}\\n.wangEditor-drop-panel .color-item,\\n.txt-toolbar .color-item {\\n  display: block;\\n  float: left;\\n  width: 25px;\\n  height: 25px;\\n  text-align: center;\\n  padding: 2px;\\n  border-radius: 2px;\\n  text-decoration: underline;\\n}\\n.wangEditor-drop-panel .color-item:hover,\\n.txt-toolbar .color-item:hover {\\n  background-color: #f1f1f1;\\n}\\n.wangEditor-drop-panel .list-menu-item,\\n.txt-toolbar .list-menu-item {\\n  display: block;\\n  float: left;\\n  color: #333;\\n  padding: 5px 5px;\\n  border-radius: 2px;\\n}\\n.wangEditor-drop-panel .list-menu-item:hover,\\n.txt-toolbar .list-menu-item:hover {\\n  background-color: #f1f1f1;\\n}\\n.wangEditor-drop-panel table.choose-table,\\n.txt-toolbar table.choose-table {\\n  border: none;\\n  border-collapse: collapse;\\n}\\n.wangEditor-drop-panel table.choose-table td,\\n.txt-toolbar table.choose-table td {\\n  border: 1px solid #ccc;\\n  width: 16px;\\n  height: 12px;\\n}\\n.wangEditor-drop-panel table.choose-table td.active,\\n.txt-toolbar table.choose-table td.active {\\n  background-color: #ccc;\\n  opacity: .5;\\n  filter: alpha(opacity=50);\\n}\\n.wangEditor-drop-panel .panel-tab .tab-container,\\n.txt-toolbar .panel-tab .tab-container {\\n  margin-bottom: 5px;\\n}\\n.wangEditor-drop-panel .panel-tab .tab-container a,\\n.txt-toolbar .panel-tab .tab-container a {\\n  display: inline-block;\\n  color: #999;\\n  text-align: center;\\n  margin: 0 5px;\\n  padding: 5px 5px;\\n}\\n.wangEditor-drop-panel .panel-tab .tab-container a.selected,\\n.txt-toolbar .panel-tab .tab-container a.selected {\\n  color: #1e88e5;\\n  border-bottom: 2px solid #1e88e5;\\n}\\n.wangEditor-drop-panel .panel-tab .content-container .content,\\n.txt-toolbar .panel-tab .content-container .content {\\n  display: none;\\n}\\n.wangEditor-drop-panel .panel-tab .content-container .content a,\\n.txt-toolbar .panel-tab .content-container .content a {\\n  display: inline-block;\\n  margin: 2px;\\n  padding: 2px;\\n  border-radius: 2px;\\n}\\n.wangEditor-drop-panel .panel-tab .content-container .content a:hover,\\n.txt-toolbar .panel-tab .content-container .content a:hover {\\n  background-color: #f1f1f1;\\n}\\n.wangEditor-drop-panel .panel-tab .content-container .selected,\\n.txt-toolbar .panel-tab .content-container .selected {\\n  display: block;\\n}\\n.wangEditor-drop-panel .panel-tab .emotion-content-container,\\n.txt-toolbar .panel-tab .emotion-content-container {\\n  height: 200px;\\n  overflow-y: auto;\\n}\\n.wangEditor-drop-panel .upload-icon-container,\\n.txt-toolbar .upload-icon-container {\\n  color: #ccc;\\n  text-align: center;\\n  margin: 20px 20px 15px 20px !important;\\n  padding: 5px !important;\\n  font-size: 65px;\\n  cursor: pointer;\\n  border: 2px dotted #f1f1f1;\\n  display: block !important;\\n}\\n.wangEditor-drop-panel .upload-icon-container:hover,\\n.txt-toolbar .upload-icon-container:hover {\\n  color: #666;\\n  border-color: #ccc;\\n}\\n.wangEditor-modal {\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  background-color: #fff;\\n  border-top: 1px solid #f1f1f1;\\n  box-shadow: 1px 3px 3px #999;\\n  border-top: 1px\\\\9 solid\\\\9 #ccc\\\\9;\\n  border-left: 1px\\\\9 solid\\\\9 #ccc\\\\9;\\n  border-bottom: 1px\\\\9 solid\\\\9 #999\\\\9;\\n  border-right: 1px\\\\9 solid\\\\9 #999\\\\9;\\n}\\n.wangEditor-modal .wangEditor-modal-close {\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  margin-top: -25px;\\n  margin-right: -25px;\\n  font-size: 1.5em;\\n  color: #666;\\n  cursor: pointer;\\n}\\n@font-face {\\n  font-family: 'icomoon';\\n  src: url('../fonts/icomoon.eot?-qdfu1s');\\n  src: url('../fonts/icomoon.eot?#iefix-qdfu1s') format('embedded-opentype'), url('../fonts/icomoon.ttf?-qdfu1s') format('truetype'), url('../fonts/icomoon.woff?-qdfu1s') format('woff'), url('../fonts/icomoon.svg?-qdfu1s#icomoon') format('svg');\\n  font-weight: normal;\\n  font-style: normal;\\n}\\n[class^=\\\"wangeditor-menu-img-\\\"],\\n[class*=\\\" wangeditor-menu-img-\\\"] {\\n  font-family: 'icomoon';\\n  speak: none;\\n  font-style: normal;\\n  font-weight: normal;\\n  font-variant: normal;\\n  text-transform: none;\\n  line-height: 1;\\n  /* Better Font Rendering =========== */\\n  -webkit-font-smoothing: antialiased;\\n  -moz-osx-font-smoothing: grayscale;\\n}\\n.wangeditor-menu-img-link:before {\\n  content: \\\"\\\\e800\\\";\\n}\\n.wangeditor-menu-img-unlink:before {\\n  content: \\\"\\\\e801\\\";\\n}\\n.wangeditor-menu-img-code:before {\\n  content: \\\"\\\\e802\\\";\\n}\\n.wangeditor-menu-img-cancel:before {\\n  content: \\\"\\\\e803\\\";\\n}\\n.wangeditor-menu-img-terminal:before {\\n  content: \\\"\\\\e804\\\";\\n}\\n.wangeditor-menu-img-angle-down:before {\\n  content: \\\"\\\\e805\\\";\\n}\\n.wangeditor-menu-img-font:before {\\n  content: \\\"\\\\e806\\\";\\n}\\n.wangeditor-menu-img-bold:before {\\n  content: \\\"\\\\e807\\\";\\n}\\n.wangeditor-menu-img-italic:before {\\n  content: \\\"\\\\e808\\\";\\n}\\n.wangeditor-menu-img-header:before {\\n  content: \\\"\\\\e809\\\";\\n}\\n.wangeditor-menu-img-align-left:before {\\n  content: \\\"\\\\e80a\\\";\\n}\\n.wangeditor-menu-img-align-center:before {\\n  content: \\\"\\\\e80b\\\";\\n}\\n.wangeditor-menu-img-align-right:before {\\n  content: \\\"\\\\e80c\\\";\\n}\\n.wangeditor-menu-img-list-bullet:before {\\n  content: \\\"\\\\e80d\\\";\\n}\\n.wangeditor-menu-img-indent-left:before {\\n  content: \\\"\\\\e80e\\\";\\n}\\n.wangeditor-menu-img-indent-right:before {\\n  content: \\\"\\\\e80f\\\";\\n}\\n.wangeditor-menu-img-list-numbered:before {\\n  content: \\\"\\\\e810\\\";\\n}\\n.wangeditor-menu-img-underline:before {\\n  content: \\\"\\\\e811\\\";\\n}\\n.wangeditor-menu-img-table:before {\\n  content: \\\"\\\\e812\\\";\\n}\\n.wangeditor-menu-img-eraser:before {\\n  content: \\\"\\\\e813\\\";\\n}\\n.wangeditor-menu-img-text-height:before {\\n  content: \\\"\\\\e814\\\";\\n}\\n.wangeditor-menu-img-brush:before {\\n  content: \\\"\\\\e815\\\";\\n}\\n.wangeditor-menu-img-pencil:before {\\n  content: \\\"\\\\e816\\\";\\n}\\n.wangeditor-menu-img-minus:before {\\n  content: \\\"\\\\e817\\\";\\n}\\n.wangeditor-menu-img-picture:before {\\n  content: \\\"\\\\e818\\\";\\n}\\n.wangeditor-menu-img-file-image:before {\\n  content: \\\"\\\\e819\\\";\\n}\\n.wangeditor-menu-img-cw:before {\\n  content: \\\"\\\\e81a\\\";\\n}\\n.wangeditor-menu-img-ccw:before {\\n  content: \\\"\\\\e81b\\\";\\n}\\n.wangeditor-menu-img-music:before {\\n  content: \\\"\\\\e911\\\";\\n}\\n.wangeditor-menu-img-play:before {\\n  content: \\\"\\\\e912\\\";\\n}\\n.wangeditor-menu-img-location:before {\\n  content: \\\"\\\\e947\\\";\\n}\\n.wangeditor-menu-img-happy:before {\\n  content: \\\"\\\\e9df\\\";\\n}\\n.wangeditor-menu-img-sigma:before {\\n  content: \\\"\\\\ea67\\\";\\n}\\n.wangeditor-menu-img-enlarge2:before {\\n  content: \\\"\\\\e98b\\\";\\n}\\n.wangeditor-menu-img-shrink2:before {\\n  content: \\\"\\\\e98c\\\";\\n}\\n.wangeditor-menu-img-newspaper:before {\\n  content: \\\"\\\\e904\\\";\\n}\\n.wangeditor-menu-img-camera:before {\\n  content: \\\"\\\\e90f\\\";\\n}\\n.wangeditor-menu-img-video-camera:before {\\n  content: \\\"\\\\e914\\\";\\n}\\n.wangeditor-menu-img-file-zip:before {\\n  content: \\\"\\\\e92b\\\";\\n}\\n.wangeditor-menu-img-stack:before {\\n  content: \\\"\\\\e92e\\\";\\n}\\n.wangeditor-menu-img-credit-card:before {\\n  content: \\\"\\\\e93f\\\";\\n}\\n.wangeditor-menu-img-address-book:before {\\n  content: \\\"\\\\e944\\\";\\n}\\n.wangeditor-menu-img-envelop:before {\\n  content: \\\"\\\\e945\\\";\\n}\\n.wangeditor-menu-img-drawer:before {\\n  content: \\\"\\\\e95c\\\";\\n}\\n.wangeditor-menu-img-download:before {\\n  content: \\\"\\\\e960\\\";\\n}\\n.wangeditor-menu-img-upload:before {\\n  content: \\\"\\\\e961\\\";\\n}\\n.wangeditor-menu-img-lock:before {\\n  content: \\\"\\\\e98f\\\";\\n}\\n.wangeditor-menu-img-unlocked:before {\\n  content: \\\"\\\\e990\\\";\\n}\\n.wangeditor-menu-img-wrench:before {\\n  content: \\\"\\\\e991\\\";\\n}\\n.wangeditor-menu-img-eye:before {\\n  content: \\\"\\\\e9ce\\\";\\n}\\n.wangeditor-menu-img-eye-blocked:before {\\n  content: \\\"\\\\e9d1\\\";\\n}\\n.wangeditor-menu-img-command:before {\\n  content: \\\"\\\\ea4e\\\";\\n}\\n.wangeditor-menu-img-font2:before {\\n  content: \\\"\\\\ea5c\\\";\\n}\\n.wangeditor-menu-img-libreoffice:before {\\n  content: \\\"\\\\eade\\\";\\n}\\n.wangeditor-menu-img-quotes-left:before {\\n  content: \\\"\\\\e977\\\";\\n}\\n.wangeditor-menu-img-strikethrough:before {\\n  content: \\\"\\\\ea65\\\";\\n}\\n.wangeditor-menu-img-desktop:before {\\n  content: \\\"\\\\f108\\\";\\n}\\n.wangeditor-menu-img-tablet:before {\\n  content: \\\"\\\\f10a\\\";\\n}\\n.wangeditor-menu-img-search-plus:before {\\n  content: \\\"\\\\f00e\\\";\\n}\\n.wangeditor-menu-img-search-minus:before {\\n  content: \\\"\\\\f010\\\";\\n}\\n.wangeditor-menu-img-trash-o:before {\\n  content: \\\"\\\\f014\\\";\\n}\\n.wangeditor-menu-img-align-justify:before {\\n  content: \\\"\\\\f039\\\";\\n}\\n.wangeditor-menu-img-arrows-v:before {\\n  content: \\\"\\\\f07d\\\";\\n}\\n.wangeditor-menu-img-sigma2:before {\\n  content: \\\"\\\\ea68\\\";\\n}\\n.wangeditor-menu-img-omega:before {\\n  content: \\\"\\\\e900\\\";\\n}\\n.wangeditor-menu-img-cancel-circle:before {\\n  content: \\\"\\\\e901\\\";\\n}\\n.hljs {\\n  display: block;\\n  overflow-x: auto;\\n  padding: 0.5em;\\n  color: #333;\\n  background: #f8f8f8;\\n  -webkit-text-size-adjust: none;\\n}\\n.hljs-comment,\\n.diff .hljs-header {\\n  color: #998;\\n  font-style: italic;\\n}\\n.hljs-keyword,\\n.css .rule .hljs-keyword,\\n.hljs-winutils,\\n.nginx .hljs-title,\\n.hljs-subst,\\n.hljs-request,\\n.hljs-status {\\n  color: #333;\\n  font-weight: bold;\\n}\\n.hljs-number,\\n.hljs-hexcolor,\\n.ruby .hljs-constant {\\n  color: #008080;\\n}\\n.hljs-string,\\n.hljs-tag .hljs-value,\\n.hljs-doctag,\\n.tex .hljs-formula {\\n  color: #d14;\\n}\\n.hljs-title,\\n.hljs-id,\\n.scss .hljs-preprocessor {\\n  color: #900;\\n  font-weight: bold;\\n}\\n.hljs-list .hljs-keyword,\\n.hljs-subst {\\n  font-weight: normal;\\n}\\n.hljs-class .hljs-title,\\n.hljs-type,\\n.vhdl .hljs-literal,\\n.tex .hljs-command {\\n  color: #458;\\n  font-weight: bold;\\n}\\n.hljs-tag,\\n.hljs-tag .hljs-title,\\n.hljs-rule .hljs-property,\\n.django .hljs-tag .hljs-keyword {\\n  color: #000080;\\n  font-weight: normal;\\n}\\n.hljs-attribute,\\n.hljs-variable,\\n.lisp .hljs-body,\\n.hljs-name {\\n  color: #008080;\\n}\\n.hljs-regexp {\\n  color: #009926;\\n}\\n.hljs-symbol,\\n.ruby .hljs-symbol .hljs-string,\\n.lisp .hljs-keyword,\\n.clojure .hljs-keyword,\\n.scheme .hljs-keyword,\\n.tex .hljs-special,\\n.hljs-prompt {\\n  color: #990073;\\n}\\n.hljs-built_in {\\n  color: #0086b3;\\n}\\n.hljs-preprocessor,\\n.hljs-pragma,\\n.hljs-pi,\\n.hljs-doctype,\\n.hljs-shebang,\\n.hljs-cdata {\\n  color: #999;\\n  font-weight: bold;\\n}\\n.hljs-deletion {\\n  background: #fdd;\\n}\\n.hljs-addition {\\n  background: #dfd;\\n}\\n.diff .hljs-change {\\n  background: #0086b3;\\n}\\n.hljs-chunk {\\n  color: #aaa;\\n}\\n\"],\"sourceRoot\":\"webpack://\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.0.25.0@css-loader?sourceMap!../~/.2.1.23@wangeditor/dist/css/wangEditor.css\n// module id = 156\n// module chunks = 1 2 16","module.exports = __webpack_public_path__ + \"static/fonts/icomoon.0a74426.eot\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/.2.1.23@wangeditor/dist/fonts/icomoon.eot\n// module id = 157\n// module chunks = 1 2 16","module.exports = __webpack_public_path__ + \"static/fonts/icomoon.0a74426.eot\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/.2.1.23@wangeditor/dist/fonts/icomoon.eot?-qdfu1s\n// module id = 158\n// module chunks = 1 2 16","module.exports = __webpack_public_path__ + \"static/fonts/icomoon.9f5fd7b.ttf\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/.2.1.23@wangeditor/dist/fonts/icomoon.ttf?-qdfu1s\n// module id = 159\n// module chunks = 1 2 16","module.exports = __webpack_public_path__ + \"static/fonts/icomoon.7d4ac7d.woff\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/.2.1.23@wangeditor/dist/fonts/icomoon.woff?-qdfu1s\n// module id = 160\n// module chunks = 1 2 16","module.exports = __webpack_public_path__ + \"static/img/icomoon.f558046.svg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/.2.1.23@wangeditor/dist/fonts/icomoon.svg?-qdfu1s\n// module id = 161\n// module chunks = 1 2 16","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.0.25.0@css-loader/index.js?sourceMap!../../../node_modules/.10.3.0@vue-loader/lib/style-rewriter.js?id=data-v-40fe4466!../../../node_modules/.1.0.44@vux-loader/src/style-loader.js!../../../node_modules/.10.3.0@vue-loader/lib/selector.js?type=styles&index=0!./wangeditor.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/.1.0.0@vue-style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/.0.25.0@css-loader/index.js?sourceMap!../../../node_modules/.10.3.0@vue-loader/lib/style-rewriter.js?id=data-v-40fe4466!../../../node_modules/.1.0.44@vux-loader/src/style-loader.js!../../../node_modules/.10.3.0@vue-loader/lib/selector.js?type=styles&index=0!./wangeditor.vue\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/.0.25.0@css-loader/index.js?sourceMap!../../../node_modules/.10.3.0@vue-loader/lib/style-rewriter.js?id=data-v-40fe4466!../../../node_modules/.1.0.44@vux-loader/src/style-loader.js!../../../node_modules/.10.3.0@vue-loader/lib/selector.js?type=styles&index=0!./wangeditor.vue\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.1.0.1@extract-text-webpack-plugin/loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!./~/.1.0.0@vue-style-loader!./~/.0.25.0@css-loader?sourceMap!./~/.10.3.0@vue-loader/lib/style-rewriter.js?id=data-v-40fe4466!./~/.1.0.44@vux-loader/src/style-loader.js!./~/.10.3.0@vue-loader/lib/selector.js?type=styles&index=0!./src/components/tools/wangeditor.vue\n// module id = 162\n// module chunks = 1 2 16","\n/* styles */\nrequire(\"!!../../../node_modules/.1.0.1@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../../node_modules/.10.3.0@vue-loader/lib/style-rewriter?id=data-v-40fe4466!../../../node_modules/.1.0.44@vux-loader/src/style-loader.js!../../../node_modules/.10.3.0@vue-loader/lib/selector?type=styles&index=0!./wangeditor.vue\")\n\nvar Component = require(\"!../../../node_modules/.10.3.0@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/.1.0.44@vux-loader/src/script-loader.js!../../../node_modules/.10.3.0@vue-loader/lib/selector?type=script&index=0!./wangeditor.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/.10.3.0@vue-loader/lib/template-compiler?id=data-v-40fe4466!../../../node_modules/.1.0.44@vux-loader/src/template-loader.js!../../../node_modules/.10.3.0@vue-loader/lib/selector?type=template&index=0!./wangeditor.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tools/wangeditor.vue\n// module id = 165\n// module chunks = 1 2 16","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    style: ({\n      width: _vm.editorShow_width + 'px',\n      backgroundColor: _vm.editorShow_color\n    })\n  }, [_c('div', {\n    style: ({\n      height: _vm.editorShow_height + 'px',\n      backgroundColor: _vm.editorShow_color\n    }),\n    attrs: {\n      \"id\": \"wangeditor\"\n    }\n  })])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.10.3.0@vue-loader/lib/template-compiler.js?id=data-v-40fe4466!./~/.1.0.44@vux-loader/src/template-loader.js!./~/.10.3.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/tools/wangeditor.vue\n// module id = 167\n// module chunks = 1 2 16","//\n//\n//\n//\n//\n//\n//\n\r\nrequire('wangeditor/dist/css/wangEditor.css')\r\nimport wangeditor from 'wangeditor'\r\nimport Qiniu from 'qiniu-js/dist/qiniu.js'\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            editor:'',\r\n            content: '',\r\n            updateImageParam:\r\n            {\r\n                uri: \"http://truesign-app.oss-cn-beijing.aliyuncs.com\",\r\n                param:{\r\n                    type:'oss',\r\n                    request_uri:'http://iamsee.com:5001/common/updateimg2ossByClientOneditor?app=o_app'\r\n                },\r\n//                param: {\r\n//                    expire: 180000000001493300000,\r\n//                    name: \"10.jpg\",\r\n//                    key: \"editor/1.gif\",\r\n//                    policy: \"eyJleHBpcmF0aW9uIjoiMjAxNy0wNC0yN1QyMTo0NDo0NVoiLCJjb25kaXRpb25zIjpbWyJjb250ZW50LWxlbmd0aC1yYW5nZSIsMCwxMDQ4NTc2MDAwXSxbInN0YXJ0cy13aXRoIiwiJGtleSIsImVkaXRvclwvMWNhM2ZmNTkxMzM0YTllZmJlYTEzNzQzODVkZjYyMWQuZ2lmIl1dfQ==\",\r\n//                    OSSAccessKeyId: \"82risUcDiLqqWZky\",\r\n//                    success_action_status: \"200\",\r\n//                    callback: \"eyJjYWxsYmFja1VybCI6Imh0dHA6XC9cL2lhbXNlZS5jb206NTAwMVwvY29tbW9uXC9jYl91cGRhdGVpbWcyb3NzQnlDbGllbnQiLCJjYWxsYmFja0JvZHkiOiJ0b2tlbj0mZmlsZV9uYW1lPWVkaXRvclwvMWNhM2ZmNTkxMzM0YTllZmJlYTEzNzQzODVkZjYyMWQuZ2lmJmltZ193aWR0aD0ke2ltYWdlSW5mby53aWR0aH0ifQ==\",\r\n//                    signature: \"PZVU6dCrHb10yE2CPp+GsAUNwCk=\"\r\n//                },\r\n                status: 1,\r\n                sys_msg: \"oss\"\r\n            },\r\n            alioss_param:{\r\n                AccessKeyId : '82risUcDiLqqWZky',\r\n                AccessKeySecret : 'gAiFRb4JIBEYsb7J1HarWVqiNf0tCm',\r\n                region:'oss-cn-beijing.aliyuncs.com',\r\n                bucket:'truesign-app'\r\n\r\n            },\r\n        }\r\n    },\r\n    props:{\r\n        editorShow_width:{\r\n            type: String,\r\n            default: '100%',\r\n            required: false,\r\n\r\n        },\r\n        editorShow_height:{\r\n            type: String,\r\n            default: '200',\r\n            required: false,\r\n\r\n        },\r\n        editorShow_color:{\r\n            type: String,\r\n            default: '#f5f5f5',\r\n            required: false,\r\n\r\n        },\r\n\r\n\r\n    },\r\n    computed: {\r\n    },\r\n\r\n    mounted() {\r\n        this.editor =  new wangEditor('wangeditor');\r\n        this.initEditorConfig()\r\n        this.createEditor()\r\n        $('.wangEditor-container').css('background-color',this.editorShow_color)\r\n        $('.wangEditor-menu-container').css('background-color',this.editorShow_color)\r\n\r\n    },\r\n    methods: {\r\n        initEditorConfig(){\r\n            var vm = this\r\n            this.editor.config.withCredentials = false;\r\n\r\n            this.editor.config.uploadImgUrl = this.updateImageParam.uri\r\n//            this.editor.config.uploadImgUrl = 'http://www.baidu.com'\r\n            this.editor.config.uploadParams = this.updateImageParam.param\r\n            this.editor.config.uploadImgFileName = 'file'\r\n\r\n            this.editor.config.menus =\r\n                [\r\n                    'source',\r\n                    '|',\r\n                    'bold',\r\n                    'underline',\r\n                    'italic',\r\n                    'strikethrough',\r\n                    'eraser',\r\n                    'forecolor',\r\n                    'bgcolor',\r\n                    '|',\r\n                    'quote',\r\n                    'fontfamily',\r\n                    'fontsize',\r\n                    'head',\r\n                    'unorderlist',\r\n                    'orderlist',\r\n                    'alignleft',\r\n                    'aligncenter',\r\n                    'alignright',\r\n                    '|',\r\n                    'link',\r\n                    'unlink',\r\n                    'table',\r\n                    'emotion',\r\n                    '|',\r\n                    'img',\r\n                    'video',\r\n                    'location',\r\n                    'insertcode',\r\n                    '|',\r\n                    'undo',\r\n                    'redo',\r\n                    'fullscreen'\r\n                ];\r\n            this.editor.config.uploadImgFns.onload = function (resultText, xhr) {\r\n                vm.uploadOnLoad(resultText, xhr)\r\n            }\r\n            // 配置 onchange 事件\r\n            this.editor.onchange = function () {\r\n                // 编辑区域内容变化时，实时打印出当前内容\r\n                vm.editorchange()\r\n            };\r\n//            this.editor.config.customUpload = true;  // 设置自定义上传的开关\r\n//            this.editor.config.customUploadInit = this.uploadInit  // 配置自定义上传初始化事件，uploadInit方法在上面定义了\r\n        },\r\n        createEditor() {\r\n\r\n            this.editor.create();\r\n\r\n\r\n        },\r\n        uploadInit(){\r\n            console.log('uploadInit')\r\n            // this 即 editor 对象\r\n            var editor = this.editor;\r\n            // 触发选择文件的按钮的id\r\n            var btnId = editor.customUploadBtnId;\r\n            // 触发选择文件的按钮的父容器的id\r\n            var containerId = editor.customUploadContainerId;\r\n\r\n            var uploader = Qiniu.uploader()\r\n\r\n\r\n        },\r\n        uploadOnLoad(resultText, xhr){\r\n            resultText = JSON.parse(resultText)\r\n            let file_path = resultText.file_path\r\n            let originalName = this.editor.uploadImgOriginalName || '';\r\n            this.editor.command(null, 'insertHtml', '<div><img src=\"' + file_path + '\" alt=\"' + originalName + '\" style=\"width:30%;\"/></div>');\r\n        },\r\n        editorchange(){\r\n//            console.log('this.editor.$txt.html()',this.editor.$txt.html());\r\n//            console.log('this.editor.$txt.text()',this.editor.$txt.text());\r\n            var editor_content = {\r\n                text:this.editor.$txt.text(),\r\n                html:this.editor.$txt.html()\r\n            }\r\n            this.$root.eventHub.$emit('editor_content',editor_content)\r\n        },\r\n        formatContent(content) {\r\n            // handle\r\n            // ...\r\n            this.content = content\r\n            this.outputContent()\r\n        },\r\n        outputContent() {\r\n            this.$emit('input', this.content)\r\n        }\r\n    },\r\n    components: {}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/tools/wangeditor.vue","/*!\n * qiniu-js-sdk v1.0.19\n *\n * Copyright 2015 by Qiniu\n * Released under GPL V2 License.\n *\n * GitHub: http://github.com/qiniu/js-sdk\n *\n * Date: 2017-3-15\n*/\n\n/*global plupload ,mOxie*/\n/*global ActiveXObject */\n/*exported Qiniu */\n/*exported QiniuJsSDK */\n\n;(function( global ){\n\n/**\n * Creates new cookie or removes cookie with negative expiration\n * @param  key       The key or identifier for the store\n * @param  value     Contents of the store\n * @param  exp       Expiration - creation defaults to 30 days\n */\nfunction createCookie(key, value, exp) {\n    var date = new Date();\n    date.setTime(date.getTime() + (exp * 24 * 60 * 60 * 1000));\n    var expires = \"; expires=\" + date.toGMTString();\n    document.cookie = key + \"=\" + value + expires + \"; path=/\";\n}\n\n/**\n * Returns contents of cookie\n * @param  key       The key or identifier for the store\n */\nfunction readCookie(key) {\n    var nameEQ = key + \"=\";\n    var ca = document.cookie.split(';');\n    for (var i = 0, max = ca.length; i < max; i++) {\n        var c = ca[i];\n        while (c.charAt(0) === ' ') {\n            c = c.substring(1, c.length);\n        }\n        if (c.indexOf(nameEQ) === 0) {\n            return c.substring(nameEQ.length, c.length);\n        }\n    }\n    return null;\n}\n\n// if current browser is not support localStorage\n// use cookie to make a polyfill\nif ( !window.localStorage ) {\n    window.localStorage = {\n        setItem: function (key, value) {\n            createCookie(key, value, 30);\n        },\n        getItem: function (key) {\n            return readCookie(key);\n        },\n        removeItem: function (key) {\n            createCookie(key, '', -1);\n        }\n    };\n}\n\nfunction QiniuJsSDK() {\n\n    var that = this;\n\n    /**\n     * detect IE version\n     * if current browser is not IE\n     *     it will return false\n     * else\n     *     it will return version of current IE browser\n     * @return {Number|Boolean} IE version or false\n     */\n    this.detectIEVersion = function() {\n        var v = 4,\n            div = document.createElement('div'),\n            all = div.getElementsByTagName('i');\n        while (\n            div.innerHTML = '<!--[if gt IE ' + v + ']><i></i><![endif]-->',\n            all[0]\n        ) {\n            v++;\n        }\n        return v > 4 ? v : false;\n    };\n\n    var logger = {\n        MUTE: 0,\n        FATA: 1,\n        ERROR: 2,\n        WARN: 3,\n        INFO: 4,\n        DEBUG: 5,\n        TRACE: 6,\n        level: 0\n    };\n\n    function log(type, args){\n        var header = \"[qiniu-js-sdk][\"+type+\"]\";\n        var msg = header;\n        for (var i = 0; i < args.length; i++) {\n            if (typeof args[i] === \"string\") {\n                msg += \" \" + args[i];\n            } else {\n                msg += \" \" + that.stringifyJSON(args[i]);\n            }\n        }\n        if (that.detectIEVersion()) {\n            // http://stackoverflow.com/questions/5538972/console-log-apply-not-working-in-ie9\n            //var log = Function.prototype.bind.call(console.log, console);\n            //log.apply(console, args);\n            console.log(msg);\n        }else{\n            args.unshift(header);\n            console.log.apply(console, args);\n        }\n        if (document.getElementById('qiniu-js-sdk-log')) {\n            document.getElementById('qiniu-js-sdk-log').innerHTML += '<p>'+msg+'</p>';\n        }\n    }\n\n    function makeLogFunc(code){\n        var func = code.toLowerCase();\n        logger[func] = function(){\n            // logger[func].history = logger[func].history || [];\n            // logger[func].history.push(arguments);\n            if(window.console && window.console.log && logger.level>=logger[code]){\n                var args = Array.prototype.slice.call(arguments);\n                log(func,args);\n            }\n        };\n    }\n\n    for (var property in logger){\n        if (logger.hasOwnProperty(property) && (typeof logger[property]) === \"number\" && !logger.hasOwnProperty(property.toLowerCase())) {\n            makeLogFunc(property);\n        }\n    }\n\n\n    var qiniuUploadUrl;\n    if (window.location.protocol === 'https:') {\n        qiniuUploadUrl = 'https://up.qbox.me';\n    } else {\n        qiniuUploadUrl = 'http://upload.qiniu.com';\n    }\n\n    /**\n     * qiniu upload urls\n     * 'qiniuUploadUrls' is used to change target when current url is not avaliable\n     * @type {Array}\n     */\n    var qiniuUploadUrls = [\n        \"http://upload.qiniu.com\",\n        \"http://up.qiniu.com\"\n    ];\n\n    var qiniuUpHosts = {\n       \"http\": [\n           \"http://upload.qiniu.com\",\n           \"http://up.qiniu.com\"\n       ],\n       \"https\": [\n           \"https://up.qbox.me\"\n       ]\n    };\n\n    var changeUrlTimes = 0;\n\n    /**\n     * reset upload url\n     * if current page protocal is https\n     *     it will always return 'https://up.qbox.me'\n     * else\n     *     it will set 'qiniuUploadUrl' value with 'qiniuUploadUrls' looply\n     */\n    this.resetUploadUrl = function(){\n\tvar hosts = window.location.protocol === 'https:' ? qiniuUpHosts.https : qiniuUpHosts.http;\n\tvar i = changeUrlTimes % hosts.length;\n\tqiniuUploadUrl = hosts[i];\n\tchangeUrlTimes++;\n\tlogger.debug('resetUploadUrl: '+qiniuUploadUrl);\n    };\n\n    // this.resetUploadUrl();\n\n\n    /**\n     * is image\n     * @param  {String}  url of a file\n     * @return {Boolean} file is a image or not\n     */\n    this.isImage = function(url) {\n        url = url.split(/[?#]/)[0];\n        return (/\\.(png|jpg|jpeg|gif|bmp)$/i).test(url);\n    };\n\n    /**\n     * get file extension\n     * @param  {String} filename\n     * @return {String} file extension\n     * @example\n     *     input: test.txt\n     *     output: txt\n     */\n    this.getFileExtension = function(filename) {\n        var tempArr = filename.split(\".\");\n        var ext;\n        if (tempArr.length === 1 || (tempArr[0] === \"\" && tempArr.length === 2)) {\n            ext = \"\";\n        } else {\n            ext = tempArr.pop().toLowerCase(); //get the extension and make it lower-case\n        }\n        return ext;\n    };\n\n    /**\n     * encode string by utf8\n     * @param  {String} string to encode\n     * @return {String} encoded string\n     */\n    this.utf8_encode = function(argString) {\n        // http://kevin.vanzonneveld.net\n        // +   original by: Webtoolkit.info (http://www.webtoolkit.info/)\n        // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n        // +   improved by: sowberry\n        // +    tweaked by: Jack\n        // +   bugfixed by: Onno Marsman\n        // +   improved by: Yves Sucaet\n        // +   bugfixed by: Onno Marsman\n        // +   bugfixed by: Ulrich\n        // +   bugfixed by: Rafal Kukawski\n        // +   improved by: kirilloid\n        // +   bugfixed by: kirilloid\n        // *     example 1: this.utf8_encode('Kevin van Zonneveld');\n        // *     returns 1: 'Kevin van Zonneveld'\n\n        if (argString === null || typeof argString === 'undefined') {\n            return '';\n        }\n\n        var string = (argString + ''); // .replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n        var utftext = '',\n            start, end, stringl = 0;\n\n        start = end = 0;\n        stringl = string.length;\n        for (var n = 0; n < stringl; n++) {\n            var c1 = string.charCodeAt(n);\n            var enc = null;\n\n            if (c1 < 128) {\n                end++;\n            } else if (c1 > 127 && c1 < 2048) {\n                enc = String.fromCharCode(\n                    (c1 >> 6) | 192, (c1 & 63) | 128\n                );\n            } else if (c1 & 0xF800 ^ 0xD800 > 0) {\n                enc = String.fromCharCode(\n                    (c1 >> 12) | 224, ((c1 >> 6) & 63) | 128, (c1 & 63) | 128\n                );\n            } else { // surrogate pairs\n                if (c1 & 0xFC00 ^ 0xD800 > 0) {\n                    throw new RangeError('Unmatched trail surrogate at ' + n);\n                }\n                var c2 = string.charCodeAt(++n);\n                if (c2 & 0xFC00 ^ 0xDC00 > 0) {\n                    throw new RangeError('Unmatched lead surrogate at ' + (n - 1));\n                }\n                c1 = ((c1 & 0x3FF) << 10) + (c2 & 0x3FF) + 0x10000;\n                enc = String.fromCharCode(\n                    (c1 >> 18) | 240, ((c1 >> 12) & 63) | 128, ((c1 >> 6) & 63) | 128, (c1 & 63) | 128\n                );\n            }\n            if (enc !== null) {\n                if (end > start) {\n                    utftext += string.slice(start, end);\n                }\n                utftext += enc;\n                start = end = n + 1;\n            }\n        }\n\n        if (end > start) {\n            utftext += string.slice(start, stringl);\n        }\n\n        return utftext;\n    };\n\n    this.base64_decode = function (data) {\n        // http://kevin.vanzonneveld.net\n        // +   original by: Tyler Akins (http://rumkin.com)\n        // +   improved by: Thunder.m\n        // +      input by: Aman Gupta\n        // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n        // +   bugfixed by: Onno Marsman\n        // +   bugfixed by: Pellentesque Malesuada\n        // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n        // +      input by: Brett Zamir (http://brett-zamir.me)\n        // +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n        // *     example 1: base64_decode('S2V2aW4gdmFuIFpvbm5ldmVsZA==');\n        // *     returns 1: 'Kevin van Zonneveld'\n        // mozilla has this native\n        // - but breaks in 2.0.0.12!\n        //if (typeof this.window['atob'] == 'function') {\n        //    return atob(data);\n        //}\n        var b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n        var o1, o2, o3, h1, h2, h3, h4, bits, i = 0,\n        ac = 0,\n        dec = \"\",\n        tmp_arr = [];\n\n        if (!data) {\n            return data;\n        }\n\n        data += '';\n\n        do { // unpack four hexets into three octets using index points in b64\n            h1 = b64.indexOf(data.charAt(i++));\n            h2 = b64.indexOf(data.charAt(i++));\n            h3 = b64.indexOf(data.charAt(i++));\n            h4 = b64.indexOf(data.charAt(i++));\n\n            bits = h1 << 18 | h2 << 12 | h3 << 6 | h4;\n\n            o1 = bits >> 16 & 0xff;\n            o2 = bits >> 8 & 0xff;\n            o3 = bits & 0xff;\n\n            if (h3 === 64) {\n                tmp_arr[ac++] = String.fromCharCode(o1);\n            } else if (h4 === 64) {\n                tmp_arr[ac++] = String.fromCharCode(o1, o2);\n            } else {\n                tmp_arr[ac++] = String.fromCharCode(o1, o2, o3);\n            }\n        } while (i < data.length);\n\n        dec = tmp_arr.join('');\n\n        return dec;\n    };\n\n    /**\n     * encode data by base64\n     * @param  {String} data to encode\n     * @return {String} encoded data\n     */\n    this.base64_encode = function(data) {\n        // http://kevin.vanzonneveld.net\n        // +   original by: Tyler Akins (http://rumkin.com)\n        // +   improved by: Bayron Guevara\n        // +   improved by: Thunder.m\n        // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n        // +   bugfixed by: Pellentesque Malesuada\n        // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n        // -    depends on: this.utf8_encode\n        // *     example 1: this.base64_encode('Kevin van Zonneveld');\n        // *     returns 1: 'S2V2aW4gdmFuIFpvbm5ldmVsZA=='\n        // mozilla has this native\n        // - but breaks in 2.0.0.12!\n        //if (typeof this.window['atob'] == 'function') {\n        //    return atob(data);\n        //}\n        var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n        var o1, o2, o3, h1, h2, h3, h4, bits, i = 0,\n            ac = 0,\n            enc = '',\n            tmp_arr = [];\n\n        if (!data) {\n            return data;\n        }\n\n        data = this.utf8_encode(data + '');\n\n        do { // pack three octets into four hexets\n            o1 = data.charCodeAt(i++);\n            o2 = data.charCodeAt(i++);\n            o3 = data.charCodeAt(i++);\n\n            bits = o1 << 16 | o2 << 8 | o3;\n\n            h1 = bits >> 18 & 0x3f;\n            h2 = bits >> 12 & 0x3f;\n            h3 = bits >> 6 & 0x3f;\n            h4 = bits & 0x3f;\n\n            // use hexets to index into b64, and append result to encoded string\n            tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\n        } while (i < data.length);\n\n        enc = tmp_arr.join('');\n\n        switch (data.length % 3) {\n            case 1:\n                enc = enc.slice(0, -2) + '==';\n                break;\n            case 2:\n                enc = enc.slice(0, -1) + '=';\n                break;\n        }\n\n        return enc;\n    };\n\n    /**\n     * encode string in url by base64\n     * @param {String} string in url\n     * @return {String} encoded string\n     */\n    this.URLSafeBase64Encode = function(v) {\n        v = this.base64_encode(v);\n        return v.replace(/\\//g, '_').replace(/\\+/g, '-');\n    };\n\n    this.URLSafeBase64Decode = function(v) {\n        v = v.replace(/_/g, '/').replace(/-/g, '+');\n        return this.base64_decode(v);\n    };\n\n    // TODO: use mOxie\n    /**\n     * craete object used to AJAX\n     * @return {Object}\n     */\n    this.createAjax = function(argument) {\n        var xmlhttp = {};\n        if (window.XMLHttpRequest) {\n            xmlhttp = new XMLHttpRequest();\n        } else {\n            xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\n        }\n        return xmlhttp;\n    };\n\n    // TODO: enhance IE compatibility\n    /**\n     * parse json string to javascript object\n     * @param  {String} json string\n     * @return {Object} object\n     */\n    this.parseJSON = function(data) {\n        // Attempt to parse using the native JSON parser first\n        if (window.JSON && window.JSON.parse) {\n            return window.JSON.parse(data);\n        }\n\n        //var rx_one = /^[\\],:{}\\s]*$/,\n        //    rx_two = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g,\n        //    rx_three = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g,\n        //    rx_four = /(?:^|:|,)(?:\\s*\\[)+/g,\n        var    rx_dangerous = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n\n        //var json;\n\n        var text = String(data);\n        rx_dangerous.lastIndex = 0;\n        if(rx_dangerous.test(text)){\n            text = text.replace(rx_dangerous, function(a){\n               return '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n            });\n        }\n\n        // todo 使用一下判断,增加安全性\n        //if (\n        //    rx_one.test(\n        //        text\n        //            .replace(rx_two, '@')\n        //            .replace(rx_three, ']')\n        //            .replace(rx_four, '')\n        //    )\n        //) {\n        //    return eval('(' + text + ')');\n        //}\n\n        return eval('('+text+')');\n    };\n\n    /**\n     * parse javascript object to json string\n     * @param  {Object} object\n     * @return {String} json string\n     */\n    this.stringifyJSON = function(obj) {\n        // Attempt to parse using the native JSON parser first\n        if (window.JSON && window.JSON.stringify) {\n            return window.JSON.stringify(obj);\n        }\n        switch (typeof (obj)) {\n            case 'string':\n                return '\"' + obj.replace(/([\"\\\\])/g, '\\\\$1') + '\"';\n            case 'array':\n                return '[' + obj.map(that.stringifyJSON).join(',') + ']';\n            case 'object':\n                if (obj instanceof Array) {\n                    var strArr = [];\n                    var len = obj.length;\n                    for (var i = 0; i < len; i++) {\n                        strArr.push(that.stringifyJSON(obj[i]));\n                    }\n                    return '[' + strArr.join(',') + ']';\n                } else if (obj === null) {\n                    return 'null';\n                } else {\n                    var string = [];\n                    for (var property in obj) {\n                        if (obj.hasOwnProperty(property)) {\n                            string.push(that.stringifyJSON(property) + ':' + that.stringifyJSON(obj[property]));\n                        }\n                    }\n                    return '{' + string.join(',') + '}';\n                }\n                break;\n            case 'number':\n                return obj;\n            case false:\n                return obj;\n            case 'boolean':\n                return obj;\n        }\n    };\n\n    /**\n     * trim space beside text\n     * @param  {String} untrimed string\n     * @return {String} trimed string\n     */\n    this.trim = function(text) {\n        return text === null ? \"\" : text.replace(/^\\s+|\\s+$/g, '');\n    };\n\n    /**\n     * create a uploader by QiniuJsSDK\n     * @param  {object} options to create a new uploader\n     * @return {object} uploader\n     */\n    this.uploader = function(op) {\n\n        /********** inner function define start **********/\n\n        // according the different condition to reset chunk size\n        // and the upload strategy according with the chunk size\n        // when chunk size is zero will cause to direct upload\n        // see the statement binded on 'BeforeUpload' event\n        var reset_chunk_size = function() {\n            var ie = that.detectIEVersion();\n            var BLOCK_BITS, MAX_CHUNK_SIZE, chunk_size;\n            // case Safari 5、Windows 7、iOS 7 set isSpecialSafari to true\n            var isSpecialSafari = (mOxie.Env.browser === \"Safari\" && mOxie.Env.version <= 5 && mOxie.Env.os === \"Windows\" && mOxie.Env.osVersion === \"7\") || (mOxie.Env.browser === \"Safari\" && mOxie.Env.os === \"iOS\" && mOxie.Env.osVersion === \"7\");\n            // case IE 9-，chunk_size is not empty and flash is included in runtimes\n            // set op.chunk_size to zero\n            //if (ie && ie < 9 && op.chunk_size && op.runtimes.indexOf('flash') >= 0) {\n            if (ie && ie < 9 && op.chunk_size && op.runtimes.indexOf('flash') >= 0) {\n                //  link: http://www.plupload.com/docs/Frequently-Asked-Questions#when-to-use-chunking-and-when-not\n                //  when plupload chunk_size setting is't null ,it cause bug in ie8/9  which runs  flash runtimes (not support html5) .\n                op.chunk_size = 0;\n            } else if (isSpecialSafari) {\n                // win7 safari / iOS7 safari have bug when in chunk upload mode\n                // reset chunk_size to 0\n                // disable chunk in special version safari\n                op.chunk_size = 0;\n            } else {\n                BLOCK_BITS = 20;\n                MAX_CHUNK_SIZE = 4 << BLOCK_BITS; //4M\n\n                chunk_size = plupload.parseSize(op.chunk_size);\n                if (chunk_size > MAX_CHUNK_SIZE) {\n                    op.chunk_size = MAX_CHUNK_SIZE;\n                }\n                // qiniu service  max_chunk_size is 4m\n                // reset chunk_size to max_chunk_size(4m) when chunk_size > 4m\n            }\n            // if op.chunk_size set 0 will be cause to direct upload\n        };\n\n        var getHosts = function(hosts) {\n            var result = [];\n            for (var i = 0; i < hosts.length; i++) {\n                var host = hosts[i];\n                if (host.indexOf('-H') === 0) {\n                    result.push(host.split(' ')[2]);\n                } else {\n                    result.push(host);\n                }\n            }\n            return result;\n        };\n\n        var getPutPolicy = function (uptoken) {\n            var segments = uptoken.split(\":\");\n            var ak = segments[0];\n            var putPolicy = that.parseJSON(that.URLSafeBase64Decode(segments[2]));\n            putPolicy.ak = ak;\n            if (putPolicy.scope.indexOf(\":\") >= 0) {\n                putPolicy.bucket = putPolicy.scope.split(\":\")[0];\n                putPolicy.key = putPolicy.scope.split(\":\")[1];\n            } else {\n                putPolicy.bucket = putPolicy.scope;\n            }\n            return putPolicy;\n        };\n\n        var getUpHosts = function(uptoken) {\n            var putPolicy = getPutPolicy(uptoken);\n            // var uphosts_url = \"//uc.qbox.me/v1/query?ak=\"+ak+\"&bucket=\"+putPolicy.scope;\n            // IE 9- is not support protocal relative url\n            var uphosts_url = window.location.protocol + \"//uc.qbox.me/v1/query?ak=\" + putPolicy.ak + \"&bucket=\" + putPolicy.bucket;\n            logger.debug(\"putPolicy: \", putPolicy);\n            logger.debug(\"get uphosts from: \", uphosts_url);\n            var ie = that.detectIEVersion();\n            var ajax;\n            if (ie && ie <= 9) {\n                ajax = new mOxie.XMLHttpRequest();\n                mOxie.Env.swf_url = op.flash_swf_url;\n            }else{\n                ajax = that.createAjax();\n            }\n            ajax.open('GET', uphosts_url, false);\n            var onreadystatechange = function(){\n                logger.debug(\"ajax.readyState: \", ajax.readyState);\n                if (ajax.readyState === 4) {\n                    logger.debug(\"ajax.status: \", ajax.status);\n                    if (ajax.status < 400) {\n                        var res = that.parseJSON(ajax.responseText);\n                        qiniuUpHosts.http = getHosts(res.http.up);\n                        qiniuUpHosts.https = getHosts(res.https.up);\n                        logger.debug(\"get new uphosts: \", qiniuUpHosts);\n                        that.resetUploadUrl();\n                    } else {\n                        logger.error(\"get uphosts error: \", ajax.responseText);\n                    }\n                }\n            };\n            if (ie && ie <= 9) {\n                ajax.bind('readystatechange', onreadystatechange);\n            }else{\n                ajax.onreadystatechange = onreadystatechange;\n            }\n            ajax.send();\n            // ajax.send();\n            // if (ajax.status < 400) {\n            //     var res = that.parseJSON(ajax.responseText);\n            //     qiniuUpHosts.http = getHosts(res.http.up);\n            //     qiniuUpHosts.https = getHosts(res.https.up);\n            //     logger.debug(\"get new uphosts: \", qiniuUpHosts);\n            //     that.resetUploadUrl();\n            // } else {\n            //     logger.error(\"get uphosts error: \", ajax.responseText);\n            // }\n            return;\n        };\n\n        var getUptoken = function(file) {\n            if (!that.token || (op.uptoken_url && that.tokenInfo.isExpired())) {\n                return getNewUpToken(file);\n            } else {\n                return that.token;\n            }\n        };\n\n        // getNewUptoken maybe called at Init Event or BeforeUpload Event\n        // case Init Event, the file param of getUptken will be set a null value\n        // if op.uptoken has value, set uptoken with op.uptoken\n        // else if op.uptoken_url has value, set uptoken from op.uptoken_url\n        // else if op.uptoken_func has value, set uptoken by result of op.uptoken_func\n        var getNewUpToken = function(file) {\n            if (op.uptoken) {\n                that.token = op.uptoken;\n            } else if (op.uptoken_url) {\n                logger.debug(\"get uptoken from: \", that.uptoken_url);\n                // TODO: use mOxie\n                var ajax = that.createAjax();\n                ajax.open('GET', that.uptoken_url, false);\n                ajax.setRequestHeader(\"If-Modified-Since\", \"0\");\n                // ajax.onreadystatechange = function() {\n                //     if (ajax.readyState === 4 && ajax.status === 200) {\n                //         var res = that.parseJSON(ajax.responseText);\n                //         that.token = res.uptoken;\n                //     }\n                // };\n                ajax.send();\n                if (ajax.status === 200) {\n                    var res = that.parseJSON(ajax.responseText);\n                    that.token = res.uptoken;\n                    var segments = that.token.split(\":\");\n                    var putPolicy = that.parseJSON(that.URLSafeBase64Decode(segments[2]));\n                    if (!that.tokenMap) {\n                        that.tokenMap = {};\n                    }\n                    var getTimestamp = function(time) {\n                        return Math.ceil(time.getTime()/1000);\n                    };\n                    var serverTime = getTimestamp(new Date(ajax.getResponseHeader(\"date\")));\n                    var clientTime = getTimestamp(new Date());\n                    that.tokenInfo = {\n                        serverDelay: clientTime - serverTime,\n                        deadline: putPolicy.deadline,\n                        isExpired: function() {\n                            var leftTime = this.deadline - getTimestamp(new Date()) + this.serverDelay;\n                            return leftTime < 600;\n                        }\n                    };\n                    logger.debug(\"get new uptoken: \", that.token);\n                    logger.debug(\"get token info: \", that.tokenInfo);\n                } else {\n                    logger.error(\"get uptoken error: \", ajax.responseText);\n                }\n            } else if (op.uptoken_func) {\n                logger.debug(\"get uptoken from uptoken_func\");\n                that.token = op.uptoken_func(file);\n                logger.debug(\"get new uptoken: \", that.token);\n            } else {\n                logger.error(\"one of [uptoken, uptoken_url, uptoken_func] settings in options is required!\");\n            }\n            if (that.token) {\n                getUpHosts(that.token);\n            }\n            return that.token;\n        };\n\n        // get file key according with the user passed options\n        var getFileKey = function(up, file, func) {\n            // WARNING\n            // When you set the key in putPolicy by \"scope\": \"bucket:key\"\n            // You should understand the risk of override a file in the bucket\n            // So the code below that automatically get key from uptoken has been commented\n            // var putPolicy = getPutPolicy(that.token)\n            // if (putPolicy.key) {\n            //     logger.debug(\"key is defined in putPolicy.scope: \", putPolicy.key)\n            //     return putPolicy.key\n            // }\n            var key = '',\n                unique_names = false;\n            if (!op.save_key) {\n                unique_names = up.getOption && up.getOption('unique_names');\n                unique_names = unique_names || (up.settings && up.settings.unique_names);\n                if (unique_names) {\n                    var ext = that.getFileExtension(file.name);\n                    key = ext ? file.id + '.' + ext : file.id;\n                } else if (typeof func === 'function') {\n                    key = func(up, file);\n                } else {\n                    key = file.name;\n                }\n            }\n            return key;\n        };\n\n        /********** inner function define end **********/\n\n        if (op.log_level) {\n            logger.level = op.log_level;\n        }\n\n        if (!op.domain) {\n            throw 'domain setting in options is required!';\n        }\n\n        if (!op.browse_button) {\n            throw 'browse_button setting in options is required!';\n        }\n\n        if (!op.uptoken && !op.uptoken_url && !op.uptoken_func) {\n            throw 'one of [uptoken, uptoken_url, uptoken_func] settings in options is required!';\n        }\n\n        logger.debug(\"init uploader start\");\n\n        logger.debug(\"environment: \", mOxie.Env);\n\n        logger.debug(\"userAgent: \", navigator.userAgent);\n\n        var option = {};\n\n        // hold the handler from user passed options\n        var _Error_Handler = op.init && op.init.Error;\n        var _FileUploaded_Handler = op.init && op.init.FileUploaded;\n\n        // replace the handler for intercept\n        op.init.Error = function() {};\n        op.init.FileUploaded = function() {};\n\n        that.uptoken_url = op.uptoken_url;\n        that.token = '';\n        that.key_handler = typeof op.init.Key === 'function' ? op.init.Key : '';\n        this.domain = op.domain;\n        // TODO: ctx is global in scope of a uploader instance\n        // this maybe cause error\n        var ctx = '';\n        var speedCalInfo = {\n            isResumeUpload: false,\n            resumeFilesize: 0,\n            startTime: '',\n            currentTime: ''\n        };\n\n        reset_chunk_size();\n        logger.debug(\"invoke reset_chunk_size()\");\n        logger.debug(\"op.chunk_size: \", op.chunk_size);\n\n        var defaultSetting = {\n            url: qiniuUploadUrl,\n            multipart_params: {\n                token: ''\n            }\n        };\n        var ie = that.detectIEVersion();\n        // case IE 9-\n        // add accept in multipart params\n        if (ie && ie <= 9) {\n            defaultSetting.multipart_params.accept = 'text/plain; charset=utf-8';\n            logger.debug(\"add accept text/plain in multipart params\");\n        }\n\n        // compose options with user passed options and default setting\n        plupload.extend(option, op, defaultSetting);\n\n        logger.debug(\"option: \", option);\n\n        // create a new uploader with composed options\n        var uploader = new plupload.Uploader(option);\n\n        logger.debug(\"new plupload.Uploader(option)\");\n\n        // bind getNewUpToken to 'Init' event\n        uploader.bind('Init', function(up, params) {\n            logger.debug(\"Init event activated\");\n            // if op.get_new_uptoken is not true\n            //      invoke getNewUptoken when uploader init\n            // else\n            //      getNewUptoken everytime before a new file upload\n            if(!op.get_new_uptoken){\n                getNewUpToken(null);\n            }\n            //getNewUpToken(null);\n        });\n\n        logger.debug(\"bind Init event\");\n\n        // bind 'FilesAdded' event\n        // when file be added and auto_start has set value\n        // uploader will auto start upload the file\n        uploader.bind('FilesAdded', function(up, files) {\n            logger.debug(\"FilesAdded event activated\");\n            var auto_start = up.getOption && up.getOption('auto_start');\n            auto_start = auto_start || (up.settings && up.settings.auto_start);\n            logger.debug(\"auto_start: \", auto_start);\n            logger.debug(\"files: \", files);\n\n            // detect is iOS\n            var is_ios = function (){\n                if(mOxie.Env.OS.toLowerCase()===\"ios\") {\n                    return true;\n                } else {\n                    return false;\n                }\n            };\n\n            // if current env os is iOS change file name to [time].[ext]\n            if (is_ios()) {\n                for (var i = 0; i < files.length; i++) {\n                    var file = files[i];\n                    var ext = that.getFileExtension(file.name);\n                    file.name = file.id + \".\" + ext;\n                }\n            }\n\n            if (auto_start) {\n                setTimeout(function(){\n                    up.start();\n                    logger.debug(\"invoke up.start()\");\n                }, 0);\n                // up.start();\n                // plupload.each(files, function(i, file) {\n                //     up.start();\n                //     logger.debug(\"invoke up.start()\")\n                //     logger.debug(\"file: \", file);\n                // });\n            }\n            up.refresh(); // Reposition Flash/Silverlight\n        });\n\n        logger.debug(\"bind FilesAdded event\");\n\n        // bind 'BeforeUpload' event\n        // intercept the process of upload\n        // - prepare uptoken\n        // - according the chunk size to make differnt upload strategy\n        // - resume upload with the last breakpoint of file\n        uploader.bind('BeforeUpload', function(up, file) {\n            logger.debug(\"BeforeUpload event activated\");\n            // add a key named speed for file object\n            file.speed = file.speed || 0;\n            ctx = '';\n\n            if(op.get_new_uptoken){\n                getNewUpToken(file);\n            }\n\n            var directUpload = function(up, file, func) {\n                speedCalInfo.startTime = new Date().getTime();\n                var multipart_params_obj;\n                if (op.save_key) {\n                    multipart_params_obj = {\n                        'token': that.token\n                    };\n                } else {\n                    multipart_params_obj = {\n                        'key': getFileKey(up, file, func),\n                        'token': that.token\n                    };\n                }\n                var ie = that.detectIEVersion();\n                // case IE 9-\n                // add accept in multipart params\n                if (ie && ie <= 9) {\n                    multipart_params_obj.accept = 'text/plain; charset=utf-8';\n                    logger.debug(\"add accept text/plain in multipart params\");\n                }\n\n                logger.debug(\"directUpload multipart_params_obj: \", multipart_params_obj);\n\n                var x_vars = op.x_vars;\n                if (x_vars !== undefined && typeof x_vars === 'object') {\n                    for (var x_key in x_vars) {\n                        if (x_vars.hasOwnProperty(x_key)) {\n                            if (typeof x_vars[x_key] === 'function') {\n                                multipart_params_obj['x:' + x_key] = x_vars[x_key](up, file);\n                            } else if (typeof x_vars[x_key] !== 'object') {\n                                multipart_params_obj['x:' + x_key] = x_vars[x_key];\n                            }\n                        }\n                    }\n                }\n\n                up.setOption({\n                    'url': qiniuUploadUrl,\n                    'multipart': true,\n                    'chunk_size': is_android_weixin_or_qq() ? op.max_file_size : undefined,\n                    'multipart_params': multipart_params_obj\n                });\n            };\n\n            // detect is weixin or qq inner browser\n            var is_android_weixin_or_qq = function (){\n                var ua = navigator.userAgent.toLowerCase();\n                if((ua.match(/MicroMessenger/i) || mOxie.Env.browser === \"QQBrowser\" || ua.match(/V1_AND_SQ/i)) && mOxie.Env.OS.toLowerCase()===\"android\") {\n                    return true;\n                } else {\n                    return false;\n                }\n            };\n\n            var chunk_size = up.getOption && up.getOption('chunk_size');\n            chunk_size = chunk_size || (up.settings && up.settings.chunk_size);\n\n            logger.debug(\"uploader.runtime: \",uploader.runtime);\n            logger.debug(\"chunk_size: \",chunk_size);\n\n            // TODO: flash support chunk upload\n            if ((uploader.runtime === 'html5' || uploader.runtime === 'flash') && chunk_size) {\n                if (file.size < chunk_size || is_android_weixin_or_qq()) {\n                    logger.debug(\"directUpload because file.size < chunk_size || is_android_weixin_or_qq()\");\n                    // direct upload if file size is less then the chunk size\n                    directUpload(up, file, that.key_handler);\n                } else {\n                    // TODO: need a polifill to make it work in IE 9-\n                    // ISSUE: if file.name is existed in localStorage\n                    // but not the same file maybe cause error\n                    var localFileInfo = localStorage.getItem(file.name);\n                    var blockSize = chunk_size;\n                    if (localFileInfo) {\n                        // TODO: although only the html5 runtime will enter this statement\n                        // but need uniform way to make convertion between string and json\n                        localFileInfo = that.parseJSON(localFileInfo);\n                        var now = (new Date()).getTime();\n                        var before = localFileInfo.time || 0;\n                        var aDay = 24 * 60 * 60 * 1000; //  milliseconds of one day\n                        // if the last upload time is within one day\n                        //      will upload continuously follow the last breakpoint\n                        // else\n                        //      will reupload entire file\n                        if (now - before < aDay) {\n\n                            if (localFileInfo.percent !== 100) {\n                                if (file.size === localFileInfo.total) {\n                                    // TODO: if file.name and file.size is the same\n                                    // but not the same file will cause error\n                                    file.percent = localFileInfo.percent;\n                                    file.loaded = localFileInfo.offset;\n                                    ctx = localFileInfo.ctx;\n\n                                    // set speed info\n                                    speedCalInfo.isResumeUpload = true;\n                                    speedCalInfo.resumeFilesize = localFileInfo.offset;\n\n                                    // set block size\n                                    if (localFileInfo.offset + blockSize > file.size) {\n                                        blockSize = file.size - localFileInfo.offset;\n                                    }\n                                } else {\n                                    // remove file info when file.size is conflict with file info\n                                    localStorage.removeItem(file.name);\n                                }\n\n                            } else {\n                                // remove file info when upload percent is 100%\n                                // avoid 499 bug\n                                localStorage.removeItem(file.name);\n                            }\n                        } else {\n                            // remove file info when last upload time is over one day\n                            localStorage.removeItem(file.name);\n                        }\n                    }\n                    speedCalInfo.startTime = new Date().getTime();\n                    var multipart_params_obj = {};\n                    var ie = that.detectIEVersion();\n                    // case IE 9-\n                    // add accept in multipart params\n                    if (ie && ie <= 9) {\n                        multipart_params_obj.accept = 'text/plain; charset=utf-8';\n                        logger.debug(\"add accept text/plain in multipart params\");\n                    }\n                    // TODO: to support bput\n                    // http://developer.qiniu.com/docs/v6/api/reference/up/bput.html\n                    up.setOption({\n                        'url': qiniuUploadUrl + '/mkblk/' + blockSize,\n                        'multipart': false,\n                        'chunk_size': chunk_size,\n                        'required_features': \"chunks\",\n                        'headers': {\n                            'Authorization': 'UpToken ' + getUptoken(file)\n                        },\n                        'multipart_params': multipart_params_obj\n                    });\n                }\n            } else {\n                logger.debug(\"directUpload because uploader.runtime !== 'html5' || uploader.runtime !== 'flash' || !chunk_size\");\n                // direct upload if runtime is not html5\n                directUpload(up, file, that.key_handler);\n            }\n        });\n\n        logger.debug(\"bind BeforeUpload event\");\n\n        // bind 'UploadProgress' event\n        // calculate upload speed\n        uploader.bind('UploadProgress', function(up, file) {\n            logger.trace(\"UploadProgress event activated\");\n            speedCalInfo.currentTime = new Date().getTime();\n            var timeUsed = speedCalInfo.currentTime - speedCalInfo.startTime; // ms\n            var fileUploaded = file.loaded || 0;\n            if (speedCalInfo.isResumeUpload) {\n                fileUploaded = file.loaded - speedCalInfo.resumeFilesize;\n            }\n            file.speed = (fileUploaded / timeUsed * 1000).toFixed(0) || 0; // unit: byte/s\n        });\n\n        logger.debug(\"bind UploadProgress event\");\n\n        // bind 'ChunkUploaded' event\n        // store the chunk upload info and set next chunk upload url\n        uploader.bind('ChunkUploaded', function(up, file, info) {\n            logger.debug(\"ChunkUploaded event activated\");\n            logger.debug(\"file: \", file);\n            logger.debug(\"info: \", info);\n            var res = that.parseJSON(info.response);\n            logger.debug(\"res: \", res);\n            // ctx should look like '[chunk01_ctx],[chunk02_ctx],[chunk03_ctx],...'\n            ctx = ctx ? ctx + ',' + res.ctx : res.ctx;\n            var leftSize = info.total - info.offset;\n            var chunk_size = up.getOption && up.getOption('chunk_size');\n            chunk_size = chunk_size || (up.settings && up.settings.chunk_size);\n            if (leftSize < chunk_size) {\n                up.setOption({\n                    'url': qiniuUploadUrl + '/mkblk/' + leftSize\n                });\n                logger.debug(\"up.setOption url: \", qiniuUploadUrl + '/mkblk/' + leftSize);\n            }\n            up.setOption({\n                'headers': {\n                    'Authorization': 'UpToken ' + getUptoken(file)\n                }\n            });\n            localStorage.setItem(file.name, that.stringifyJSON({\n                ctx: ctx,\n                percent: file.percent,\n                total: info.total,\n                offset: info.offset,\n                time: (new Date()).getTime()\n            }));\n        });\n\n        logger.debug(\"bind ChunkUploaded event\");\n\n        var retries = qiniuUploadUrls.length;\n\n        // if error is unkown switch upload url and retry\n        var unknow_error_retry = function(file){\n            if (retries-- > 0) {\n                setTimeout(function(){\n                    that.resetUploadUrl();\n                    file.status = plupload.QUEUED;\n                    uploader.stop();\n                    uploader.start();\n                }, 0);\n                return true;\n            }else{\n                retries = qiniuUploadUrls.length;\n                return false;\n            }\n        };\n\n        // bind 'Error' event\n        // check the err.code and return the errTip\n        uploader.bind('Error', (function(_Error_Handler) {\n            return function(up, err) {\n                logger.error(\"Error event activated\");\n                logger.error(\"err: \", err);\n                var errTip = '';\n                var file = err.file;\n                if (file) {\n                    switch (err.code) {\n                        case plupload.FAILED:\n                            errTip = '上传失败。请稍后再试。';\n                            break;\n                        case plupload.FILE_SIZE_ERROR:\n                            var max_file_size = up.getOption && up.getOption('max_file_size');\n                            max_file_size = max_file_size || (up.settings && up.settings.max_file_size);\n                            errTip = '浏览器最大可上传' + max_file_size + '。更大文件请使用命令行工具。';\n                            break;\n                        case plupload.FILE_EXTENSION_ERROR:\n                            errTip = '文件验证失败。请稍后重试。';\n                            break;\n                        case plupload.HTTP_ERROR:\n                            if (err.response === '') {\n                                // Fix parseJSON error ,when http error is like net::ERR_ADDRESS_UNREACHABLE\n                                errTip = err.message || '未知网络错误。';\n                                if (!unknow_error_retry(file)) {\n                                    return;\n                                }\n                                break;\n                            }\n                            var errorObj = that.parseJSON(err.response);\n                            var errorText = errorObj.error;\n                            switch (err.status) {\n                                case 400:\n                                    errTip = \"请求报文格式错误。\";\n                                    break;\n                                case 401:\n                                    errTip = \"客户端认证授权失败。请重试或提交反馈。\";\n                                    break;\n                                case 405:\n                                    errTip = \"客户端请求错误。请重试或提交反馈。\";\n                                    break;\n                                case 579:\n                                    errTip = \"资源上传成功，但回调失败。\";\n                                    break;\n                                case 599:\n                                    errTip = \"网络连接异常。请重试或提交反馈。\";\n                                    if (!unknow_error_retry(file)) {\n                                        return;\n                                    }\n                                    break;\n                                case 614:\n                                    errTip = \"文件已存在。\";\n                                    try {\n                                        errorObj = that.parseJSON(errorObj.error);\n                                        errorText = errorObj.error || 'file exists';\n                                    } catch (e) {\n                                        errorText = errorObj.error || 'file exists';\n                                    }\n                                    break;\n                                case 631:\n                                    errTip = \"指定空间不存在。\";\n                                    break;\n                                case 701:\n                                    errTip = \"上传数据块校验出错。请重试或提交反馈。\";\n                                    break;\n                                default:\n                                    errTip = \"未知错误。\";\n                                    if (!unknow_error_retry(file)) {\n                                        return;\n                                    }\n                                    break;\n                            }\n                            errTip = errTip + '(' + err.status + '：' + errorText + ')';\n                            break;\n                        case plupload.SECURITY_ERROR:\n                            errTip = '安全配置错误。请联系网站管理员。';\n                            break;\n                        case plupload.GENERIC_ERROR:\n                            errTip = '上传失败。请稍后再试。';\n                            break;\n                        case plupload.IO_ERROR:\n                            errTip = '上传失败。请稍后再试。';\n                            break;\n                        case plupload.INIT_ERROR:\n                            errTip = '网站配置错误。请联系网站管理员。';\n                            uploader.destroy();\n                            break;\n                        default:\n                            errTip = err.message + err.details;\n                            if (!unknow_error_retry(file)) {\n                                return;\n                            }\n                            break;\n                    }\n                    if (_Error_Handler) {\n                        _Error_Handler(up, err, errTip);\n                    }\n                }\n                up.refresh(); // Reposition Flash/Silverlight\n            };\n        })(_Error_Handler));\n\n        logger.debug(\"bind Error event\");\n\n        // bind 'FileUploaded' event\n        // intercept the complete of upload\n        // - get downtoken from downtoken_url if bucket is private\n        // - invoke mkfile api to compose chunks if upload strategy is chunk upload\n        uploader.bind('FileUploaded', (function(_FileUploaded_Handler) {\n            return function(up, file, info) {\n                logger.debug(\"FileUploaded event activated\");\n                logger.debug(\"file: \", file);\n                logger.debug(\"info: \", info);\n                var last_step = function(up, file, info) {\n                    if (op.downtoken_url) {\n                        // if op.dowontoken_url is not empty\n                        // need get downtoken before invoke the _FileUploaded_Handler\n                        var ajax_downtoken = that.createAjax();\n                        ajax_downtoken.open('POST', op.downtoken_url, true);\n                        ajax_downtoken.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n                        ajax_downtoken.onreadystatechange = function() {\n                            if (ajax_downtoken.readyState === 4) {\n                                if (ajax_downtoken.status === 200) {\n                                    var res_downtoken;\n                                    try {\n                                        res_downtoken = that.parseJSON(ajax_downtoken.responseText);\n                                    } catch (e) {\n                                        throw ('invalid json format');\n                                    }\n                                    var info_extended = {};\n                                    plupload.extend(info_extended, that.parseJSON(info), res_downtoken);\n                                    if (_FileUploaded_Handler) {\n                                        _FileUploaded_Handler(up, file, that.stringifyJSON(info_extended));\n                                    }\n                                } else {\n                                    uploader.trigger('Error', {\n                                        status: ajax_downtoken.status,\n                                        response: ajax_downtoken.responseText,\n                                        file: file,\n                                        code: plupload.HTTP_ERROR\n                                    });\n                                }\n                            }\n                        };\n                        ajax_downtoken.send('key=' + that.parseJSON(info).key + '&domain=' + op.domain);\n                    } else if (_FileUploaded_Handler) {\n                        _FileUploaded_Handler(up, file, info);\n                    }\n                };\n\n                var res = that.parseJSON(info.response);\n                ctx = ctx ? ctx : res.ctx;\n                // if ctx is not empty\n                //      that means the upload strategy is chunk upload\n                //      befroe the invoke the last_step\n                //      we need request the mkfile to compose all uploaded chunks\n                // else\n                //      invalke the last_step\n                logger.debug(\"ctx: \", ctx);\n                if (ctx) {\n                    var key = '';\n                    logger.debug(\"save_key: \", op.save_key);\n                    if (!op.save_key) {\n                        key = getFileKey(up, file, that.key_handler);\n                        key = key ? '/key/' + that.URLSafeBase64Encode(key) : '';\n                    }\n\n                    var fname = '/fname/' + that.URLSafeBase64Encode(file.name);\n\n                    logger.debug(\"op.x_vars: \", op.x_vars);\n                    var x_vars = op.x_vars,\n                        x_val = '',\n                        x_vars_url = '';\n                    if (x_vars !== undefined && typeof x_vars === 'object') {\n                        for (var x_key in x_vars) {\n                            if (x_vars.hasOwnProperty(x_key)) {\n                                if (typeof x_vars[x_key] === 'function') {\n                                    x_val = that.URLSafeBase64Encode(x_vars[x_key](up, file));\n                                } else if (typeof x_vars[x_key] !== 'object') {\n                                    x_val = that.URLSafeBase64Encode(x_vars[x_key]);\n                                }\n                                x_vars_url += '/x:' + x_key + '/' + x_val;\n                            }\n                        }\n                    }\n\n                    var url = qiniuUploadUrl + '/mkfile/' + file.size + key + fname + x_vars_url;\n\n                    var ie = that.detectIEVersion();\n                    var ajax;\n                    if (ie && ie <= 9) {\n                        ajax = new mOxie.XMLHttpRequest();\n                        mOxie.Env.swf_url = op.flash_swf_url;\n                    }else{\n                        ajax = that.createAjax();\n                    }\n                    ajax.open('POST', url, true);\n                    ajax.setRequestHeader('Content-Type', 'text/plain;charset=UTF-8');\n                    ajax.setRequestHeader('Authorization', 'UpToken ' + that.token);\n                    var onreadystatechange = function(){\n                        logger.debug(\"ajax.readyState: \", ajax.readyState);\n                        if (ajax.readyState === 4) {\n                            localStorage.removeItem(file.name);\n                            var info;\n                            if (ajax.status === 200) {\n                                info = ajax.responseText;\n                                logger.debug(\"mkfile is success: \", info);\n                                last_step(up, file, info);\n                            } else {\n                                info = {\n                                    status: ajax.status,\n                                    response: ajax.responseText,\n                                    file: file,\n                                    code: -200,\n                                    responseHeaders: ajax.getAllResponseHeaders()\n                                };\n                                logger.debug(\"mkfile is error: \", info);\n                                uploader.trigger('Error', info);\n                            }\n                        }\n                    };\n                    if (ie && ie <= 9) {\n                        ajax.bind('readystatechange', onreadystatechange);\n                    }else{\n                        ajax.onreadystatechange = onreadystatechange;\n                    }\n                    ajax.send(ctx);\n                    logger.debug(\"mkfile: \", url);\n                } else {\n                    last_step(up, file, info.response);\n                }\n\n            };\n        })(_FileUploaded_Handler));\n\n        logger.debug(\"bind FileUploaded event\");\n\n        // init uploader\n        uploader.init();\n\n        logger.debug(\"invoke uploader.init()\");\n\n        logger.debug(\"init uploader end\");\n\n        return uploader;\n    };\n\n    /**\n     * get url by key\n     * @param  {String} key of file\n     * @return {String} url of file\n     */\n    this.getUrl = function(key) {\n        if (!key) {\n            return false;\n        }\n        key = encodeURI(key);\n        var domain = this.domain;\n        if (domain.slice(domain.length - 1) !== '/') {\n            domain = domain + '/';\n        }\n        return domain + key;\n    };\n\n    /**\n     * invoke the imageView2 api of Qiniu\n     * @param  {Object} api params\n     * @param  {String} key of file\n     * @return {String} url of processed image\n     */\n    this.imageView2 = function(op, key) {\n\n        if (!/^\\d$/.test(op.mode)) {\n            return false;\n        }\n\n        var mode = op.mode,\n            w = op.w || '',\n            h = op.h || '',\n            q = op.q || '',\n            format = op.format || '';\n\n        if (!w && !h) {\n            return false;\n        }\n\n        var imageUrl = 'imageView2/' + mode;\n        imageUrl += w ? '/w/' + w : '';\n        imageUrl += h ? '/h/' + h : '';\n        imageUrl += q ? '/q/' + q : '';\n        imageUrl += format ? '/format/' + format : '';\n        if (key) {\n            imageUrl = this.getUrl(key) + '?' + imageUrl;\n        }\n        return imageUrl;\n    };\n\n    /**\n     * invoke the imageMogr2 api of Qiniu\n     * @param  {Object} api params\n     * @param  {String} key of file\n     * @return {String} url of processed image\n     */\n    this.imageMogr2 = function(op, key) {\n        var auto_orient = op['auto-orient'] || '',\n            thumbnail = op.thumbnail || '',\n            strip = op.strip || '',\n            gravity = op.gravity || '',\n            crop = op.crop || '',\n            quality = op.quality || '',\n            rotate = op.rotate || '',\n            format = op.format || '',\n            blur = op.blur || '';\n        //Todo check option\n\n        var imageUrl = 'imageMogr2';\n\n        imageUrl += auto_orient ? '/auto-orient' : '';\n        imageUrl += thumbnail ? '/thumbnail/' + thumbnail : '';\n        imageUrl += strip ? '/strip' : '';\n        imageUrl += gravity ? '/gravity/' + gravity : '';\n        imageUrl += quality ? '/quality/' + quality : '';\n        imageUrl += crop ? '/crop/' + crop : '';\n        imageUrl += rotate ? '/rotate/' + rotate : '';\n        imageUrl += format ? '/format/' + format : '';\n        imageUrl += blur ? '/blur/' + blur : '';\n\n        if (key) {\n            imageUrl = this.getUrl(key) + '?' + imageUrl;\n        }\n        return imageUrl;\n    };\n\n    /**\n     * invoke the watermark api of Qiniu\n     * @param  {Object} api params\n     * @param  {String} key of file\n     * @return {String} url of processed image\n     */\n    this.watermark = function(op, key) {\n        var mode = op.mode;\n        if (!mode) {\n            return false;\n        }\n\n        var imageUrl = 'watermark/' + mode;\n\n        if (mode === 1) {\n            var image = op.image || '';\n            if (!image) {\n                return false;\n            }\n            imageUrl += image ? '/image/' + this.URLSafeBase64Encode(image) : '';\n        } else if (mode === 2) {\n            var text = op.text ? op.text : '',\n                font = op.font ? op.font : '',\n                fontsize = op.fontsize ? op.fontsize : '',\n                fill = op.fill ? op.fill : '';\n            if (!text) {\n                return false;\n            }\n            imageUrl += text ? '/text/' + this.URLSafeBase64Encode(text) : '';\n            imageUrl += font ? '/font/' + this.URLSafeBase64Encode(font) : '';\n            imageUrl += fontsize ? '/fontsize/' + fontsize : '';\n            imageUrl += fill ? '/fill/' + this.URLSafeBase64Encode(fill) : '';\n        } else {\n            // Todo mode3\n            return false;\n        }\n\n        var dissolve = op.dissolve || '',\n            gravity = op.gravity || '',\n            dx = op.dx || '',\n            dy = op.dy || '';\n\n        imageUrl += dissolve ? '/dissolve/' + dissolve : '';\n        imageUrl += gravity ? '/gravity/' + gravity : '';\n        imageUrl += dx ? '/dx/' + dx : '';\n        imageUrl += dy ? '/dy/' + dy : '';\n\n        if (key) {\n            imageUrl = this.getUrl(key) + '?' + imageUrl;\n        }\n        return imageUrl;\n    };\n\n    /**\n     * invoke the imageInfo api of Qiniu\n     * @param  {String} key of file\n     * @return {Object} image info\n     */\n    this.imageInfo = function(key) {\n        if (!key) {\n            return false;\n        }\n        var url = this.getUrl(key) + '?imageInfo';\n        var xhr = this.createAjax();\n        var info;\n        var that = this;\n        xhr.open('GET', url, false);\n        xhr.onreadystatechange = function() {\n            if (xhr.readyState === 4 && xhr.status === 200) {\n                info = that.parseJSON(xhr.responseText);\n            }\n        };\n        xhr.send();\n        return info;\n    };\n\n    /**\n     * invoke the exif api of Qiniu\n     * @param  {String} key of file\n     * @return {Object} image exif\n     */\n    this.exif = function(key) {\n        if (!key) {\n            return false;\n        }\n        var url = this.getUrl(key) + '?exif';\n        var xhr = this.createAjax();\n        var info;\n        var that = this;\n        xhr.open('GET', url, false);\n        xhr.onreadystatechange = function() {\n            if (xhr.readyState === 4 && xhr.status === 200) {\n                info = that.parseJSON(xhr.responseText);\n            }\n        };\n        xhr.send();\n        return info;\n    };\n\n    /**\n     * invoke the exif or imageInfo api of Qiniu\n     * according with type param\n     * @param  {String} ['exif'|'imageInfo']type of info\n     * @param  {String} key of file\n     * @return {Object} image exif or info\n     */\n    this.get = function(type, key) {\n        if (!key || !type) {\n            return false;\n        }\n        if (type === 'exif') {\n            return this.exif(key);\n        } else if (type === 'imageInfo') {\n            return this.imageInfo(key);\n        }\n        return false;\n    };\n\n    /**\n     * invoke api of Qiniu like a pipeline\n     * @param  {Array of Object} params of a series api call\n     * each object in array is options of api which name is set as 'fop' property\n     * each api's output will be next api's input\n     * @param  {String} key of file\n     * @return {String|Boolean} url of processed image\n     */\n    this.pipeline = function(arr, key) {\n        var isArray = Object.prototype.toString.call(arr) === '[object Array]';\n        var option, errOp, imageUrl = '';\n        if (isArray) {\n            for (var i = 0, len = arr.length; i < len; i++) {\n                option = arr[i];\n                if (!option.fop) {\n                    return false;\n                }\n                switch (option.fop) {\n                    case 'watermark':\n                        imageUrl += this.watermark(option) + '|';\n                        break;\n                    case 'imageView2':\n                        imageUrl += this.imageView2(option) + '|';\n                        break;\n                    case 'imageMogr2':\n                        imageUrl += this.imageMogr2(option) + '|';\n                        break;\n                    default:\n                        errOp = true;\n                        break;\n                }\n                if (errOp) {\n                    return false;\n                }\n            }\n            if (key) {\n                imageUrl = this.getUrl(key) + '?' + imageUrl;\n                var length = imageUrl.length;\n                if (imageUrl.slice(length - 1) === '|') {\n                    imageUrl = imageUrl.slice(0, length - 1);\n                }\n            }\n            return imageUrl;\n        }\n        return false;\n    };\n}\n\nvar Qiniu = new QiniuJsSDK();\n\nglobal.Qiniu = Qiniu;\n\nglobal.QiniuJsSDK = QiniuJsSDK;\n\n})( window );\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/.1.0.19@qiniu-js/dist/qiniu.js\n// module id = 196\n// module chunks = 1 2 16","(function (factory) {\n    if (typeof window.define === 'function') {\n        if (window.define.amd) {\n            // AMD模式\n            window.define('wangEditor', [\"jquery\"], factory);\n        } else if (window.define.cmd) {\n            // CMD模式\n            window.define(function (require, exports, module) {\n                return factory;\n            });\n        } else {\n            // 全局模式\n            factory(window.jQuery);\n        }\n    } else if (typeof module === \"object\" && typeof module.exports === \"object\") {\n        // commonjs\n\n        // 引用 css —— webapck\n        require('../css/wangEditor.css');\n        module.exports = factory(\n            // 传入 jquery ，支持使用 npm 方式或者自己定义jquery的路径\n            require('jquery')\n        );\n    } else {\n        // 全局模式\n        factory(window.jQuery);\n    }\n})(function($){\n    \n    // 验证是否引用jquery\n    if (!$ || !$.fn || !$.fn.jquery) {\n        alert('在引用wangEditor.js之前，先引用jQuery，否则无法使用 wangEditor');\n        return;\n    }\n\n    // 定义扩展函数\n    var _e = function (fn) {\n        var E = window.wangEditor;\n        if (E) {\n            // 执行传入的函数\n            fn(E, $);\n        }\n    };\n// 定义构造函数\n(function (window, $) {\n    if (window.wangEditor) {\n        // 重复引用\n        alert('一个页面不能重复引用 wangEditor.js 或 wangEditor.min.js ！！！');\n        return;\n    }\n\n    // 编辑器（整体）构造函数\n    var E = function (elem) {\n        // 支持 id 和 element 两种形式\n        if (typeof elem === 'string') {\n            elem = '#' + elem;\n        }\n\n        // ---------------获取基本节点------------------\n        var $elem = $(elem);\n        if ($elem.length !== 1) {\n            return;\n        }\n        var nodeName = $elem[0].nodeName;\n        if (nodeName !== 'TEXTAREA' && nodeName !== 'DIV') {\n            // 只能是 textarea 和 div ，其他类型的元素不行\n            return;   \n        }\n        this.valueNodeName = nodeName.toLowerCase();\n        this.$valueContainer = $elem;\n\n        // 记录 elem 的 prev 和 parent（最后渲染 editor 要用到）\n        this.$prev = $elem.prev();\n        this.$parent = $elem.parent();\n\n        // ------------------初始化------------------\n        this.init();\n    };\n\n    E.fn = E.prototype;\n\n    E.$body = $('body');\n    E.$document = $(document);\n    E.$window = $(window);\n    E.userAgent = navigator.userAgent;\n    E.getComputedStyle = window.getComputedStyle;\n    E.w3cRange = typeof document.createRange === 'function';\n    E.hostname = location.hostname.toLowerCase();\n    E.websiteHost = 'wangeditor.github.io|www.wangeditor.com|wangeditor.coding.me';\n    E.isOnWebsite = E.websiteHost.indexOf(E.hostname) >= 0;\n    E.docsite = 'http://www.kancloud.cn/wangfupeng/wangeditor2/113961';\n\n    // 暴露给全局对象\n    window.wangEditor = E;\n\n    // 注册 plugin 事件，用于用户自定义插件\n    // 用户在引用 wangEditor.js 之后，还可以通过 E.plugin() 注入自定义函数，\n    // 该函数将会在 editor.create() 方法的最后一步执行\n    E.plugin = function (fn) {\n        if (!E._plugins) {\n            E._plugins = [];\n        }\n\n        if (typeof fn === 'function') {\n            E._plugins.push(fn);\n        }\n    };\n\n})(window, $);\n// editor 绑定事件\n_e(function (E, $) {\n\n    E.fn.init = function () {\n\n        // 初始化 editor 默认配置\n        this.initDefaultConfig();\n\n        // 增加container\n        this.addEditorContainer();\n\n        // 增加编辑区域\n        this.addTxt();\n\n        // 增加menuContainer\n        this.addMenuContainer();\n\n        // 初始化菜单集合\n        this.menus = {};\n\n        // 初始化commandHooks\n        this.commandHooks();\n\n    };\n\n});\n// editor api\n_e(function (E, $) {\n\n    // 预定义 ready 事件\n    E.fn.ready = function (fn) {\n\n        if (!this.readyFns) {\n            this.readyFns = [];\n        }\n\n        this.readyFns.push(fn);\n    };\n\n    // 处理ready事件\n    E.fn.readyHeadler = function () {\n        var fns = this.readyFns;\n\n        while (fns.length) {\n            fns.shift().call(this);\n        }\n    };\n\n    // 更新内容到 $valueContainer\n    E.fn.updateValue = function () {\n        var editor = this;\n        var $valueContainer = editor.$valueContainer;\n        var $txt = editor.txt.$txt;\n\n        if ($valueContainer === $txt) {\n            // 传入生成编辑器的div，即是编辑区域\n            return;\n        }\n\n        var value = $txt.html();\n        $valueContainer.val(value);\n    };\n\n    // 获取初始化的内容\n    E.fn.getInitValue = function () {\n        var editor = this;\n        var $valueContainer = editor.$valueContainer;\n        var currentValue = '';\n        var nodeName = editor.valueNodeName;\n        if (nodeName === 'div') {\n            currentValue = $valueContainer.html();\n        } else if (nodeName === 'textarea') {\n            currentValue = $valueContainer.val();\n        }\n\n        return currentValue;\n    };\n\n    // 触发菜单updatestyle\n    E.fn.updateMenuStyle = function () {\n        var menus = this.menus;\n\n        $.each(menus, function (k, menu) {\n            menu.updateSelected();\n        });\n    };\n\n    // 除了传入的 menuIds，其他全部启用\n    E.fn.enableMenusExcept = function (menuIds) {\n        if (this._disabled) {\n            // 编辑器处于禁用状态，则不执行改操作\n            return;\n        }\n        // menuIds参数：支持数组和字符串\n        menuIds = menuIds || [];\n        if (typeof menuIds === 'string') {\n            menuIds = [menuIds];\n        }\n\n        $.each(this.menus, function (k, menu) {\n            if (menuIds.indexOf(k) >= 0) {\n                return;\n            }\n            menu.disabled(false);\n        });\n    };\n\n    // 除了传入的 menuIds，其他全部禁用\n    E.fn.disableMenusExcept = function (menuIds) {\n        if (this._disabled) {\n            // 编辑器处于禁用状态，则不执行改操作\n            return;\n        }\n        // menuIds参数：支持数组和字符串\n        menuIds = menuIds || [];\n        if (typeof menuIds === 'string') {\n            menuIds = [menuIds];\n        }\n\n        $.each(this.menus, function (k, menu) {\n            if (menuIds.indexOf(k) >= 0) {\n                return;\n            }\n            menu.disabled(true);\n        });\n    };\n\n    // 隐藏所有 dropPanel droplist modal\n    E.fn.hideDropPanelAndModal = function () {\n        var menus = this.menus;\n\n        $.each(menus, function (k, menu) {\n            var m = menu.dropPanel || menu.dropList || menu.modal;\n            if (m && m.hide) {\n                m.hide();\n            }\n        });\n    };\n\n});\n// selection range API\n_e(function (E, $) {\n\n    // 用到 w3c range 的函数，如果检测到浏览器不支持 w3c range，则赋值为空函数\n    var ieRange = !E.w3cRange;\n    function emptyFn() {}\n\n    // 设置或读取当前的range\n    E.fn.currentRange = function (cr){\n        if (cr) {\n            this._rangeData = cr;\n        } else {\n            return this._rangeData;\n        }\n    };\n\n    // 将当前选区折叠\n    E.fn.collapseRange = function (range, opt) {\n        // opt 参数说明：'start'-折叠到开始; 'end'-折叠到结束\n        opt = opt || 'end';\n        opt = opt === 'start' ? true : false;\n\n        range = range || this.currentRange();\n        \n        if (range) {\n            // 合并，保存\n            range.collapse(opt);\n            this.currentRange(range);\n        }\n    };\n\n    // 获取选区的文字\n    E.fn.getRangeText = ieRange ? emptyFn : function (range) {\n        range = range || this.currentRange();\n        if (!range) {\n            return;\n        }\n        return range.toString();\n    };\n\n    // 获取选区对应的DOM对象\n    E.fn.getRangeElem = ieRange ? emptyFn : function (range) {\n        range = range || this.currentRange();\n        var dom = range.commonAncestorContainer;\n\n        if (dom.nodeType === 1) {\n            return dom;\n        } else {\n            return dom.parentNode;\n        }\n    };\n\n    // 选区内容是否为空？\n    E.fn.isRangeEmpty = ieRange ? emptyFn : function (range) {\n        range = range || this.currentRange();\n\n        if (range && range.startContainer) {\n            if (range.startContainer === range.endContainer) {\n                if (range.startOffset === range.endOffset) {\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    };\n\n    // 保存选区数据\n    E.fn.saveSelection = ieRange ? emptyFn : function (range) {\n        var self = this,\n            _parentElem,\n            selection,\n            txt = self.txt.$txt.get(0);\n\n        if (range) {\n            _parentElem = range.commonAncestorContainer;\n        } else {\n            selection = document.getSelection();\n            if (selection.getRangeAt && selection.rangeCount) {\n                range = document.getSelection().getRangeAt(0);\n                _parentElem = range.commonAncestorContainer;\n            }\n        }\n        // 确定父元素一定要包含在编辑器区域内\n        if (_parentElem && ($.contains(txt, _parentElem) || txt === _parentElem) ) {\n            // 保存选择区域\n            self.currentRange(range);\n        }\n    };\n\n    // 恢复选中区域\n    E.fn.restoreSelection = ieRange ? emptyFn : function (range) {\n        var selection;\n\n        range = range || this.currentRange();\n\n        if (!range) {\n            return;\n        }\n\n        // 使用 try catch 来防止 IE 某些情况报错\n        try {\n            selection = document.getSelection();\n            selection.removeAllRanges();\n            selection.addRange(range);\n        } catch (ex) {\n            E.error('执行 editor.restoreSelection 时，IE可能会有异常，不影响使用');\n        }\n    };\n\n    // 根据elem恢复选区\n    E.fn.restoreSelectionByElem = ieRange ? emptyFn : function (elem, opt) {\n        // opt参数说明：'start'-折叠到开始，'end'-折叠到结束，'all'-全部选中\n        if (!elem) {\n            return;\n        }\n        opt = opt || 'end'; // 默认为折叠到结束\n\n        // 根据elem获取选区\n        this.setRangeByElem(elem);\n\n        // 根据 opt 折叠选区\n        if (opt === 'start') {\n            this.collapseRange(this.currentRange(), 'start');\n        }\n        if (opt === 'end') {\n            this.collapseRange(this.currentRange(), 'end');\n        }\n        \n        // 恢复选区\n        this.restoreSelection();\n    };\n\n    // 初始化选区\n    E.fn.initSelection = ieRange ? emptyFn : function () {\n        var editor = this;\n        if( editor.currentRange() ){\n            //如果currentRange有值，则不用再初始化\n            return;\n        }\n\n        var range;\n        var $txt = editor.txt.$txt;\n        var $firstChild = $txt.children().first();\n        \n        if ($firstChild.length) {\n            editor.restoreSelectionByElem($firstChild.get(0));\n        }\n    };\n\n    // 根据元素创建选区\n    E.fn.setRangeByElem = ieRange ? emptyFn : function (elem) {\n        var editor = this;\n        var txtElem = editor.txt.$txt.get(0);\n        if (!elem || !$.contains(txtElem, elem)) {\n            return;\n        }\n\n        // 找到elem的第一个 textNode 和 最后一个 textNode\n        var firstTextNode = elem.firstChild;\n        while (firstTextNode) {\n            if (firstTextNode.nodeType === 3) {\n                break;\n            }\n            // 继续向下\n            firstTextNode = firstTextNode.firstChild;\n        }\n        var lastTextNode = elem.lastChild;\n        while (lastTextNode) {\n            if (lastTextNode.nodeType === 3) {\n                break;\n            }\n            // 继续向下\n            lastTextNode = lastTextNode.lastChild;\n        }\n        \n        var range = document.createRange();\n        if (firstTextNode && lastTextNode) {\n            // 说明 elem 有内容，能取到子元素\n            range.setStart(firstTextNode, 0);\n            range.setEnd(lastTextNode, lastTextNode.textContent.length);\n        } else {\n            // 说明 elem 无内容\n            range.setStart(elem, 0);\n            range.setEnd(elem, 0);\n        }\n\n        // 保存选区\n        editor.saveSelection(range);\n    };\n\n});\n// selection range API - IE8及以下\n_e(function (E, $) {\n\n    if (E.w3cRange) {\n        // 说明支持 W3C 的range方法\n        return;\n    }\n\n    // -----------------IE8时，需要重写以下方法-------------------\n\n    // 获取选区的文字\n    E.fn.getRangeText = function (range) {\n        range = range || this.currentRange();\n        if (!range) {\n            return;\n        }\n        return range.text;\n    };\n\n    // 获取选区对应的DOM对象\n    E.fn.getRangeElem = function (range) {\n        range = range || this.currentRange();\n        if (!range) {\n            return;\n        }\n        var dom = range.parentElement();\n\n        if (dom.nodeType === 1) {\n            return dom;\n        } else {\n            return dom.parentNode;\n        }\n    };\n\n    // 选区内容是否为空？\n    E.fn.isRangeEmpty = function (range) {\n        range = range || this.currentRange();\n\n        if (range && range.text) {\n            return false;\n        }\n\n        return true;\n    };\n\n    // 保存选区数据\n    E.fn.saveSelection = function (range) {\n        var self = this,\n            _parentElem,\n            selection,\n            txt = self.txt.$txt.get(0);\n\n        if (range) {\n            _parentElem = range.parentElement();\n        } else {\n            range = document.selection.createRange();\n            if(typeof range.parentElement === 'undefined'){\n                //IE6、7中，insertImage后会执行此处\n                //由于找不到range.parentElement，所以干脆将_parentElem赋值为null\n                _parentElem = null;\n            }else{\n                _parentElem = range.parentElement();\n            }\n        }\n\n        // 确定父元素一定要包含在编辑器区域内\n        if (_parentElem && ($.contains(txt, _parentElem) || txt === _parentElem) ) {\n            // 保存选择区域\n            self.currentRange(range);\n        }\n    };\n\n    // 恢复选中区域\n    E.fn.restoreSelection = function (currentRange){\n        var editor = this,\n            selection,\n            range;\n\n        currentRange = currentRange || editor.currentRange();\n        if(!currentRange){\n            return;\n        }\n\n        range = document.selection.createRange();\n        try {\n            // 此处，plupload上传上传图片时，IE8-会报一个『参数无效』的错误\n            range.setEndPoint('EndToEnd', currentRange);\n        } catch (ex) {\n\n        }\n        \n        if(currentRange.text.length === 0){\n            try {\n                // IE8 插入表情会报错\n                range.collapse(false);\n            } catch (ex) {\n                \n            }\n            \n        }else{\n            range.setEndPoint('StartToStart', currentRange);\n        }\n        range.select();\n    };\n\n});\n// editor command hooks\n_e(function (E, $) {\n    \n    E.fn.commandHooks = function () {\n        var editor = this;\n        var commandHooks = {};\n        \n        // insertHtml\n        commandHooks.insertHtml = function (html) {\n            var $elem = $(html);\n            var rangeElem = editor.getRangeElem();\n            var targetElem;\n            \n            targetElem = editor.getLegalTags(rangeElem);\n            if (!targetElem) {\n                return;\n            }\n\n            $(targetElem).after($elem);\n        };\n\n        // 保存到对象\n        editor.commandHooks = commandHooks;\n    };\n\n});\n// editor command API\n_e(function (E, $) {\n\n    // 基本命令\n    E.fn.command = function (e, commandName, commandValue, callback) {\n        var editor = this;\n        var hooks;\n        \n        function commandFn() {\n            if (!commandName) {\n                return;\n            }\n            if (editor.queryCommandSupported(commandName)) {\n                // 默认命令\n                document.execCommand(commandName, false, commandValue);\n            } else {\n                // hooks 命令\n                hooks = editor.commandHooks;\n                if (commandName in hooks) {\n                    hooks[commandName](commandValue);\n                }\n            }\n        }\n\n        this.customCommand(e, commandFn, callback);\n    };\n\n    // 针对一个elem对象执行基础命令\n    E.fn.commandForElem = function (elemOpt, e, commandName, commandValue, callback) {\n        // 取得查询elem的查询条件和验证函数\n        var selector;\n        var check;\n        if (typeof elemOpt === 'string') {\n            selector = elemOpt;\n        } else {\n            selector = elemOpt.selector;\n            check = elemOpt.check;\n        }\n\n        // 查询elem\n        var rangeElem = this.getRangeElem();\n        rangeElem = this.getSelfOrParentByName(rangeElem, selector, check);\n\n        // 根据elem设置range\n        if (rangeElem) {\n            this.setRangeByElem(rangeElem);\n        }\n\n        // 然后执行基础命令\n        this.command(e, commandName, commandValue, callback);\n    };\n\n    // 自定义命令\n    E.fn.customCommand = function (e, commandFn, callback) {\n        var editor = this;\n        var range = editor.currentRange();\n\n        if (!range) {\n            // 目前没有选区，则无法执行命令\n            e && e.preventDefault();\n            return;\n        }\n        // 记录内容，以便撤销（执行命令之前就要记录）\n        editor.undoRecord();\n\n        // 恢复选区（有 range 参数）\n        this.restoreSelection(range);\n\n        // 执行命令事件\n        commandFn.call(editor);\n\n        // 保存选区（无参数，要从浏览器直接获取range信息）\n        this.saveSelection();\n        // 重新恢复选区（无参数，要取得刚刚从浏览器得到的range信息）\n        this.restoreSelection();\n\n        // 执行 callback\n        if (callback && typeof callback === 'function') {\n            callback.call(editor);\n        }\n\n        // 最后插入空行\n        editor.txt.insertEmptyP();\n\n        // 包裹暴露的img和text\n        editor.txt.wrapImgAndText();\n\n        // 更新内容\n        editor.updateValue();\n\n        // 更新菜单样式\n        editor.updateMenuStyle();\n\n        // 隐藏 dropPanel dropList modal  设置 200ms 间隔\n        function hidePanelAndModal() {\n            editor.hideDropPanelAndModal();\n        } \n        setTimeout(hidePanelAndModal, 200);\n\n        if (e) {\n            e.preventDefault();\n        }\n    };\n\n    // 封装 document.queryCommandValue 函数\n    // IE8 直接执行偶尔会报错，因此直接用 try catch 封装一下\n    E.fn.queryCommandValue = function (commandName) {\n        var result = '';\n        try {\n            result = document.queryCommandValue(commandName);\n        } catch (ex) {\n\n        }\n        return result;\n    };\n\n    // 封装 document.queryCommandState 函数\n    // IE8 直接执行偶尔会报错，因此直接用 try catch 封装一下\n    E.fn.queryCommandState = function (commandName) {\n        var result = false;\n        try {\n            result = document.queryCommandState(commandName);\n        } catch (ex) {\n\n        }\n        return result;\n    };\n\n    // 封装 document.queryCommandSupported 函数\n    E.fn.queryCommandSupported = function (commandName) {\n        var result = false;\n        try {\n            result = document.queryCommandSupported(commandName);\n        } catch (ex) {\n\n        }\n        return result;\n    };\n\n});\n// dom selector\n_e(function (E, $) {\n\n    var matchesSelector;\n\n    // matchesSelector hook\n    function _matchesSelectorForIE(selector) {\n        var elem = this;\n        var $elems = $(selector);\n        var result = false;\n\n        // 用jquery查找 selector 所有对象，如果其中有一个和传入 elem 相同，则证明 elem 符合 selector\n        $elems.each(function () {\n            if (this === elem) {\n                result = true;\n                return false;\n            }\n        });\n\n        return result;\n    }\n\n    // 从当前的elem，往上去查找合法标签 如 p head table blockquote ul ol 等\n    E.fn.getLegalTags = function (elem) {\n        var legalTags = this.config.legalTags;\n        if (!legalTags) {\n            E.error('配置项中缺少 legalTags 的配置');\n            return;\n        }\n        return this.getSelfOrParentByName(elem, legalTags);\n    };\n\n    // 根据条件，查询自身或者父元素，符合即返回\n    E.fn.getSelfOrParentByName = function (elem, selector, check) {\n\n        if (!elem || !selector) {\n            return;\n        }\n\n        if (!matchesSelector) {\n            // 定义 matchesSelector 函数\n            matchesSelector = elem.webkitMatchesSelector || \n                              elem.mozMatchesSelector ||\n                              elem.oMatchesSelector || \n                              elem.matchesSelector;\n        }\n        if (!matchesSelector) {\n            // 如果浏览器本身不支持 matchesSelector 则使用自定义的hook\n            matchesSelector = _matchesSelectorForIE;\n        }\n\n        var txt = this.txt.$txt.get(0);\n\n        while (elem && txt !== elem && $.contains(txt, elem)) {\n            if (matchesSelector.call(elem, selector)) {\n                // 符合 selector 查询条件\n\n                if (!check) {\n                    // 没有 check 验证函数，直接返回即可\n                    return elem;\n                }\n\n                if (check(elem)) {\n                    // 如果有 check 验证函数，还需 check 函数的确认\n                    return elem;\n                }\n            }\n\n            // 如果上一步没经过验证，则将跳转到父元素\n            elem = elem.parentNode;\n        }\n\n        return;\n    };\n\n});\n// undo redo\n_e(function (E, $) {\n\n    var length = 20;  // 缓存的最大长度\n    function _getRedoList(editor) {\n        if (editor._redoList == null) {\n            editor._redoList = [];\n        }\n        return editor._redoList;\n    }\n    function _getUndoList(editor) {\n        if (editor._undoList == null) {\n            editor._undoList = [];\n        }\n        return editor._undoList;\n    }\n\n    // 数据处理\n    function _handle(editor, data, type) {\n        // var range = data.range;\n        // var range2 = range.cloneRange && range.cloneRange();\n        var val = data.val;\n        var html = editor.txt.$txt.html();\n\n        if(val == null) {\n            return;\n        }\n\n        if (val === html) {\n            if (type === 'redo') { \n                editor.redo();\n                return;\n            } else if (type === 'undo') {\n                editor.undo();\n                return;\n            } else {\n                return;\n            }\n        }\n\n        // 保存数据\n        editor.txt.$txt.html(val);\n        // 更新数据到textarea（有必要的话）\n        editor.updateValue();\n\n        // onchange 事件\n        if (editor.onchange && typeof editor.onchange === 'function') {\n            editor.onchange.call(editor);\n        }\n\n        // ?????\n        // 注释：$txt 被重新赋值之后，range会被重置，cloneRange() 也不好使\n        // // 重置选区\n        // if (range2) {\n        //     editor.restoreSelection(range2);\n        // }\n    }\n\n    // 记录\n    E.fn.undoRecord = function () {\n        var editor = this;\n        var $txt = editor.txt.$txt;\n        var val = $txt.html();\n        var undoList = _getUndoList(editor);\n        var redoList = _getRedoList(editor);\n        var currentVal = undoList.length ? undoList[0] : '';\n\n        if (val === currentVal.val) {\n            return;\n        }\n\n        // 清空 redolist\n        if (redoList.length) {\n            redoList = [];\n        }\n\n        // 添加数据到 undoList\n        undoList.unshift({\n            range: editor.currentRange(),  // 将当前的range也记录下\n            val: val\n        });\n\n        // 限制 undoList 长度\n        if (undoList.length > length) {\n            undoList.pop();\n        }\n    };\n\n    // undo 操作\n    E.fn.undo = function () {\n        var editor = this;\n        var undoList = _getUndoList(editor);\n        var redoList = _getRedoList(editor);\n\n        if (!undoList.length) {\n            return;\n        }\n\n        // 取出 undolist 第一个值，加入 redolist\n        var data = undoList.shift();\n        redoList.unshift(data);\n\n        // 并修改编辑器的内容\n        _handle(this, data, 'undo');\n    };\n\n    // redo 操作\n    E.fn.redo = function () {\n        var editor = this;\n        var undoList = _getUndoList(editor);\n        var redoList = _getRedoList(editor);\n        if (!redoList.length) {\n            return;\n        }\n\n        // 取出 redolist 第一个值，加入 undolist\n        var data = redoList.shift();\n        undoList.unshift(data);\n\n        // 并修改编辑器的内容\n        _handle(this, data, 'redo');\n    };\n});\n// 暴露给用户的 API\n_e(function (E, $) {\n\n    // 创建编辑器\n    E.fn.create = function () {\n        var editor = this;\n\n        // 检查 E.$body 是否有值\n        // 如果在 body 之前引用了 js 文件，body 尚未加载，可能没有值\n        if (!E.$body || E.$body.length === 0) {\n            E.$body = $('body');\n            E.$document = $(document);\n            E.$window = $(window);\n        }\n\n        // 执行 addMenus 之前：\n        // 1. 允许用户修改 editor.UI 自定义配置UI\n        // 2. 允许用户通过修改 editor.menus 来自定义配置菜单\n        // 因此要在 create 时执行，而不是 init           \n        editor.addMenus();\n\n        // 渲染\n        editor.renderMenus();\n        editor.renderMenuContainer();\n        editor.renderTxt();\n        editor.renderEditorContainer();\n\n        // 绑定事件\n        editor.eventMenus();\n        editor.eventMenuContainer();\n        editor.eventTxt();\n\n        // 处理ready事件\n        editor.readyHeadler();\n\n        // 初始化选区\n        editor.initSelection();\n\n        // $txt 快捷方式\n        editor.$txt = editor.txt.$txt;\n\n        // 执行用户自定义事件，通过 E.ready() 添加\n        var _plugins = E._plugins;\n        if (_plugins && _plugins.length) {\n            $.each(_plugins, function (k, val) {\n                val.call(editor);\n            });\n        }\n    };\n\n    // 禁用编辑器\n    E.fn.disable = function () {\n        this.txt.$txt.removeAttr('contenteditable');\n        this.disableMenusExcept();\n\n        // 先禁用，再记录状态\n        this._disabled = true;\n    };\n    // 启用编辑器\n    E.fn.enable = function () {\n        // 先解除状态记录，再启用\n        this._disabled = false;\n        this.txt.$txt.attr('contenteditable', 'true');\n        this.enableMenusExcept();\n    };\n\n    // 销毁编辑器\n    E.fn.destroy = function () {\n        var self = this;\n        var $valueContainer = self.$valueContainer;\n        var $editorContainer = self.$editorContainer;\n        var valueNodeName = self.valueNodeName;\n\n        if (valueNodeName === 'div') {\n            // div 生成的编辑器\n            $valueContainer.removeAttr('contenteditable');\n            $editorContainer.after($valueContainer);\n            $editorContainer.hide();\n        } else {\n            // textarea 生成的编辑器\n            $valueContainer.show();\n            $editorContainer.hide();\n        }\n    };\n\n    // 撤销 销毁编辑器\n    E.fn.undestroy = function () {\n        var self = this;\n        var $valueContainer = self.$valueContainer;\n        var $editorContainer = self.$editorContainer;\n        var $menuContainer = self.menuContainer.$menuContainer;\n        var valueNodeName = self.valueNodeName;\n\n        if (valueNodeName === 'div') {\n            // div 生成的编辑器\n            $valueContainer.attr('contenteditable', 'true');\n            $menuContainer.after($valueContainer);\n            $editorContainer.show();\n        } else {\n            // textarea 生成的编辑器\n            $valueContainer.hide();\n            $editorContainer.show();\n        }\n    };\n\n    // 清空内容的快捷方式\n    E.fn.clear = function () {\n        var editor = this;\n        var $txt = editor.txt.$txt;\n        $txt.html('<p><br></p>');\n        editor.restoreSelectionByElem($txt.find('p').get(0));\n    };\n\n});\n// menuContainer 构造函数\n_e(function (E, $) {\n\n    // 定义构造函数\n    var MenuContainer = function (editor) {\n        this.editor = editor;\n        this.init();\n    };\n\n    MenuContainer.fn = MenuContainer.prototype;\n\n    // 暴露给 E 即 window.wangEditor\n    E.MenuContainer = MenuContainer;\n\n});\n// MenuContainer.fn bind fn\n_e(function (E, $) {\n\n    var MenuContainer = E.MenuContainer;\n\n    // 初始化\n    MenuContainer.fn.init = function () {\n        var self = this;\n        var $menuContainer = $('<div class=\"wangEditor-menu-container clearfix\"></div>');\n\n        self.$menuContainer = $menuContainer;\n\n        // change shadow\n        self.changeShadow();\n    };\n\n    // 编辑区域滚动时，增加shadow\n    MenuContainer.fn.changeShadow = function () {\n        var $menuContainer = this.$menuContainer;\n        var editor = this.editor;\n        var $txt = editor.txt.$txt;\n\n        $txt.on('scroll', function () {\n            if ($txt.scrollTop() > 10) {\n                $menuContainer.addClass('wangEditor-menu-shadow');\n            } else {\n                $menuContainer.removeClass('wangEditor-menu-shadow');\n            }\n        });\n    };\n\n});\n// MenuContainer.fn API\n_e(function (E, $) {\n\n    var MenuContainer = E.MenuContainer;\n\n    MenuContainer.fn.render = function () {\n        var $menuContainer = this.$menuContainer;\n        var $editorContainer = this.editor.$editorContainer;\n\n        $editorContainer.append($menuContainer);\n    };\n    \n    // 获取菜单栏的高度\n    MenuContainer.fn.height = function () {\n        var $menuContainer = this.$menuContainer;\n        return $menuContainer.height();\n    };\n\n    // 添加菜单\n    MenuContainer.fn.appendMenu = function (groupIdx, menu) {\n        // 判断是否需要新增一个菜单组\n        this._addGroup(groupIdx);\n        // 增加菜单（返回 $menuItem）\n        return this._addOneMenu(menu);\n    };\n    MenuContainer.fn._addGroup = function (groupIdx) {\n        var $menuContainer = this.$menuContainer;\n        var $menuGroup;\n        if (!this.$currentGroup || this.currentGroupIdx !== groupIdx) {\n            $menuGroup = $('<div class=\"menu-group clearfix\"></div>');\n            $menuContainer.append($menuGroup);\n\n            this.$currentGroup = $menuGroup;\n            this.currentGroupIdx = groupIdx;\n        }\n    };\n    MenuContainer.fn._addOneMenu = function (menu) {\n        var $menuNormal = menu.$domNormal;\n        var $menuSelected = menu.$domSelected;\n\n        var $menuGroup = this.$currentGroup;\n        var $item = $('<div class=\"menu-item clearfix\"></div>');\n        $menuSelected.hide();\n        $item.append($menuNormal).append($menuSelected);\n        $menuGroup.append($item);\n\n        return $item;\n    };\n\n});\n// menu 构造函数\n_e(function (E, $) {\n\n    // 定义构造函数\n    var Menu = function (opt) {\n        this.editor = opt.editor;\n        this.id = opt.id;\n        this.title = opt.title;\n        this.$domNormal = opt.$domNormal;\n        this.$domSelected = opt.$domSelected || opt.$domNormal;\n\n        // document.execCommand 的参数\n        this.commandName = opt.commandName;\n        this.commandValue = opt.commandValue;\n        this.commandNameSelected = opt.commandNameSelected || opt.commandName;\n        this.commandValueSelected = opt.commandValueSelected || opt.commandValue;\n    };\n\n    Menu.fn = Menu.prototype;\n\n    // 暴露给 E 即 window.wangEditor\n    E.Menu = Menu;\n});\n// Menu.fn 初始化绑定的事件\n_e(function (E, $) {\n\n    var Menu = E.Menu;\n\n    // 初始化UI\n    Menu.fn.initUI = function () {\n        var editor = this.editor;\n        var uiConfig = editor.UI.menus;\n        var menuId = this.id;\n        var menuUI = uiConfig[menuId];\n\n        if (this.$domNormal && this.$domSelected) {\n            // 自定义的菜单中，已经传入了 $dom 无需从配置文件中查找生成\n            return;\n        }\n\n        if (menuUI == null) {\n            E.warn('editor.UI配置中，没有菜单 \"' + menuId + '\" 的UI配置，只能取默认值');\n            \n            // 必须写成 uiConfig['default'];\n            // 写成 uiConfig.default IE8会报错\n            menuUI = uiConfig['default'];\n        }\n\n        // 正常状态\n        this.$domNormal = $(menuUI.normal);\n\n        // 选中状态\n        if (/^\\./.test(menuUI.selected)) {\n            // 增加一个样式\n            this.$domSelected = this.$domNormal.clone().addClass(menuUI.selected.slice(1));\n        } else {\n            // 一个新的dom对象\n            this.$domSelected = $(menuUI.selected);\n        }\n    };\n\n});\n// Menu.fn API\n_e(function (E, $) {\n\n    var Menu = E.Menu;\n\n    // 渲染菜单\n    Menu.fn.render = function (groupIdx) {\n        // 渲染UI\n        this.initUI();\n        \n        var editor = this.editor;\n        var menuContainer = editor.menuContainer;\n        var $menuItem = menuContainer.appendMenu(groupIdx, this);\n        var onRender = this.onRender;\n\n        // 渲染tip\n        this._renderTip($menuItem);\n\n        // 执行 onRender 函数\n        if (onRender && typeof onRender === 'function') {\n            onRender.call(this);\n        }\n    };\n    Menu.fn._renderTip = function ($menuItem) {\n        var self = this;\n        var editor = self.editor;\n        var title = self.title;\n        var $tip = $('<div class=\"menu-tip\"></div>');\n        // var $triangle = $('<i class=\"tip-triangle\"></i>'); // 小三角\n\n        // 计算 tip 宽度\n        var $tempDiv;\n        if (!self.tipWidth) {\n            // 设置一个纯透明的 p（absolute;top:-10000px;不会显示在内容区域）\n            // 内容赋值为 title ，为了计算tip宽度\n            $tempDiv = $('<p style=\"opacity:0; filter:Alpha(opacity=0); position:absolute;top:-10000px;\">' + title + '</p>');\n            // 先添加到body，计算完再 remove\n            E.$body.append($tempDiv);\n            editor.ready(function () {\n                var editor = this;\n                var titleWidth = $tempDiv.outerWidth() + 5; // 多出 5px 的冗余\n                var currentWidth = $tip.outerWidth();\n                var currentMarginLeft = parseFloat($tip.css('margin-left'), 10);\n                // 计算完，拿到数据，则弃用\n                $tempDiv.remove();\n                $tempDiv = null;\n\n                // 重新设置样式\n                $tip.css({\n                    width: titleWidth,\n                    'margin-left': currentMarginLeft + (currentWidth - titleWidth)/2\n                });\n\n                // 存储\n                self.tipWidth = titleWidth;\n            });\n        }\n\n        // $tip.append($triangle);\n        $tip.append(title);\n        $menuItem.append($tip);\n\n        function show() {\n            $tip.show();\n        }\n        function hide() {\n            $tip.hide();\n        }\n\n        var timeoutId;\n        $menuItem.find('a').on('mouseenter', function (e) {\n            if (!self.active() && !self.disabled()) {\n                timeoutId = setTimeout(show, 200);\n            }\n        }).on('mouseleave', function (e) {\n            timeoutId && clearTimeout(timeoutId);\n            hide();\n        }).on('click', hide);\n    };\n\n    // 绑定事件\n    Menu.fn.bindEvent = function () {\n        var self = this;\n\n        var $domNormal = self.$domNormal;\n        var $domSelected = self.$domSelected;\n\n        // 试图获取该菜单定义的事件（未selected），没有则自己定义\n        var clickEvent = self.clickEvent;\n        if (!clickEvent) {\n            clickEvent = function (e) {\n                // -----------dropPanel dropList modal-----------\n                var dropObj = self.dropPanel || self.dropList || self.modal;\n                if (dropObj && dropObj.show) {\n                    if (dropObj.isShowing) {\n                        dropObj.hide();\n                    } else {\n                        dropObj.show();\n                    }\n                    return;\n                }\n\n                // -----------command-----------\n                var editor = self.editor;\n                var commandName;\n                var commandValue;\n\n                var selected = self.selected;\n                if (selected) {\n                    commandName = self.commandNameSelected;\n                    commandValue = self.commandValueSelected;\n                } else {\n                    commandName = self.commandName;\n                    commandValue = self.commandValue;\n                }\n\n                if (commandName) {\n                    // 执行命令\n                    editor.command(e, commandName, commandValue);\n                } else {\n                    // 提示\n                    E.warn('菜单 \"' + self.id + '\" 未定义click事件');\n                    e.preventDefault();\n                }\n            };\n        }\n        // 获取菜单定义的selected情况下的点击事件\n        var clickEventSelected = self.clickEventSelected || clickEvent;\n\n        // 将事件绑定到菜单dom上\n        $domNormal.click(function (e) {\n            if (!self.disabled()) {\n                clickEvent.call(self, e);\n                self.updateSelected();\n            }\n            e.preventDefault();\n        });\n        $domSelected.click(function (e) {\n            if (!self.disabled()) {\n                clickEventSelected.call(self, e);\n                self.updateSelected();\n            }\n            e.preventDefault();\n        });\n    };\n\n    // 更新选中状态\n    Menu.fn.updateSelected = function () {\n        var self = this;\n        var editor = self.editor;\n\n        // 试图获取用户自定义的判断事件\n        var updateSelectedEvent = self.updateSelectedEvent;\n        if (!updateSelectedEvent) {\n            // 用户未自定义，则设置默认值\n            updateSelectedEvent = function () {\n                var self = this;\n                var editor = self.editor;\n                var commandName = self.commandName;\n                var commandValue = self.commandValue;\n\n                if (commandValue) {\n                    if (editor.queryCommandValue(commandName).toLowerCase() === commandValue.toLowerCase()) {\n                        return true;\n                    }\n                } else if (editor.queryCommandState(commandName)) {\n                    return true;\n                }\n\n                return false;\n            };\n        }\n\n        // 获取结果\n        var result = updateSelectedEvent.call(self);\n        result = !!result;\n\n        // 存储结果、显示效果\n        self.changeSelectedState(result);\n    };\n\n    // 切换选中状态、显示效果\n    Menu.fn.changeSelectedState = function (state) {\n        var self = this;\n        var selected = self.selected;\n\n        if (state != null && typeof state === 'boolean') {\n            if (selected === state) {\n                // 计算结果和当前的状态一样\n                return;\n            }\n            // 存储结果\n            self.selected = state;\n\n            // 切换菜单的显示\n            if (state) {\n                // 选中\n                self.$domNormal.hide();\n                self.$domSelected.show();\n            } else {\n                // 未选中\n                self.$domNormal.show();\n                self.$domSelected.hide();\n            }\n        } // if\n    };\n\n    // 点击菜单，显示了 dropPanel modal 时，菜单的状态 \n    Menu.fn.active = function (active) {\n        if (active == null) {\n            return this._activeState;\n        }\n        this._activeState = active;\n    };\n    Menu.fn.activeStyle = function (active) {\n        var selected = this.selected;\n        var $dom = this.$domNormal;\n        var $domSelected = this.$domSelected;\n\n        if (active) {\n            $dom.addClass('active');\n            $domSelected.addClass('active');\n        } else {\n            $dom.removeClass('active');\n            $domSelected.removeClass('active');\n        }\n\n        // 记录状态 （ menu hover 时会取状态用 ）\n        this.active(active);\n    };\n\n    // 菜单的启用和禁用\n    Menu.fn.disabled = function (opt) {\n        // 参数为空，取值\n        if (opt == null) {\n            return !!this._disabled;\n        }\n\n        if (this._disabled === opt) {\n            // 要设置的参数值和当前参数只一样，无需再次设置\n            return;\n        }\n\n        var $dom = this.$domNormal;\n        var $domSelected = this.$domSelected;\n\n        // 设置样式\n        if (opt) {\n            $dom.addClass('disable');\n            $domSelected.addClass('disable');\n        } else {\n            $dom.removeClass('disable');\n            $domSelected.removeClass('disable');\n        }\n\n        // 存储\n        this._disabled = opt;\n    };\n\n});\n// dropList 构造函数\n_e(function (E, $) {\n\n    // 定义构造函数\n    var DropList = function (editor, menu, opt) {\n        this.editor = editor;\n        this.menu = menu;\n\n        // list 的数据源，格式 {'commandValue': 'title', ...}\n        this.data = opt.data;\n        // 要为每个item自定义的模板\n        this.tpl = opt.tpl;\n        // 为了执行 editor.commandForElem 而传入的elem查询方式\n        this.selectorForELemCommand = opt.selectorForELemCommand;\n\n        // 执行事件前后的钩子\n        this.beforeEvent = opt.beforeEvent;\n        this.afterEvent = opt.afterEvent;\n\n        // 初始化\n        this.init();\n    };\n\n    DropList.fn = DropList.prototype;\n\n    // 暴露给 E 即 window.wangEditor\n    E.DropList = DropList;\n});\n// dropList fn bind\n_e(function (E, $) {\n\n    var DropList = E.DropList;\n\n    // init\n    DropList.fn.init = function () {\n        var self = this;\n\n        // 生成dom对象\n        self.initDOM();\n\n        // 绑定command事件\n        self.bindEvent();\n\n        // 声明隐藏的事件\n        self.initHideEvent();\n    };\n\n    // 初始化dom结构\n    DropList.fn.initDOM = function () {\n        var self = this;\n        var data = self.data;\n        var tpl = self.tpl || '<span>{#title}</span>';\n        var $list = $('<div class=\"wangEditor-drop-list clearfix\"></div>');\n\n        var itemContent;\n        var $item;\n        $.each(data, function (commandValue, title) {\n            itemContent = tpl.replace(/{#commandValue}/ig, commandValue).replace(/{#title}/ig, title);\n            $item = $('<a href=\"#\" commandValue=\"' + commandValue + '\"></a>');\n            $item.append(itemContent);\n            $list.append($item);\n        });\n\n        self.$list = $list;\n    };\n\n    // 绑定事件\n    DropList.fn.bindEvent = function () {\n        var self = this;\n        var editor = self.editor;\n        var menu = self.menu;\n        var commandName = menu.commandName;\n        var selectorForELemCommand = self.selectorForELemCommand;\n        var $list = self.$list;\n\n        // 执行事件前后的钩子函数\n        var beforeEvent = self.beforeEvent;\n        var afterEvent = self.afterEvent;\n\n        $list.on('click', 'a[commandValue]', function (e) {\n            // 正式命令执行之前\n            if (beforeEvent && typeof beforeEvent === 'function') {\n                beforeEvent.call(e);\n            }\n\n            // 执行命令\n            var commandValue = $(e.currentTarget).attr('commandValue');\n            if (menu.selected && editor.isRangeEmpty() && selectorForELemCommand) {\n                // 当前处于选中状态，并且选中内容为空\n                editor.commandForElem(selectorForELemCommand, e, commandName, commandValue);\n            } else {\n                // 当前未处于选中状态，或者有选中内容。则执行默认命令\n                editor.command(e, commandName, commandValue);\n            }\n\n            // 正式命令之后的钩子\n            if (afterEvent && typeof afterEvent === 'function') {\n                afterEvent.call(e);\n            }\n        });\n    };\n\n    // 点击其他地方，立即隐藏 droplist\n    DropList.fn.initHideEvent = function () {\n        var self = this;\n\n        // 获取 list elem\n        var thisList = self.$list.get(0);\n\n        E.$body.on('click', function (e) {\n            if (!self.isShowing) {\n                return;\n            }\n            var trigger = e.target;\n\n            // 获取菜单elem\n            var menu = self.menu;\n            var menuDom;\n            if (menu.selected) {\n                menuDom = menu.$domSelected.get(0);\n            } else {\n                menuDom = menu.$domNormal.get(0);\n            }\n\n            if (menuDom === trigger || $.contains(menuDom, trigger)) {\n                // 说明由本菜单点击触发的\n                return;\n            }\n\n            if (thisList === trigger || $.contains(thisList, trigger)) {\n                // 说明由本list点击触发的\n                return;\n            }\n\n            // 其他情况，隐藏 list\n            self.hide();\n        });\n\n        E.$window.scroll(function () {\n            self.hide();\n        });\n\n        E.$window.on('resize', function () {\n            self.hide();\n        });\n    };\n\n});\n// dropListfn api\n_e(function (E, $) {\n    \n    var DropList = E.DropList;\n\n    // 渲染\n    DropList.fn._render = function () {\n        var self = this;\n        var editor = self.editor;\n        var $list = self.$list;\n\n        // 渲染到页面\n        editor.$editorContainer.append($list);\n\n        // 记录状态\n        self.rendered = true;\n    };\n\n    // 定位\n    DropList.fn._position = function () {\n        var self = this;\n        var $list = self.$list;\n        var editor = self.editor;\n        var menu = self.menu;\n        var $menuContainer = editor.menuContainer.$menuContainer;\n        var $menuDom = menu.selected ? menu.$domSelected : menu.$domNormal;\n        // 注意这里的 offsetParent() 要返回 .menu-item 的 position\n        // 因为 .menu-item 是 position:relative\n        var menuPosition = $menuDom.offsetParent().position();\n\n        // 取得 menu 的位置、尺寸属性\n        var menuTop = menuPosition.top;\n        var menuLeft = menuPosition.left;\n        var menuHeight = $menuDom.offsetParent().height();\n        var menuWidth = $menuDom.offsetParent().width();\n\n        // 取得 list 的尺寸属性\n        var listWidth = $list.outerWidth();\n        // var listHeight = $list.outerHeight();\n\n        // 取得 $txt 的尺寸\n        var txtWidth = editor.txt.$txt.outerWidth();\n\n        // ------------开始计算-------------\n\n        // 初步计算 list 位置属性\n        var top = menuTop + menuHeight;\n        var left = menuLeft + menuWidth/2;\n        var marginLeft = 0 - menuWidth/2;\n\n        // 如果超出了有边界，则要左移（且和右侧有间隙）\n        var valWithTxt = (left + listWidth) - txtWidth;\n        if (valWithTxt > -10) {\n            marginLeft = marginLeft - valWithTxt - 10;\n        }\n        // 设置样式\n        $list.css({\n            top: top,\n            left: left,\n            'margin-left': marginLeft\n        });\n\n        // 如果因为向下滚动而导致菜单fixed，则再加一步处理\n        if (editor._isMenufixed) {\n            top = top + (($menuContainer.offset().top + $menuContainer.outerHeight()) - $list.offset().top);\n\n            // 重新设置top\n            $list.css({\n                top: top\n            });\n        }\n    };\n\n    // 显示\n    DropList.fn.show = function () {\n        var self = this;\n        var menu = self.menu;\n        if (!self.rendered) {\n            // 第一次show之前，先渲染\n            self._render();\n        }\n\n        if (self.isShowing) {\n            return;\n        }\n\n        var $list = self.$list;\n        $list.show();\n\n        // 定位\n        self._position();\n\n        // 记录状态\n        self.isShowing = true;\n\n        // 菜单状态\n        menu.activeStyle(true);\n    };\n\n    // 隐藏\n    DropList.fn.hide = function () {\n        var self = this;\n        var menu = self.menu;\n        if (!self.isShowing) {\n            return;\n        }\n\n        var $list = self.$list;\n        $list.hide();\n\n        // 记录状态\n        self.isShowing = false;\n\n        // 菜单状态\n        menu.activeStyle(false);\n    };\n});\n// dropPanel 构造函数\n_e(function (E, $) {\n\n    // 定义构造函数\n    var DropPanel = function (editor, menu, opt) {\n        this.editor = editor;\n        this.menu = menu;\n        this.$content = opt.$content;\n        this.width = opt.width || 200;\n        this.height = opt.height;\n        this.onRender = opt.onRender;\n\n        // init\n        this.init();\n    };\n\n    DropPanel.fn = DropPanel.prototype;\n\n    // 暴露给 E 即 window.wangEditor\n    E.DropPanel = DropPanel;\n});\n// dropPanel fn bind\n_e(function (E, $) {\n\n    var DropPanel = E.DropPanel;\n\n    // init\n    DropPanel.fn.init = function () {\n        var self = this;\n\n        // 生成dom对象\n        self.initDOM();\n\n        // 声明隐藏的事件\n        self.initHideEvent();\n    };\n\n    // init DOM\n    DropPanel.fn.initDOM = function () {\n        var self = this;\n        var $content = self.$content;\n        var width = self.width;\n        var height = self.height;\n        var $panel = $('<div class=\"wangEditor-drop-panel clearfix\"></div>');\n        var $triangle = $('<div class=\"tip-triangle\"></div>');\n\n        $panel.css({\n            width: width,\n            height: height ? height : 'auto'\n        });\n        $panel.append($triangle);\n        $panel.append($content);\n\n        // 添加对象数据\n        self.$panel = $panel;\n        self.$triangle = $triangle;\n    };\n\n    // 点击其他地方，立即隐藏 dropPanel\n    DropPanel.fn.initHideEvent = function () {\n        var self = this;\n\n        // 获取 panel elem\n        var thisPanle = self.$panel.get(0);\n\n        E.$body.on('click', function (e) {\n            if (!self.isShowing) {\n                return;\n            }\n            var trigger = e.target;\n\n            // 获取菜单elem\n            var menu = self.menu;\n            var menuDom;\n            if (menu.selected) {\n                menuDom = menu.$domSelected.get(0);\n            } else {\n                menuDom = menu.$domNormal.get(0);\n            }\n\n            if (menuDom === trigger || $.contains(menuDom, trigger)) {\n                // 说明由本菜单点击触发的\n                return;\n            }\n\n            if (thisPanle === trigger || $.contains(thisPanle, trigger)) {\n                // 说明由本panel点击触发的\n                return;\n            }\n\n            // 其他情况，隐藏 panel\n            self.hide();\n        });\n\n        E.$window.scroll(function (e) {\n            self.hide();\n        });\n\n        E.$window.on('resize', function () {\n            self.hide();\n        });\n    };\n\n});\n// dropPanel fn api\n_e(function (E, $) {\n   \n    var DropPanel = E.DropPanel;\n\n    // 渲染\n    DropPanel.fn._render = function () {\n        var self = this;\n        var onRender = self.onRender;\n        var editor = self.editor;\n        var $panel = self.$panel;\n\n        // 渲染到页面\n        editor.$editorContainer.append($panel);\n\n        // 渲染后的回调事件\n        onRender && onRender.call(self);\n\n        // 记录状态\n        self.rendered = true;\n    };\n\n    // 定位\n    DropPanel.fn._position = function () {\n        var self = this;\n        var $panel = self.$panel;\n        var $triangle = self.$triangle;\n        var editor = self.editor;\n        var $menuContainer = editor.menuContainer.$menuContainer;\n        var menu = self.menu;\n        var $menuDom = menu.selected ? menu.$domSelected : menu.$domNormal;\n        // 注意这里的 offsetParent() 要返回 .menu-item 的 position\n        // 因为 .menu-item 是 position:relative\n        var menuPosition = $menuDom.offsetParent().position();\n\n        // 取得 menu 的位置、尺寸属性\n        var menuTop = menuPosition.top;\n        var menuLeft = menuPosition.left;\n        var menuHeight = $menuDom.offsetParent().height();\n        var menuWidth = $menuDom.offsetParent().width();\n\n        // 取得 panel 的尺寸属性\n        var panelWidth = $panel.outerWidth();\n        // var panelHeight = $panel.outerHeight();\n\n        // 取得 $txt 的尺寸\n        var txtWidth = editor.txt.$txt.outerWidth();\n\n        // ------------开始计算-------------\n\n        // 初步计算 panel 位置属性\n        var top = menuTop + menuHeight;\n        var left = menuLeft + menuWidth/2;\n        var marginLeft = 0 - panelWidth/2;\n        var marginLeft2 = marginLeft;  // 下文用于和 marginLeft 比较，来设置三角形tip的位置\n\n        // 如果超出了左边界，则移动回来（要和左侧有10px间隙）\n        if ((0 - marginLeft) > (left - 10)) {\n            marginLeft = 0 - (left - 10);\n        }\n\n        // 如果超出了有边界，则要左移（且和右侧有10px间隙）\n        var valWithTxt = (left + panelWidth + marginLeft) - txtWidth;\n        if (valWithTxt > -10) {\n            marginLeft = marginLeft - valWithTxt - 10;\n        }\n\n        // 设置样式\n        $panel.css({\n            top: top,\n            left: left,\n            'margin-left': marginLeft\n        });\n\n        // 如果因为向下滚动而导致菜单fixed，则再加一步处理\n        if (editor._isMenufixed) {\n            top = top + (($menuContainer.offset().top + $menuContainer.outerHeight()) - $panel.offset().top);\n\n            // 重新设置top\n            $panel.css({\n                top: top\n            });\n        }\n\n        // 设置三角形 tip 的位置\n        $triangle.css({\n            'margin-left': marginLeft2 - marginLeft - 5\n        });\n    };\n\n    // focus 第一个 input\n    DropPanel.fn.focusFirstInput = function () {\n        var self = this;\n        var $panel = self.$panel;\n        $panel.find('input[type=text],textarea').each(function () {\n            var $input = $(this);\n            if ($input.attr('disabled') == null) {\n                $input.focus();\n                return false;\n            }\n        });\n    };\n\n    // 显示\n    DropPanel.fn.show = function () {\n        var self = this;\n        var menu = self.menu;\n        if (!self.rendered) {\n            // 第一次show之前，先渲染\n            self._render();\n        }\n\n        if (self.isShowing) {\n            return;\n        }\n\n        var $panel = self.$panel;\n        $panel.show();\n\n        // 定位\n        self._position();\n\n        // 记录状态\n        self.isShowing = true;\n\n        // 菜单状态\n        menu.activeStyle(true);\n\n        if (E.w3cRange) {\n            // 高级浏览器\n            self.focusFirstInput();\n        } else {\n            // 兼容 IE8 input placeholder\n            E.placeholderForIE8($panel);\n        }\n    };\n\n    // 隐藏\n    DropPanel.fn.hide = function () {\n        var self = this;\n        var menu = self.menu;\n        if (!self.isShowing) {\n            return;\n        }\n\n        var $panel = self.$panel;\n        $panel.hide();\n\n        // 记录状态\n        self.isShowing = false;\n\n        // 菜单状态\n        menu.activeStyle(false);\n    };\n\n});\n// modal 构造函数\n_e(function (E, $) {\n\n    // 定义构造函数\n    var Modal = function (editor, menu, opt) {\n        this.editor = editor;\n        this.menu = menu;\n        this.$content = opt.$content;\n\n        this.init();\n    };\n\n    Modal.fn = Modal.prototype;\n\n    // 暴露给 E 即 window.wangEditor\n    E.Modal = Modal;\n});\n// modal fn bind\n_e(function (E, $) {\n\n    var Modal = E.Modal;\n\n    Modal.fn.init = function () {\n        var self = this;\n\n        // 初始化dom\n        self.initDom();\n\n        // 初始化隐藏事件\n        self.initHideEvent();\n    };\n\n    // 初始化dom\n    Modal.fn.initDom = function () {\n        var self = this;\n        var $content = self.$content;\n        var $modal = $('<div class=\"wangEditor-modal\"></div>');\n        var $close = $('<div class=\"wangEditor-modal-close\"><i class=\"wangeditor-menu-img-cancel-circle\"></i></div>');\n\n        $modal.append($close);\n        $modal.append($content);\n\n        // 记录数据\n        self.$modal = $modal;\n        self.$close = $close;\n    };\n\n    // 初始化隐藏事件\n    Modal.fn.initHideEvent = function () {\n        var self = this;\n        var $close = self.$close;\n        var modal = self.$modal.get(0);\n\n        // 点击 $close 按钮，隐藏\n        $close.click(function () {\n            self.hide();\n        });\n\n        // 点击其他部分，隐藏\n        E.$body.on('click', function (e) {\n            if (!self.isShowing) {\n                return;\n            }\n            var trigger = e.target;\n\n            // 获取菜单elem\n            var menu = self.menu;\n            var menuDom;\n            if (menu) {\n                if (menu.selected) {\n                    menuDom = menu.$domSelected.get(0);\n                } else {\n                    menuDom = menu.$domNormal.get(0);\n                }\n\n                if (menuDom === trigger || $.contains(menuDom, trigger)) {\n                    // 说明由本菜单点击触发的\n                    return;\n                }\n            }\n\n            if (modal === trigger || $.contains(modal, trigger)) {\n                // 说明由本panel点击触发的\n                return;\n            }\n\n            // 其他情况，隐藏 panel\n            self.hide();\n        });\n    };\n});\n// modal fn api\n_e(function (E, $) {\n\n    var Modal = E.Modal;\n\n    // 渲染\n    Modal.fn._render = function () {\n        var self = this;\n        var editor = self.editor;\n        var $modal = self.$modal;\n\n        // $modal的z-index，在配置的z-index基础上再 +10\n        $modal.css('z-index', editor.config.zindex + 10 + '');\n\n        // 渲染到body最后面\n        E.$body.append($modal);\n\n        // 记录状态\n        self.rendered = true;\n    };\n\n    // 定位\n    Modal.fn._position = function () {\n        var self = this;\n        var $modal = self.$modal;\n        var top = $modal.offset().top;\n        var width = $modal.outerWidth();\n        var height = $modal.outerHeight();\n        var marginLeft = 0 - (width / 2);\n        var marginTop = 0 - (height / 2);\n        var sTop = E.$window.scrollTop();\n\n        // 保证modal最顶部，不超过浏览器上边框\n        if ((height / 2) > top) {\n            marginTop = 0 - top;\n        }\n\n        $modal.css({\n            'margin-left': marginLeft + 'px',\n            'margin-top': (marginTop + sTop) + 'px'\n        });\n    };\n\n    // 显示\n    Modal.fn.show = function () {\n        var self = this;\n        var menu = self.menu;\n        if (!self.rendered) {\n            // 第一次show之前，先渲染\n            self._render();\n        }\n\n        if (self.isShowing) {\n            return;\n        }\n        // 记录状态\n        self.isShowing = true;\n\n        var $modal = self.$modal;\n        $modal.show();\n\n        // 定位\n        self._position();\n\n        // 激活菜单状态\n        menu && menu.activeStyle(true);\n    };\n\n    // 隐藏\n    Modal.fn.hide = function () {\n        var self = this;\n        var menu = self.menu;\n        if (!self.isShowing) {\n            return;\n        }\n        // 记录状态\n        self.isShowing = false;\n\n        // 隐藏\n        var $modal = self.$modal;\n        $modal.hide();\n\n        // 菜单状态\n        menu && menu.activeStyle(false);\n    };\n});\n// txt 构造函数\n_e(function (E, $) {\n\n    // 定义构造函数\n    var Txt = function (editor) {\n        this.editor = editor;\n\n        // 初始化\n        this.init();\n    };\n\n    Txt.fn = Txt.prototype;\n\n    // 暴露给 E 即 window.wangEditor\n    E.Txt = Txt;\n});\n// Txt.fn bind fn\n_e(function (E, $) {\n\n    var Txt = E.Txt;\n\n    // 初始化\n    Txt.fn.init = function () {\n        var self = this;\n        var editor = self.editor;\n        var $valueContainer = editor.$valueContainer;\n        var currentValue = editor.getInitValue();\n        var $txt;\n\n        if ($valueContainer.get(0).nodeName === 'DIV') {\n            // 如果传入生成编辑器的元素就是div，则直接使用\n            $txt = $valueContainer;\n            $txt.addClass(\"wangEditor-txt\");\n            $txt.attr('contentEditable', 'true');\n        } else {\n            // 如果不是div（是textarea），则创建一个div\n            $txt = $(\n                '<div class=\"wangEditor-txt\" contentEditable=\"true\">' +\n                    currentValue +\n                '</div>'\n            );\n        }\n\n        // 试图最后插入一个空行，ready之后才行\n        editor.ready(function () {\n            self.insertEmptyP();\n        });\n\n        self.$txt = $txt;\n\n        // 删除时，如果没有内容了，就添加一个 <p><br></p>\n        self.contentEmptyHandle();\n\n        // enter时，不能使用 div 换行\n        self.bindEnterForDiv();\n\n        // enter时，用 p 包裹 text\n        self.bindEnterForText();\n\n        // tab 插入4个空格\n        self.bindTabEvent();\n\n        // 处理粘贴内容\n        self.bindPasteFilter();\n\n        // $txt.formatText() 方法\n        self.bindFormatText();\n\n        // 定义 $txt.html() 方法\n        self.bindHtml();\n    };\n\n    // 删除时，如果没有内容了，就添加一个 <p><br></p>\n    Txt.fn.contentEmptyHandle = function () {\n        var self = this;\n        var editor = self.editor;\n        var $txt = self.$txt;\n        var $p;\n\n        $txt.on('keydown', function (e) {\n            if (e.keyCode !== 8) {\n                return;\n            }\n            var txtHtml = $.trim($txt.html().toLowerCase());\n            if (txtHtml === '<p><br></p>') {\n                // 如果最后还剩余一个空行，就不再继续删除了\n                e.preventDefault();\n                return;\n            }\n        });\n\n        $txt.on('keyup', function (e) {\n            if (e.keyCode !== 8) {\n                return;\n            }\n            var txtHtml = $.trim($txt.html().toLowerCase());\n            // ff时用 txtHtml === '<br>' 判断，其他用 !txtHtml 判断\n            if (!txtHtml || txtHtml === '<br>') {\n                // 内容空了\n                $p = $('<p><br/></p>');\n                $txt.html(''); // 一定要先清空，否则在 ff 下有问题\n                $txt.append($p);\n                editor.restoreSelectionByElem($p.get(0));\n            }\n        });\n    };\n\n    // enter时，不能使用 div 换行\n    Txt.fn.bindEnterForDiv = function () {\n        var tags = E.config.legalTags; // 配置中编辑器要求的合法标签，如 p head table blockquote ul ol 等\n        var self = this;\n        var editor = self.editor;\n        var $txt = self.$txt;\n\n        var $keydownDivElem;\n        function divHandler() {\n            if (!$keydownDivElem) {\n                return;\n            }\n\n            var $pElem = $('<p>' + $keydownDivElem.html() + '</p>');\n            $keydownDivElem.after($pElem);\n            $keydownDivElem.remove();\n        }\n\n        $txt.on('keydown keyup', function (e) {\n            if (e.keyCode !== 13) {\n                return;\n            }\n            // 查找合法标签\n            var rangeElem = editor.getRangeElem();\n            var targetElem = editor.getLegalTags(rangeElem);\n            var $targetElem;\n            var $pElem;\n\n            if (!targetElem) {\n                // 没找到合法标签，就去查找 div\n                targetElem = editor.getSelfOrParentByName(rangeElem, 'div');\n                if (!targetElem) {\n                    return;\n                }\n                $targetElem = $(targetElem);\n\n                if (e.type === 'keydown') {\n                    // 异步执行（同步执行会出现问题）\n                    $keydownDivElem = $targetElem;\n                    setTimeout(divHandler, 0);\n                }\n\n                if (e.type === 'keyup') {\n                    // 将 div 的内容移动到 p 里面，并移除 div\n                    $pElem = $('<p>' + $targetElem.html() + '</p>');\n                    $targetElem.after($pElem);\n                    $targetElem.remove();\n\n                    // 如果是回车结束，将选区定位到行首\n                    editor.restoreSelectionByElem($pElem.get(0), 'start');\n                }\n            }\n        });\n    };\n\n    // enter时，用 p 包裹 text\n    Txt.fn.bindEnterForText = function () {\n        var self = this;\n        var $txt = self.$txt;\n        var handle;\n        $txt.on('keyup', function (e) {\n            if (e.keyCode !== 13) {\n                return;\n            }\n            if (!handle) {\n                handle = function() {\n                    self.wrapImgAndText();\n                };\n            }\n            setTimeout(handle);\n        });\n    };\n\n    // tab 时，插入4个空格\n    Txt.fn.bindTabEvent = function () {\n        var self = this;\n        var editor = self.editor;\n        var $txt = self.$txt;\n\n        $txt.on('keydown', function (e) {\n            if (e.keyCode !== 9) {\n                // 只监听 tab 按钮\n                return;\n            }\n            // 如果浏览器支持 insertHtml 则插入4个空格。如果不支持，就不管了\n            if (editor.queryCommandSupported('insertHtml')) {\n                editor.command(e, 'insertHtml', '&nbsp;&nbsp;&nbsp;&nbsp;');\n            }\n        });\n    };\n\n    // 处理粘贴内容\n    Txt.fn.bindPasteFilter = function () {\n        var self = this;\n        var editor = self.editor;\n        var resultHtml = '';  //存储最终的结果\n        var $txt = self.$txt;\n        var legalTags = editor.config.legalTags;\n        var legalTagArr = legalTags.split(',');\n\n        $txt.on('paste', function (e) {\n            if (!editor.config.pasteFilter) {\n                // 配置中取消了粘贴过滤\n                return;\n            }\n\n            var currentNodeName = editor.getRangeElem().nodeName;\n            if (currentNodeName === 'TD' || currentNodeName === 'TH') {\n                // 在表格的单元格中粘贴，忽略所有内容。否则会出现异常情况\n                return;\n            }\n\n            resultHtml = ''; // 先清空 resultHtml\n\n            var pasteHtml, $paste, docSplitHtml;\n            var data = e.clipboardData || e.originalEvent.clipboardData;\n            var ieData = window.clipboardData;\n\n            if (editor.config.pasteText) {\n                // 只粘贴纯文本\n\n                if (data && data.getData) {\n                    // w3c\n                    pasteHtml = data.getData('text/plain');\n                } else if (ieData && ieData.getData) {\n                    // IE\n                    pasteHtml = ieData.getData('text');\n                } else {\n                    // 其他情况\n                    return;\n                }\n\n                // 拼接为 <p> 标签\n                if (pasteHtml) {\n                    resultHtml = '<p>' + pasteHtml + '</p>';\n                }\n\n            } else {\n                // 粘贴过滤了样式的、只有标签的 html\n\n                if (data && data.getData) {\n                    // w3c\n\n                    // 获取粘贴过来的html\n                    pasteHtml = data.getData('text/html');\n\n                    // 过滤从 word excel 粘贴过来的乱码\n                    docSplitHtml = pasteHtml.split('</html>');\n                    if (docSplitHtml.length === 2) {\n                        pasteHtml = docSplitHtml[0];\n                    }\n\n                    if (pasteHtml) {\n                        // 创建dom\n                        $paste = $('<div>' + pasteHtml + '</div>');\n                        // 处理，并将结果存储到 resultHtml 『全局』变量\n                        handle($paste.get(0));\n                    } else {\n                        // 得不到html，试图获取text\n                        pasteHtml = data.getData('text/plain');\n                        if (pasteHtml) {\n                            // 替换特殊字符\n                            pasteHtml = pasteHtml.replace(/[ ]/g, '&nbsp;')\n                                                 .replace(/</g, '&lt;')\n                                                 .replace(/>/g, '&gt;')\n                                                 .replace(/\\n/g, '</p><p>');\n                            // 拼接\n                            resultHtml = '<p>' + pasteHtml + '</p>';\n\n                            // 查询链接\n                            resultHtml = resultHtml.replace(/<p>(https?:\\/\\/.*?)<\\/p>/ig, function (match, link) {\n                                return '<p><a href=\"' + link + '\" target=\"_blank\">' + link + '</p>';\n                            });\n                        }\n                    }\n                    \n                } else if (ieData && ieData.getData) {\n                    // IE 直接从剪切板中取出纯文本格式\n                    resultHtml = ieData.getData('text');\n                    if (!resultHtml) {\n                        return;\n                    }\n                    // 拼接为 <p> 标签\n                    resultHtml = '<p>' + resultHtml + '</p>';\n                    resultHtml = resultHtml.replace(new RegExp('\\n', 'g'), '</p><p>');\n                } else {\n                    // 其他情况\n                    return;\n                }\n            }\n\n            // 执行命令\n            if (resultHtml) {\n                editor.command(e, 'insertHtml', resultHtml);\n\n                // 删除内容为空的 p 和嵌套的 p\n                self.clearEmptyOrNestP();\n            }\n        });\n\n        // 处理粘贴的内容\n        function handle(elem) {\n            if (!elem || !elem.nodeType || !elem.nodeName) {\n                return;\n            }\n            var $elem;\n            var nodeName = elem.nodeName.toLowerCase();\n            var nodeType = elem.nodeType;\n            var childNodesClone;\n\n            // 只处理文本和普通node标签\n            if (nodeType !== 3 && nodeType !== 1) {\n                return;\n            }\n\n            $elem = $(elem);\n\n            // 如果是容器，则继续深度遍历\n            if (nodeName === 'div') {\n                childNodesClone = [];\n                $.each(elem.childNodes, function (index, item) {\n                    // elem.childNodes 可获取TEXT节点，而 $elem.children() 就获取不到\n                    // 先将 elem.childNodes 拷贝一份，一面在循环递归过程中 elem 发生变化\n                    childNodesClone.push(item);\n                });\n                // 遍历子元素，执行操作\n                $.each(childNodesClone, function () {\n                    handle(this);\n                });\n                return;\n            }\n            \n            if (legalTagArr.indexOf(nodeName) >= 0) {\n                // 如果是合法标签之内的，则根据元素类型，获取值\n                resultHtml += getResult(elem);\n            } else if (nodeType === 3) {\n                // 如果是文本，则直接插入 p 标签\n                resultHtml += '<p>' + elem.textContent + '</p>';\n            } else if (nodeName === 'br') {\n                // <br>保留\n                resultHtml += '<br/>';\n            }\n            else {\n                // 忽略的标签\n                if (['meta', 'style', 'script', 'object', 'form', 'iframe', 'hr'].indexOf(nodeName) >= 0) {\n                    return;\n                }\n                // 其他标签，移除属性，插入 p 标签\n                $elem = $(removeAttrs(elem));\n                // 注意，这里的 clone() 是必须的，否则会出错\n                resultHtml += $('<div>').append($elem.clone()).html();\n            }\n        }\n\n        // 获取元素的结果\n        function getResult(elem) {\n            var nodeName = elem.nodeName.toLowerCase();\n            var $elem;\n            var htmlForP = '';\n            var htmlForLi = '';\n\n            if (['blockquote'].indexOf(nodeName) >= 0) {\n\n                // 直接取出元素text即可\n                $elem = $(elem);\n                return '<' + nodeName + '>' + $elem.text() + '</' + nodeName + '>';\n\n            } else if (['p', 'h1', 'h2', 'h3', 'h4', 'h5'].indexOf(nodeName) >= 0) {\n\n                //p head 取出 text 和链接\n                elem = removeAttrs(elem);\n                $elem = $(elem);\n                htmlForP = $elem.html();\n\n                // 剔除 a img 之外的元素\n                htmlForP = htmlForP.replace(/<.*?>/ig, function (tag) {\n                    if (tag === '</a>' || tag.indexOf('<a ') === 0 || tag.indexOf('<img ') === 0) {\n                        return tag;\n                    } else {\n                        return '';\n                    }\n                });\n\n                return '<' + nodeName + '>' + htmlForP + '</' + nodeName + '>';\n\n            } else if (['ul', 'ol'].indexOf(nodeName) >= 0) {\n                \n                // ul ol元素，获取子元素（li元素）的text link img，再拼接\n                $elem = $(elem);\n                $elem.children().each(function () {\n                    var $li = $(removeAttrs(this));\n                    var html = $li.html();\n\n                    html = html.replace(/<.*?>/ig, function (tag) {\n                        if (tag === '</a>' || tag.indexOf('<a ') === 0 || tag.indexOf('<img ') === 0) {\n                            return tag;\n                        } else {\n                            return '';\n                        }\n                    });\n\n                    htmlForLi += '<li>' + html + '</li>';\n                });\n                return '<' + nodeName + '>' + htmlForLi + '</' + nodeName + '>';\n            \n            } else {\n                \n                // 其他元素，移除元素属性\n                $elem = $(removeAttrs(elem));\n                return $('<div>').append($elem).html();\n            }\n        }\n\n        // 移除一个元素（子元素）的attr\n        function removeAttrs(elem) {\n            var attrs = elem.attributes || [];\n            var attrNames = [];\n            var exception = ['href', 'target', 'src', 'alt', 'rowspan', 'colspan']; //例外情况\n\n            // 先存储下elem中所有 attr 的名称\n            $.each(attrs, function (key, attr) {\n                if (attr && attr.nodeType === 2) {\n                    attrNames.push(attr.nodeName);\n                }\n            });\n            // 再根据名称删除所有attr\n            $.each(attrNames, function (key, attr) {\n                if (exception.indexOf(attr) < 0) {\n                    // 除了 exception 规定的例外情况，删除其他属性\n                    elem.removeAttribute(attr);\n                }\n            });\n\n\n            // 递归子节点\n            var children = elem.childNodes;\n            if (children.length) {\n                $.each(children, function (key, value) {\n                    removeAttrs(value);\n                });\n            }\n\n            return elem;\n        }\n    };\n\n    // 绑定 $txt.formatText() 方法\n    Txt.fn.bindFormatText = function () {\n        var self = this;\n        var editor = self.editor;\n        var $txt = self.$txt;\n        var legalTags = E.config.legalTags;\n        var legalTagArr = legalTags.split(',');\n        var length = legalTagArr.length;\n        var regArr = [];\n\n        // 将 E.config.legalTags 配置的有效字符，生成正则表达式\n        $.each(legalTagArr, function (k, tag) {\n            var reg = '\\>\\\\s*\\<(' + tag + ')\\>';\n            regArr.push(new RegExp(reg, 'ig'));\n        });\n\n        // 增加 li \n        regArr.push(new RegExp('\\>\\\\s*\\<(li)\\>', 'ig'));\n\n        // 增加 tr\n        regArr.push(new RegExp('\\>\\\\s*\\<(tr)\\>', 'ig'));\n\n        // 增加 code\n        regArr.push(new RegExp('\\>\\\\s*\\<(code)\\>', 'ig'));\n\n        // 生成 formatText 方法\n        $txt.formatText = function () {\n            var $temp = $('<div>');\n            var html = $txt.html();\n\n            // 去除空格\n            html = html.replace(/\\s*</ig, '<');\n\n            // 段落、表格之间换行\n            $.each(regArr, function (k, reg) {\n                if (!reg.test(html)) {\n                    return;\n                }\n                html = html.replace(reg, function (matchStr, tag) {\n                    return '>\\n<' + tag + '>';\n                });\n            });\n\n            $temp.html(html);\n            return $temp.text();\n        };\n    };\n\n    // 定制 $txt.html 方法\n    Txt.fn.bindHtml = function () {\n        var self = this;\n        var editor = self.editor;\n        var $txt = self.$txt;\n        var $valueContainer = editor.$valueContainer;\n        var valueNodeName = editor.valueNodeName;\n\n        $txt.html = function (html) {\n            var result;\n\n            if (valueNodeName === 'div') {\n                // div 生成的编辑器，取值、赋值，都直接触发jquery的html方法\n                result = $.fn.html.call($txt, html);\n            }\n\n            // textarea 生成的编辑器，则需要考虑赋值时，也给textarea赋值\n\n            if (html === undefined) {\n                // 取值，直接触发jquery原生html方法\n                result = $.fn.html.call($txt);\n\n                // 替换 html 中，src和href属性中的 & 字符。\n                // 因为 .html() 或者 .innerHTML 会把所有的 & 字符都改成 &amp; 但是 src 和 href 中的要保持 &\n                result = result.replace(/(href|src)\\=\\\"(.*)\\\"/igm, function (a, b, c) {\n                    return b + '=\"' + c.replace('&amp;', '&') + '\"';\n                });\n            } else {\n                // 赋值，需要同时给 textarea 赋值\n                result = $.fn.html.call($txt, html);\n                $valueContainer.val(html);\n            }\n\n            if (html === undefined) {\n                return result;\n            } else {\n                // 手动触发 change 事件，因为 $txt 监控了 change 事件来判断是否需要执行 editor.onchange \n                $txt.change();\n            }\n        };\n    };\n});\n// Txt.fn api\n_e(function (E, $) {\n\n    var Txt = E.Txt;\n\n    var txtChangeEventNames = 'propertychange change click keyup input paste';\n\n    // 渲染\n    Txt.fn.render = function () {\n        var $txt = this.$txt;\n        var $editorContainer = this.editor.$editorContainer;\n        $editorContainer.append($txt);\n    };\n\n    // 计算高度\n    Txt.fn.initHeight = function () {\n        var editor = this.editor;\n        var $txt = this.$txt;\n        var valueContainerHeight = editor.$valueContainer.height();\n        var menuHeight = editor.menuContainer.height();\n        var txtHeight = valueContainerHeight - menuHeight;\n\n        // 限制最小为 50px\n        txtHeight = txtHeight < 50 ? 50 : txtHeight;\n\n        $txt.height(txtHeight);\n\n        // 记录原始高度\n        editor.valueContainerHeight = valueContainerHeight;\n\n        // 设置 max-height\n        this.initMaxHeight(txtHeight, menuHeight);\n    };\n\n    // 计算最大高度\n    Txt.fn.initMaxHeight = function (txtHeight, menuHeight) {\n        var editor = this.editor;\n        var $menuContainer = editor.menuContainer.$menuContainer;\n        var $txt = this.$txt;\n        var $wrap = $('<div>');\n\n        // 需要浏览器支持 max-height，否则不管\n        if (window.getComputedStyle && 'max-height'in window.getComputedStyle($txt.get(0))) {\n            // 获取 max-height 并判断是否有值\n            var maxHeight = parseInt(editor.$valueContainer.css('max-height'));\n            if (isNaN(maxHeight)) {\n                return;\n            }\n\n            // max-height 和『全屏』暂时有冲突\n            if (editor.menus.fullscreen) {\n                E.warn('max-height和『全屏』菜单一起使用时，会有一些问题尚未解决，请暂时不要两个同时使用');\n                return;\n            }\n\n            // 标记\n            editor.useMaxHeight = true;\n\n            // 设置maxheight\n            $wrap.css({\n                'max-height': (maxHeight - menuHeight) + 'px',\n                'overflow-y': 'auto'\n            });\n            $txt.css({\n                'height': 'auto',\n                'overflow-y': 'visible',\n                'min-height': txtHeight + 'px'\n            });\n\n            // 滚动式，菜单阴影\n            $wrap.on('scroll', function () {\n                if ($txt.parent().scrollTop() > 10) {\n                    $menuContainer.addClass('wangEditor-menu-shadow');\n                } else {\n                    $menuContainer.removeClass('wangEditor-menu-shadow');\n                }\n            });\n\n            // 需在编辑器区域外面再包裹一层\n            $txt.wrap($wrap);\n        }\n    };\n\n    // 保存选区\n    Txt.fn.saveSelectionEvent = function () {\n        var $txt = this.$txt;\n        var editor = this.editor;\n        var timeoutId;\n        var dt = Date.now();\n\n        function save() {\n            editor.saveSelection();\n        }\n\n        // 同步保存选区\n        function saveSync() {\n            // 100ms之内，不重复保存\n            if (Date.now() - dt < 100) {\n                return;\n            }\n\n            dt = Date.now();\n            save();\n        }\n\n        // 异步保存选区\n        function saveAync() {\n            // 节流，防止高频率重复操作\n            if (timeoutId) {\n                clearTimeout(timeoutId);\n            }\n            timeoutId = setTimeout(save, 300);\n        }\n\n        // txt change 、focus、blur 时随时保存选区\n        $txt.on(txtChangeEventNames + ' focus blur', function (e) {\n            // 先同步保存选区，为了让接下来就马上要执行 editor.getRangeElem() 的程序\n            // 能够获取到正确的 rangeElem\n            saveSync();\n\n            // 再异步保存选区，为了确定更加准确的选区，为后续的操作做准备\n            saveAync();\n        });\n\n        // 鼠标拖拽选择时，可能会拖拽到编辑器区域外面再松手，此时 $txt 就监听不到 click事件了\n        $txt.on('mousedown', function () {\n            $txt.on('mouseleave.saveSelection', function (e) {\n                // 先同步后异步，如上述注释\n                saveSync();\n                saveAync();\n\n                // 顺道吧菜单状态也更新了\n                editor.updateMenuStyle();\n            });\n        }).on('mouseup', function () {\n            $txt.off('mouseleave.saveSelection');\n        });\n        \n    };\n\n    // 随时更新 value\n    Txt.fn.updateValueEvent = function () {\n        var $txt = this.$txt;\n        var editor = this.editor;\n        var timeoutId, oldValue;\n\n        // 触发 onchange 事件\n        function doOnchange() {\n            var val = $txt.html();\n            if (oldValue === val) {\n                // 无变化\n                return;\n            }\n\n            // 触发 onchange 事件\n            if (editor.onchange && typeof editor.onchange === 'function') {\n                editor.onchange.call(editor);\n            }\n\n            // 更新内容\n            editor.updateValue();\n\n            // 记录最新内容\n            oldValue = val;\n        }\n\n        // txt change 时随时更新内容\n        $txt.on(txtChangeEventNames, function (e) {\n            // 初始化\n            if (oldValue == null) {\n                oldValue = $txt.html();\n            }\n\n            // 监控内容变化（停止操作 100ms 之后立即执行）\n            if (timeoutId) {\n                clearTimeout(timeoutId);\n            }\n            timeoutId = setTimeout(doOnchange, 100);\n        });\n    };\n\n    // 随时更新 menustyle\n    Txt.fn.updateMenuStyleEvent = function () {\n        var $txt = this.$txt;\n        var editor = this.editor;\n\n        // txt change 时随时更新内容\n        $txt.on(txtChangeEventNames, function (e) {\n            editor.updateMenuStyle();\n        });\n    };\n\n    // 最后插入试图插入 <p><br><p>\n    Txt.fn.insertEmptyP = function () {\n        var $txt = this.$txt;\n        var $children = $txt.children();\n\n        if ($children.length === 0) {\n            $txt.append($('<p><br></p>'));\n            return;\n        }\n\n        if ($.trim($children.last().html()).toLowerCase() !== '<br>') {\n            $txt.append($('<p><br></p>'));\n        }\n    };\n\n    // 将编辑器暴露出来的文字和图片，都用 p 来包裹\n    Txt.fn.wrapImgAndText = function () {\n        var $txt = this.$txt;\n        var $imgs = $txt.children('img');\n        var txt = $txt[0];\n        var childNodes = txt.childNodes;\n        var childrenLength = childNodes.length;\n        var i, childNode, p;\n\n        // 处理图片\n        $imgs.length && $imgs.each(function () {\n            $(this).wrap('<p>');\n        });\n\n        // 处理文字\n        for (i = 0; i < childrenLength; i++) {\n            childNode = childNodes[i];\n            if (childNode.nodeType === 3 && childNode.textContent && $.trim(childNode.textContent)) {\n                $(childNode).wrap('<p>');\n            }\n        }\n    };\n\n    // 清空内容为空的<p>，以及重复包裹的<p>（在windows下的chrome粘贴文字之后，会出现上述情况）\n    Txt.fn.clearEmptyOrNestP = function () {\n        var $txt = this.$txt;\n        var $pList = $txt.find('p');\n\n        $pList.each(function () {\n            var $p = $(this);\n            var $children = $p.children();\n            var childrenLength = $children.length;\n            var $firstChild;\n            var content = $.trim($p.html());\n\n            // 内容为空的p\n            if (!content) {\n                $p.remove();\n                return;\n            }\n\n            // 嵌套的p\n            if (childrenLength === 1) {\n                $firstChild = $children.first();\n                if ($firstChild.get(0) && $firstChild.get(0).nodeName === 'P') {\n                    $p.html( $firstChild.html() );\n                }\n            }\n        });\n    };\n\n    // 获取 scrollTop\n    Txt.fn.scrollTop = function (val) {\n        var self = this;\n        var editor = self.editor;\n        var $txt = self.$txt;\n\n        if (editor.useMaxHeight) {\n            return $txt.parent().scrollTop(val);\n        } else {\n            return $txt.scrollTop(val);\n        }\n    };\n\n    // 鼠标hover时候，显示p、head的高度\n    Txt.fn.showHeightOnHover = function () {\n        var editor = this.editor;\n        var $editorContainer = editor.$editorContainer;\n        var menuContainer = editor.menuContainer;\n        var $txt = this.$txt;\n        var $tip = $('<i class=\"height-tip\"><i>');\n        var isTipInTxt = false;\n\n        function addAndShowTip($target) {\n            if (!isTipInTxt) {\n                $editorContainer.append($tip);\n                isTipInTxt = true;\n            }\n\n            var txtTop = $txt.position().top;\n            var txtHeight = $txt.outerHeight();\n\n            var height = $target.height();\n            var top = $target.position().top;\n            var marginTop = parseInt($target.css('margin-top'), 10);\n            var paddingTop = parseInt($target.css('padding-top'), 10);\n            var marginBottom = parseInt($target.css('margin-bottom'), 10);\n            var paddingBottom = parseInt($target.css('padding-bottom'), 10);\n\n            // 计算初步的结果\n            var resultHeight = height + paddingTop + marginTop + paddingBottom + marginBottom;\n            var resultTop = top + menuContainer.height();\n            \n            // var spaceValue;\n\n            // // 判断是否超出下边界\n            // spaceValue = (resultTop + resultHeight) - (txtTop + txtHeight);\n            // if (spaceValue > 0) {\n            //     resultHeight = resultHeight - spaceValue;\n            // }\n\n            // // 判断是否超出了下边界\n            // spaceValue = txtTop > resultTop;\n            // if (spaceValue) {\n            //     resultHeight = resultHeight - spaceValue;\n            //     top = top + spaceValue;\n            // }\n\n            // 按照最终结果渲染\n            $tip.css({\n                height: height + paddingTop + marginTop + paddingBottom + marginBottom,\n                top: top + menuContainer.height()\n            });\n        }\n        function removeTip() {\n            if (!isTipInTxt) {\n                return;\n            }\n            $tip.remove();\n            isTipInTxt = false;\n        }\n\n        $txt.on('mouseenter', 'ul,ol,blockquote,p,h1,h2,h3,h4,h5,table,pre', function (e) {\n            addAndShowTip($(e.currentTarget));\n        }).on('mouseleave', function () {\n            removeTip();\n        });\n    };\n\n});\n// 工具函数\n_e(function (E, $) {\n\n    // IE8 [].indexOf()\n    if(!Array.prototype.indexOf){\n        //IE低版本不支持 arr.indexOf \n        Array.prototype.indexOf = function(elem){\n            var i = 0,\n                length = this.length;\n            for(; i<length; i++){\n                if(this[i] === elem){\n                    return i;\n                }\n            }\n            return -1;\n        };\n        //IE低版本不支持 arr.lastIndexOf\n        Array.prototype.lastIndexOf = function(elem){\n            var length = this.length;\n            for(length = length - 1; length >= 0; length--){\n                if(this[length] === elem){\n                    return length;\n                }\n            }\n            return -1;\n        };\n    }\n\n    // IE8 Date.now()\n    if (!Date.now) {\n        Date.now = function () {\n            return new Date().valueOf(); \n        };\n    }\n\n    // console.log && console.warn && console.error\n    var console = window.console;\n    var emptyFn = function () {};\n    $.each(['info', 'log', 'warn', 'error'], function (key, value) {\n        if (console == null) {\n            E[value] = emptyFn;\n        } else {\n            E[value] = function (info) {\n                // 通过配置来控制打印输出\n                if (E.config && E.config.printLog) {\n                    console[value]('wangEditor提示: ' + info);\n                }\n            };\n        }\n    });\n\n    // 获取随机数\n    E.random = function () {\n        return Math.random().toString().slice(2);\n    };\n\n    // 浏览器是否支持 placeholder\n    E.placeholder = 'placeholder' in document.createElement('input');\n\n    // 兼容IE8的 input placeholder\n    E.placeholderForIE8 = function ($container) {\n        if (E.placeholder) {\n            return;\n        }\n        $container.find('input[placeholder]').each(function () {\n            var $input = $(this);\n            var placeholder = $input.attr('placeholder');\n\n            if ($input.val() === '') {\n                $input.css('color', '#666');\n                $input.val(placeholder);\n\n                $input.on('focus.placeholder click.placeholder', function () {\n                    $input.val('');\n                    $input.css('color', '#333');\n                    $input.off('focus.placeholder click.placeholder');\n                });\n            }\n        });\n    };\n});\n// 语言包\n_e(function (E, $) {\n    E.langs = {};\n    \n    // 中文\n    E.langs['zh-cn'] = {\n        bold: '粗体',\n        underline: '下划线',\n        italic: '斜体',\n        forecolor: '文字颜色',\n        bgcolor: '背景色',\n        strikethrough: '删除线',\n        eraser: '清空格式',\n        source: '源码',\n        quote: '引用',\n        fontfamily: '字体',\n        fontsize: '字号',\n        head: '标题',\n        orderlist: '有序列表',\n        unorderlist: '无序列表',\n        alignleft: '左对齐',\n        aligncenter: '居中',\n        alignright: '右对齐',\n        link: '链接',\n        text: '文本',\n        submit: '提交',\n        cancel: '取消',\n        unlink: '取消链接',\n        table: '表格',\n        emotion: '表情',\n        img: '图片',\n        uploadImg: '上传图片',\n        linkImg: '网络图片',\n        video: '视频',\n        'width': '宽',\n        'height': '高',\n        location: '位置',\n        loading: '加载中',\n        searchlocation: '搜索位置',\n        dynamicMap: '动态地图',\n        clearLocation: '清除位置',\n        langDynamicOneLocation: '动态地图只能显示一个位置',\n        insertcode: '插入代码',\n        undo: '撤销',\n        redo: '重复',\n        fullscreen: '全屏',\n        openLink: '打开链接'\n    };\n\n    // 英文\n    E.langs.en = {\n        bold: 'Bold',\n        underline: 'Underline',\n        italic: 'Italic',\n        forecolor: 'Color',\n        bgcolor: 'Backcolor',\n        strikethrough: 'Strikethrough',\n        eraser: 'Eraser',\n        source: 'Codeview',\n        quote: 'Quote',\n        fontfamily: 'Font family',\n        fontsize: 'Font size',\n        head: 'Head',\n        orderlist: 'Ordered list',\n        unorderlist: 'Unordered list',\n        alignleft: 'Align left',\n        aligncenter: 'Align center',\n        alignright: 'Align right',\n        link: 'Insert link',\n        text: 'Text',\n        submit: 'Submit',\n        cancel: 'Cancel',\n        unlink: 'Unlink',\n        table: 'Table',\n        emotion: 'Emotions',\n        img: 'Image',\n        uploadImg: 'Upload',\n        linkImg: 'Link',\n        video: 'Video',\n        'width': 'width',\n        'height': 'height',\n        location: 'Location',\n        loading: 'Loading',\n        searchlocation: 'search',\n        dynamicMap: 'Dynamic',\n        clearLocation: 'Clear',\n        langDynamicOneLocation: 'Only one location in dynamic map',\n        insertcode: 'Insert Code',\n        undo: 'Undo',\n        redo: 'Redo',\n        fullscreen: 'Full screnn',\n        openLink: 'open link'\n    };\n});\n// 全局配置\n_e(function (E, $) {\n\n    E.config = {};\n\n    // 全屏时的 z-index\n    E.config.zindex = 10000;\n\n    // 是否打印log\n    E.config.printLog = true;\n\n    // 菜单吸顶：false - 不吸顶；number - 吸顶，值为top值\n    E.config.menuFixed = 0;\n\n    // 编辑源码时，过滤 javascript\n    E.config.jsFilter = true;\n\n    // 编辑器允许的标签\n    E.config.legalTags = 'p,h1,h2,h3,h4,h5,h6,blockquote,table,ul,ol,pre';\n\n    // 语言包\n    E.config.lang = E.langs['zh-cn'];\n\n    // 菜单配置\n    E.config.menus = [\n        'source',\n        '|',\n        'bold',\n        'underline',\n        'italic',\n        'strikethrough',\n        'eraser',\n        'forecolor',\n        'bgcolor',\n        '|',\n        'quote',\n        'fontfamily',\n        'fontsize',\n        'head',\n        'unorderlist',\n        'orderlist',\n        'alignleft',\n        'aligncenter',\n        'alignright',\n        '|',\n        'link',\n        'unlink',\n        'table',\n        'emotion',\n        '|',\n        'img',\n        'video',\n        'location',\n        'insertcode',\n        '|',\n        'undo',\n        'redo',\n        'fullscreen'\n    ];\n\n    // 颜色配置\n    E.config.colors = {\n        // 'value': 'title'\n        '#880000': '暗红色',\n        '#800080': '紫色',\n        '#ff0000': '红色',\n        '#ff00ff': '鲜粉色',\n        '#000080': '深蓝色',\n        '#0000ff': '蓝色',\n        '#00ffff': '湖蓝色',\n        '#008080': '蓝绿色',\n        '#008000': '绿色',\n        '#808000': '橄榄色',\n        '#00ff00': '浅绿色',\n        '#ffcc00': '橙黄色',\n        '#808080': '灰色',\n        '#c0c0c0': '银色',\n        '#000000': '黑色',\n        '#ffffff': '白色'\n    };\n\n    // 字体\n    E.config.familys = [\n        '宋体', '黑体', '楷体', '微软雅黑',\n        'Arial', 'Verdana', 'Georgia',\n        'Times New Roman', 'Microsoft JhengHei',\n        'Trebuchet MS', 'Courier New', 'Impact', 'Comic Sans MS', 'Consolas'\n    ];\n\n    // 字号\n    E.config.fontsizes = {\n        // 格式：'value': 'title'\n        1: '12px',\n        2: '13px',\n        3: '16px',\n        4: '18px',\n        5: '24px',\n        6: '32px',\n        7: '48px'\n    };\n\n    // 表情包\n    E.config.emotionsShow = 'icon'; // 显示项，默认为'icon'，也可以配置成'value'\n    E.config.emotions = {\n        // 'default': {\n        //     title: '默认',\n        //     data: './emotions.data'\n        // },\n        'weibo': {\n            title: '微博表情',\n            data: [\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/7a/shenshou_thumb.gif',\n                    value: '[草泥马]'    \n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/60/horse2_thumb.gif',\n                    value: '[神马]'    \n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/bc/fuyun_thumb.gif',\n                    value: '[浮云]'    \n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c9/geili_thumb.gif',\n                    value: '[给力]'    \n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/f2/wg_thumb.gif',\n                    value: '[围观]'    \n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/70/vw_thumb.gif',\n                    value: '[威武]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6e/panda_thumb.gif',\n                    value: '[熊猫]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/81/rabbit_thumb.gif',\n                    value: '[兔子]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/bc/otm_thumb.gif',\n                    value: '[奥特曼]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/15/j_thumb.gif',\n                    value: '[囧]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/89/hufen_thumb.gif',\n                    value: '[互粉]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c4/liwu_thumb.gif',\n                    value: '[礼物]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/ac/smilea_thumb.gif',\n                    value: '[呵呵]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/0b/tootha_thumb.gif',\n                    value: '[哈哈]'\n                }\n            ]\n        }\n    };\n\n    // 百度地图的key\n    E.config.mapAk = 'TVhjYjq1ICT2qqL5LdS8mwas';\n\n    // 上传图片的配置\n    // server地址\n    E.config.uploadImgUrl = '';\n    // 超时时间\n    E.config.uploadTimeout = 20 * 1000;\n    // 用于存储上传回调事件\n    E.config.uploadImgFns = {};\n    // 自定义上传图片的filename\n    // E.config.uploadImgFileName = 'customFileName';\n\n    // 自定义上传，设置为 true 之后，显示上传图标\n    E.config.customUpload = false;\n    // 自定义上传的init事件\n    // E.config.customUploadInit = function () {....};\n\n    // 自定义上传时传递的参数（如 token）\n    E.config.uploadParams = {\n        /* token: 'abcdef12345' */\n    };\n\n    // 自定义上传是的header参数\n    E.config.uploadHeaders = {\n         /* 'Accept' : 'text/x-json' */\n    };\n\n    // 跨域上传时传递 cookie，默认为 true\n    E.config.withCredentials = true;\n\n    // 隐藏网络图片，默认为 false\n    E.config.hideLinkImg = false;\n\n    // 是否过滤粘贴内容\n    E.config.pasteFilter = true;\n\n    // 是否粘贴纯文本，当 editor.config.pasteFilter === false 时候，此配置将失效\n    E.config.pasteText = false;\n\n    // 插入代码时，默认的语言\n    E.config.codeDefaultLang = 'javascript';\n\n});\n// 全局UI\n_e(function (E, $) {\n\n     E.UI = {};\n\n     // 为菜单自定义配置的UI\n     E.UI.menus = {\n        // 这个 default 不加引号，在 IE8 会报错\n        'default': {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-command\"></i></a>',\n            selected: '.selected'\n        },\n        bold: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-bold\"></i></a>',\n            selected: '.selected'\n        },\n        underline: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-underline\"></i></a>',\n            selected: '.selected'\n        },\n        italic: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-italic\"></i></a>',\n            selected: '.selected'\n        },\n        forecolor: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-pencil\"></i></a>',\n            selected: '.selected'\n        },\n        bgcolor: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-brush\"></i></a>',\n            selected: '.selected'\n        },\n        strikethrough: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-strikethrough\"></i></a>',\n            selected: '.selected'\n        },\n        eraser: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-eraser\"></i></a>',\n            selected: '.selected'\n        },\n        quote: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-quotes-left\"></i></a>',\n            selected: '.selected'\n        },\n        source: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-code\"></i></a>',\n            selected: '.selected'\n        },\n        fontfamily: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-font2\"></i></a>',\n            selected: '.selected'\n        },\n        fontsize: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-text-height\"></i></a>',\n            selected: '.selected'\n        },\n        head: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-header\"></i></a>',\n            selected: '.selected'\n        },\n        orderlist: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-list-numbered\"></i></a>',\n            selected: '.selected'\n        },\n        unorderlist: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-list-bullet\"></i></a>',\n            selected: '.selected'\n        },\n        alignleft: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-align-left\"></i></a>',\n            selected: '.selected'\n        },\n        aligncenter: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-align-center\"></i></a>',\n            selected: '.selected'\n        },\n        alignright: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-align-right\"></i></a>',\n            selected: '.selected'\n        },\n        link: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-link\"></i></a>',\n            selected: '.selected'\n        },\n        unlink: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-unlink\"></i></a>',\n            selected: '.selected'\n        },\n        table: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-table\"></i></a>',\n            selected: '.selected'\n        },\n        emotion: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-happy\"></i></a>',\n            selected: '.selected'\n        },\n        img: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-picture\"></i></a>',\n            selected: '.selected'\n        },\n        video: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-play\"></i></a>',\n            selected: '.selected'\n        },\n        location: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-location\"></i></a>',\n            selected: '.selected'\n        },\n        insertcode: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-terminal\"></i></a>',\n            selected: '.selected'\n        },\n        undo: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-ccw\"></i></a>',\n            selected: '.selected'\n        },\n        redo: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-cw\"></i></a>',\n            selected: '.selected'\n        },\n        fullscreen: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-enlarge2\"></i></a>',\n            selected: '<a href=\"#\" tabindex=\"-1\" class=\"selected\"><i class=\"wangeditor-menu-img-shrink2\"></i></a>'\n        }\n     };\n     \n});\n// 对象配置\n_e(function (E, $) {\n\n    E.fn.initDefaultConfig = function () {\n        var editor = this;\n        editor.config = $.extend({}, E.config);\n        editor.UI = $.extend({}, E.UI);\n    };\n\n});\n// 增加 container\n_e(function (E, $) {\n\n    E.fn.addEditorContainer = function () {\n        this.$editorContainer = $('<div class=\"wangEditor-container\"></div>');\n    };\n\n});\n// 增加编辑区域对象\n_e(function (E, $) {\n\n    E.fn.addTxt = function () {\n        var editor = this;\n        var txt = new E.Txt(editor);\n\n        editor.txt = txt;\n    };\n\n});\n// 增加menuContainer对象\n_e(function (E, $) {\n\n    E.fn.addMenuContainer = function () {\n        var editor = this;\n        editor.menuContainer = new E.MenuContainer(editor);\n    };\n\n});\n// 增加menus\n_e(function (E, $) {\n\n    // 存储创建菜单的函数\n    E.createMenuFns = [];\n    E.createMenu = function (fn) {\n        E.createMenuFns.push(fn);\n    };\n\n    // 创建所有菜单\n    E.fn.addMenus = function () {\n        var editor = this;\n        var menuIds = editor.config.menus;\n\n        // 检验 menuId 是否在配置中存在\n        function check(menuId) {\n            if (menuIds.indexOf(menuId) >= 0) {\n                return true;\n            }\n            return false;\n        }\n\n        // 遍历所有的菜单创建函数，并执行\n        $.each(E.createMenuFns, function (k, createMenuFn) {\n            createMenuFn.call(editor, check);\n        });\n    };\n\n});\n// bold菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'bold';\n        if (!check(menuId)) {\n            return;\n        }\n\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.bold,\n            commandName: 'Bold'\n        });\n\n        // 定义选中状态下的click事件\n        menu.clickEventSelected = function (e) {\n            var isRangeEmpty = editor.isRangeEmpty();\n            if (!isRangeEmpty) {\n                // 如果选区有内容，则执行基础命令\n                editor.command(e, 'Bold');\n            } else {\n                // 如果选区没有内容\n                editor.commandForElem('b,strong,h1,h2,h3,h4,h5', e, 'Bold');\n            }\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n\n});\n// underline菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'underline';\n        if (!check(menuId)) {\n            return;\n        }\n\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.underline,\n            commandName: 'Underline'\n        });\n\n        // 定义选中状态下的click事件\n        menu.clickEventSelected = function (e) {\n            var isRangeEmpty = editor.isRangeEmpty();\n            if (!isRangeEmpty) {\n                // 如果选区有内容，则执行基础命令\n                editor.command(e, 'Underline');\n            } else {\n                // 如果选区没有内容\n                editor.commandForElem('u,a', e, 'Underline');\n            }\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n\n});\n// italic 菜单\n_e(function (E, $) {\n    \n    E.createMenu(function (check) {\n        var menuId = 'italic';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.italic,\n            commandName: 'Italic'\n        });\n\n        // 定义选中状态下的click事件\n        menu.clickEventSelected = function (e) {\n            var isRangeEmpty = editor.isRangeEmpty();\n            if (!isRangeEmpty) {\n                // 如果选区有内容，则执行基础命令\n                editor.command(e, 'Italic');\n            } else {\n                // 如果选区没有内容\n                editor.commandForElem('i', e, 'Italic');\n            }\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n\n});\n// forecolor 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'forecolor';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n        var configColors = editor.config.colors;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.forecolor\n        });\n\n        // 创建 dropPanel\n        var $content = $('<div></div>');\n        $.each(configColors, function (k, v) {\n            $content.append(\n                [\n                    '<a href=\"#\" class=\"color-item\"',\n                    '    title=\"' + v + '\" commandValue=\"' + k + '\" ',\n                    '    style=\"color: ' + k + '\" ',\n                    '><i class=\"wangeditor-menu-img-pencil\"></i></a>'\n                ].join('')\n            );\n        });\n        $content.on('click', 'a[commandValue]', function (e) {\n            // 执行命令\n            var $elem = $(this);\n            var commandValue = $elem.attr('commandValue');\n\n            if (menu.selected && editor.isRangeEmpty()) {\n                // 当前处于选中状态，并且选中内容为空\n                editor.commandForElem('font[color]', e, 'forecolor', commandValue);\n            } else {\n                // 当前未处于选中状态，或者有选中内容。则执行默认命令\n                editor.command(e, 'forecolor', commandValue);\n            }\n        });\n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $content,\n            width: 125\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'font[color]');\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n\n});\n// bgcolor 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'bgcolor';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n        var configColors = editor.config.colors;\n\n        // 检查元素是否有 background-color: 内联样式\n        function checkElemFn(elem) {\n            var cssText;\n            if (elem && elem.style && elem.style.cssText != null) {\n                cssText = elem.style.cssText;\n                if (cssText && cssText.indexOf('background-color:') >= 0) {\n                    return true;\n                }\n            }\n            return false;\n        }\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.bgcolor\n        });\n\n        // 创建 dropPanel\n        var $content = $('<div></div>');\n        $.each(configColors, function (k, v) {\n            $content.append(\n                [\n                    '<a href=\"#\" class=\"color-item\"',\n                    '    title=\"' + v + '\" commandValue=\"' + k + '\" ',\n                    '    style=\"color: ' + k + '\" ',\n                    '><i class=\"wangeditor-menu-img-brush\"></i></a>'\n                ].join('')\n            );\n        });\n        $content.on('click', 'a[commandValue]', function (e) {\n            // 执行命令\n\n            var $elem = $(this);\n            var commandValue = $elem.attr('commandValue');\n\n            if (menu.selected && editor.isRangeEmpty()) {\n                // 当前处于选中状态，并且选中内容为空。使用 commandForElem 执行命令\n                editor.commandForElem({\n                    selector: 'span,font',\n                    check: checkElemFn\n                }, e, 'BackColor', commandValue);\n            } else {\n                // 当前未处于选中状态，或者有选中内容。则执行默认命令\n                editor.command(e, 'BackColor', commandValue);\n            }\n        });\n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $content,\n            width: 125\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'span,font', checkElemFn);\n            \n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n\n});\n// strikethrough 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'strikethrough';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.strikethrough,\n            commandName: 'StrikeThrough'\n        });\n\n        // 定义选中状态下的click事件\n        menu.clickEventSelected = function (e) {\n            var isRangeEmpty = editor.isRangeEmpty();\n            if (!isRangeEmpty) {\n                // 如果选区有内容，则执行基础命令\n                editor.command(e, 'StrikeThrough');\n            } else {\n                // 如果选区没有内容\n                editor.commandForElem('strike', e, 'StrikeThrough');\n            }\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n\n});\n// eraser 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'eraser';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.eraser,\n            commandName: 'RemoveFormat'\n        });\n\n        // 定义点击事件\n        menu.clickEvent = function (e) {\n            var isRangeEmpty = editor.isRangeEmpty();\n\n            if (!isRangeEmpty) {\n                // 选区不是空的，则执行默认命令\n                editor.command(e, 'RemoveFormat');\n                return;\n            }\n\n            var $clearElem;\n\n            // 自定义的命令函数\n            function commandFn() {\n                var editor = this;\n                var rangeElem;\n                var pElem, $pElem;\n                var quoteElem, $quoteElem;\n                var listElem, $listElem;\n\n                // 获取选区 elem\n                rangeElem = editor.getRangeElem();\n                // 第一步，获取 quote 父元素\n                quoteElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n                if (quoteElem) {\n                    $quoteElem = $(quoteElem);\n                    $clearElem = $('<p>' + $quoteElem.text() + '</p>');\n                    $quoteElem.after($clearElem).remove();\n                }\n                // 第二步，获取 p h 父元素\n                pElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5');\n                if (pElem) {\n                    $pElem = $(pElem);\n                    $clearElem = $('<p>' + $pElem.text() + '</p>');\n                    $pElem.after($clearElem).remove();\n                }\n                // 第三步，获取list\n                listElem = editor.getSelfOrParentByName(rangeElem, 'ul,ol');\n                if (listElem) {\n                    $listElem = $(listElem);\n                    $clearElem = $('<p>' + $listElem.text() + '</p>');\n                    $listElem.after($clearElem).remove();\n                }\n            }\n\n            // 自定义 callback 事件\n            function callback() {\n                // callback中，设置range为clearElem\n                var editor = this;\n                if ($clearElem) {\n                    editor.restoreSelectionByElem($clearElem.get(0));\n                }\n            }\n\n            // 执行自定义命令\n            editor.customCommand(e, commandFn, callback);\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n\n});\n// source 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'source';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n        var txtHtml;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.source\n        });\n\n        menu.isShowCode = false;\n\n        // 更新内容\n        function updateValue() {\n            var $code = menu.$codeTextarea;\n            var $txt = editor.txt.$txt;\n            var value = $.trim($code.val()); // 取值\n\n            if (!value) {\n                value = '<p><br></p>';\n            }\n            \n            // 过滤js代码\n            if (editor.config.jsFilter) {\n                \n                value = value.replace(/<script[\\s\\S]*?<\\/script>/ig, '');\n            }\n            // 赋值\n            try {\n                $txt.html(value);\n            } catch (ex) {\n                // 更新 html 源码出错，一般都是取消了 js 过滤之后，js报错导致的\n            }\n        }\n\n        // 定义click事件\n        menu.clickEvent = function (e) {\n            var self = this;\n            var editor = self.editor;\n            var $txt = editor.txt.$txt;\n            var txtOuterHeight = $txt.outerHeight();\n            var txtHeight = $txt.height();\n\n            if (!self.$codeTextarea) {\n                self.$codeTextarea = $('<textarea class=\"code-textarea\"></textarea>');\n            }\n            var $code = self.$codeTextarea;\n            $code.css({\n                height: txtHeight,\n                'margin-top': txtOuterHeight - txtHeight\n            });\n\n            // 赋值\n            $code.val($txt.html());\n\n            // 监控变化\n            $code.on('change', function (e) {\n                updateValue();\n            });\n\n            // 渲染\n            $txt.after($code).hide();\n            $code.show();\n\n            // 更新状态\n            menu.isShowCode = true;\n\n            // 执行 updateSelected 事件\n            this.updateSelected();\n\n            // 禁用其他菜单\n            editor.disableMenusExcept('source');\n\n            // 记录当前html值\n            txtHtml = $txt.html();\n        };\n\n        // 定义选中状态下的click事件\n        menu.clickEventSelected = function (e) {\n            var self = this;\n            var editor = self.editor;\n            var $txt = editor.txt.$txt;\n            var $code = self.$codeTextarea;\n            var value;\n\n            if (!$code) {\n                return;\n            }\n\n            // 更新内容\n            updateValue();\n\n            // 渲染\n            $code.after($txt).hide();\n            $txt.show();\n\n            // 更新状态\n            menu.isShowCode = false;\n\n            // 执行 updateSelected 事件\n            this.updateSelected();\n\n            // 启用其他菜单\n            editor.enableMenusExcept('source');\n\n            // 判断是否执行 onchange 事件\n            if ($txt.html() !== txtHtml) {\n                if (editor.onchange && typeof editor.onchange === 'function') {\n                    editor.onchange.call(editor);\n                }\n            }\n        };\n\n        // 定义切换选中状态事件\n        menu.updateSelectedEvent = function () {\n            return this.isShowCode;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n\n});\n// quote 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'quote';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.quote,\n            commandName: 'formatBlock',\n            commandValue: 'blockquote'\n        });\n\n        // 定义click事件\n        menu.clickEvent = function (e) {\n            var rangeElem = editor.getRangeElem();\n            var $rangeElem;\n            if (!rangeElem) {\n                e.preventDefault();\n                return;\n            }\n            var currentQuote = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n            var $quote;\n\n            if (currentQuote) {\n                // 说明当前在quote之内，不做任何处理\n                e.preventDefault();\n                return;\n            }\n\n            rangeElem = editor.getLegalTags(rangeElem);\n            $rangeElem = $(rangeElem);\n\n            // 无文字，则不允许执行引用\n            if (!$rangeElem.text()) {\n                return;\n            }\n\n\n            if (!rangeElem) {\n                // 执行默认命令\n                // IE8 下执行此处（不过，经测试代码无效，也不报错）\n                editor.command(e, 'formatBlock', 'blockquote');\n                return;\n            }\n\n            // 自定义command事件\n            function commandFn() {\n                $quote = $('<p>' + $rangeElem.text() + '</p>');\n                $rangeElem.after($quote).remove();\n                $quote.wrap('<blockquote>');\n            }\n\n            // 自定义 callback 事件\n            function callback() {\n                // callback中，设置range为quote\n                var editor = this;\n                if ($quote) {\n                    editor.restoreSelectionByElem($quote.get(0));\n                }\n            }\n\n            // 执行自定义命令\n            editor.customCommand(e, commandFn, callback);\n        };\n\n        // 定义选中状态下的click事件\n        menu.clickEventSelected = function (e) {\n            var rangeElem;\n            var quoteElem;\n            var $lastChild;\n\n            // 获取当前选区的elem，并试图往上找 quote 元素\n            rangeElem = editor.getRangeElem();\n            quoteElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n            if (!quoteElem) {\n                // 没找到，则返回\n                e.preventDefault();\n                return;\n            }\n\n            // 自定义的command事件\n            function commandFn() {\n                var $quoteElem;\n                var $children;\n\n                $quoteElem = $(quoteElem);\n                $children = $quoteElem.children();\n                if ($children.length) {\n                    $children.each(function (k) {\n                        var $item = $(this);\n                        if ($item.get(0).nodeName === 'P') {\n                            $quoteElem.after($item);\n                        } else {\n                            $quoteElem.after('<p>' + $item.text() + '</p>');\n                        }\n                        $lastChild = $item;  // 记录最后一个子元素，用于callback中的range定位\n                    });\n                    $quoteElem.remove();\n                    return;\n                }\n            }\n\n            // 自定义的callback函数\n            function callback() {\n                // callback中，设置range为lastChild\n                var editor = this;\n                if ($lastChild) {\n                    editor.restoreSelectionByElem($lastChild.get(0));\n                }\n            }\n\n            // 执行自定义命令\n            editor.customCommand(e, commandFn, callback);\n        };\n\n        // 定义更新选中状态的事件\n        menu.updateSelectedEvent = function () {\n            var self = this; //菜单对象\n            var editor = self.editor;\n            var rangeElem;\n\n            rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n\n            if (rangeElem) {\n                return true;\n            }\n\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n\n        // --------------- 两次点击 enter 跳出引用 ---------------\n        editor.ready(function () {\n            var editor = this;\n            var $txt = editor.txt.$txt;\n            var isPrevEnter = false;  // 是不是刚刚在quote中按了 enter 键\n            $txt.on('keydown', function (e) {\n                if (e.keyCode !== 13) {\n                    // 不是 enter 键\n                    isPrevEnter = false;\n                    return;\n                }\n\n                var rangeElem = editor.getRangeElem();\n                rangeElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n                if (!rangeElem) {\n                    // 选区不是 quote\n                    isPrevEnter = false;\n                    return;\n                }\n\n                if (!isPrevEnter) {\n                    // 最近没有在qote中按enter键\n                    isPrevEnter = true;\n                    return;\n                }\n\n                var currentRangeElem = editor.getRangeElem();\n                var $currentRangeElem = $(currentRangeElem);\n                if ($currentRangeElem.length) {\n                    $currentRangeElem.parent().after($currentRangeElem);\n                }\n\n                // 设置选区\n                editor.restoreSelectionByElem(currentRangeElem, 'start');\n\n                isPrevEnter = false;\n                // 阻止默认行文\n                e.preventDefault();\n\n            });\n        }); // editor.ready(\n\n        // --------------- 处理quote中无内容时不能删除的问题 ---------------\n        editor.ready(function () {\n            var editor = this;\n            var $txt = editor.txt.$txt;\n            var $rangeElem;\n\n            function commandFn() {\n                $rangeElem && $rangeElem.remove();\n            }\n            function callback() {\n                if (!$rangeElem) {\n                    return;\n                }\n                var $prev = $rangeElem.prev();\n                if ($prev.length) {\n                    // 有 prev 则定位到 prev 最后\n                    editor.restoreSelectionByElem($prev.get(0));\n                } else {\n                    // 无 prev 则初始化选区\n                    editor.initSelection();\n                }\n            }\n\n            $txt.on('keydown', function (e) {\n                if (e.keyCode !== 8) {\n                    // 不是 backspace 键\n                    return;\n                }\n\n                var rangeElem = editor.getRangeElem();\n                rangeElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n                if (!rangeElem) {\n                    // 选区不是 quote\n                    return;\n                }\n                $rangeElem = $(rangeElem);\n\n                var text = $rangeElem.text();\n                if (text) {\n                    // quote 中还有内容\n                    return;\n                }\n                editor.customCommand(e, commandFn, callback);\n\n            }); // $txt.on\n        }); // editor.ready(\n    });\n\n});\n// 字体 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'fontfamily';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n        var configFamilys = editor.config.familys;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.fontfamily,\n            commandName: 'fontName'\n        });\n\n        // 初始化数据\n        var data  = {};\n        /*\n            data 需要的结构\n            {\n                'commandValue': 'title'\n                ...\n            }\n        */\n        $.each(configFamilys, function (k, v) {\n            // configFamilys 是数组，data 是对象\n            data[v] = v;\n        });\n\n        // 创建droplist\n        var tpl = '<span style=\"font-family:{#commandValue};\">{#title}</span>';\n        menu.dropList = new E.DropList(editor, menu, {\n            data: data,\n            tpl: tpl,\n            selectorForELemCommand: 'font[face]'  // 为了执行 editor.commandForElem 而传入的elem查询方式\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'font[face]');\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});\n// 字号 菜单\n_e(function (E, $) {\n    E.createMenu(function (check) {\n        var menuId = 'fontsize';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n        var configSize = editor.config.fontsizes;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.fontsize,\n            commandName: 'fontSize'\n        });\n\n        // 初始化数据\n        var data  = configSize;\n        /*\n            data 需要的结构\n            {\n                'commandValue': 'title'\n                ...\n            }\n        */\n\n        // 创建droplist\n        var tpl = '<span style=\"font-size:{#title};\">{#title}</span>';\n        menu.dropList = new E.DropList(editor, menu, {\n            data: data,\n            tpl: tpl,\n            selectorForELemCommand: 'font[size]'  // 为了执行 editor.commandForElem 而传入的elem查询方式\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'font[size]');\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});\n// head 菜单\n_e(function (E, $) {\n    E.createMenu(function (check) {\n        var menuId = 'head';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.head,\n            commandName: 'formatBlock'\n        });\n\n        // 初始化数据\n        var data  = {\n            '<h1>': '标题1',\n            '<h2>': '标题2',\n            '<h3>': '标题3',\n            '<h4>': '标题4',\n            '<h5>': '标题5'\n        };\n        /*\n            data 需要的结构\n            {\n                'commandValue': 'title'\n                ...\n            }\n        */\n\n        var isOrderedList;\n        function beforeEvent(e) {\n            if (editor.queryCommandState('InsertOrderedList')) {\n                isOrderedList = true;\n\n                // 先取消有序列表\n                editor.command(e, 'InsertOrderedList');\n            } else {\n                isOrderedList = false;\n            }\n        }\n\n        function afterEvent(e) {\n            if (isOrderedList) {\n                // 再设置有序列表\n                editor.command(e, 'InsertOrderedList');\n            }\n        }\n\n        // 创建droplist\n        var tpl = '{#commandValue}{#title}';\n        menu.dropList = new E.DropList(editor, menu, {\n            data: data,\n            tpl: tpl,\n            // 对 ol 直接设置 head，会出现每个 li 的 index 都变成 1 的问题，因此要先取消 ol，然后设置 head，最后再增加上 ol\n            beforeEvent: beforeEvent,\n            afterEvent: afterEvent\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'h1,h2,h3,h4,h5');\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});\n// unorderlist 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'unorderlist';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.unorderlist,\n            commandName: 'InsertUnorderedList'\n        });\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n\n});\n// orderlist 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'orderlist';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.orderlist,\n            commandName: 'InsertOrderedList'\n        });\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n\n});\n// alignleft 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'alignleft';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.alignleft,\n            commandName: 'JustifyLeft'\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5,li', function (elem) {\n                var cssText;\n                if (elem && elem.style && elem.style.cssText != null) {\n                    cssText = elem.style.cssText;\n                    if (cssText && /text-align:\\s*left;/.test(cssText)) {\n                        return true;\n                    }\n                }\n                if ($(elem).attr('align') === 'left') {\n                    // ff 中，设置align-left之后，会是 <p align=\"left\">xxx</p>\n                    return true;\n                }\n                return false;\n            });\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n\n});\n// aligncenter 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'aligncenter';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.aligncenter,\n            commandName: 'JustifyCenter'\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5,li', function (elem) {\n                var cssText;\n                if (elem && elem.style && elem.style.cssText != null) {\n                    cssText = elem.style.cssText;\n                    if (cssText && /text-align:\\s*center;/.test(cssText)) {\n                        return true;\n                    }\n                }\n                if ($(elem).attr('align') === 'center') {\n                    // ff 中，设置align-center之后，会是 <p align=\"center\">xxx</p>\n                    return true;\n                }\n                return false;\n            });\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n\n});\n// alignright 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'alignright';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.alignright,\n            commandName: 'JustifyRight'\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5,li', function (elem) {\n                var cssText;\n                if (elem && elem.style && elem.style.cssText != null) {\n                    cssText = elem.style.cssText;\n                    if (cssText && /text-align:\\s*right;/.test(cssText)) {\n                        return true;\n                    }\n                }\n                if ($(elem).attr('align') === 'right') {\n                    // ff 中，设置align-right之后，会是 <p align=\"right\">xxx</p>\n                    return true;\n                }\n                return false;\n            });\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n\n});\n// link 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'link';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.link\n        });\n\n        // 创建 dropPanel\n        var $content = $('<div></div>');\n        var $div1 = $('<div style=\"margin:20px 10px;\" class=\"clearfix\"></div>');\n        var $div2 = $div1.clone();\n        var $div3 = $div1.clone().css('margin', '0 10px');\n        var $textInput = $('<input type=\"text\" class=\"block\" placeholder=\"' + lang.text + '\"/>');\n        var $urlInput = $('<input type=\"text\" class=\"block\" placeholder=\"' + lang.link + '\"/>');\n        var $btnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n        var $btnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n\n        $div1.append($textInput);\n        $div2.append($urlInput);\n        $div3.append($btnSubmit).append($btnCancel);\n        $content.append($div1).append($div2).append($div3);\n        \n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $content,\n            width: 300\n        });\n\n        // 定义click事件\n        menu.clickEvent = function (e) {\n            var menu = this;\n            var dropPanel = menu.dropPanel;\n\n            // -------------隐藏----------------\n            if (dropPanel.isShowing) {\n                dropPanel.hide();\n                return;\n            }\n\n            // -------------显示----------------\n\n            // 重置 input\n            $textInput.val('');\n            $urlInput.val('http://');\n\n            // 获取url\n            var url = '';\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'a');\n            if (rangeElem) {\n                url = rangeElem.href || '';\n            }\n\n            // 获取 text\n            var text = '';\n            var isRangeEmpty = editor.isRangeEmpty();\n            if (!isRangeEmpty) {\n                // 选区不是空\n                text = editor.getRangeText() || '';\n            } else if (rangeElem) {\n                // 如果选区空，并且在 a 标签之内\n                text = rangeElem.textContent || rangeElem.innerHTML;\n            }\n\n            // 设置 url 和 text\n            url && $urlInput.val(url);\n            text && $textInput.val(text);\n\n            // 如果有选区内容，textinput 不能修改\n            if (!isRangeEmpty) {\n                $textInput.attr('disabled', true);\n            } else {\n                $textInput.removeAttr('disabled');\n            }\n\n            // 显示（要设置好了所有input的值和属性之后再显示）\n            dropPanel.show();\n        };\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'a');\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 『取消』 按钮\n        $btnCancel.click(function (e) {\n            e.preventDefault();\n            menu.dropPanel.hide();\n        });\n\n        // 『确定』按钮\n        $btnSubmit.click(function (e) {\n            e.preventDefault();\n            var rangeElem = editor.getRangeElem();\n            var targetElem = editor.getSelfOrParentByName(rangeElem, 'a');\n            var isRangeEmpty = editor.isRangeEmpty();\n\n            var $linkElem, linkHtml;\n            var commandFn, callback;\n            var $txt = editor.txt.$txt;\n            var $oldLinks, $newLinks;\n            var uniqId = 'link' + E.random();\n\n            // 获取数据\n            var url = $.trim($urlInput.val());\n            var text = $.trim($textInput.val());\n\n            if (!url) {\n                menu.dropPanel.focusFirstInput();\n                return;\n            }\n            if (!text) {\n                text = url;\n            }\n\n            if (!isRangeEmpty) {\n                // 选中区域有内容，则执行默认命令\n\n                // 获取目前 txt 内所有链接，并为当前链接做一个标记\n                $oldLinks = $txt.find('a');\n                $oldLinks.attr(uniqId, '1');\n\n                // 执行命令 \n                editor.command(e, 'createLink', url);\n\n                // 去的没有标记的链接，即刚刚插入的链接\n                $newLinks = $txt.find('a').not('[' + uniqId + ']');\n                $newLinks.attr('target', '_blank'); // 增加 _blank\n\n                // 去掉之前做的标记\n                $oldLinks.removeAttr(uniqId);\n\n            } else if (targetElem) {\n                // 无选中区域，在 a 标签之内，修改该 a 标签的内容和链接\n                $linkElem = $(targetElem);\n                commandFn = function () {\n                    $linkElem.attr('href', url);\n                    $linkElem.text(text);\n                };\n                callback = function () {\n                    var editor = this;\n                    editor.restoreSelectionByElem(targetElem);\n                };\n                // 执行命令\n                editor.customCommand(e, commandFn, callback);\n            } else {\n                // 无选中区域，不在 a 标签之内，插入新的链接\n\n                linkHtml = '<a href=\"' + url + '\" target=\"_blank\">' + text + '</a>';\n                if (E.userAgent.indexOf('Firefox') > 0) {\n                    linkHtml += '<span>&nbsp;</span>';\n                }\n                editor.command(e, 'insertHtml', linkHtml);\n            }\n\n        });\n        \n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n\n});\n// unlink 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'unlink';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.unlink,\n            commandName: 'unLink'\n        });\n\n        // click 事件\n        menu.clickEvent = function  (e) {\n            var isRangeEmpty = editor.isRangeEmpty();\n            if (!isRangeEmpty) {\n                // 有选中区域，或者IE8，执行默认命令\n                editor.command(e, 'unLink');\n                return;\n            }\n\n            // 无选中区域...\n\n            var rangeElem = editor.getRangeElem();\n            var aElem = editor.getSelfOrParentByName(rangeElem, 'a');\n            if (!aElem) {\n                // 不在 a 之内，返回\n                e.preventDefault();\n                return;\n            }\n\n            // 在 a 之内\n            var $a = $(aElem);\n            var $span = $('<span>' + $a.text() + '</span>');\n            function commandFn() {\n                $a.after($span).remove();\n            }\n            function callback() {\n                editor.restoreSelectionByElem($span.get(0));\n            }\n            editor.customCommand(e, commandFn, callback);\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n\n});\n// table 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'table';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.table\n        });\n\n        // dropPanel 内容\n        var $content = $('<div style=\"font-size: 14px; color: #666; text-align:right;\"></div>');\n        var $table = $('<table class=\"choose-table\" style=\"margin-bottom:10px;margin-top:5px;\">');\n        var $row = $('<span>0</span>');\n        var $rowspan = $('<span> 行 </span>');\n        var $col = $('<span>0</span>');\n        var $colspan = $('<span> 列</span>');\n        var $tr;\n        var i, j;\n\n        // 创建一个n行n列的表格\n        for (i = 0; i < 15; i++) {\n            $tr = $('<tr index=\"' + (i + 1) + '\">');\n            for (j = 0; j < 20; j++) {\n                $tr.append($('<td index=\"' + (j + 1) + '\">'));\n            }\n            $table.append($tr);\n        }\n        $content.append($table);\n        $content.append($row).append($rowspan).append($col).append($colspan);\n\n        // 定义table事件\n        $table.on('mouseenter', 'td', function (e) {\n            var $currentTd = $(e.currentTarget);\n            var currentTdIndex = $currentTd.attr('index');\n            var $currentTr = $currentTd.parent();\n            var currentTrIndex = $currentTr.attr('index');\n\n            // 显示\n            $row.text(currentTrIndex);\n            $col.text(currentTdIndex);\n\n            // 遍历设置背景颜色\n            $table.find('tr').each(function () {\n                var $tr = $(this);\n                var trIndex = $tr.attr('index');\n                if (parseInt(trIndex, 10) <= parseInt(currentTrIndex, 10)) {\n                    // 该行需要可能需要设置背景色\n                    $tr.find('td').each(function () {\n                        var $td = $(this);\n                        var tdIndex = $td.attr('index');\n                        if (parseInt(tdIndex, 10) <= parseInt(currentTdIndex, 10)) {\n                            // 需要设置背景色\n                            $td.addClass('active');\n                        } else {\n                            // 需要移除背景色\n                            $td.removeClass('active');\n                        }\n                    });\n                } else {\n                    // 改行不需要设置背景色\n                    $tr.find('td').removeClass('active');\n                }\n            });\n        }).on('mouseleave', function (e) {\n            // mouseleave 删除背景色\n            $table.find('td').removeClass('active');\n\n            $row.text(0);\n            $col.text(0);\n        });\n\n        // 插入表格\n        $table.on('click', 'td', function (e) {\n            var $currentTd = $(e.currentTarget);\n            var currentTdIndex = $currentTd.attr('index');\n            var $currentTr = $currentTd.parent();\n            var currentTrIndex = $currentTr.attr('index');\n\n            var rownum = parseInt(currentTrIndex, 10);\n            var colnum = parseInt(currentTdIndex, 10);\n\n            // -------- 拼接tabel html --------\n\n            var i, j;\n            var tableHtml = '<table>';\n            for (i = 0; i < rownum; i++) {\n                tableHtml += '<tr>';\n\n                for (j = 0; j < colnum; j++) {\n                    tableHtml += '<td><span>&nbsp;</span></td>';\n                }\n                tableHtml += '</tr>';\n            }\n            tableHtml += '</table>';\n\n            // -------- 执行命令 --------\n            editor.command(e, 'insertHtml', tableHtml);\n        });\n\n        // 创建 panel\n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $content,\n            width: 262\n        });\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n\n});\n// emotion 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'emotion';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var config = editor.config;\n        var lang = config.lang;\n        var configEmotions = config.emotions;\n        var emotionsShow = config.emotionsShow;\n\n        // 记录每一个表情图片的地址\n        editor.emotionUrls = [];\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.emotion\n        });\n\n        // 添加表情图片的函数\n        function insertEmotionImgs(data, $tabContent) {\n            // 添加表情图片\n            $.each(data, function (k, emotion) {\n                var src = emotion.icon || emotion.url;\n                var value = emotion.value || emotion.title;\n                // 通过配置 editor.config.emotionsShow 的值来修改插入到编辑器的内容（图片/value）\n                var commandValue = emotionsShow === 'icon' ? src : value;\n                var $command = $('<a href=\"#\" commandValue=\"' + commandValue + '\"></a>');\n                var $img = $('<img>');\n                $img.attr('_src', src);  // 先将 src 复制到 '_src' 属性，先不加载\n\n                $command.append($img);\n                $tabContent.append($command);\n\n                // 记录下每一个表情图片的地址\n                editor.emotionUrls.push(src);\n            });\n        }\n\n        // 拼接 dropPanel 内容\n        var $panelContent = $('<div class=\"panel-tab\"></div>');\n        var $tabContainer = $('<div class=\"tab-container\"></div>');\n        var $contentContainer = $('<div class=\"content-container emotion-content-container\"></div>');\n        $.each(configEmotions, function (k, emotion) {\n            var title = emotion.title;\n            var data = emotion.data;\n\n            E.log('正在处理 ' + title + ' 表情的数据...');\n\n            // 增加该组表情的tab和content\n            var $tab = $('<a href=\"#\">' + title +' </a>');\n            $tabContainer.append($tab);\n            var $tabContent = $('<div class=\"content\"></div>');\n            $contentContainer.append($tabContent);\n\n            // tab 切换事件\n            $tab.click(function (e) {\n                $tabContainer.children().removeClass('selected');\n                $contentContainer.children().removeClass('selected');\n                $tabContent.addClass('selected');\n                $tab.addClass('selected');\n                e.preventDefault();\n            });\n\n            // 处理data\n            if (typeof data === 'string') {\n                // url 形式，需要通过ajax从该url获取数据\n                E.log('将通过 ' + data + ' 地址ajax下载表情包');\n                $.get(data, function (result) {\n                    result = $.parseJSON(result);\n                    E.log('下载完毕，得到 ' + result.length + ' 个表情');\n                    insertEmotionImgs(result, $tabContent);\n                });\n                \n            } else if ( Object.prototype.toString.call(data).toLowerCase().indexOf('array') > 0 ) {\n                // 数组，即 data 直接就是表情包数据\n                insertEmotionImgs(data, $tabContent);\n            } else {\n                // 其他情况，data格式不对\n                E.error('data 数据格式错误，请修改为正确格式，参考文档：' + E.docsite);\n                return;\n            }\n        });\n        $panelContent.append($tabContainer).append($contentContainer);\n\n        // 默认显示第一个tab\n        $tabContainer.children().first().addClass('selected');\n        $contentContainer.children().first().addClass('selected');\n\n        // 插入表情command事件\n        $contentContainer.on('click', 'a[commandValue]', function (e) {\n            var $a = $(e.currentTarget);\n            var commandValue = $a.attr('commandValue');\n            var img;\n\n            // commandValue 有可能是图片url，也有可能是表情的 value，需要区别对待\n\n            if (emotionsShow === 'icon') {\n                // 插入图片\n                editor.command(e, 'InsertImage', commandValue);\n            } else {\n                // 插入value\n                editor.command(e, 'insertHtml', '<span>' + commandValue + '</span>');\n            }\n\n            e.preventDefault();\n        });\n\n        // 添加panel\n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $panelContent,\n            width: 350\n        });\n\n        // 定义click事件（异步加载表情图片）\n        menu.clickEvent = function (e) {\n            var menu = this;\n            var dropPanel = menu.dropPanel;\n\n            // -------------隐藏-------------\n            if (dropPanel.isShowing) {\n                dropPanel.hide();\n                return;\n            }\n\n            // -------------显示-------------\n            dropPanel.show();\n\n            // 异步加载图片\n            if (menu.imgLoaded) {\n                return;\n            }\n            $contentContainer.find('img').each(function () {\n                var $img = $(this);\n                var _src = $img.attr('_src');\n                $img.on('error', function () {\n                    E.error('加载不出表情图片 ' + _src);\n                });\n                $img.attr('src', _src);\n                $img.removeAttr('_src');\n            });\n            menu.imgLoaded = true;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n\n});\n// img 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'img';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.img\n        });\n\n        // 创建 panel content\n        var $panelContent = $('<div class=\"panel-tab\"></div>');\n        var $tabContainer = $('<div class=\"tab-container\"></div>');\n        var $contentContainer = $('<div class=\"content-container\"></div>');\n        $panelContent.append($tabContainer).append($contentContainer);\n\n        // tab\n        var $uploadTab = $('<a href=\"#\">' + lang.uploadImg + '</a>');\n        var $linkTab = $('<a href=\"#\">' + lang.linkImg + '</a>');\n        $tabContainer.append($uploadTab).append($linkTab);\n\n        // 上传图片 content\n        var $uploadContent = $('<div class=\"content\"></div>');\n        $contentContainer.append($uploadContent);\n\n        // 网络图片 content\n        var $linkContent = $('<div class=\"content\"></div>');\n        $contentContainer.append($linkContent);\n        linkContentHandler(editor, menu, $linkContent);\n\n        // 添加panel\n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $panelContent,\n            width: 400,\n            onRender: function () {\n                // 渲染后的回调事件，用于执行自定义上传的init\n                // 因为渲染之后，上传面板的dom才会被渲染到页面，才能让第三方空间获取到\n                var init = editor.config.customUploadInit;\n                init && init.call(editor);\n            }\n        });\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n\n        // tab 切换事件\n        function tabToggle() {\n            $uploadTab.click(function (e) {\n                $tabContainer.children().removeClass('selected');\n                $contentContainer.children().removeClass('selected');\n                $uploadContent.addClass('selected');\n                $uploadTab.addClass('selected');\n                e.preventDefault();\n            });\n            $linkTab.click(function (e) {\n                $tabContainer.children().removeClass('selected');\n                $contentContainer.children().removeClass('selected');\n                $linkContent.addClass('selected');\n                $linkTab.addClass('selected');\n                e.preventDefault();\n\n                // focus input\n                if (E.placeholder) {\n                    $linkContent.find('input[type=text]').focus();\n                }\n            });\n\n            // 默认情况\n            // $uploadTab.addClass('selected');\n            // $uploadContent.addClass('selected');\n            $uploadTab.click();\n        }\n\n        // 隐藏上传图片\n        function hideUploadImg() {\n            $tabContainer.remove();\n            $uploadContent.remove();\n            $linkContent.addClass('selected');\n        }\n\n        // 隐藏网络图片\n        function hideLinkImg() {\n            $tabContainer.remove();\n            $linkContent.remove();\n            $uploadContent.addClass('selected');\n        }\n\n        // 判断用户是否配置了上传图片\n        editor.ready(function () {\n            var editor = this;\n            var config = editor.config;\n            var uploadImgUrl = config.uploadImgUrl;\n            var customUpload = config.customUpload;\n            var linkImg = config.hideLinkImg;\n            var $uploadImgPanel;\n\n            if (uploadImgUrl || customUpload) {\n                // 第一，暴露出 $uploadContent 以便用户自定义 ！！！重要\n                editor.$uploadContent = $uploadContent;\n\n                // 第二，绑定tab切换事件\n                tabToggle();\n\n                if (linkImg) {\n                    // 隐藏网络图片\n                    hideLinkImg();\n                }\n            } else {\n                // 未配置上传图片功能\n                hideUploadImg();\n            }\n\n            // 点击 $uploadContent 立即隐藏 dropPanel\n            // 为了兼容IE8、9的上传，因为IE8、9使用 modal 上传\n            // 这里使用异步，为了不妨碍高级浏览器通过点击 $uploadContent 选择文件\n            function hidePanel() {\n                menu.dropPanel.hide();\n            }\n            $uploadContent.click(function () {\n                setTimeout(hidePanel);\n            });\n        });\n    });\n\n    // --------------- 处理网络图片content ---------------\n    function linkContentHandler (editor, menu, $linkContent) {\n        var lang = editor.config.lang;\n        var $urlContainer = $('<div style=\"margin:20px 10px 10px 10px;\"></div>');\n        var $urlInput = $('<input type=\"text\" class=\"block\" placeholder=\"http://\"/>');\n        $urlContainer.append($urlInput);\n        var $btnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n        var $btnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n\n        $linkContent.append($urlContainer).append($btnSubmit).append($btnCancel);\n\n        // 取消\n        $btnCancel.click(function (e) {\n            e.preventDefault();\n            menu.dropPanel.hide();\n        });\n\n        // callback \n        function callback() {\n            $urlInput.val('');\n        }\n\n        // 确定\n        $btnSubmit.click(function (e) {\n            e.preventDefault();\n            var url = $.trim($urlInput.val());\n            if (!url) {\n                // 无内容\n                $urlInput.focus();\n                return;\n            }\n\n            var imgHtml = '<img style=\"max-width:100%;\" src=\"' + url + '\"/>';\n            editor.command(e, 'insertHtml', imgHtml, callback);\n        });\n    }\n\n});\n// video 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'video';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n        var reg = /^<(iframe)|(embed)/i;  // <iframe... 或者 <embed... 格式\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.video\n        });\n\n        // 创建 panel 内容\n        var $content = $('<div></div>');\n        var $linkInputContainer = $('<div style=\"margin:20px 10px;\"></div>');\n        var $linkInput = $('<input type=\"text\" class=\"block\" placeholder=\\'格式如：<iframe src=\"...\" frameborder=0 allowfullscreen></iframe>\\'/>');\n        $linkInputContainer.append($linkInput);\n        var $sizeContainer = $('<div style=\"margin:20px 10px;\"></div>');\n        var $widthInput = $('<input type=\"text\" value=\"640\" style=\"width:50px;text-align:center;\"/>');\n        var $heightInput = $('<input type=\"text\" value=\"498\" style=\"width:50px;text-align:center;\"/>');\n        $sizeContainer.append('<span> ' + lang.width + ' </span>')\n                      .append($widthInput)\n                      .append('<span> px &nbsp;&nbsp;&nbsp;</span>')\n                      .append('<span> ' + lang.height + ' </span>')\n                      .append($heightInput)\n                      .append('<span> px </span>');\n        var $btnContainer = $('<div></div>');\n        var $howToCopy = $('<a href=\"http://www.kancloud.cn/wangfupeng/wangeditor2/134973\" target=\"_blank\" style=\"display:inline-block;margin-top:10px;margin-left:10px;color:#999;\">如何复制视频链接？</a>');\n        var $btnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n        var $btnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n        $btnContainer.append($howToCopy).append($btnSubmit).append($btnCancel);\n        $content.append($linkInputContainer).append($sizeContainer).append($btnContainer);\n\n        // 取消按钮\n        $btnCancel.click(function (e) {\n            e.preventDefault();\n            $linkInput.val('');\n            menu.dropPanel.hide();\n        });\n\n        // 确定按钮\n        $btnSubmit.click(function (e) {\n            e.preventDefault();\n            var link = $.trim($linkInput.val());\n            var $link;\n            var width = parseInt($widthInput.val());\n            var height = parseInt($heightInput.val());\n            var $div = $('<div>');\n            var html = '<p>{content}</p>';\n\n            // 验证数据\n            if (!link) {\n                menu.dropPanel.focusFirstInput();\n                return;\n            }\n\n            if (!reg.test(link)) {\n                alert('视频链接格式错误！');\n                menu.dropPanel.focusFirstInput();\n                return;\n            }\n\n            if (isNaN(width) || isNaN(height)) {\n                alert('宽度或高度不是数字！');\n                return;\n            }\n\n            $link = $(link);\n\n            // 设置高度和宽度\n            $link.attr('width', width)\n                 .attr('height', height);\n\n            // 拼接字符串\n            html = html.replace('{content}', $div.append($link).html());\n\n            // 执行命令\n            editor.command(e, 'insertHtml', html);\n            $linkInput.val('');\n        });\n\n        // 创建panel\n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $content,\n            width: 400\n        });\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n\n});\n// location 菜单\n_e(function (E, $) {\n\n    // 判断浏览器的 input 是否支持 keyup\n    var inputKeyup = (function (input) {\n        return 'onkeyup' in input;\n    })(document.createElement('input'));\n\n    // 百度地图的key\n    E.baiduMapAk = 'TVhjYjq1ICT2qqL5LdS8mwas';\n\n    // 一个页面中，如果有多个编辑器，地图会出现问题。这个参数记录一下，如果超过 1 就提示\n    E.numberOfLocation = 0;\n\n    E.createMenu(function (check) {\n        var menuId = 'location';\n        if (!check(menuId)) {\n            return;\n        }\n\n        if (++E.numberOfLocation > 1) {\n            E.error('目前不支持在一个页面多个编辑器上同时使用地图，可通过自定义菜单配置去掉地图菜单');\n            return;\n        }\n\n        var editor = this;\n        var config = editor.config;\n        var lang = config.lang;\n        var ak = config.mapAk;\n\n        // 地图的变量存储到这个地方\n        editor.mapData = {};\n        var mapData = editor.mapData;\n\n        // ---------- 地图事件 ----------\n        mapData.markers = [];\n        mapData.mapContainerId = 'map' + E.random();\n\n        mapData.clearLocations = function () {\n            var map = mapData.map;\n            if (!map) {\n                return;\n            }\n            map.clearOverlays();\n\n            //同时，清空marker数组\n            mapData.markers = [];\n        };\n\n        mapData.searchMap = function () {\n            var map = mapData.map;\n            if (!map) {\n                return;\n            }\n\n            var BMap = window.BMap;\n            var cityName = $cityInput.val();\n            var locationName = $searchInput.val();\n            var myGeo, marker;\n\n            if(cityName !== ''){\n                if(!locationName || locationName === ''){\n                    map.centerAndZoom(cityName, 11);\n                }\n\n                //地址解析\n                if(locationName && locationName !== ''){\n                    myGeo = new BMap.Geocoder();\n                    // 将地址解析结果显示在地图上,并调整地图视野\n                    myGeo.getPoint(locationName, function(point){\n                        if (point) {\n                            map.centerAndZoom(point, 13);\n                            marker = new BMap.Marker(point);\n                            map.addOverlay(marker);\n                            marker.enableDragging();  //允许拖拽\n                            mapData.markers.push(marker);  //将marker加入到数组中\n                        }else{\n                            // alert('未找到');\n                            map.centerAndZoom(cityName, 11);  //找不到则重新定位到城市\n                        }\n                    }, cityName);\n                }\n            } // if(cityName !== '')\n        };\n\n        // load script 之后的 callback\n        var hasCallback = false;\n        window.baiduMapCallBack = function(){\n            // 避免重复加载\n            if (hasCallback) {\n                return;\n            } else {\n                hasCallback = true;\n            }\n\n            var BMap = window.BMap;\n            if (!mapData.map) {\n                // 创建Map实例\n                mapData.map = new BMap.Map(mapData.mapContainerId);\n            }\n            var map = mapData.map;\n\n            map.centerAndZoom(new BMap.Point(116.404, 39.915), 11);  // 初始化地图,设置中心点坐标和地图级别\n            map.addControl(new BMap.MapTypeControl());   //添加地图类型控件\n            map.setCurrentCity(\"北京\");          // 设置地图显示的城市 此项是必须设置的\n            map.enableScrollWheelZoom(true);     //开启鼠标滚轮缩放\n\n            //根据IP定位\n            function locationFun(result){\n                var cityName = result.name;\n                map.setCenter(cityName);\n\n                // 设置城市名称\n                $cityInput.val(cityName);\n                if (E.placeholder) {\n                    $searchInput.focus();\n                }\n                var timeoutId, searchFn;\n                if (inputKeyup) {\n                   // 并绑定搜索事件 - input 支持 keyup\n                   searchFn = function (e) {\n                       if (e.type === 'keyup' && e.keyCode === 13) {\n                           e.preventDefault();\n                       }\n                       if (timeoutId) {\n                           clearTimeout(timeoutId);\n                       }\n                       timeoutId = setTimeout(mapData.searchMap, 500);\n                   };\n                   $cityInput.on('keyup change paste', searchFn);\n                   $searchInput.on('keyup change paste', searchFn); \n                } else {\n                    // 并绑定搜索事件 - input 不支持 keyup\n                    searchFn = function () {\n                        if (!$content.is(':visible')) {\n                            // panel 不显示了，就不用再监控了\n                            clearTimeout(timeoutId);\n                            return;\n                        }\n\n                        var currentCity = '';\n                        var currentSearch = '';\n                        var city = $cityInput.val();\n                        var search = $searchInput.val();\n\n                        if (city !== currentCity || search !== currentSearch) {\n                            // 刚获取的数据和之前的数据不一致，执行查询\n                            mapData.searchMap();\n                            // 更新数据\n                            currentCity = city;\n                            currentSearch = search;\n                        }\n\n                        // 继续监控\n                        if (timeoutId) {\n                            clearTimeout(timeoutId);\n                        }\n                        timeoutId = setTimeout(searchFn, 1000);\n                    };\n                    // 开始监控\n                    timeoutId = setTimeout(searchFn, 1000);\n                }\n            }\n            var myCity = new BMap.LocalCity();\n            myCity.get(locationFun);\n\n            //鼠标点击，创建位置\n            map.addEventListener(\"click\", function(e){\n                var marker = new BMap.Marker(new BMap.Point(e.point.lng, e.point.lat)); \n                map.addOverlay(marker);  \n                marker.enableDragging();\n                mapData.markers.push(marker);  //加入到数组中\n            }, false);\n        };\n\n        mapData.loadMapScript = function () {\n            var script = document.createElement(\"script\");\n            script.type = \"text/javascript\";\n            script.src = \"https://api.map.baidu.com/api?v=2.0&ak=\" + ak + \"&s=1&callback=baiduMapCallBack\";  // baiduMapCallBack是一个本地函数\n            try {\n                // IE10- 报错\n                document.body.appendChild(script);\n            } catch (ex) {\n                E.error('加载地图过程中发生错误');\n            }\n        };\n\n        // 初始化地图\n        mapData.initMap = function () {\n            if (window.BMap) {\n                // 不是第一次，直接处理地图即可\n                window.baiduMapCallBack();\n            } else {\n                // 第一次，先加载地图 script，再处理地图（script加载完自动执行处理）\n                mapData.loadMapScript();\n            }\n        };\n\n        // ---------- 创建 menu 对象 ----------\n\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.location\n        });\n\n        editor.menus[menuId] = menu;\n\n        // ---------- 构建UI ----------\n\n        // panel content \n        var $content = $('<div></div>');\n\n        // 搜索框\n        var $inputContainer = $('<div style=\"margin:10px 0;\"></div>');\n        var $cityInput = $('<input type=\"text\"/>');\n        $cityInput.css({\n            width: '80px',\n            'text-align': 'center'\n        });\n        var $searchInput = $('<input type=\"text\"/>');\n        $searchInput.css({\n            width: '300px',\n            'margin-left': '10px'\n        }).attr('placeholder', lang.searchlocation);\n        var $clearBtn = $('<button class=\"right link\">' + lang.clearLocation + '</button>');\n        $inputContainer.append($clearBtn)\n                       .append($cityInput)\n                       .append($searchInput);\n        $content.append($inputContainer);\n\n        // 清除位置按钮\n        $clearBtn.click(function (e) {\n            $searchInput.val('');\n            $searchInput.focus();\n            mapData.clearLocations();\n            e.preventDefault();\n        });\n\n        // 地图\n        var $map = $('<div id=\"' + mapData.mapContainerId + '\"></div>');\n        $map.css({\n            height: '260px',\n            width: '100%',\n            position: 'relative',\n            'margin-top': '10px',\n            border: '1px solid #f1f1f1'\n        });\n        var $mapLoading = $('<span>' + lang.loading + '</span>');\n        $mapLoading.css({\n            position: 'absolute',\n            width: '100px',\n            'text-align': 'center',\n            top: '45%',\n            left: '50%',\n            'margin-left': '-50px'\n        });\n        $map.append($mapLoading);\n        $content.append($map);\n\n        // 按钮\n        var $btnContainer = $('<div style=\"margin:10px 0;\"></div>');\n        var $btnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n        var $btnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n        var $checkLabel = $('<label style=\"display:inline-block;margin-top:10px;color:#666;\"></label>');\n        var $check = $('<input type=\"checkbox\">');\n        $checkLabel.append($check).append('<span style=\"display:inline-block;margin-left:5px;\">  ' + lang.dynamicMap + '</span>');\n        $btnContainer.append($checkLabel)\n                     .append($btnSubmit)\n                     .append($btnCancel);\n        $content.append($btnContainer);\n\n        function callback() {\n            $searchInput.val('');\n        }\n\n        // 『取消』按钮事件\n        $btnCancel.click(function (e) {\n            e.preventDefault();\n            callback();\n            menu.dropPanel.hide();\n        });\n\n        // 『确定』按钮事件\n        $btnSubmit.click(function (e) {\n            e.preventDefault();\n            var map = mapData.map,\n                isDynamic = $check.is(':checked'),\n                markers =  mapData.markers,\n\n                center = map.getCenter(),\n                centerLng = center.lng,\n                centerLat = center.lat,\n\n                zoom = map.getZoom(),\n\n                size = map.getSize(),\n                sizeWidth = size.width,\n                sizeHeight = size.height,\n\n                position,\n                src,\n                iframe;\n\n            if(isDynamic){\n                //动态地址\n                src = 'http://ueditor.baidu.com/ueditor/dialogs/map/show.html#';\n            }else{\n                //静态地址\n                src = 'http://api.map.baidu.com/staticimage?';\n            }\n\n            //src参数\n            src = src +'center=' + centerLng + ',' + centerLat +\n                '&zoom=' + zoom +\n                '&width=' + sizeWidth +\n                '&height=' + sizeHeight;\n            if(markers.length > 0){\n                src = src + '&markers=';\n\n                //添加所有的marker\n                $.each(markers, function(key, value){\n                    position = value.getPosition();\n                    if(key > 0){\n                        src = src + '|';\n                    }\n                    src = src + position.lng + ',' + position.lat;\n                });\n            }\n\n            if(isDynamic){\n                if(markers.length > 1){\n                    alert( lang.langDynamicOneLocation );\n                    return;\n                }\n\n                src += '&markerStyles=l,A';\n\n                //插入iframe\n                iframe = '<iframe class=\"ueditor_baidumap\" src=\"{src}\" frameborder=\"0\" width=\"' + sizeWidth + '\" height=\"' + sizeHeight + '\"></iframe>';\n                iframe = iframe.replace('{src}', src);\n                editor.command(e, 'insertHtml', iframe, callback);\n            }else{\n                //插入图片\n                editor.command(e, 'insertHtml', '<img style=\"max-width:100%;\" src=\"' + src + '\"/>', callback);\n            }\n        });\n\n        // 根据 UI 创建菜单 panel\n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $content,\n            width: 500\n        });\n\n        // ---------- 事件 ----------\n\n        // render 时执行事件\n        menu.onRender = function () {\n            if (ak === E.baiduMapAk) {\n                E.warn('建议在配置中自定义百度地图的mapAk，否则可能影响地图功能，文档：' + E.docsite);\n            }\n        };\n\n        // click 事件\n        menu.clickEvent = function (e) {\n            var menu = this;\n            var dropPanel = menu.dropPanel;\n            var firstTime = false;\n\n            // -------------隐藏-------------\n            if (dropPanel.isShowing) {\n                dropPanel.hide();\n                return;\n            }\n\n            // -------------显示-------------\n            if (!mapData.map) {\n                // 第一次，先加载地图\n                firstTime = true;\n            }\n            \n            dropPanel.show();\n            mapData.initMap();\n\n            if (!firstTime) {\n                $searchInput.focus();\n            }\n        };\n\n    });\n\n});\n// insertcode 菜单\n_e(function (E, $) {\n\n    // 加载 highlightjs 代码\n    function loadHljs() {\n        if (E.userAgent.indexOf('MSIE 8') > 0) {\n            // 不支持 IE8\n            return;\n        }\n        if (window.hljs) {\n            // 不要重复加载\n            return;\n        }\n        var script = document.createElement(\"script\");\n        script.type = \"text/javascript\";\n        script.src = \"//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js\";\n        document.body.appendChild(script);\n    }\n    \n\n    E.createMenu(function (check) {\n        var menuId = 'insertcode';\n        if (!check(menuId)) {\n            return;\n        }\n\n        // 加载 highlightjs 代码\n        setTimeout(loadHljs, 0);\n\n        var editor = this;\n        var config = editor.config;\n        var lang = config.lang;\n        var $txt = editor.txt.$txt;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.insertcode\n        });\n\n        // click 事件\n        menu.clickEvent = function (e) {\n            var menu = this;\n            var dropPanel = menu.dropPanel;\n\n            // 隐藏\n            if (dropPanel.isShowing) {\n                dropPanel.hide();\n                return;\n            }\n\n            // 显示\n            $textarea.val('');\n            dropPanel.show();\n\n            // highlightjs 语言列表\n            var hljs = window.hljs;\n            if (hljs && hljs.listLanguages) {\n                if ($langSelect.children().length !== 0) {\n                    return;\n                }\n                $langSelect.css({\n                    'margin-top': '9px',\n                    'margin-left': '5px'\n                });\n                $.each(hljs.listLanguages(), function (key, lang) {\n                    if (lang === 'xml') {\n                        lang = 'html';\n                    }\n                    if (lang === config.codeDefaultLang) {\n                        $langSelect.append('<option value=\"' + lang + '\" selected=\"selected\">' + lang + '</option>');\n                    } else {\n                        $langSelect.append('<option value=\"' + lang + '\">' + lang + '</option>');\n                    }\n                });\n            } else {\n                $langSelect.hide();\n            }\n        };\n\n        // 选中状态下的 click 事件\n        menu.clickEventSelected = function (e) {\n            var menu = this;\n            var dropPanel = menu.dropPanel;\n\n            // 隐藏\n            if (dropPanel.isShowing) {\n                dropPanel.hide();\n                return;\n            }\n\n            // 显示\n            dropPanel.show();\n\n            var rangeElem = editor.getRangeElem();\n            var targetElem = editor.getSelfOrParentByName(rangeElem, 'pre');\n            var $targetElem;\n            var className;\n            if (targetElem) {\n                // 确定找到 pre 之后，再找 code\n                targetElem = editor.getSelfOrParentByName(rangeElem, 'code');\n            }\n            if (!targetElem) {\n                return;\n            }\n            $targetElem = $(targetElem);\n\n            // 赋值内容\n            $textarea.val($targetElem.text());\n            if ($langSelect) {\n                // 赋值语言\n                className = $targetElem.attr('class');\n                if (className) {\n                    $langSelect.val(className.split(' ')[0]);\n                }\n            }\n        };\n\n        // 定义更新选中状态的事件\n        menu.updateSelectedEvent = function () {\n            var self = this; //菜单对象\n            var editor = self.editor;\n            var rangeElem;\n\n            rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'pre');\n\n            if (rangeElem) {\n                return true;\n            }\n\n            return false;\n        };\n\n        // 创建 panel\n        var $content = $('<div></div>');\n        var $textarea = $('<textarea></textarea>');\n        var $langSelect = $('<select></select>');\n        contentHandle($content);\n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $content,\n            width: 500\n        });\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n\n        // ------ 增加 content 内容 ------\n        function contentHandle($content) {\n            // textarea 区域\n            var $textareaContainer = $('<div></div>');\n            $textareaContainer.css({\n                margin: '15px 5px 5px 5px',\n                height: '160px',\n                'text-align': 'center'\n            });\n            $textarea.css({\n                width: '100%',\n                height: '100%',\n                padding: '10px'\n            });\n            $textarea.on('keydown', function (e) {\n                // 取消 tab 键默认行为\n                if (e.keyCode === 9) {\n                    e.preventDefault();\n                }\n            });\n            $textareaContainer.append($textarea);\n            $content.append($textareaContainer);\n\n            // 按钮区域\n            var $btnContainer = $('<div></div>');\n            var $btnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n            var $btnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n\n            $btnContainer.append($btnSubmit).append($btnCancel).append($langSelect);\n            $content.append($btnContainer);\n\n            // 取消按钮\n            $btnCancel.click(function (e) {\n                e.preventDefault();\n                menu.dropPanel.hide();\n            });\n\n            // 确定按钮\n            var codeTpl = '<pre style=\"max-width:100%;overflow-x:auto;\"><code{#langClass}>{#content}</code></pre>';\n            $btnSubmit.click(function (e) {\n                e.preventDefault();\n                var val = $textarea.val();\n                if (!val) {\n                    // 无内容\n                    $textarea.focus();\n                    return;\n                }\n\n                var rangeElem = editor.getRangeElem();\n                if ($.trim($(rangeElem).text()) && codeTpl.indexOf('<p><br></p>') !== 0) {\n                    codeTpl = '<p><br></p>' + codeTpl;\n                }\n\n                var lang = $langSelect ? $langSelect.val() : ''; // 获取高亮语言\n                var langClass = '';\n                var doHightlight = function () {\n                    $txt.find('pre code').each(function (i, block) {\n                        var $block = $(block);\n                        if ($block.attr('codemark')) {\n                            // 有 codemark 标记的代码块，就不再重新格式化了\n                            return;\n                        } else if (window.hljs) {\n                            // 新代码块，格式化之后，立即标记 codemark\n                            window.hljs.highlightBlock(block);\n                            $block.attr('codemark', '1');\n                        }\n                    });\n                };\n\n                // 语言高亮样式\n                if (lang) {\n                    langClass = ' class=\"' + lang + ' hljs\"';\n                }\n\n                // 替换标签\n                val = val.replace(/&/gm, '&amp;')\n                         .replace(/</gm, '&lt;')\n                         .replace(/>/gm, '&gt;');\n\n                // ---- menu 未选中状态 ----\n                if (!menu.selected) {\n                    // 拼接html\n                    var html = codeTpl.replace('{#langClass}', langClass).replace('{#content}', val);\n                    editor.command(e, 'insertHtml', html, doHightlight);\n                    return;\n                }\n\n                // ---- menu 选中状态 ----\n                var targetElem = editor.getSelfOrParentByName(rangeElem, 'pre');\n                var $targetElem;\n                if (targetElem) {\n                    // 确定找到 pre 之后，再找 code\n                    targetElem = editor.getSelfOrParentByName(rangeElem, 'code');\n                }\n                if (!targetElem) {\n                    return;\n                }\n                $targetElem = $(targetElem);\n\n                function commandFn() {\n                    var className;\n                    if (lang) {\n                        className = $targetElem.attr('class');\n                        if (className !== lang + ' hljs') {\n                            $targetElem.attr('class', lang + ' hljs');\n                        }\n                    }\n                    $targetElem.html(val);\n                }\n                function callback() {\n                    editor.restoreSelectionByElem(targetElem);\n                    doHightlight();\n                }\n                editor.customCommand(e, commandFn, callback);\n            });\n        }\n\n        // ------ enter 时，不另起标签，只换行 ------\n        $txt.on('keydown', function (e) {\n            if (e.keyCode !== 13) {\n                return;\n            }\n            var rangeElem = editor.getRangeElem();\n            var targetElem = editor.getSelfOrParentByName(rangeElem, 'code');\n            if (!targetElem) {\n                return;\n            }\n\n            editor.command(e, 'insertHtml', '\\n');\n        });\n\n        // ------ 点击时，禁用其他标签 ------\n        function updateMenu() {\n            var rangeElem = editor.getRangeElem();\n            var targetElem = editor.getSelfOrParentByName(rangeElem, 'code');\n            if (targetElem) {\n                // 在 code 之内，禁用其他菜单\n                editor.disableMenusExcept('insertcode');\n            } else {\n                // 不是在 code 之内，启用其他菜单\n                editor.enableMenusExcept('insertcode');\n            }\n        }\n        $txt.on('keydown click', function (e) {\n            // 此处必须使用 setTimeout 异步处理，否则不对\n            setTimeout(updateMenu);\n        });\n    });\n\n});\n// undo 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'undo';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.undo\n        });\n\n        // click 事件\n        menu.clickEvent = function (e) {\n            editor.undo();\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n\n\n        // ------------ 初始化时、enter 时、打字中断时，做记录 ------------\n        // ------------ ctrl + z 是调用记录撤销，而不是使用浏览器默认的撤销 ------------\n        editor.ready(function () {\n            var editor = this;\n            var $txt = editor.txt.$txt;\n            var timeoutId;\n\n            // 执行undo记录\n            function undo() {\n                editor.undoRecord();\n            }\n\n            $txt.on('keydown', function (e) {\n                var keyCode = e.keyCode;\n\n                // 撤销 ctrl + z\n                if (e.ctrlKey && keyCode === 90) {\n                    editor.undo();\n                    return;\n                }\n\n                if (keyCode === 13) {\n                    // enter 做记录\n                    undo();\n                } else {\n                    // keyup 之后 1s 之内不操作，则做一次记录\n                    if (timeoutId) {\n                        clearTimeout(timeoutId);\n                    }\n                    timeoutId = setTimeout(undo, 1000);\n                }\n            });\n\n            // 初始化做记录\n            editor.undoRecord();\n        });\n    });\n\n});\n// redo 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'redo';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.redo\n        });\n\n        // click 事件\n        menu.clickEvent = function (e) {\n            editor.redo();\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n\n});\n// 全屏 菜单\n_e(function (E, $) {\n\n    // 记录全屏时的scrollTop\n    var scrollTopWhenFullScreen;\n\n    E.createMenu(function (check) {\n        var menuId = 'fullscreen';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var $txt = editor.txt.$txt;\n        var config = editor.config;\n        var zIndexConfig = config.zindex || 10000;\n        var lang = config.lang;\n\n        var isSelected = false;\n        var zIndex;\n\n        var maxHeight;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.fullscreen\n        });\n\n        // 定义click事件\n        menu.clickEvent = function (e) {\n            // 增加样式\n            var $editorContainer = editor.$editorContainer;\n            $editorContainer.addClass('wangEditor-fullscreen');\n\n            // （先保存当前的）再设置z-index\n            zIndex = $editorContainer.css('z-index');\n            $editorContainer.css('z-index', zIndexConfig);\n\n            var $wrapper;\n            var txtHeight = $txt.height();\n            var txtOuterHeight = $txt.outerHeight();\n\n            if (editor.useMaxHeight) {\n                // 记录 max-height，并暂时去掉maxheight\n                maxHeight = $txt.css('max-height');\n                $txt.css('max-height', 'none');\n\n                // 如果使用了maxHeight， 将$txt从它的父元素中移出来\n                $wrapper = $txt.parent();\n                $wrapper.after($txt);\n                $wrapper.remove();\n                $txt.css('overflow-y', 'auto');\n            }\n\n            // 设置高度到全屏\n            var menuContainer = editor.menuContainer;\n            $txt.height(\n                E.$window.height() - \n                menuContainer.height() - \n                (txtOuterHeight - txtHeight)  // 去掉内边距和外边距\n            );\n\n            // 取消menuContainer的内联样式（menu吸顶时，会为 menuContainer 设置一些内联样式）\n            editor.menuContainer.$menuContainer.attr('style', '');\n\n            // 保存状态\n            isSelected = true;\n\n            // 记录编辑器是否全屏\n            editor.isFullScreen = true;\n\n            // 记录设置全屏时的高度\n            scrollTopWhenFullScreen = E.$window.scrollTop();\n        };\n\n        // 定义选中状态的 click 事件\n        menu.clickEventSelected = function (e) {\n            // 取消样式\n            var $editorContainer = editor.$editorContainer;\n            $editorContainer.removeClass('wangEditor-fullscreen');\n            $editorContainer.css('z-index', zIndex);\n\n            // 还原height\n            if (editor.useMaxHeight) {\n                $txt.css('max-height', maxHeight);\n            } else {\n                // editor.valueContainerHeight 在 editor.txt.initHeight() 中事先保存了\n                editor.$valueContainer.css('height', editor.valueContainerHeight);\n            }\n\n            // 重新计算高度\n            editor.txt.initHeight();\n\n            // 保存状态\n            isSelected = false;\n\n            // 记录编辑器是否全屏\n            editor.isFullScreen = false;\n\n            // 还原scrollTop\n            if (scrollTopWhenFullScreen != null) {\n                E.$window.scrollTop(scrollTopWhenFullScreen);\n            }\n        };\n\n        // 定义选中事件\n        menu.updateSelectedEvent = function (e) {\n            return isSelected;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n\n});\n// 渲染menus\n_e(function (E, $) {\n\n    E.fn.renderMenus = function () {\n\n        var editor = this;\n        var menus = editor.menus;\n        var menuIds = editor.config.menus;\n        var menuContainer = editor.menuContainer;\n\n        var menu;\n        var groupIdx = 0;\n        $.each(menuIds, function (k, v) {\n            if (v === '|') {\n                groupIdx++;\n                return;\n            }\n\n            menu = menus[v];\n            if (menu) {\n                menu.render(groupIdx);\n            }\n        });\n    };\n\n});\n// 渲染menus\n_e(function (E, $) {\n\n    E.fn.renderMenuContainer = function () {\n\n        var editor = this;\n        var menuContainer = editor.menuContainer;\n        var $editorContainer = editor.$editorContainer;\n\n        menuContainer.render();\n\n    };\n\n});\n// 渲染 txt\n_e(function (E, $) {\n\n    E.fn.renderTxt = function () {\n\n        var editor = this;\n        var txt = editor.txt;\n\n        txt.render();\n\n        // ready 时候，计算txt的高度\n        editor.ready(function () {\n            txt.initHeight();\n        });\n    };\n\n});\n// 渲染 container\n_e(function (E, $) {\n\n    E.fn.renderEditorContainer = function () {\n\n        var editor = this;\n        var $valueContainer = editor.$valueContainer;\n        var $editorContainer = editor.$editorContainer;\n        var $txt = editor.txt.$txt;\n        var $prev, $parent;\n\n        // 将编辑器渲染到页面中\n        if ($valueContainer === $txt) {\n            $prev = editor.$prev;\n            $parent = editor.$parent;\n\n            if ($prev && $prev.length) {\n                // 有前置节点，就插入到前置节点的后面\n                $prev.after($editorContainer);\n            } else {\n                // 没有前置节点，就直接插入到父元素\n                $parent.prepend($editorContainer);\n            }\n\n        } else {\n            $valueContainer.after($editorContainer);\n            $valueContainer.hide();\n        }\n\n        // 设置宽度（这样设置宽度有问题）\n        // $editorContainer.css('width', $valueContainer.css('width'));\n    };\n\n});\n// 菜单事件\n_e(function (E, $) {\n\n    // 绑定每个菜单的click事件\n    E.fn.eventMenus = function () {\n\n        var menus = this.menus;\n\n        // 绑定菜单的点击事件\n        $.each(menus, function (k, v) {\n            v.bindEvent();\n        });\n\n    };\n\n});\n// 菜单container事件\n_e(function (E, $) {\n\n    E.fn.eventMenuContainer = function () {\n\n    };\n\n});\n// 编辑区域事件\n_e(function (E, $) {\n\n    E.fn.eventTxt = function () {\n\n        var txt = this.txt;\n\n        // txt内容变化时，保存选区\n        txt.saveSelectionEvent();\n\n        // txt内容变化时，随时更新 value\n        txt.updateValueEvent();\n\n        // txt内容变化时，随时更新 menu style\n        txt.updateMenuStyleEvent();\n\n        // // 鼠标hover时，显示 p head 高度（暂时关闭这个功能）\n        // if (!/ie/i.test(E.userAgent)) {\n        //     // 暂时不支持IE\n        //     txt.showHeightOnHover();\n        // }\n    };\n\n});\n// 上传图片事件\n_e(function (E, $) {\n\n    E.plugin(function () {\n        var editor = this;\n        var fns = editor.config.uploadImgFns; // editor.config.uploadImgFns = {} 在config文件中定义了\n\n        // -------- 定义load函数 --------\n        fns.onload || (fns.onload = function (resultText, xhr) {\n            E.log('上传结束，返回结果为 ' + resultText);\n\n            var editor = this;\n            var originalName = editor.uploadImgOriginalName || '';  // 上传图片时，已经将图片的名字存在 editor.uploadImgOriginalName\n            var img;\n            if (resultText.indexOf('error|') === 0) {\n                // 提示错误\n                E.warn('上传失败：' + resultText.split('|')[1]);\n                alert(resultText.split('|')[1]);\n            } else {\n                E.log('上传成功，即将插入编辑区域，结果为：' + resultText);\n\n                // 将结果插入编辑器\n                img = document.createElement('img');\n                img.onload = function () {\n                    var html = '<img src=\"' + resultText + '\" alt=\"' + originalName + '\" style=\"max-width:100%;\"/>';\n                    editor.command(null, 'insertHtml', html);\n\n                    E.log('已插入图片，地址 ' + resultText);\n                    img = null;\n                };\n                img.onerror = function () {\n                    E.error('使用返回的结果获取图片，发生错误。请确认以下结果是否正确：' + resultText);\n                    img = null;\n                };\n                img.src = resultText;\n            }\n\n        });\n\n        // -------- 定义tiemout函数 --------\n        fns.ontimeout || (fns.ontimeout = function (xhr) {\n            E.error('上传图片超时');\n            alert('上传图片超时');\n        });\n\n        // -------- 定义error函数 --------\n        fns.onerror || (fns.onerror = function (xhr) {\n            E.error('上传上图片发生错误');\n            alert('上传上图片发生错误');\n            console.log('xhr',xhr)\n        });\n\n    });\n});\n// xhr 上传图片\n_e(function (E, $) {\n\n    if (!window.FileReader || !window.FormData) {\n        // 如果不支持html5的文档操作，直接返回\n        return;\n    }\n\n    E.plugin(function () {\n\n        var editor = this;\n        var config = editor.config;\n\n        var uploadImgUrl = config.uploadImgUrl;\n        var uploadTimeout = config.uploadTimeout;\n\n        // 获取配置中的上传事件\n        var uploadImgFns = config.uploadImgFns;\n        var onload = uploadImgFns.onload;\n        var ontimeout = uploadImgFns.ontimeout;\n        var onerror = uploadImgFns.onerror;\n\n        if (!uploadImgUrl) {\n            return;\n        }\n\n        // -------- 将以base64的图片url数据转换为Blob --------\n        function convertBase64UrlToBlob(urlData, filetype){\n            //去掉url的头，并转换为byte\n            var bytes = window.atob(urlData.split(',')[1]);\n            \n            //处理异常,将ascii码小于0的转换为大于0\n            var ab = new ArrayBuffer(bytes.length);\n            var ia = new Uint8Array(ab);\n            var i;\n            for (i = 0; i < bytes.length; i++) {\n                ia[i] = bytes.charCodeAt(i);\n            }\n\n            return new Blob([ab], {type : filetype});\n        }\n\n        // -------- 插入图片的方法 --------\n        function insertImg(src, event) {\n            var img = document.createElement('img');\n            img.onload = function () {\n                var html = '<img src=\"' + src + '\" style=\"max-width:100%;\"/>';\n                editor.command(event, 'insertHtml', html);\n\n                E.log('已插入图片，地址 ' + src);\n                img = null;\n            };\n            img.onerror = function () {\n                E.error('使用返回的结果获取图片，发生错误。请确认以下结果是否正确：' + src);\n                img = null;\n            };\n            img.src = src;\n        }\n\n        // -------- onprogress 事件 --------\n        function updateProgress(e) {\n            if (e.lengthComputable) {\n                var percentComplete = e.loaded / e.total;\n                editor.showUploadProgress(percentComplete * 100);\n            }\n        }\n\n        // -------- xhr 上传图片 --------\n        editor.xhrUploadImg = function (opt) {\n            // opt 数据\n            var event = opt.event;\n            var fileName = opt.filename || '';\n            var base64 = opt.base64;\n            var fileType = opt.fileType || 'image/png'; // 无扩展名则默认使用 png\n            var name = opt.name || 'wangEditor_upload_file';\n            var loadfn = opt.loadfn || onload;\n            var errorfn = opt.errorfn || onerror;\n            var timeoutfn = opt.timeoutfn || ontimeout;\n\n            // 上传参数（如 token）\n            var params = editor.config.uploadParams || {};\n\n            // headers\n            var headers = editor.config.uploadHeaders || {};\n\n            // 获取文件扩展名\n            var fileExt = 'png';  // 默认为 png\n            if (fileName.indexOf('.') > 0) {\n                // 原来的文件名有扩展名\n                fileExt = fileName.slice(fileName.lastIndexOf('.') - fileName.length + 1);\n            } else if (fileType.indexOf('/') > 0 && fileType.split('/')[1]) {\n                // 文件名没有扩展名，通过类型获取，如从 'image/png' 取 'png'\n                fileExt = fileType.split('/')[1];\n            }\n\n            // ------------ begin 预览模拟上传 ------------\n            if (E.isOnWebsite) {\n                E.log('预览模拟上传');\n                insertImg(base64, event);\n                return;\n            }\n            // ------------ end 预览模拟上传 ------------\n\n            // 变量声明\n            var xhr = new XMLHttpRequest();\n            var timeoutId;\n            var src;\n            var formData = new FormData();\n\n            // 超时处理\n            function timeoutCallback() {\n                if (timeoutId) {\n                    clearTimeout(timeoutId);\n                }\n                if (xhr && xhr.abort) {\n                    xhr.abort();\n                }\n\n                // 超时了就阻止默认行为\n                event.preventDefault();\n\n                // 执行回调函数，提示什么内容，都应该在回调函数中定义\n                timeoutfn && timeoutfn.call(editor, xhr);\n\n                // 隐藏进度条\n                editor.hideUploadProgress();\n            }\n\n            xhr.onload = function () {\n                if (timeoutId) {\n                    clearTimeout(timeoutId);\n                }\n\n                // 记录文件名到 editor.uploadImgOriginalName ，插入图片时，可做 alt 属性用\n                editor.uploadImgOriginalName = fileName;\n                if (fileName.indexOf('.') > 0) {\n                    editor.uploadImgOriginalName = fileName.split('.')[0];\n                }\n\n                // 执行load函数，任何操作，都应该在load函数中定义\n                loadfn && loadfn.call(editor, xhr.responseText, xhr);\n\n                // 隐藏进度条\n                editor.hideUploadProgress();\n            };\n            xhr.onerror = function () {\n                if (timeoutId) {\n                    clearTimeout(timeoutId);\n                }\n\n                // 超时了就阻止默认行为\n                event.preventDefault();\n\n                // 执行error函数，错误提示，应该在error函数中定义\n                errorfn && errorfn.call(editor, xhr);\n\n                // 隐藏进度条\n                editor.hideUploadProgress();\n            };\n            // xhr.onprogress = updateProgress;\n            xhr.upload.onprogress = updateProgress;\n\n            if(params.type === 'oss'){\n                $.ajaxSettings.async = false;\n                $.post(params.request_uri,{fileExt:fileExt},function (upload_oss_param_response) {\n                    upload_oss_param_response = JSON.parse(upload_oss_param_response)\n                    uploadImgUrl=upload_oss_param_response.uri\n                    params=upload_oss_param_response.param\n\n                })\n                $.ajaxSettings.async = true;\n            }\n            // 添加参数\n            $.each(params, function (key, value) {\n                formData.append(key, value);\n            });\n            // 填充数据\n            formData.append(name, convertBase64UrlToBlob(base64, fileType), E.random() + '.' + fileExt);\n            // 开始上传\n            xhr.open('POST', uploadImgUrl, true);\n            // xhr.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");  // 将参数解析成传统form的方式上传\n\n            // 修改自定义配置的headers\n            $.each(headers, function (key, value) {\n                xhr.setRequestHeader(key, value);\n            });\n\n            // 跨域上传时，传cookie\n            // console.log('editor.config',editor.config)\n            xhr.withCredentials = editor.config.withCredentials || false;\n            // console.log('xhr.withCredentials',xhr.withCredentials)\n\n            // 发送数据\n            xhr.send(formData);\n            timeoutId = setTimeout(timeoutCallback, uploadTimeout);\n\n            E.log('开始上传...并开始超时计算');\n        };\n    });\n});\n// 进度条\n_e(function (E, $) {\n\n    E.plugin(function () {\n\n        var editor = this;\n        var menuContainer = editor.menuContainer;\n        var menuHeight = menuContainer.height();\n        var $editorContainer = editor.$editorContainer;\n        var width = $editorContainer.width();\n        var $progress = $('<div class=\"wangEditor-upload-progress\"></div>');\n\n        // 渲染事件\n        var isRender = false;\n        function render() {\n            if (isRender) {\n                return;\n            }\n            isRender = true;\n\n            $progress.css({\n                top: menuHeight + 'px'\n            });\n            $editorContainer.append($progress);\n        }\n\n        // ------ 显示进度 ------\n        editor.showUploadProgress = function (progress) {\n            if (timeoutId) {\n                clearTimeout(timeoutId);\n            }\n\n            // 显示之前，先判断是否渲染\n            render();\n\n            $progress.show();\n            $progress.width(progress * width / 100);\n        };\n\n        // ------ 隐藏进度条 ------\n        var timeoutId;\n        function hideProgress() {\n            $progress.hide();\n            timeoutId = null;\n        }\n        editor.hideUploadProgress = function (time) {\n            if (timeoutId) {\n                clearTimeout(timeoutId);\n            }\n            time = time || 750;\n            timeoutId = setTimeout(hideProgress, time);\n        };\n    });\n});\n// upload img 插件\n_e(function (E, $) {\n\n    E.plugin(function () {\n        var editor = this;\n        var config = editor.config;\n        var uploadImgUrl = config.uploadImgUrl;\n        var uploadTimeout = config.uploadTimeout;\n        var event;\n\n        if (!uploadImgUrl) {\n            return;\n        }\n\n        // 获取editor的上传dom\n        var $uploadContent = editor.$uploadContent;\n        if (!$uploadContent) {\n            return;\n        }\n\n        // 自定义UI，并添加到上传dom节点上\n        var $uploadIcon = $('<div class=\"upload-icon-container\"><i class=\"wangeditor-menu-img-upload\"></i></div>');\n        $uploadContent.append($uploadIcon);\n\n        // ---------- 构建上传对象 ----------\n        var upfile = new E.UploadFile({\n            editor: editor,\n            uploadUrl: uploadImgUrl,\n            timeout: uploadTimeout,\n            fileAccept: 'image/jpg,image/jpeg,image/png,image/gif,image/bmp'    // 只允许选择图片 \n        });\n\n        // 选择本地文件，上传\n        $uploadIcon.click(function (e) {\n            event = e;\n            upfile.selectFiles();\n        });\n    });\n});\n// h5 方式上传图片\n_e(function (E, $) {\n    if (!window.FileReader || !window.FormData) {\n        // 如果不支持html5的文档操作，直接返回\n        return;\n    }\n\n    // 构造函数\n    var UploadFile = function (opt) {\n        this.editor = opt.editor;\n        this.uploadUrl = opt.uploadUrl;\n        this.timeout = opt.timeout;\n        this.fileAccept = opt.fileAccept;\n        this.multiple = true;\n    };\n\n    UploadFile.fn = UploadFile.prototype;\n\n    // clear\n    UploadFile.fn.clear = function () {\n        this.$input.val('');\n        E.log('input value 已清空');\n    };\n\n    // 渲染\n    UploadFile.fn.render = function () {\n        var self = this;\n        if (self._hasRender) {\n            // 不要重复渲染\n            return;\n        }\n\n        E.log('渲染dom');\n\n        var fileAccept = self.fileAccept;\n        var acceptTpl = fileAccept ? 'accept=\"' + fileAccept + '\"' : '';\n        var multiple = self.multiple;\n        var multipleTpl = multiple ? 'multiple=\"multiple\"' : '';\n        var $input = $('<input type=\"file\" ' + acceptTpl + ' ' + multipleTpl + '/>');\n        var $container = $('<div style=\"display:none;\"></div>');\n\n        $container.append($input);\n        E.$body.append($container);\n\n        // onchange 事件\n        $input.on('change', function (e) {\n            self.selected(e, $input.get(0));\n        });\n\n        // 记录对象数据\n        self.$input = $input;\n\n        // 记录\n        self._hasRender = true;\n    };\n\n    // 选择\n    UploadFile.fn.selectFiles = function () {\n        var self = this;\n\n        E.log('使用 html5 方式上传');\n\n        // 先渲染\n        self.render();\n\n        // 选择\n        E.log('选择文件');\n        self.$input.click();\n    };\n\n    // 选中文件之后\n    UploadFile.fn.selected = function (e, input) {\n        var self = this;\n        var files = input.files || [];\n        if (files.length === 0) {\n            return;\n        }\n\n        E.log('选中 ' + files.length + ' 个文件');\n\n        // 遍历选中的文件，预览、上传\n        $.each(files, function (key, value) {\n            self.upload(value);\n        });\n    };\n\n    // 上传单个文件\n    UploadFile.fn.upload = function (file) {\n        var self = this;\n        var editor = self.editor;\n        var filename = file.name || '';\n        var fileType = file.type || '';\n        var uploadImgFns = editor.config.uploadImgFns;\n        var uploadFileName = editor.config.uploadImgFileName || 'wangEditorH5File';\n        var onload = uploadImgFns.onload;\n        var ontimeout = uploadImgFns.ontimeout;\n        var onerror = uploadImgFns.onerror;\n        var reader = new FileReader();\n\n        if (!onload || !ontimeout || !onerror) {\n            E.error('请为编辑器配置上传图片的 onload ontimeout onerror 回调事件');\n            return;\n        }\n\n\n        E.log('开始执行 ' + filename + ' 文件的上传');\n\n        // 清空 input 数据\n        function clearInput() {\n            self.clear();\n        }\n\n        // onload事件\n        reader.onload = function (e) {\n            E.log('已读取' + filename + '文件');\n\n            var base64 = e.target.result || this.result;\n            editor.xhrUploadImg({\n                event: e,\n                filename: filename,\n                base64: base64,\n                fileType: fileType,\n                name: uploadFileName,\n                loadfn: function (resultText, xhr) {\n                    clearInput();\n                    // 执行配置中的方法\n                    var editor = this;\n                    onload.call(editor, resultText, xhr);\n                },\n                errorfn: function (xhr) {\n                    clearInput();\n                    if (E.isOnWebsite) {\n                        alert('wangEditor官网暂时没有服务端，因此报错。实际项目中不会发生');\n                    }\n                    // 执行配置中的方法\n                    var editor = this;\n                    onerror.call(editor, xhr);\n                },\n                timeoutfn: function (xhr) {\n                    clearInput();\n                    if (E.isOnWebsite) {\n                        alert('wangEditor官网暂时没有服务端，因此超时。实际项目中不会发生');\n                    }\n                    // 执行配置中的方法\n                    var editor = this;\n                    ontimeout(editor, xhr);\n                }\n            });\n        };\n\n        // 开始取文件\n        reader.readAsDataURL(file);\n    };\n\n    // 暴露给 E\n    E.UploadFile = UploadFile;\n\n});\n// form方式上传图片\n_e(function (E, $) {\n\n    if (window.FileReader && window.FormData) {\n        // 如果支持 html5 上传，则返回\n        return;\n    }\n    \n    // 构造函数\n    var UploadFile = function (opt) {\n        this.editor = opt.editor;\n        this.uploadUrl = opt.uploadUrl;\n        this.timeout = opt.timeout;\n        this.fileAccept = opt.fileAccept;\n        this.multiple = false;\n    };\n\n    UploadFile.fn = UploadFile.prototype;\n\n    // clear\n    UploadFile.fn.clear = function () {\n        this.$input.val('');\n        E.log('input value 已清空');\n    };\n\n    // 隐藏modal\n    UploadFile.fn.hideModal = function () {\n        this.modal.hide();\n    };\n\n    // 渲染\n    UploadFile.fn.render = function () {\n        var self = this;\n        var editor = self.editor;\n        var uploadFileName = editor.config.uploadImgFileName || 'wangEditorFormFile';\n        if (self._hasRender) {\n            // 不要重复渲染\n            return;\n        }\n\n        // 服务器端路径\n        var uploadUrl = self.uploadUrl;\n\n        E.log('渲染dom');\n\n        // 创建 form 和 iframe\n        var iframeId = 'iframe' + E.random();\n        var $iframe = $('<iframe name=\"' + iframeId + '\" id=\"' + iframeId + '\" frameborder=\"0\" width=\"0\" height=\"0\"></iframe>');\n        var multiple = self.multiple;\n        var multipleTpl = multiple ? 'multiple=\"multiple\"' : '';\n        var $p = $('<p>选择图片并上传</p>');\n        var $input = $('<input type=\"file\" ' + multipleTpl + ' name=\"' + uploadFileName + '\"/>');\n        var $btn = $('<input type=\"submit\" value=\"上传\"/>');\n        var $form = $('<form enctype=\"multipart/form-data\" method=\"post\" action=\"' + uploadUrl + '\" target=\"' + iframeId + '\"></form>');\n        var $container = $('<div style=\"margin:10px 20px;\"></div>');\n\n        $form.append($p).append($input).append($btn);\n\n        // 增加用户配置的参数，如 token\n        $.each(editor.config.uploadParams, function (key, value) {\n            $form.append( $('<input type=\"hidden\" name=\"' + key + '\" value=\"' + value + '\"/>') );\n        });\n        alert(1)\n        $container.append($form);\n        $container.append($iframe);\n\n        self.$input = $input;\n        self.$iframe = $iframe;\n\n        // 生成 modal\n        var modal = new E.Modal(editor, undefined, {\n            $content: $container\n        });\n        self.modal = modal;\n\n        // 记录\n        self._hasRender = true;\n    };\n\n    // 绑定 iframe load 事件\n    UploadFile.fn.bindLoadEvent = function () {\n        var self = this;\n        if (self._hasBindLoad) {\n            // 不要重复绑定\n            return;\n        }\n\n        var editor = self.editor;\n        var $iframe = self.$iframe;\n        var iframe = $iframe.get(0);\n        var iframeWindow = iframe.contentWindow;\n        var onload = editor.config.uploadImgFns.onload;\n\n        // 定义load事件\n        function onloadFn() {\n            var resultText = $.trim(iframeWindow.document.body.innerHTML);\n            if (!resultText) {\n                return;\n            }\n\n            // 获取文件名\n            var fileFullName = self.$input.val();  // 结果如 C:\\folder\\abc.png 格式\n            var fileOriginalName = fileFullName;\n            if (fileFullName.lastIndexOf('\\\\') >= 0) {\n                // 获取 abc.png 格式\n                fileOriginalName = fileFullName.slice(fileFullName.lastIndexOf('\\\\') + 1);\n                if (fileOriginalName.indexOf('.') > 0) {\n                    // 获取 abc （即不带扩展名的文件名）\n                    fileOriginalName = fileOriginalName.split('.')[0];\n                }\n            }\n\n            // 将文件名暂存到 editor.uploadImgOriginalName ，插入图片时，可作为 alt 属性来用\n            editor.uploadImgOriginalName = fileOriginalName;\n\n            // 执行load函数，插入图片的操作，应该在load函数中执行\n            onload.call(editor, resultText);\n\n            // 清空 input 数据\n            self.clear();\n\n            // 隐藏modal\n            self.hideModal();\n        }\n\n        // 绑定 load 事件\n        if (iframe.attachEvent) {\n            iframe.attachEvent('onload', onloadFn);\n        } else {\n            iframe.onload = onloadFn;\n        }\n\n        // 记录\n        self._hasBindLoad = true;\n    };\n\n    UploadFile.fn.show = function () {\n        var self = this;\n        var modal = self.modal;\n\n        function show() {\n            modal.show();\n            self.bindLoadEvent();\n        }\n        setTimeout(show);\n    };\n\n    // 选择\n    UploadFile.fn.selectFiles = function () {\n        var self = this;\n\n        E.log('使用 form 方式上传');\n\n        // 先渲染\n        self.render();\n\n        // 先清空\n        self.clear();\n\n        // 显示\n        self.show();\n    };\n\n    // 暴露给 E\n    E.UploadFile = UploadFile;\n\n});\n// upload img 插件 粘贴图片\n_e(function (E, $) {\n    \n    E.plugin(function () {\n        var editor = this;\n        var txt = editor.txt;\n        var $txt = txt.$txt;\n        var config = editor.config;\n        var uploadImgUrl = config.uploadImgUrl;\n        var uploadFileName = config.uploadImgFileName || 'wangEditorPasteFile';\n        var pasteEvent;\n        var $imgsBeforePaste;\n\n        // 未配置上传图片url，则忽略\n        if (!uploadImgUrl) {\n            return;\n        }\n\n        // -------- 非 chrome 下，通过查找粘贴的图片的方式上传 --------\n        function findPasteImgAndUpload() {\n            var reg = /^data:(image\\/\\w+);base64/;\n            var $imgs = $txt.find('img');\n\n            E.log('粘贴后，检查到编辑器有' + $imgs.length + '个图片。开始遍历图片，试图找到刚刚粘贴过来的图片');\n\n            $.each($imgs, function () {\n                var img = this;\n                var $img = $(img);\n                var flag;\n                var base64 = $img.attr('src');\n                var type;\n\n                // 判断当前图片是否是粘贴之前的\n                $imgsBeforePaste.each(function () {\n                    if (img === this) {\n                        // 当前图片是粘贴之前的\n                        flag = true;\n                        return false;\n                    }\n                });\n\n                // 当前图片是粘贴之前的，则忽略\n                if (flag) {\n                    return;\n                }\n\n                E.log('找到一个粘贴过来的图片');\n\n                if (reg.test(base64)) {\n                    // 得到的粘贴的图片是 base64 格式，符合要求\n                    E.log('src 是 base64 格式，可以上传');\n                    type = base64.match(reg)[1];\n                    editor.xhrUploadImg({\n                        event: pasteEvent,\n                        base64: base64,\n                        fileType: type,\n                        name: uploadFileName\n                    });\n                } else {\n                    E.log('src 为 ' + base64 + ' ，不是 base64 格式，暂时不支持上传');\n                }\n\n                // 最终移除原图片\n                $img.remove();\n            });\n\n            E.log('遍历结束');\n        }\n\n        // 开始监控粘贴事件\n        $txt.on('paste', function (e) {\n            pasteEvent = e;\n            var data = pasteEvent.clipboardData || pasteEvent.originalEvent.clipboardData;\n            var text;\n            var items;\n\n            // -------- 试图获取剪切板中的文字，有文字的情况下，就不处理图片粘贴 --------\n            if (data == null) {\n                text = window.clipboardData && window.clipboardData.getData('text');\n            } else {\n                text = data.getData('text/plain') || data.getData('text/html');\n            }\n            if (text) {\n                return;\n            }\n\n            items = data && data.items;\n            if (items) {\n                // -------- chrome 可以用 data.items 取出图片 -----\n                E.log('通过 data.items 得到了数据');\n\n                $.each(items, function (key, value) {\n                    var fileType = value.type || '';\n                    if(fileType.indexOf('image') < 0) {\n                        // 不是图片\n                        return;\n                    }\n\n                    var file = value.getAsFile();\n                    var reader = new FileReader();\n\n                    E.log('得到一个粘贴图片');\n\n                    reader.onload = function (e) {\n                        E.log('读取到粘贴的图片');\n\n                        // 执行上传\n                        var base64 = e.target.result || this.result;\n                        editor.xhrUploadImg({\n                            event: pasteEvent,\n                            base64: base64,\n                            fileType: fileType,\n                            name: uploadFileName\n                        });\n                    };\n\n                    //读取粘贴的文件\n                    reader.readAsDataURL(file);\n                });\n            } else {\n                // -------- 非 chrome 不能用 data.items 取图片 -----\n\n                E.log('未从 data.items 得到数据，使用检测粘贴图片的方式');\n\n                // 获取\n                $imgsBeforePaste = $txt.find('img');\n                E.log('粘贴前，检查到编辑器有' + $imgsBeforePaste.length + '个图片');\n\n                // 异步上传找到的图片\n                setTimeout(findPasteImgAndUpload, 0);\n            }\n        });\n\n    });\n});\n// 拖拽上传图片 插件 \n_e(function (E, $) {\n\n    E.plugin(function () {\n\n        var editor = this;\n        var txt = editor.txt;\n        var $txt = txt.$txt;\n        var config = editor.config;\n        var uploadImgUrl = config.uploadImgUrl;\n        var uploadFileName = config.uploadImgFileName || 'wangEditorDragFile';\n\n        // 未配置上传图片url，则忽略\n        if (!uploadImgUrl) {\n            return;\n        }\n\n        // 阻止浏览器默认行为\n        E.$document.on('dragleave drop dragenter dragover', function (e) {\n            e.preventDefault();\n        });\n\n        // 监控 $txt drop 事件\n        $txt.on('drop', function (dragEvent) {\n            dragEvent.preventDefault();\n\n            var originalEvent = dragEvent.originalEvent;\n            var files = originalEvent.dataTransfer && originalEvent.dataTransfer.files;\n\n            if (!files || !files.length) {\n                return;\n            }\n\n            $.each(files, function (k, file) {\n                var type = file.type;\n                var name = file.name;\n\n                if (type.indexOf('image/') < 0) {\n                    // 只接收图片\n                    return;\n                }\n\n                E.log('得到图片 ' + name);\n\n                var reader = new FileReader();\n                reader.onload = function (e) {\n                    E.log('读取到图片 ' + name);\n\n                    // 执行上传\n                    var base64 = e.target.result || this.result;\n                    editor.xhrUploadImg({\n                        event: dragEvent,\n                        base64: base64,\n                        fileType: type,\n                        name: uploadFileName\n                    });\n                };\n\n                //读取粘贴的文件\n                reader.readAsDataURL(file);\n\n            });\n        });\n    });\n\n});\n// 编辑器区域 table toolbar\n_e(function (E, $) {\n\n    E.plugin(function () {\n        var editor = this;\n        var txt = editor.txt;\n        var $txt = txt.$txt;\n        var html = '';\n        // 说明：设置了 max-height 之后，$txt.parent() 负责滚动处理\n        var $currentTxt = editor.useMaxHeight ? $txt.parent() : $txt;\n        var $currentTable;\n\n        // 用到的dom节点\n        var isRendered = false;\n        var $toolbar = $('<div class=\"txt-toolbar\"></div>');\n        var $triangle = $('<div class=\"tip-triangle\"></div>');\n        var $delete = $('<a href=\"#\"><i class=\"wangeditor-menu-img-trash-o\"></i></a>');\n        var $zoomSmall = $('<a href=\"#\"><i class=\"wangeditor-menu-img-search-minus\"></i></a>');\n        var $zoomBig = $('<a href=\"#\"><i class=\"wangeditor-menu-img-search-plus\"></i></a>');\n\n        // 渲染到页面\n        function render() {\n            if (isRendered) {\n                return;\n            }\n            \n            // 绑定事件\n            bindEvent();\n\n            // 拼接 渲染到页面上\n            $toolbar.append($triangle)\n                    .append($delete)\n                    .append($zoomSmall)\n                    .append($zoomBig);\n            editor.$editorContainer.append($toolbar);\n            isRendered = true;\n        }\n\n        // 绑定事件\n        function bindEvent() {\n            // 统一执行命令的方法\n            var commandFn;\n            function command(e, callback) {\n                // 执行命令之前，先存储html内容\n                html = $txt.html();\n                // 监控内容变化\n                var cb = function  () {\n                    if (callback) {\n                        callback();\n                    }\n                    if (html !== $txt.html()) {\n                        $txt.change();\n                    }\n                };\n                // 执行命令\n                if (commandFn) {\n                    editor.customCommand(e, commandFn, cb);\n                }\n            }\n\n            // 删除\n            $delete.click(function (e) {\n                commandFn = function () {\n                    $currentTable.remove();\n                };\n                command(e, function () {\n                    setTimeout(hide, 100);\n                });\n            });\n\n            // 放大\n            $zoomBig.click(function (e) {\n                commandFn = function () {\n                    $currentTable.css({\n                        width: '100%'\n                    });\n                };\n                command(e, function () {\n                    setTimeout(show);\n                });\n            });\n\n            // 缩小\n            $zoomSmall.click(function (e) {\n                commandFn = function () {\n                    $currentTable.css({\n                        width: 'auto'\n                    });\n                };\n                command(e, function () {\n                    setTimeout(show);\n                });\n            });\n        }\n\n        // 显示 toolbar\n        function show() {\n            if (editor._disabled) {\n                // 编辑器已经被禁用，则不让显示\n                return;\n            }\n            if ($currentTable == null) {\n                return;\n            }\n            $currentTable.addClass('clicked');\n            var tablePosition = $currentTable.position();\n            var tableTop = tablePosition.top;\n            var tableLeft = tablePosition.left;\n            var tableHeight = $currentTable.outerHeight();\n            var tableWidth = $currentTable.outerWidth();\n\n            // --- 定位 toolbar ---\n\n            // 计算初步结果\n            var top = tableTop + tableHeight;\n            var left = tableLeft;\n            var marginLeft = 0;\n\n            var txtTop = $currentTxt.position().top;\n            var txtHeight = $currentTxt.outerHeight();\n            if (top > (txtTop + txtHeight)) {\n                // top 不得超出编辑范围\n                top = txtTop + txtHeight;\n            }\n\n            // 显示（方便计算 margin）\n            $toolbar.show();\n\n            // 计算 margin\n            var width = $toolbar.outerWidth();\n            marginLeft = tableWidth / 2 - width / 2;\n\n            // 定位\n            $toolbar.css({\n                top: top + 5,\n                left: left,\n                'margin-left': marginLeft\n            });\n            // 如果定位太靠左了\n            if (marginLeft < 0) {\n                // 得到三角形的margin-left\n                $toolbar.css('margin-left', '0');\n                $triangle.hide();\n            } else {\n                $triangle.show();\n            }\n        }\n        \n        // 隐藏 toolbar\n        function hide() {\n            if ($currentTable == null) {\n                return;\n            }\n            $currentTable.removeClass('clicked');\n            $currentTable = null;\n            $toolbar.hide();\n        }\n\n        // click table 事件\n        $currentTxt.on('click', 'table', function (e) {\n            var $table = $(e.currentTarget);\n\n            // 渲染\n            render();\n\n            if ($currentTable && ($currentTable.get(0) === $table.get(0))) {\n                setTimeout(hide, 100);\n                return;\n            }\n\n            // 显示 toolbar\n            $currentTable = $table;\n            show();\n\n            // 阻止冒泡\n            e.preventDefault();\n            e.stopPropagation();\n            \n        }).on('click keydown scroll', function (e) {\n            setTimeout(hide, 100);\n        });\n        E.$body.on('click keydown scroll', function (e) {\n            setTimeout(hide, 100);\n        });\n    });\n\n});\n// 编辑器区域 img toolbar\n_e(function (E, $) {\n\n    if (E.userAgent.indexOf('MSIE 8') > 0) {\n        return;\n    }\n    \n    E.plugin(function () {\n        var editor = this;\n        var lang = editor.config.lang;\n        var txt = editor.txt;\n        var $txt = txt.$txt;\n        var html = '';\n        // 说明：设置了 max-height 之后，$txt.parent() 负责滚动处理\n        var $currentTxt = editor.useMaxHeight ? $txt.parent() : $txt;\n        var $editorContainer = editor.$editorContainer;\n        var $currentImg;\n        var currentLink = '';\n\n        // 用到的dom节点\n        var isRendered = false;\n        var $dragPoint = $('<div class=\"img-drag-point\"></div>');\n\n        var $toolbar = $('<div class=\"txt-toolbar\"></div>');\n        var $triangle = $('<div class=\"tip-triangle\"></div>');\n\n        var $menuContainer = $('<div></div>');\n        var $delete = $('<a href=\"#\"><i class=\"wangeditor-menu-img-trash-o\"></i></a>');\n        var $zoomSmall = $('<a href=\"#\"><i class=\"wangeditor-menu-img-search-minus\"></i></a>');\n        var $zoomBig = $('<a href=\"#\"><i class=\"wangeditor-menu-img-search-plus\"></i></a>');\n        // var $floatLeft = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-left\"></i></a>');\n        // var $noFloat = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-justify\"></i></a>');\n        // var $floatRight = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-right\"></i></a>');\n        var $alignLeft = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-left\"></i></a>');\n        var $alignCenter = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-center\"></i></a>');\n        var $alignRight = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-right\"></i></a>');\n        var $link = $('<a href=\"#\"><i class=\"wangeditor-menu-img-link\"></i></a>');\n        var $unLink = $('<a href=\"#\"><i class=\"wangeditor-menu-img-unlink\"></i></a>');\n\n        var $linkInputContainer = $('<div style=\"display:none;\"></div>');\n        var $linkInput = $('<input type=\"text\" style=\"height:26px; margin-left:10px; width:200px;\"/>');\n        var $linkBtnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n        var $linkBtnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n\n        // 记录是否正在拖拽\n        var isOnDrag = false;\n\n        // 获取 / 设置 链接\n        function imgLink(e, url) {\n            if (!$currentImg) {\n                return;\n            }\n            var commandFn;\n            var callback = function () {\n                // 及时保存currentLink\n                if (url != null) {\n                    currentLink = url;\n                }\n                if (html !== $txt.html()) {\n                    $txt.change();\n                }\n            };\n            var $link;\n            var inLink = false;\n            var $parent = $currentImg.parent();\n            if ($parent.get(0).nodeName.toLowerCase() === 'a') {\n                // 父元素就是图片链接\n                $link = $parent;\n                inLink = true;\n            } else {\n                // 父元素不是图片链接，则重新创建一个链接\n                $link = $('<a target=\"_blank\"></a>');\n            }\n\n            if (url == null) {\n                // url 无值，是获取链接\n                return $link.attr('href') || '';\n            } else if (url === '') {\n                // url 是空字符串，是取消链接\n                if (inLink) {\n                    commandFn = function () {\n                        $currentImg.unwrap();\n                    };\n                }\n            } else {\n                // url 有值，是设置链接\n                if (url === currentLink) {\n                    return;\n                }\n                commandFn = function () {\n                    $link.attr('href', url);\n\n                    if (!inLink) {\n                        // 当前图片未包含在链接中，则包含进来\n                        $currentImg.wrap($link);\n                    }\n                };\n            }\n\n            // 执行命令\n            if (commandFn) {\n                // 记录下执行命令之前的html内容\n                html = $txt.html();\n                // 执行命令\n                editor.customCommand(e, commandFn, callback);\n            }\n        }\n\n        // 渲染到页面\n        function render() {\n            if (isRendered) {\n                return;\n            }\n            \n            // 绑定事件\n            bindToolbarEvent();\n            bindDragEvent();\n\n            // 菜单放入 container\n            $menuContainer.append($delete)\n                            .append($zoomSmall)\n                            .append($zoomBig)\n                            // .append($floatLeft)\n                            // .append($noFloat)\n                            // .append($floatRight);\n                            .append($alignLeft)\n                            .append($alignCenter)\n                            .append($alignRight)\n                            .append($link)\n                            .append($unLink);\n\n            // 链接input放入container\n            $linkInputContainer.append($linkInput)\n                               .append($linkBtnCancel)\n                               .append($linkBtnSubmit);\n\n            // 拼接 渲染到页面上\n            $toolbar.append($triangle)\n                    .append($menuContainer)\n                    .append($linkInputContainer);\n                    \n            editor.$editorContainer.append($toolbar).append($dragPoint);\n            isRendered = true;\n        }\n\n        // 绑定toolbar事件\n        function bindToolbarEvent() {\n            // 统一执行命令的方法\n            var commandFn;\n            function customCommand(e, callback) {\n                var cb;\n                // 记录下执行命令之前的html内容\n                html = $txt.html();\n                cb = function () {\n                    if (callback) {\n                        callback();\n                    }\n                    if (html !== $txt.html()) {\n                        $txt.change();\n                    }\n                };\n                // 执行命令\n                if (commandFn) {\n                    editor.customCommand(e, commandFn, cb);\n                }\n            }\n\n            // 删除\n            $delete.click(function (e) {\n                // 删除之前先unlink\n                imgLink(e, '');\n\n                // 删除图片\n                commandFn = function () {\n                    $currentImg.remove();\n                };\n                customCommand(e, function () {\n                    setTimeout(hide, 100);\n                });\n            });\n\n            // 放大\n            $zoomBig.click(function (e) {\n                commandFn = function () {\n                    var img = $currentImg.get(0);\n                    var width = img.width;\n                    var height = img.height;\n                    width = width * 1.1;\n                    height = height * 1.1;\n\n                    $currentImg.css({\n                        width: width + 'px',\n                        height: height + 'px'\n                    });\n                };\n                customCommand(e, function () {\n                    setTimeout(show);\n                });\n            });\n\n            // 缩小\n            $zoomSmall.click(function (e) {\n                commandFn = function () {\n                    var img = $currentImg.get(0);\n                    var width = img.width;\n                    var height = img.height;\n                    width = width * 0.9;\n                    height = height * 0.9;\n\n                    $currentImg.css({\n                        width: width + 'px',\n                        height: height + 'px'\n                    });\n                };\n                customCommand(e, function () {\n                    setTimeout(show);\n                });\n            });\n\n            // // 左浮动\n            // $floatLeft.click(function (e) {\n            //     commandFn = function () {\n            //         $currentImg.css({\n            //             float: 'left'\n            //         });\n            //     };\n            //     customCommand(e, function () {\n            //         setTimeout(hide, 100);\n            //     });\n            // });\n\n            // alignLeft\n            $alignLeft.click(function (e) {\n                commandFn = function () {\n                    // 如果 img 增加了链接，那么 img.parent() 就是 a 标签，设置 align 没用的，因此必须找到 P 父节点来设置 align\n                    $currentImg.parents('p').css({\n                        'text-align': 'left'\n                    }).attr('align', 'left');\n                };\n                customCommand(e, function () {\n                    setTimeout(hide, 100);\n                });\n            });\n\n            // // 右浮动\n            // $floatRight.click(function (e) {\n            //     commandFn = function () {\n            //         $currentImg.css({\n            //             float: 'right'\n            //         });\n            //     };\n            //     customCommand(e, function () {\n            //         setTimeout(hide, 100);\n            //     });\n            // });\n\n            // alignRight\n            $alignRight.click(function (e) {\n                commandFn = function () {\n                    // 如果 img 增加了链接，那么 img.parent() 就是 a 标签，设置 align 没用的，因此必须找到 P 父节点来设置 align\n                    $currentImg.parents('p').css({\n                        'text-align': 'right'\n                    }).attr('align', 'right');\n                };\n                customCommand(e, function () {\n                    setTimeout(hide, 100);\n                });\n            });\n\n            // // 无浮动\n            // $noFloat.click(function (e) {\n            //     commandFn = function () {\n            //         $currentImg.css({\n            //             float: 'none'\n            //         });\n            //     };\n            //     customCommand(e, function () {\n            //         setTimeout(hide, 100);\n            //     });\n            // });\n\n            // alignCenter\n            $alignCenter.click(function (e) {\n                commandFn = function () {\n                    // 如果 img 增加了链接，那么 img.parent() 就是 a 标签，设置 align 没用的，因此必须找到 P 父节点来设置 align\n                    $currentImg.parents('p').css({\n                        'text-align': 'center'\n                    }).attr('align', 'center');\n                };\n                customCommand(e, function () {\n                    setTimeout(hide, 100);\n                });\n            });\n\n            // link\n            // 显示链接input\n            $link.click(function (e) {\n                e.preventDefault();\n\n                // 获取当前链接，并显示\n                currentLink = imgLink(e);\n                $linkInput.val(currentLink);\n\n                $menuContainer.hide();\n                $linkInputContainer.show();\n            });\n            // 设置链接\n            $linkBtnSubmit.click(function (e) {\n                e.preventDefault();\n\n                var url = $.trim($linkInput.val());\n                if (url) {\n                    // 设置链接，同时会自动更新 currentLink 的值\n                    imgLink(e, url);\n                }\n\n                // 隐藏 toolbar\n                setTimeout(hide);\n            });\n            // 取消设置链接\n            $linkBtnCancel.click(function (e) {\n                e.preventDefault();\n\n                // 重置链接 input\n                $linkInput.val(currentLink);\n\n                $menuContainer.show();\n                $linkInputContainer.hide();\n            });\n\n            // unlink\n            $unLink.click(function (e) {\n                e.preventDefault();\n\n                // 执行 unlink\n                imgLink(e, '');\n\n                // 隐藏 toolbar\n                setTimeout(hide);\n            });\n        }\n\n        // 绑定drag事件\n        function bindDragEvent() {\n            var _x, _y;\n            var dragMarginLeft, dragMarginTop;\n            var imgWidth, imgHeight;\n\n            function mousemove (e) {\n                var diffX, diffY;\n\n                // 计算差额\n                diffX = e.pageX - _x;\n                diffY = e.pageY - _y;\n\n                // --------- 计算拖拽点的位置 ---------\n                var currentDragMarginLeft = dragMarginLeft + diffX;\n                var currentDragMarginTop = dragMarginTop + diffY;\n                $dragPoint.css({\n                    'margin-left': currentDragMarginLeft,\n                    'margin-top': currentDragMarginTop\n                });\n\n                // --------- 计算图片的大小 ---------\n                var currentImgWidth = imgWidth + diffX;\n                var currentImggHeight = imgHeight + diffY;\n                $currentImg && $currentImg.css({\n                    width: currentImgWidth,\n                    height: currentImggHeight\n                });\n            }\n\n            $dragPoint.on('mousedown', function(e){\n                if (!$currentImg) {\n                    return;\n                }\n                // 当前鼠标位置\n                _x = e.pageX;\n                _y = e.pageY;\n\n                // 当前拖拽点的位置\n                dragMarginLeft = parseFloat($dragPoint.css('margin-left'), 10);\n                dragMarginTop = parseFloat($dragPoint.css('margin-top'), 10);\n\n                // 当前图片的大小\n                imgWidth = $currentImg.width();\n                imgHeight = $currentImg.height();\n\n                // 隐藏 $toolbar\n                $toolbar.hide();\n\n                // 绑定计算事件\n                E.$document.on('mousemove._dragResizeImg', mousemove);\n                E.$document.on('mouseup._dragResizeImg', function (e) {\n                    // 取消绑定\n                    E.$document.off('mousemove._dragResizeImg');\n                    E.$document.off('mouseup._dragResizeImg');\n\n                    // 隐藏，并还原拖拽点的位置\n                    hide();\n                    $dragPoint.css({\n                        'margin-left': dragMarginLeft,\n                        'margin-top': dragMarginTop\n                    });\n\n                    // 记录\n                    isOnDrag = false;\n                });\n\n                // 记录\n                isOnDrag = true;\n            });\n        }\n\n        // 显示 toolbar\n        function show() {\n            if (editor._disabled) {\n                // 编辑器已经被禁用，则不让显示\n                return;\n            }\n            if ($currentImg == null) {\n                return;\n            }\n            $currentImg.addClass('clicked');\n            var imgPosition = $currentImg.position();\n            var imgTop = imgPosition.top;\n            var imgLeft = imgPosition.left;\n            var imgHeight = $currentImg.outerHeight();\n            var imgWidth = $currentImg.outerWidth();\n\n\n            // --- 定位 dragpoint ---\n            $dragPoint.css({\n                top: imgTop + imgHeight,\n                left: imgLeft + imgWidth\n            });\n\n            // --- 定位 toolbar ---\n\n            // 计算初步结果\n            var top = imgTop + imgHeight;\n            var left = imgLeft;\n            var marginLeft = 0;\n\n            var txtTop = $currentTxt.position().top;\n            var txtHeight = $currentTxt.outerHeight();\n            if (top > (txtTop + txtHeight)) {\n                // top 不得超出编辑范围\n                top = txtTop + txtHeight;\n            } else {\n                // top 超出编辑范围，dragPoint就不显示了\n                $dragPoint.show();\n            }\n\n            // 显示（方便计算 margin）\n            $toolbar.show();\n\n            // 计算 margin\n            var width = $toolbar.outerWidth();\n            marginLeft = imgWidth / 2 - width / 2;\n\n            // 定位\n            $toolbar.css({\n                top: top + 5,\n                left: left,\n                'margin-left': marginLeft\n            });\n            // 如果定位太靠左了\n            if (marginLeft < 0) {\n                // 得到三角形的margin-left\n                $toolbar.css('margin-left', '0');\n                $triangle.hide();\n            } else {\n                $triangle.show();\n            }\n\n            // disable 菜单\n            editor.disableMenusExcept();\n        }\n        \n        // 隐藏 toolbar\n        function hide() {\n            if ($currentImg == null) {\n                return;\n            }\n            $currentImg.removeClass('clicked');\n            $currentImg = null;\n\n            $toolbar.hide();\n            $dragPoint.hide();\n\n            // enable 菜单\n            editor.enableMenusExcept();\n        }\n\n        // 判断img是否是一个表情\n        function isEmotion(imgSrc) {\n            var result = false;\n            if (!editor.emotionUrls) {\n                return result;\n            }\n            $.each(editor.emotionUrls, function (index, url) {\n                var flag = false;\n                if (imgSrc === url) {\n                    result = true;\n                    flag = true;\n                }\n                if (flag) {\n                    return false;  // break 循环\n                }\n            });\n            return result;\n        }\n\n        // click img 事件\n        $currentTxt.on('mousedown', 'img', function (e) {\n            e.preventDefault();\n        }).on('click', 'img', function (e) {\n            var $img = $(e.currentTarget);\n            var src = $img.attr('src');\n\n            if (!src || isEmotion(src)) {\n                // 是一个表情图标\n                return;\n            }\n\n            // ---------- 不是表情图标 ---------- \n\n            // 渲染\n            render();\n\n            if ($currentImg && ($currentImg.get(0) === $img.get(0))) {\n                setTimeout(hide, 100);\n                return;\n            }\n\n            // 显示 toolbar\n            $currentImg = $img;\n            show();\n\n            // 默认显示menuContainer，其他默认隐藏\n            $menuContainer.show();\n            $linkInputContainer.hide();\n\n            // 阻止冒泡\n            e.preventDefault();\n            e.stopPropagation();\n            \n        }).on('click keydown scroll', function (e) {\n            if (!isOnDrag) {\n                setTimeout(hide, 100);\n            }\n        });\n\n    });\n\n});\n// 编辑区域 link toolbar\n_e(function (E, $) {\n    E.plugin(function () {\n        var editor = this;\n        var lang = editor.config.lang;\n        var $txt = editor.txt.$txt;\n\n        // 当前命中的链接\n        var $currentLink;\n\n        var $toolbar = $('<div class=\"txt-toolbar\"></div>');\n        var $triangle = $('<div class=\"tip-triangle\"></div>');\n        var $triggerLink = $('<a href=\"#\" target=\"_blank\"><i class=\"wangeditor-menu-img-link\"></i> ' + lang.openLink + '</a>');\n        var isRendered;\n\n        // 记录当前的显示/隐藏状态\n        var isShow = false;\n\n        var showTimeoutId, hideTimeoutId;\n        var showTimeoutIdByToolbar, hideTimeoutIdByToolbar;\n\n        // 渲染 dom\n        function render() {\n            if (isRendered) {\n                return;\n            }\n\n            $toolbar.append($triangle)\n                    .append($triggerLink);\n\n            editor.$editorContainer.append($toolbar);\n\n            isRendered = true;\n        }\n\n        // 定位\n        function setPosition() {\n            if (!$currentLink) {\n                return;\n            }\n\n            var position = $currentLink.position();\n            var left = position.left;\n            var top = position.top;\n            var height = $currentLink.height();\n\n            // 初步计算top值\n            var topResult = top + height + 5;\n\n            // 判断 toolbar 是否超过了编辑器区域的下边界\n            var menuHeight = editor.menuContainer.height();\n            var txtHeight = editor.txt.$txt.outerHeight();\n            if (topResult > menuHeight + txtHeight) {\n                topResult = menuHeight + txtHeight + 5;\n            }\n\n            // 最终设置\n            $toolbar.css({\n                top: topResult,\n                left: left\n            });\n        }\n\n        // 显示 toolbar\n        function show() {\n            if (isShow) {\n                return;\n            }\n\n            if (!$currentLink) {\n                return;\n            }\n\n            render();\n\n            $toolbar.show();\n\n            // 设置链接\n            var href = $currentLink.attr('href');\n            $triggerLink.attr('href', href);\n\n            // 定位\n            setPosition();\n\n            isShow = true;\n        }\n\n        // 隐藏 toolbar\n        function hide() {\n            if (!isShow) {\n                return;\n            }\n\n            if (!$currentLink) {\n                return;\n            }\n\n            $toolbar.hide();\n            isShow = false;\n        }\n\n        // $txt 绑定事件\n        $txt.on('mouseenter', 'a', function (e) {\n            // 延时 500ms 显示toolbar\n            if (showTimeoutId) {\n                clearTimeout(showTimeoutId);\n            }\n            showTimeoutId = setTimeout(function () {\n                var a = e.currentTarget;\n                var $a = $(a);\n                $currentLink = $a;\n\n                var $img = $a.children('img');\n                if ($img.length) {\n                    // 该链接下包含一个图片\n\n                    // 图片点击时，隐藏toolbar\n                    $img.click(function (e) {\n                        hide();\n                    });\n\n                    if ($img.hasClass('clicked')) {\n                        // 图片还处于clicked状态，则不显示toolbar\n                        return;\n                    }\n                }\n\n                // 显示toolbar\n                show();\n            }, 500);\n        }).on('mouseleave', 'a', function (e) {\n            // 延时 500ms 隐藏toolbar\n            if (hideTimeoutId) {\n                clearTimeout(hideTimeoutId);\n            }\n            hideTimeoutId = setTimeout(hide, 500);\n        }).on('click keydown scroll', function (e) {\n            setTimeout(hide, 100);\n        });\n        // $toolbar 绑定事件\n        $toolbar.on('mouseenter', function (e) {\n            // 先中断掉 $txt.mouseleave 导致的隐藏\n            if (hideTimeoutId) {\n                clearTimeout(hideTimeoutId);\n            }\n        }).on('mouseleave', function (e) {\n            // 延时 500ms 显示toolbar\n            if (showTimeoutIdByToolbar) {\n                clearTimeout(showTimeoutIdByToolbar);\n            }\n            showTimeoutIdByToolbar = setTimeout(hide, 500);\n        });\n    });\n});\n// menu吸顶\n_e(function (E, $) {\n\n    E.plugin(function () {\n        var editor = this;\n        var menuFixed = editor.config.menuFixed;\n        if (menuFixed === false || typeof menuFixed !== 'number') {\n            // 没有配置菜单吸顶\n            return;\n        }\n        var bodyMarginTop = parseFloat(E.$body.css('margin-top'), 10);\n        if (isNaN(bodyMarginTop)) {\n            bodyMarginTop = 0;\n        }\n\n        var $editorContainer = editor.$editorContainer;\n        var editorTop = $editorContainer.offset().top;\n        var editorHeight = $editorContainer.outerHeight();\n        \n        var $menuContainer = editor.menuContainer.$menuContainer;\n        var menuCssPosition = $menuContainer.css('position');\n        var menuCssTop = $menuContainer.css('top');\n        var menuTop = $menuContainer.offset().top;\n        var menuHeight = $menuContainer.outerHeight();\n        \n        var $txt = editor.txt.$txt;\n\n        E.$window.scroll(function () {\n            //全屏模式不支持\n            if (editor.isFullScreen) {\n                return;\n            }\n\n            var sTop = E.$window.scrollTop();\n\n            // 需要重新计算宽度，因为浏览器可能此时出现滚动条\n            var menuWidth = $menuContainer.width();\n\n            // 如果 menuTop === 0 说明此前编辑器一直隐藏，后来显示出来了，要重新计算相关数据\n            if (menuTop === 0) {\n                menuTop = $menuContainer.offset().top;\n                editorTop = $editorContainer.offset().top;\n                editorHeight = $editorContainer.outerHeight();\n                menuHeight = $menuContainer.outerHeight();\n            }\n\n            if (sTop >= menuTop && sTop + menuFixed + menuHeight + 30 < editorTop + editorHeight) {\n                // 吸顶\n                $menuContainer.css({\n                    position: 'fixed',\n                    top: menuFixed\n                });\n\n                // 固定宽度\n                $menuContainer.width(menuWidth);\n\n                // 增加body margin-top\n                E.$body.css({\n                    'margin-top': bodyMarginTop + menuHeight\n                });\n\n                // 记录\n                if (!editor._isMenufixed) {\n                    editor._isMenufixed = true;\n                }\n            } else {\n                // 取消吸顶\n                $menuContainer.css({\n                    position: menuCssPosition,\n                    top: menuCssTop\n                });\n\n                // 取消宽度固定\n                $menuContainer.css('width', '100%');\n\n                // 还原 body margin-top\n                E.$body.css({\n                    'margin-top': bodyMarginTop\n                });\n\n                // 撤销记录\n                if (editor._isMenufixed) {\n                    editor._isMenufixed = false;\n                }\n            }\n        });\n    });\n\n});\n// 缩进 菜单插件\n_e(function (E, $) {\n\n    // 用 createMenu 方法创建菜单\n    E.createMenu(function (check) {\n\n        // 定义菜单id，不要和其他菜单id重复。编辑器自带的所有菜单id，可通过『参数配置-自定义菜单』一节查看\n        var menuId = 'indent';\n\n        // check将检查菜单配置（『参数配置-自定义菜单』一节描述）中是否该菜单id，如果没有，则忽略下面的代码。\n        if (!check(menuId)) {\n            return;\n        }\n\n        // this 指向 editor 对象自身\n        var editor = this;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,  // 编辑器对象\n            id: menuId,  // 菜单id\n            title: '缩进', // 菜单标题\n\n            // 正常状态和选中装下的dom对象，样式需要自定义\n            $domNormal: $('<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-indent-left\"></i></a>'),\n            $domSelected: $('<a href=\"#\" tabindex=\"-1\" class=\"selected\"><i class=\"wangeditor-menu-img-indent-left\"></i></a>')\n        });\n\n        // 菜单正常状态下，点击将触发该事件\n        menu.clickEvent = function (e) {\n            var elem = editor.getRangeElem();\n            var p = editor.getSelfOrParentByName(elem, 'p');\n            var $p;\n\n            if (!p) {\n                // 未找到 p 元素，则忽略\n                return e.preventDefault();\n            }\n            $p = $(p);\n\n            // 使用自定义命令\n            function commandFn() {\n                $p.css('text-indent', '2em');\n            }\n            editor.customCommand(e, commandFn);\n        };\n\n        // 菜单选中状态下，点击将触发该事件\n        menu.clickEventSelected = function (e) {\n            var elem = editor.getRangeElem();\n            var p = editor.getSelfOrParentByName(elem, 'p');\n            var $p;\n\n            if (!p) {\n                // 未找到 p 元素，则忽略\n                return e.preventDefault();\n            }\n            $p = $(p);\n\n            // 使用自定义命令\n            function commandFn() {\n                $p.css('text-indent', '0');\n            }\n            editor.customCommand(e, commandFn);\n        };\n\n        // 根据当前选区，自定义更新菜单的选中状态或者正常状态\n        menu.updateSelectedEvent = function () {\n            // 获取当前选区所在的父元素\n            var elem = editor.getRangeElem();\n            var p = editor.getSelfOrParentByName(elem, 'p');\n            var $p;\n            var indent;\n\n            if (!p) {\n                // 未找到 p 元素，则标记为未处于选中状态\n                return false;\n            }\n            $p = $(p);\n            indent = $p.css('text-indent');\n\n            if (!indent || indent === '0px') {\n                // 得到的p，text-indent 属性是 0，则标记为未处于选中状态\n                return false;\n            }\n\n            // 找到 p 元素，并且 text-indent 不是 0，则标记为选中状态\n            return true;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n\n});\n// 行高 菜单插件\n_e(function (E, $) {\n\n    // 用 createMenu 方法创建菜单\n    E.createMenu(function (check) {\n\n        // 定义菜单id，不要和其他菜单id重复。编辑器自带的所有菜单id，可通过『参数配置-自定义菜单』一节查看\n        var menuId = 'lineheight';\n\n        // check将检查菜单配置（『参数配置-自定义菜单』一节描述）中是否该菜单id，如果没有，则忽略下面的代码。\n        if (!check(menuId)) {\n            return;\n        }\n\n        // this 指向 editor 对象自身\n        var editor = this;\n\n        // 由于浏览器自身不支持 lineHeight 命令，因此要做一个hook\n        editor.commandHooks.lineHeight = function (value) {\n            var rangeElem = editor.getRangeElem();\n            var targetElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5,pre');\n            if (!targetElem) {\n                return;\n            }\n            $(targetElem).css('line-height', value + '');\n        };\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,  // 编辑器对象\n            id: menuId,  // 菜单id\n            title: '行高', // 菜单标题\n            commandName: 'lineHeight', // 命令名称\n\n            // 正常状态和选中装下的dom对象，样式需要自定义\n            $domNormal: $('<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-arrows-v\"></i></a>'),\n            $domSelected: $('<a href=\"#\" tabindex=\"-1\" class=\"selected\"><i class=\"wangeditor-menu-img-arrows-v\"></i></a>')\n        });\n\n        // 数据源\n        var data  = {\n            // 格式： 'value' : 'title'\n            '1.0': '1.0倍',\n            '1.5': '1.5倍',\n            '1.8': '1.8倍',\n            '2.0': '2.0倍',\n            '2.5': '2.5倍',\n            '3.0': '3.0倍'\n        };\n\n        // 为menu创建droplist对象\n        var tpl = '<span style=\"line-height:{#commandValue}\">{#title}</span>';\n        menu.dropList = new E.DropList(editor, menu, {\n            data: data,  // 传入数据源\n            tpl: tpl  // 传入模板\n        });\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n\n    });\n\n});\n// 自定义上传\n_e(function (E, $) {\n\n    E.plugin(function () {\n\n        var editor = this;\n        var customUpload = editor.config.customUpload;\n        if (!customUpload) {\n            return;\n        } else if (editor.config.uploadImgUrl) {\n            alert('自定义上传无效，详看浏览器日志console.log');\n            E.error('已经配置了 uploadImgUrl ，就不能再配置 customUpload ，两者冲突。将导致自定义上传无效。');\n            return;\n        }\n\n        var $uploadContent = editor.$uploadContent;\n        if (!$uploadContent) {\n            E.error('自定义上传，无法获取 editor.$uploadContent');\n        }\n\n        // UI\n        var $uploadIcon = $('<div class=\"upload-icon-container\"><i class=\"wangeditor-menu-img-upload\"></i></div>');\n        $uploadContent.append($uploadIcon);\n\n        // 设置id，并暴露\n        var btnId = 'upload' + E.random();\n        var containerId = 'upload' + E.random();\n        $uploadIcon.attr('id', btnId);\n        $uploadContent.attr('id', containerId);\n\n        editor.customUploadBtnId = btnId;\n        editor.customUploadContainerId = containerId;\n    });\n\n});\n// 版权提示\n_e(function (E, $) {\n    E.info('本页面富文本编辑器由 wangEditor 提供 http://wangeditor.github.io/ ');\n});\n    \n    // 最终返回wangEditor构造函数\n    return window.wangEditor;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/.2.1.23@wangeditor/dist/js/wangEditor.js\n// module id = 197\n// module chunks = 1 2 16"],"sourceRoot":""}